jQuery.effects||(function(d){d.effects={version:"1.7.3",save:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.data("ec.storage."+h[f],g[0].style[h[f]])}}},restore:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.css(h[f],g.data("ec.storage."+h[f]))}}},setMode:function(f,g){if(g=="toggle"){g=f.is(":hidden")?"show":"hide"}return g},getBaseline:function(g,h){var i,f;switch(g[0]){case"top":i=0;break;case"middle":i=0.5;break;case"bottom":i=1;break;default:i=g[0]/h.height}switch(g[1]){case"left":f=0;break;case"center":f=0.5;break;case"right":f=1;break;default:f=g[1]/h.width}return{x:f,y:i}},createWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent()}var g={width:f.outerWidth(true),height:f.outerHeight(true),"float":f.css("float")};f.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var j=f.parent();if(f.css("position")=="static"){j.css({position:"relative"});f.css({position:"relative"})}else{var i=f.css("top");if(isNaN(parseInt(i,10))){i="auto"}var h=f.css("left");if(isNaN(parseInt(h,10))){h="auto"}j.css({position:f.css("position"),top:i,left:h,zIndex:f.css("z-index")}).show();f.css({position:"relative",top:0,left:0})}j.css(g);return j},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(g,i,f,h){h=h||{};d.each(i,function(k,j){unit=g.cssUnit(j);if(unit[0]>0){h[j]=unit[0]*f+unit[1]}});return h},animateClass:function(h,i,k,j){var f=(typeof k=="function"?k:(j?j:null));var g=(typeof k=="string"?k:null);return this.each(function(){var q={};var o=d(this);var p=o.attr("style")||"";if(typeof p=="object"){p=p.cssText}if(h.toggle){o.hasClass(h.toggle)?h.remove=h.toggle:h.add=h.toggle}var l=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.addClass(h.add)}if(h.remove){o.removeClass(h.remove)}var m=d.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(h.add){o.removeClass(h.add)}if(h.remove){o.addClass(h.remove)}for(var r in m){if(typeof m[r]!="function"&&m[r]&&r.indexOf("Moz")==-1&&r.indexOf("length")==-1&&m[r]!=l[r]&&(r.match(/color/i)||(!r.match(/color/i)&&!isNaN(parseInt(m[r],10))))&&(l.position!="static"||(l.position=="static"&&!r.match(/left|top|bottom|right/)))){q[r]=m[r]}}o.animate(q,i,g,function(){if(typeof d(this).attr("style")=="object"){d(this).attr("style")["cssText"]="";d(this).attr("style")["cssText"]=p}else{d(this).attr("style",p)}if(h.add){d(this).addClass(h.add)}if(h.remove){d(this).removeClass(h.remove)}if(f){f.apply(this,arguments)}})})}};function c(g,f){var i=g[1]&&g[1].constructor==Object?g[1]:{};if(f){i.mode=f}var h=g[1]&&g[1].constructor!=Object?g[1]:(i.duration?i.duration:g[2]);h=d.fx.off?0:typeof h==="number"?h:d.fx.speeds[h]||d.fx.speeds._default;var j=i.callback||(d.isFunction(g[1])&&g[1])||(d.isFunction(g[2])&&g[2])||(d.isFunction(g[3])&&g[3]);return[g[0],i,h,j]}d.fn.extend({_show:d.fn.show,_hide:d.fn.hide,__toggle:d.fn.toggle,_addClass:d.fn.addClass,_removeClass:d.fn.removeClass,_toggleClass:d.fn.toggleClass,effect:function(g,f,h,i){return d.effects[g]?d.effects[g].call(this,{method:g,options:f||{},duration:h,callback:i}):null},show:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._show.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"show"))}},hide:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._hide.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"hide"))}},toggle:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))||(d.isFunction(arguments[0])||typeof arguments[0]=="boolean")){return this.__toggle.apply(this,arguments)}else{return this.effect.apply(this,c(arguments,"toggle"))}},addClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{add:g},f,i,h]):this._addClass(g)},removeClass:function(g,f,i,h){return f?d.effects.animateClass.apply(this,[{remove:g},f,i,h]):this._removeClass(g)},toggleClass:function(g,f,i,h){return((typeof f!=="boolean")&&f)?d.effects.animateClass.apply(this,[{toggle:g},f,i,h]):this._toggleClass(g,f)},morph:function(f,h,g,j,i){return d.effects.animateClass.apply(this,[{add:h,remove:f},g,j,i])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(f){var g=this.css(f),h=[];d.each(["em","px","%","pt"],function(j,k){if(g.indexOf(k)>0){h=[parseFloat(g),k]}});return h}});d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(g,f){d.fx.step[f]=function(h){if(h.state==0){h.start=e(h.elem,f);h.end=b(h.end)}h.elem.style[f]="rgb("+[Math.max(Math.min(parseInt((h.pos*(h.end[0]-h.start[0]))+h.start[0],10),255),0),Math.max(Math.min(parseInt((h.pos*(h.end[1]-h.start[1]))+h.start[1],10),255),0),Math.max(Math.min(parseInt((h.pos*(h.end[2]-h.start[2]))+h.start[2],10),255),0)].join(",")+")"}});function b(g){var f;if(g&&g.constructor==Array&&g.length==3){return g}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(g)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(g)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(g)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(g)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(f=/rgba\(0, 0, 0, 0\)/.exec(g)){return a.transparent}return a[d.trim(g).toLowerCase()]}function e(h,f){var g;do{g=d.curCSS(h,f);if(g!=""&&g!="transparent"||d.nodeName(h,"body")){break}f="backgroundColor"}while(h=h.parentNode);return b(g)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};d.easing.jswing=d.easing.swing;d.extend(d.easing,{def:"easeOutQuad",swing:function(g,h,f,j,i){return d.easing[d.easing.def](g,h,f,j,i)},easeInQuad:function(g,h,f,j,i){return j*(h/=i)*h+f},easeOutQuad:function(g,h,f,j,i){return-j*(h/=i)*(h-2)+f},easeInOutQuad:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h+f}return-j/2*((--h)*(h-2)-1)+f},easeInCubic:function(g,h,f,j,i){return j*(h/=i)*h*h+f},easeOutCubic:function(g,h,f,j,i){return j*((h=h/i-1)*h*h+1)+f},easeInOutCubic:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h+f}return j/2*((h-=2)*h*h+2)+f},easeInQuart:function(g,h,f,j,i){return j*(h/=i)*h*h*h+f},easeOutQuart:function(g,h,f,j,i){return-j*((h=h/i-1)*h*h*h-1)+f},easeInOutQuart:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h+f}return-j/2*((h-=2)*h*h*h-2)+f},easeInQuint:function(g,h,f,j,i){return j*(h/=i)*h*h*h*h+f},easeOutQuint:function(g,h,f,j,i){return j*((h=h/i-1)*h*h*h*h+1)+f},easeInOutQuint:function(g,h,f,j,i){if((h/=i/2)<1){return j/2*h*h*h*h*h+f}return j/2*((h-=2)*h*h*h*h+2)+f},easeInSine:function(g,h,f,j,i){return-j*Math.cos(h/i*(Math.PI/2))+j+f},easeOutSine:function(g,h,f,j,i){return j*Math.sin(h/i*(Math.PI/2))+f},easeInOutSine:function(g,h,f,j,i){return-j/2*(Math.cos(Math.PI*h/i)-1)+f},easeInExpo:function(g,h,f,j,i){return(h==0)?f:j*Math.pow(2,10*(h/i-1))+f},easeOutExpo:function(g,h,f,j,i){return(h==i)?f+j:j*(-Math.pow(2,-10*h/i)+1)+f},easeInOutExpo:function(g,h,f,j,i){if(h==0){return f}if(h==i){return f+j}if((h/=i/2)<1){return j/2*Math.pow(2,10*(h-1))+f}return j/2*(-Math.pow(2,-10*--h)+2)+f},easeInCirc:function(g,h,f,j,i){return-j*(Math.sqrt(1-(h/=i)*h)-1)+f},easeOutCirc:function(g,h,f,j,i){return j*Math.sqrt(1-(h=h/i-1)*h)+f},easeInOutCirc:function(g,h,f,j,i){if((h/=i/2)<1){return-j/2*(Math.sqrt(1-h*h)-1)+f}return j/2*(Math.sqrt(1-(h-=2)*h)+1)+f},easeInElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return-(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f},easeOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l)==1){return f+m}if(!k){k=l*0.3}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}return h*Math.pow(2,-10*i)*Math.sin((i*l-j)*(2*Math.PI)/k)+m+f},easeInOutElastic:function(g,i,f,m,l){var j=1.70158;var k=0;var h=m;if(i==0){return f}if((i/=l/2)==2){return f+m}if(!k){k=l*(0.3*1.5)}if(h<Math.abs(m)){h=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/h)}if(i<1){return-0.5*(h*Math.pow(2,10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k))+f}return h*Math.pow(2,-10*(i-=1))*Math.sin((i*l-j)*(2*Math.PI)/k)*0.5+m+f},easeInBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*(h/=j)*h*((i+1)*h-i)+f},easeOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f},easeInOutBack:function(g,h,f,k,j,i){if(i==undefined){i=1.70158}if((h/=j/2)<1){return k/2*(h*h*(((i*=(1.525))+1)*h-i))+f}return k/2*((h-=2)*h*(((i*=(1.525))+1)*h+i)+2)+f},easeInBounce:function(g,h,f,j,i){return j-d.easing.easeOutBounce(g,i-h,0,j,i)+f},easeOutBounce:function(g,h,f,j,i){if((h/=i)<(1/2.75)){return j*(7.5625*h*h)+f}else{if(h<(2/2.75)){return j*(7.5625*(h-=(1.5/2.75))*h+0.75)+f}else{if(h<(2.5/2.75)){return j*(7.5625*(h-=(2.25/2.75))*h+0.9375)+f}else{return j*(7.5625*(h-=(2.625/2.75))*h+0.984375)+f}}}},easeInOutBounce:function(g,h,f,j,i){if(h<i/2){return d.easing.easeInBounce(g,h*2,0,j,i)*0.5+f}return d.easing.easeOutBounce(g,h*2-i,0,j,i)*0.5+j*0.5+f}})})(jQuery);;(function(a){a.effects.highlight=function(b){this.stop(true,true);return this.queue(function(){var e=a(this),d=["backgroundImage","backgroundColor","opacity"];var h=a.effects.setMode(e,b.options.mode||"show");var c=b.options.color||"#ffff99";var g=b.options.orgColor||e.css("backgroundColor");a.effects.save(e,d);e.show();e.css({backgroundColor:c});var f={backgroundColor:g};if(h=="hide"){f.opacity=0}e.animate(f,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){if(h=="hide"){e.hide()}a.effects.restore(e,d);if(h=="show"&&a.browser.msie){this.style.removeAttribute("filter")}if(b.callback){b.callback.apply(this,arguments)}e.dequeue()}})})}})(jQuery);;Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){if(!l){l=2;}
return("000"+s).slice(l*-1);};$P.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};$P.setTimeToNow=function(){var n=new Date();this.setHours(n.getHours());this.setMinutes(n.getMinutes());this.setSeconds(n.getSeconds());this.setMilliseconds(n.getMilliseconds());return this;};$D.today=function(){return new Date().clearTime();};$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2)){throw new Error(date1+" - "+date2);}else if(date1 instanceof Date&&date2 instanceof Date){return(date1<date2)?-1:(date1>date2)?1:0;}else{throw new TypeError(date1+" - "+date2);}};$D.equals=function(date1,date2){return(date1.compareTo(date2)===0);};$D.getDayNumberFromName=function(name){var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s){return i;}}
return-1;};$D.getMonthNumberFromName=function(name){var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};$D.isLeapYear=function(year){return((year%4===0&&year%100!==0)||year%400===0);};$D.getDaysInMonth=function(year,month){return[31,($D.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};$D.getTimezoneAbbreviation=function(offset){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].offset===offset){return z[i].name;}}
return null;};$D.getTimezoneOffset=function(name){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].name===name.toUpperCase()){return z[i].offset;}}
return null;};$P.clone=function(){return new Date(this.getTime());};$P.compareTo=function(date){return Date.compare(this,date);};$P.equals=function(date){return Date.equals(this,date||new Date());};$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime();};$P.isAfter=function(date){return this.compareTo(date||new Date())===1;};$P.isBefore=function(date){return(this.compareTo(date||new Date())===-1);};$P.isToday=function(){return this.isSameDay(new Date());};$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime());};$P.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};$P.addSeconds=function(value){return this.addMilliseconds(value*1000);};$P.addMinutes=function(value){return this.addMilliseconds(value*60000);};$P.addHours=function(value){return this.addMilliseconds(value*3600000);};$P.addDays=function(value){this.setDate(this.getDate()+value);return this;};$P.addWeeks=function(value){return this.addDays(value*7);};$P.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};$P.addYears=function(value){return this.addMonths(value*12);};$P.add=function(config){if(typeof config=="number"){this._orient=config;return this;}
var x=config;if(x.milliseconds){this.addMilliseconds(x.milliseconds);}
if(x.seconds){this.addSeconds(x.seconds);}
if(x.minutes){this.addMinutes(x.minutes);}
if(x.hours){this.addHours(x.hours);}
if(x.weeks){this.addWeeks(x.weeks);}
if(x.months){this.addMonths(x.months);}
if(x.years){this.addYears(x.years);}
if(x.days){this.addDays(x.days);}
return this;};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;$y=(!$y)?this.getFullYear():$y;$m=(!$m)?this.getMonth()+1:$m;$d=(!$d)?this.getDate():$d;if($m<=2){a=$y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=$d-1+(31*($m-1));}else{a=$y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=$d+((153*($m-3)+2)/5)+58+s;}
g=(a+b)%7;d=(f+g-e)%7;n=(f+3-d)|0;if(n<0){w=53-((g-s)/5|0);}else if(n>364+s){w=1;}else{w=(n/7|0)+1;}
$y=$m=$d=null;return w;};$P.getISOWeek=function(){$y=this.getUTCFullYear();$m=this.getUTCMonth()+1;$d=this.getUTCDate();return p(this.getWeek());};$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek());};$D._validate=function(n,min,max,name){if(typeof n=="undefined"){return false;}else if(typeof n!="number"){throw new TypeError(n+" is not a Number.");}else if(n<min||n>max){throw new RangeError(n+" is not a valid value for "+name+".");}
return true;};$D.validateMillisecond=function(value){return $D._validate(value,0,999,"millisecond");};$D.validateSecond=function(value){return $D._validate(value,0,59,"second");};$D.validateMinute=function(value){return $D._validate(value,0,59,"minute");};$D.validateHour=function(value){return $D._validate(value,0,23,"hour");};$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),"day");};$D.validateMonth=function(value){return $D._validate(value,0,11,"month");};$D.validateYear=function(value){return $D._validate(value,0,9999,"year");};$P.set=function(config){if($D.validateMillisecond(config.millisecond)){this.addMilliseconds(config.millisecond-this.getMilliseconds());}
if($D.validateSecond(config.second)){this.addSeconds(config.second-this.getSeconds());}
if($D.validateMinute(config.minute)){this.addMinutes(config.minute-this.getMinutes());}
if($D.validateHour(config.hour)){this.addHours(config.hour-this.getHours());}
if($D.validateMonth(config.month)){this.addMonths(config.month-this.getMonth());}
if($D.validateYear(config.year)){this.addYears(config.year-this.getFullYear());}
if($D.validateDay(config.day,this.getFullYear(),this.getMonth())){this.addDays(config.day-this.getDate());}
if(config.timezone){this.setTimezone(config.timezone);}
if(config.timezoneOffset){this.setTimezoneOffset(config.timezoneOffset);}
if(config.week&&$D._validate(config.week,0,53,"week")){this.setWeek(config.week);}
return this;};$P.moveToFirstDayOfMonth=function(){return this.set({day:1});};$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())});};$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0){shift=occurrence-1;}
else if(occurrence===-1){this.moveToLastDayOfMonth();if(this.getDay()!==dayOfWeek){this.moveToDayOfWeek(dayOfWeek,-1);}
return this;}
return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,+1).addWeeks(shift);};$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset());};$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=Number(offset)*-6/10;return this.addMinutes(there-here);};$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset));};$P.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r.charAt(0)+r.substr(2);}else{r=(n+10000).toString();return"+"+r.substr(1);}};$P.getElapsed=function(date){return(date||new Date())-this;};if(!$P.toISOString){$P.toISOString=function(){function f(n){return n<10?'0'+n:n;}
return'"'+this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z"';};}
$P._toString=$P.toString;$P.toString=function(format){var x=this;if(format&&format.length==1){var c=$C.formatPatterns;x.t=x.toString;switch(format){case"d":return x.t(c.shortDate);case"D":return x.t(c.longDate);case"F":return x.t(c.fullDateTime);case"m":return x.t(c.monthDay);case"r":return x.t(c.rfc1123);case"s":return x.t(c.sortableDateTime);case"t":return x.t(c.shortTime);case"T":return x.t(c.longTime);case"u":return x.t(c.universalSortableDateTime);case"y":return x.t(c.yearMonth);}}
var ord=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return format?format.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if(m.charAt(0)==="\\"){return m.replace("\\","");}
x.h=x.getHours;switch(m){case"hh":return p(x.h()<13?(x.h()===0?12:x.h()):(x.h()-12));case"h":return x.h()<13?(x.h()===0?12:x.h()):(x.h()-12);case"HH":return p(x.h());case"H":return x.h();case"mm":return p(x.getMinutes());case"m":return x.getMinutes();case"ss":return p(x.getSeconds());case"s":return x.getSeconds();case"yyyy":return p(x.getFullYear(),4);case"yy":return p(x.getFullYear());case"dddd":return $C.dayNames[x.getDay()];case"ddd":return $C.abbreviatedDayNames[x.getDay()];case"dd":return p(x.getDate());case"d":return x.getDate();case"MMMM":return $C.monthNames[x.getMonth()];case"MMM":return $C.abbreviatedMonthNames[x.getMonth()];case"MM":return p((x.getMonth()+1));case"M":return x.getMonth()+1;case"t":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case"tt":return x.h()<12?$C.amDesignator:$C.pmDesignator;case"S":return ord(x.getDate());default:return m;}}):this._toString();};}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=+1;$P._nth=null;$P._is=false;$P._same=false;$P._isSecond=false;$N._dateElement="day";$P.next=function(){this._orient=+1;return this;};$D.next=function(){return $D.today().next();};$P.last=$P.prev=$P.previous=function(){this._orient=-1;return this;};$D.last=$D.prev=$D.previous=function(){return $D.today().last();};$P.is=function(){this._is=true;return this;};$P.same=function(){this._same=true;this._isSecond=false;return this;};$P.today=function(){return this.same().day();};$P.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}
return false;};$P.at=function(time){return(typeof time==="string")?$D.parse(this.toString("d")+" "+time):this.set(time);};$N.fromNow=$N.after=function(date){var c={};c[this._dateElement]=this;return((!date)?new Date():date.clone()).add(c);};$N.ago=$N.before=function(date){var c={};c[this._dateElement]=this*-1;return((!date)?new Date():date.clone()).add(c);};var dx=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),mx=("january february march april may june july august september october november december").split(/\s/),px=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),pxf=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),nth=("final first second third fourth fifth").split(/\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++){o[px[i].toLowerCase()]=this["get"+pxf[i]]();}
return o;};$D.fromObject=function(config){config.week=null;return Date.today().set(config);};var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}
if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}
this._isSecond=false;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp){throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");}
return this;}
return this.moveToDayOfWeek(n,this._orient);};};var sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();if(n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0){shift=shift+7;}
return t.addDays(shift);};};for(var i=0;i<dx.length;i++){$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i;$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i);$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);}
var mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}
return this.moveToMonth(n,this._orient);};};var smf=function(n){return function(){return $D.today().set({month:n,day:1});};};for(var j=0;j<mx.length;j++){$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j;$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j);$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);}
var ef=function(j){return function(){if(this._isSecond){this._isSecond=false;return this;}
if(this._same){this._same=this._is=false;var o1=this.toObject(),o2=(arguments[0]||new Date()).toObject(),v="",k=j.toLowerCase();for(var m=(px.length-1);m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v]){return false;}
if(k==v){break;}}
return true;}
if(j.substring(j.length-1)!="s"){j+="s";}
return this["add"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$P[de]=$P[de+"s"]=ef(px[k]);$N[de]=$N[de+"s"]=nf(de);}
$P._ss=ef("Second");var nthfn=function(n){return function(dayOfWeek){if(this._same){return this._ss(arguments[0]);}
if(dayOfWeek||dayOfWeek===0){return this.moveToNthOccurrence(dayOfWeek,n);}
this._nth=n;if(n===2&&(dayOfWeek===undefined||dayOfWeek===null)){this._isSecond=true;return this.addSeconds(this._orient);}
return this;};};for(var l=0;l<nth.length;l++){$P[nth[l]]=(l===0)?nthfn(-1):nthfn(l);}}());(function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp("^\s*"+s+"\s*"))(s);};},stoken:function(s){return _.rtoken(new RegExp("^"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}
break;}
return[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}
rx.push(r[0]);s=r[1];}
return[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}
return[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}
throw new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}
return rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}
if(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){r=null;}
if(r){return r;}}
throw new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}
rx.push(r[0]);s=r[1];}
return[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;if(px.length==1){return px[0];}
return function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}
rx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}
s=q[1];}
if(!r){throw new $P.Exception(s);}
if(q){throw new $P.Exception(q[1]);}
if(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}
return[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}
rx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}
if(!last&&q[1].length===0){last=true;}
if(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}
p=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}
if(rx[1].length<best[1].length){best=rx;}
if(best[1].length===0){break;}}
if(best[0].length===0){return best;}
if(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}
best[1]=q[1];}
return best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}
return rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}
if(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx="optional not ignore cache".split(/\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}
var _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx="each any all".split(/\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo;var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}
return rx;};$D.Grammar={};$D.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0]);};},month:function(s){return function(){this.month=(s.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(s)/4:Number(s)-1;};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<$C.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}
var now=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=now.getDate();}
if(!this.year){this.year=now.getFullYear();}
if(!this.month&&this.month!==0){this.month=now.getMonth();}
if(!this.day){this.day=1;}
if(!this.hour){this.hour=0;}
if(!this.minute){this.minute=0;}
if(!this.second){this.second=0;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.day>$D.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}
var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}
return r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}
for(var i=0;i<x.length;i++){if(typeof x[i]=="function"){x[i].call(this);}}
var today=$D.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else if(this.now){today=new Date();}
var expression=!!(this.days&&this.days!==null||this.orient||this.operator);var gap,mod,orient;orient=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){today.setTimeToNow();}
if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;expression=true;}}
if(!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(!this.month){this.month=temp.getMonth();}
this.year=temp.getFullYear();}
if(expression&&this.weekday&&this.unit!="month"){this.unit="day";gap=($D.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}
if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}
if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}
if(this.month&&!this.day&&this.value){today.set({day:this.value*1});if(!expression){this.day=this.value*1;}}
if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;expression=true;}
if(expression&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}
if(!this.unit){this.unit="day";}
if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*orient;}else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}
this[this.unit+"s"]=this.value*orient;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(temp.getMonth()!==today.getMonth()){this.month=temp.getMonth();}}
if((this.month||this.month===0)&&!this.day){this.day=1;}
if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}
if(expression&&this.timezone&&this.day&&this.days){this.day=this.days;}
return(expression)?today.add(this):today.set(this);}};var _=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=_.stoken(":");g.whiteSpace=_.rtoken(/^\s*/);g.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=$C.regexPatterns;var kx=keys.split(/\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}
fn=_C[keys]=_.any.apply(null,px);}
return fn;};g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian));g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday);g.unit=_.process(g.ctoken("second minute hour day week month year"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[$C.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw $D.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}
return _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats(["\"yyyy-MM-ddTHH:mm:ssZ\"","yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}
return g._start.call({},s);};$D._parse=$D.parse;$D.parse=function(s){var r=null;if(!s){return null;}
if(s instanceof Date){return s;}
try{r=$D.Grammar.start.call({},s.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};};$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s);};}());var BATS=new function(){var requestUrl='';var requestTimeout=75000;var debug=false;var enableFuncs=new Array();var disconnectFuncs=new Array();var receiveFuncs=new Array();var cookieDomain='';var timeMsg='Real-time prices by Bats®. Volume delayed. ';var testIntID=null;var greenColor='#008000';var redColor='#FF0000';var isInit=false;var client=null;this.Enabled=true;var log=function(msg){var qsDebug=window.location.href.toString().toLowerCase().indexOf("batsdebug=1")>-1;if((debug||qsDebug)&&typeof(console)!='undefined'&&console.log){console.log("BATS: "+msg);}};var getErrorMessageDetails=function(args){var message='';if(args){message='Code: '+args.getErrorCode()+', Message: '+args.getErrorMessage();}
return message;};var setCookie=function(name,value,options){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');};var getCookie=function(name){var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;};var batsCookie=function(value){var retval=true;if(typeof(value)!='undefined'){setCookie("BATSEnabled",value.toString(),{expires:365,path:'/',domain:cookieDomain});retval=value;log("cookie value set to: "+retval);}
else{var cookieValue=getCookie("BATSEnabled");if(cookieValue!=null){retval=cookieValue=="true"?true:false;log("cookie value read: "+retval);}}
return retval;};this.EnableDebug=function(val){debug=val;};this.init=function(url,timeout,cDomain,green,red){if(typeof(window.BATS_isInit)!='undefined'&&window.BATS_isInit){log("already initialized");return;}
requestUrl=url;cookieDomain=cDomain;greenColor=green;redColor=red;log("calling initialize with request url: "+requestUrl);client=new fm.websync.client(requestUrl);client.timeout=timeout;if(typeof(fm.utilities)!='undefined'&&typeof(fm.utilities.error)!='undefined'){fm.utilities.error.verbose=false;}
window.BATS_isInit=true;isInit=true;this.Enabled=batsCookie();if(!this.Enabled){jQuery("#batsToggle").removeClass("bats-toggleOn").addClass("bats-toggleOff");}
if(this.Enabled&&!this.isConnected()){this.connect();}};this.toggleOnOff=function(){if(jQuery("#batsToggle").hasClass("bats-toggleOn")){log("turned off by toggle");jQuery("#batsToggle").removeClass("bats-toggleOn").addClass("bats-toggleOff");batsCookie(false);this.Enabled=false;if(this.isConnected()){this.unsubscribeAll();this.disconnect();}}
else{log("turned on by toggle");jQuery("#batsToggle").removeClass("bats-toggleOff").addClass("bats-toggleOn");batsCookie(true);this.Enabled=true;this.connect();}
if(arrGraphPopup[0,1]!=undefined){arrGraphPopup[0,1].ToggleBATSFromCookie();}};this.getTimeMsg=function(){return timeMsg;}
this.isConnected=function(){if(typeof(client)!='undefined'&&client!=null){return client._isConnected;}
else{return false;}};this.connect=function(){log("attempting connect");client.connect({requestUrl:requestUrl,OnSuccess:function(args){fm.httpWebRequestTransfer._corsFailCache={};fm.httpWebRequestTransfer._pmFailCache={};if(args.isReconnect){log('Reconnected!');}else{log('Connected!');for(var i=0;i<enableFuncs.length;i++){enableFuncs[i]();}}},onFailure:function(args){if(args.isReconnect){log('Could not reconnect: '+getErrorMessageDetails(args));}else{log('Could not connect: '+getErrorMessageDetails(args));}},onStreamFailure:function(args){if(args.willReconnect){log('Connection to server lost, reconnecting..., '+getErrorMessageDetails(args));}else{log('Connection to server lost permanently. '+getErrorMessageDetails(args));}}});};this.disconnect=function(){log("attempting disconnect");client.disconnect({onComplete:function(args){log('Disconnected!');}});for(var i=0;i<disconnectFuncs.length;i++){disconnectFuncs[i]();}};this.subscribe=function(symbol){var symbolUpper=symbol.toUpperCase();var channel='/'+symbolUpper;if(symbolUpper.length>0){log("attempting subscribe to channel: "+channel);client.subscribe({requestUrl:requestUrl,channel:channel,OnSuccess:function(args){if(args.isResubscribe){log('Resubscribed to channel: '+channel);}else{log('Subscribed to channel: '+channel);}},onFailure:function(args){if(args.isResubscribe){log('Could not resubscribe: '+getErrorMessageDetails(args));}else{log('Could not subscribe: '+getErrorMessageDetails(args));}},onReceive:function(args){log('Received message: '+JSON.stringify(args.getData()));for(var i=0;i<receiveFuncs.length;i++){receiveFuncs[i](args.getData());}}});}};this.unsubscribe=function(symbol){var symbolUpper=symbol.toUpperCase();var channel='/'+symbolUpper;if(symbolUpper.length>0){log("attempting unsubscribe from channel: "+channel);client.unsubscribe({requestUrl:requestUrl,channel:channel,OnSuccess:function(args){log('Unsubscribed from channel: '+channel);},onFailure:function(args){log('Could not unsubscribe: '+getErrorMessageDetails(args));}});}};this.subscribeMulti=function(symbolArray){var channels=new Array();for(var i=0;i<symbolArray.length;i++){channels.push('/'+symbolArray[i].toUpperCase());}
if(channels.length>0){log("attempting subscribe to channels: "+channels);client.subscribe({requestUrl:requestUrl,channels:channels,onSuccess:function(args){if(args.isResubscribe){log('Resubscribed Multi to channels: '+channels);}else{log('Subscribed Multi to channels: '+channels);}},onFailure:function(args){if(args.isResubscribe){log('Could not resubscribe multi: '+getErrorMessageDetails(args));}else{log('Could not subscribe multi: '+getErrorMessageDetails(args));}},onReceive:function(args){log('Received message: '+JSON.stringify(args.getData()));for(var i=0;i<receiveFuncs.length;i++){receiveFuncs[i](args.getData());}}});}};this.unsubscribeMulti=function(symbolArray){var channels=new Array();for(var i=0;i<symbolArray.length;i++){channels.push('/'+symbolArray[i].toUpperCase());}
if(channels.length>0){log("attempting unsubscribe from channels: "+channels);client.unsubscribe({requestUrl:requestUrl,channels:channels,onSuccess:function(args){log('Unsubscribed multi from channels: '+channels);},onFailure:function(args){log('Could not unsubscribe multi: '+getErrorMessageDetails(args));}});}};this.unsubscribeAll=function(){var allChannels=client.getSubscribedChannels();if(allChannels.length>0){log("attempting unsubscribe all from channels: "+allChannels);client.unsubscribe({requestUrl:requestUrl,channels:allChannels,onSuccess:function(args){log('Unsubscribed from all channels: '+allChannels);},onFailure:function(args){log('Could not unsubscribe all: '+getErrorMessageDetails(args));}});}};this.addEnableFunc=function(enableFunc){enableFuncs.push(enableFunc);};this.addDisconnectFunc=function(disconnectFunc){disconnectFuncs.push(disconnectFunc);}
this.addReceiveFunc=function(receiveFunc){receiveFuncs.push(receiveFunc);};this.getPriceDifference=function(jQueryObj1,newPrice){if(jQueryObj1!=null&&jQueryObj1.length>0){var val1=+jQueryObj1.html().replace("$","").replace("%","");return newPrice-val1;}
return 0;};this.startHighlight=function(jQueryObj,value,bgColor){var newBackColor=greenColor;if(value<0){newBackColor=redColor;}
if(jQueryObj!=null&&jQueryObj.length>0&&(value>0||value<0)){try{jQueryObj.effect("highlight",{color:newBackColor,orgColor:bgColor},2000);}
catch(e){var color=bgColor!=null&&bgColor!=''?bgColor:'#fff';jQueryObj.css('backgroundColor',color);}}};this.getTimeStamp=function(data,withMessage){log("getting timestamp for: "+data.TradeTime+", offset: "+data.UtcOffset);var milliDate=jQuery.extend(new Date(),data.TradeTime);var time=milliDate;var dt=Date.parse(milliDate);if(dt!=null){var offset=dt.getTimezoneOffset();dt.addMinutes(offset+data.UtcOffset);time=dt.toString("hh:mm tt")+" EST "+dt.toString("MM/dd/yyyy");log("bats timestamp: "+time);}
var msg="";if(withMessage){msg=timeMsg;}
return msg+"Last Update: "+time+"<br/> Real-time quote and/or trade prices are not sourced from all markets.";};this.getTimeStampOnly=function(data){log("getting timestamp only for: "+data.TradeTime+", offset: "+data.UtcOffset);var milliDate=jQuery.extend(new Date(),data.TradeTime);var time=milliDate;var dt=Date.parse(milliDate);if(dt!=null){var offset=dt.getTimezoneOffset();dt.addMinutes(offset+data.UtcOffset);time=dt.toString("hh:mm tt")+" EST "+dt.toString("MM/dd/yyyy");log("bats timestamp: "+time);}
return time;};this.startTester=function(symbol){var prc=360;testIntID=setInterval(function(){var data=new function(){this.Last=prc;this.High=prc;this.Low=prc;this.TradeTime=new Date();this.UtcOffset=0;this.Symbol=symbol;};for(var i=0;i<receiveFuncs.length;i++){receiveFuncs[i](data);}
prc+=.5;},500);};this.stopTester=function(){if(testIntID!=null&&testIntID){clearInterval(testIntID);}};};(function(name,dependencies,definition){if(typeof define==='function'&&define.amd){define(name,dependencies,definition);}else if(typeof exports==='object'){for(var i=0;i<dependencies.length;i++){require('./'+dependencies[i]);}
module.exports=definition();}else{this[name]=definition();}}('fm',[],function(){if(typeof global!=='undefined'&&!global.window){global.window=global;global.document={cookie:''};}
if(!window.fm){window.fm={};}
var JSON;if(!JSON){JSON={};}
(function(){"use strict";function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSONFM!=='function'){Date.prototype.toJSONFM=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSONFM=Number.prototype.toJSONFM=Boolean.prototype.toJSONFM=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSONFM==='function'){value=value.toJSONFM(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());fm.getVersion=function(){return'2.9.22';};fm.object=(function(){function object(){}
return object;})();var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};fm.util=(function(){function util(){}
util._xdCache={};util.isString=function(obj){return Object.prototype.toString.call(obj)==='[object String]';};util.isArray=function(obj){return Object.prototype.toString.call(obj)==='[object Array]';};util.isPlainObject=function(obj){var error,error1,key,x;if(!obj||Object.prototype.toString.call(obj)!=='[object Object]'||obj.nodeType||obj===obj.window){return false;}
try{if(obj.constructor&&!Object.prototype.hasOwnProperty.call(obj,"constructor")&&!Object.prototype.hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(error1){error=error1;return false;}
for(key in obj){x=0;}
return key===void 0||Object.prototype.hasOwnProperty.call(obj,key);};util.canAttachProperties=function(instance,obj){var key,setter,setterName,value;for(key in obj){value=obj[key];setterName='set'+key.charAt(0).toUpperCase()+key.substring(1);setter=instance[setterName];if(!setter||Object.prototype.toString.call(setter)!=='[object Function]'){return false;}}
return true;};util.attachProperties=function(instance,obj){var key,results,setter,setterName,value;results=[];for(key in obj){value=obj[key];setterName='set'+key.charAt(0).toUpperCase()+key.substring(1);setter=instance[setterName];if(setter&&Object.prototype.toString.call(setter)==='[object Function]'){results.push(setter.call(instance,value));}else{setter=instance['setExtensionValue'];if(setter&&Object.prototype.toString.call(setter)==='[object Function]'){if(Object.prototype.toString.call(value)==='[object Function]'){results.push(fm.log.warn('Property "'+key+'" did not match any known setter and has a function as its value. Please verify your callback names are correct.'));}else{setter.call(instance,key,value);results.push(fm.log.debug('Property "'+key+'" did not match any known setter and is assumed to be an extension value.'));}}else{results.push(fm.log.debug('Property "'+key+'" did not match any known setter and was ignored.'));}}}
return results;};util.isIE=function(){return!!document.protocol;};util.isIE6=function(){return util.isIE()&&!window.XMLHttpRequest;};util.isIE7=function(){return util.isIE()&&window.XMLHttpRequest&&!document.implementation;};util.isIE8=function(){return util.isIE()&&document.implementation&&document.implementation.hasFeature&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");};util.isIE9=function(){return util.isIE()&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");};util.isAndroid=function(){return navigator.userAgent.match(/Android/i);};util.isBlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i);};util.isiOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);};util.isOpera=function(){return navigator.userAgent.match(/Opera Mini/i);};util.isWindows=function(){return navigator.userAgent.match(/IEMobile/i);};util.isMobile=function(){return util.isAndroid()||util.isBlackBerry()||util.isiOS()||util.isOpera()||util.isWindows();};util.hasActiveX=function(){var hasActiveX;hasActiveX=window.ActiveXObject!==void 0;if(hasActiveX&&typeof window.external.msActiveXFilteringEnabled!=='undefined'&&window.external.msActiveXFilteringEnabled()){hasActiveX=false;fm.log.debug('ActiveX is filtered and cannot be used.');}
return hasActiveX;};util.hasJava=function(){return util.getJavaVersion();};util.getJavaVersion=function(){var i,len,mime,mimes,parts,t,version;if(util.isIE()&&util.hasActiveX()){if(util.isJavaWebStartInstalledActiveX('1.9.0')){return'1.9.0';}
if(util.isJavaWebStartInstalledActiveX('1.8.0')){return'1.8.0';}
if(util.isJavaWebStartInstalledActiveX('1.7.0')){return'1.7.0';}
if(util.isJavaWebStartInstalledActiveX('1.6.0')){return'1.6.0';}
if(util.isJavaWebStartInstalledActiveX('1.5.0')){return'1.5.0';}
if(util.isJavaWebStartInstalledActiveX('1.4.2')){return'1.4.2';}
return false;}else{version=0;mimes=window.navigator.mimeTypes;if(mimes){for(i=0,len=mimes.length;i<len;i++){mime=mimes[i];t=mime.type;if(t.indexOf('java')>0&&t.indexOf('jpi')>0&&t.indexOf('applet')>0){parts=t.split('=');version=parts[parts.length-1];}}}
return version;}};util.isJavaWebStartInstalledActiveX=function(version){var error,error1;try{return util.hasActiveX()&&(new ActiveXObject('JavaWebStart.isInstalled.'+version+'.0')!==null);}catch(error1){error=error1;return false;}};util.isXD=function(url1,url2){var error,error1,handlerHost,host1,host2,thisHost;try{if(url2){host1=util.getHost(url1);host2=util.getHost(url2);return util.compareHost(host1,host2);}else{if(!util._xdCache[url1]){handlerHost=util.getHost(url1);thisHost=util.getHost();util._xdCache[url1]=util.compareHost(handlerHost,thisHost)?'y':'n';}
return util._xdCache[url1]==='y';}}catch(error1){error=error1;return false;}};util.getHost=function(url){var parsed;if(!url){return util.getCurrentHost();}
parsed=util.parseUrl(url);if(!parsed.protocol){return util.getCurrentHost();}
return parsed;};util.compareHost=function(host1,host2){return host1.server!==host2.server||((host1.port||host2.port)&&host1.port!==host2.port);};util.getCurrentHost=function(){var l;l=document.location;return{protocol:l.protocol,server:l.hostname,port:l.port};};util.parseUrl=function(url){var parts;parts=/(((http|ws)s?:)\/\/)?([\-\w\.\*]+)+(:(\d+))?(\/([^\?]*(\?\S+)?)?)?/i.exec(url);if(parts.length<6){throw new Error('Invalid URL ('+url+').');}
return{prefix:parts[1],protocol:parts[2],server:parts[4],postfix:parts[5],port:parts[6],path:parts[7]};};util.absolutizeUrl=function(url){var base,l,parsed;if(!url){return url;}
parsed=util.parseUrl(url);if(parsed.protocol){if(parsed.server.indexOf('*')===-1){return url;}
url=parsed.prefix+util.wildcard(parsed.server);if(parsed.postfix){url+=parsed.postfix;}
if(parsed.path){url+=parsed.path;}
return url;}
l=document.location;base=l.protocol+'//'+l.host;if(url.charAt(0)==='/'){return base+url;}else{return base+l.pathname.substring(0,l.pathname.lastIndexOf('/')+1)+url;}};util.wildcard=function(str){return str.replace('*',util.getWildcard());};util._chars='abcdefghijklmnopqrstuvwxyz';util.getWildcard=function(){if(!util._wildcard){util._wildcard=util.randomChar(util._chars);}
return util._wildcard;};util.randomChar=function(str){if(!str){return str;}
return str.charAt(Math.floor(Math.random()*str.length));};util.observe=function(element,event,handler){if(element.addEventListener){return element.addEventListener(event,handler,false);}else if(element.attachEvent){return element.attachEvent('on'+event,handler);}else{return element['on'+event]=handler;}};util.unobserve=function(element,event,handler){if(element.removeEventListener){return element.removeEventListener(event,handler,false);}else{return element.detachEvent('on'+event,handler);}};util.observeAttr=function(element,handler){var MutationObserver,isDOMAttrModifiedSupported,observer,options;MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;isDOMAttrModifiedSupported=function(){var flag,p;p=document.createElement('p');flag=false;if(p.addEventListener){p.addEventListener('DOMAttrModified',function(){return flag=true;},false);}else if(p.attachEvent){p.attachEvent('onDOMAttrModified',function(){return flag=true;});}else{return false;}
p.setAttribute('id','target');return flag;};if(MutationObserver){options={subtree:false,attributes:true};observer=new MutationObserver(function(mutations){var i,len,mutation,results;results=[];for(i=0,len=mutations.length;i<len;i++){mutation=mutations[i];results.push(handler.call(mutation.target,mutation.attributeName));}
return results;});return observer.observe(element,options);}else if(isDOMAttrModifiedSupported()){return fm.util.observe(element,'DOMAttrModified',function(e){return handler.call(element,e.attrName);});}else if(indexOf.call(document.body,'onpropertychange')>=0){return fm.util.observe(element,'propertychange',function(e){return handler.call(element,window.event.propertyName);});}};util.extend=function(dest,src){var key;for(key in src){dest[key]=src[key];}
return dest;};util.logging=true;util.log=function(text){var div;if(!util.logging){return;}
if(!document.body){util.addOnLoad(function(){return util.log(text);});return;}
if(!util._logContainer){util._logContainer=document.createElement('div');util._logContainer.className='fm-log';util._logContainer.style.position='absolute';util._logContainer.style.zIndex=99999;util._logContainer.style.right='5px';util._logContainer.style.top='5px';document.body.appendChild(util._logContainer);}
div=document.createElement('div');div.innerHTML=text;return util._logContainer.appendChild(div);};util._loadFunctions=[];util.addOnLoad=function(fn){if(util._readyRun){return window.setTimeout(fn,1);}else{return util._loadFunctions.push(fn);}};util.ready=function(){if(util._readyRun){return;}
util._readyRun=true;return window.setTimeout(function(){var i,len,loadFunction,ref,results;ref=util._loadFunctions;results=[];for(i=0,len=ref.length;i<len;i++){loadFunction=ref[i];results.push(loadFunction());}
return results;},1);};util.bindReady=function(){var topLevel;if(util._readyBound){return;}
util._readyBound=true;if(document.readyState==='complete'){return window.setTimeout(function(){return util.ready();},1);}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);return util.ready();},false);return window.addEventListener("load",function(){window.removeEventListener("load",arguments.callee,false);return util.ready();},false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);return util.ready();}});try{topLevel=window.frameElement===null;}catch(undefined){}
if(document.documentElement.doScroll&&topLevel){return(function(){var error,error1;if(util._loaded){return;}
try{document.documentElement.doScroll("left");}catch(error1){error=error1;window.setTimeout(arguments.callee,0);return;}
return util.ready();})();}}else{return util.ready();}};if(!util._loaded){util.addOnLoad(function(){return util._loaded=true;});}
util.bindReady();return util;})();fm.mathAssistant=(function(){function mathAssistant(){}
mathAssistant.getPi=function(){return Math.PI;};mathAssistant.getE=function(){return Math.E;};mathAssistant.abs=function(val){return Math.abs(val);};mathAssistant.acos=function(val){return Math.acos(val);};mathAssistant.asin=function(val){return Math.asin(val);};mathAssistant.atan=function(val){return Math.atan(val);};mathAssistant.atan2=function(y,x){return Math.atan2(y,x);};mathAssistant.ceil=function(val){return Math.ceil(val);};mathAssistant.cos=function(val){return Math.cos(val);};mathAssistant.cosh=function(val){return(Math.exp(val)+Math.exp(-val))/2;};mathAssistant.exp=function(val){return Math.exp(val);};mathAssistant.floor=function(val){return Math.floor(val);};mathAssistant.log=function(val){return Math.log(val);};mathAssistant.log10=function(val){return Math.log(val)/2.302585092994046;};mathAssistant.max=function(val1,val2){return Math.max(val1,val2);};mathAssistant.min=function(val1,val2){return Math.min(val1,val2);};mathAssistant.pow=function(x,y){return Math.pow(x,y);};mathAssistant.sin=function(val){return Math.sin(val);};mathAssistant.sinh=function(val){return(Math.exp(val)-Math.exp(-val))/2;};mathAssistant.sqrt=function(val){return Math.sqrt(val);};mathAssistant.tan=function(val){return Math.tan(val);};mathAssistant.tanh=function(val){return(Math.exp(val)-Math.exp(-val))/(Math.exp(val)+Math.exp(-val));};return mathAssistant;})();fm.global=(function(){function global(){}
global.tryCast=function(x,t){if(!x||x instanceof t){return x;}
return null;};global.tryCastArray=function(x){if(!x||x instanceof Array){return x;}
return null;};global.tryCastObject=function(x){if(!x||x instanceof Object){return x;}
return null;};global.tryCastString=function(x){if(!x||typeof x==="string"){return x;}
return null;};global.tryCastInt=function(x){if(!x||!isNaN(parseInt(x))){return x;}
return null;};global.tryCastFloat=function(x){if(!x||!isNaN(parseFloat(x))){return x;}
return null;};global.equals=function(x1,x2){if(x1===null||typeof x1==='undefined'){return x2===null||typeof x2==='undefined';}
if(x2===null||typeof x2==='undefined'){return x1===null||typeof x1==='undefined';}
return x1===x2;};return global;})();fm.stringComparison={CurrentCulture:0,CurrentCultureIgnoreCase:1,InvariantCulture:2,InvariantCultureIgnoreCase:3,Ordinal:4,OrdinalIgnoreCase:5};var bind=function(fn,me){return function(){return fn.apply(me,arguments);};};fm.dateTime=(function(){function dateTime(){this.getSecond=bind(this.getSecond,this);this.getMinute=bind(this.getMinute,this);this.getHour=bind(this.getHour,this);this.getDay=bind(this.getDay,this);this.getMonth=bind(this.getMonth,this);this.getYear=bind(this.getYear,this);this.toUniversalTime=bind(this.toUniversalTime,this);this.getTicks=bind(this.getTicks,this);var day,hour,minute,month,second,year;if(arguments.length===1){this._date=arguments[0];}else if(arguments.length===6){year=arguments[0];month=arguments[1];day=arguments[2];hour=arguments[3];minute=arguments[4];second=arguments[5];this._date=new Date(Date.UTC(year,month-1,day,hour,minute,second));}else{throw new Error('Unknown argument set.');}}
dateTime.getNow=function(){return new fm.dateTime(new Date());};dateTime.getUtcNow=function(){return new fm.dateTime(new Date());};dateTime.prototype.getTicks=function(){return 621355968000000000+this._date.getTime()*10000;};dateTime.prototype.toUniversalTime=function(){return new fm.dateTime(this._date);};dateTime.prototype.getYear=function(){return this._date.getUTCFullYear();};dateTime.prototype.getMonth=function(){return this._date.getUTCMonth()+1;};dateTime.prototype.getDay=function(){return this._date.getUTCDate();};dateTime.prototype.getHour=function(){return this._date.getUTCHours();};dateTime.prototype.getMinute=function(){return this._date.getUTCMinutes();};dateTime.prototype.getSecond=function(){return this._date.getUTCSeconds();};return dateTime;})();fm.byteCollection=(function(){byteCollection.prototype._buffer=null;function byteCollection(buffer){if(buffer){this._buffer=new Uint8Array(buffer);}else{this._buffer=new Uint8Array();}}
byteCollection.prototype.count=function(){return this._buffer.length;};byteCollection.prototype.add=function(b){var bufferA,newBuffer;bufferA=this._buffer;newBuffer=new Uint8Array(bufferA.length+1);newBuffer.set(bufferA);newBuffer[bufferA.length]=b;return this._buffer=newBuffer;};byteCollection.prototype.addRange=function(buffer){var bufferA,bufferB,byteCollection,newBuffer;byteCollection=fm.global.tryCast(buffer,fm.byteCollection);if(byteCollection){buffer=byteCollection._buffer;}
bufferA=this._buffer;bufferB=buffer;newBuffer=new Uint8Array(bufferA.length+bufferB.length);newBuffer.set(bufferA);newBuffer.set(bufferB,bufferA.length);return this._buffer=newBuffer;};byteCollection.prototype.removeRange=function(index,count){var bufferA,bufferB,newBuffer;bufferA=this._buffer.subarray(0,index);bufferB=this._buffer.subarray(index+count);newBuffer=new Uint8Array(bufferA.length+bufferB.length);newBuffer.set(bufferA);newBuffer.set(bufferB,bufferA.length);return this._buffer=newBuffer;};byteCollection.prototype.insertRange=function(index,buffer){var bufferA,bufferB,bufferC,byteCollection,newBuffer;byteCollection=fm.global.tryCast(buffer,fm.byteCollection);if(byteCollection){buffer=byteCollection._buffer;}
bufferA=this._buffer.subarray(0,index);bufferB=buffer;bufferC=this._buffer.subarray(index);newBuffer=new Uint8Array(bufferA.length+bufferB.length+bufferC.length);newBuffer.set(bufferA);newBuffer.set(bufferB,bufferA.length);newBuffer.set(bufferC,bufferA.length+bufferB.length);return this._buffer=newBuffer;};byteCollection.prototype.getRange=function(index,count){var buffer;buffer=new Uint8Array(count);buffer.set(this._buffer.subarray(index,index+count));return buffer;};byteCollection.prototype.get=function(index){return this._buffer[index];};byteCollection.prototype.toArray=function(){return new Uint8Array(this._buffer);};return byteCollection;})();var bind=function(fn,me){return function(){return fn.apply(me,arguments);};};fm.nameValueCollection=(function(){function nameValueCollection(){this.getAllKeys=bind(this.getAllKeys,this);this.getKeys=bind(this.getKeys,this);var n,ref,v;this._value={};if(arguments.length===1){ref=arguments[0];for(n in ref){v=ref[n];this._value[n]=v;}}}
nameValueCollection.prototype.source=function(){return this._value;};nameValueCollection.prototype.get=function(name){var n;for(n in this._value){if(n.toLowerCase()===name.toLowerCase()){return this._value[n];}}
return null;};nameValueCollection.prototype.set=function(name,value){var n;for(n in this._value){if(n.toLowerCase()===name.toLowerCase()){this._value[n]=value;return;}}
return this._value[name]=value;};nameValueCollection.prototype.getCount=function(){var i,n;i=0;for(n in this._value){i++;}
return i;};nameValueCollection.prototype.toHash=function(){return this._value;};nameValueCollection.prototype.getKeys=function(){return this.getAllKeys();};nameValueCollection.prototype.getAllKeys=function(){var k,keys;keys=[];for(k in this._value){keys.push(k);}
return keys;};return nameValueCollection;})();fm.stringBuilder=(function(){function stringBuilder(){this._value='';if(arguments.length===1){this._value=arguments[0];}}
stringBuilder.prototype.append=function(s,startIndex,count){if((startIndex!=null)&&(count!=null)){this._value=this._value+s.substring(startIndex,startIndex+count);}else{this._value=this._value+s;}
return this;};stringBuilder.prototype.toString=function(){return this._value;};stringBuilder.prototype.getLength=function(){return this._value.length;};stringBuilder.prototype.remove=function(startIndex,length){this._value=this._value.substring(0,startIndex)+this._value.substring(startIndex+length);return this;};return stringBuilder;})();var bind=function(fn,me){return function(){return fn.apply(me,arguments);};};fm.regex=(function(){regex.prototype.pattern='';function regex(pattern){this.isMatch=bind(this.isMatch,this);this.pattern=pattern;}
regex.isMatch=function(input,pattern){return new RegExp(pattern).test(input);};regex.prototype.isMatch=function(input){return new RegExp(this.pattern).test(input);};return regex;})();fm.bitAssistant=(function(){function bitAssistant(){}
bitAssistant.getIntegerBytesNetwork=function(value){var buffer,r;buffer=new Uint8Array(4);r=value%16777216;buffer[0]=(value-r)/16777216;value=r;r=value%65536;buffer[1]=(value-r)/65536;value=r;r=value%256;buffer[2]=(value-r)/256;buffer[3]=r;return buffer;};bitAssistant.toIntegerNetwork=function(buffer,startIndex){var b0,b1,b2,b3;b0=buffer[startIndex];b1=buffer[startIndex+1];b2=buffer[startIndex+2];b3=buffer[startIndex+3];return 16777216*b0+65536*b1+256*b2+b3*1;};bitAssistant.copy=function(source,sourceIndex,destination,destinationIndex,length){return destination.set(source.subarray(sourceIndex,sourceIndex+length),destinationIndex);};bitAssistant.subArray=function(array,offset,count){var subarray;if(arguments.length===2){return bitAssistant.subArray(array,offset,array.length-offset);}else{subarray=new Uint8Array(count);bitAssistant.copy(array,offset,subarray,0,count);return subarray;}};return bitAssistant;})();fm.uri=(function(){function uri(){}
uri.escapeDataString=function(s){return encodeURIComponent(s);};return uri;})();fm.guid=(function(){function guid(){if(arguments.length===0){this._guid='00000000-0000-0000-0000-000000000000';}else{this._guid=arguments[0];}}
guid.prototype.equals=function(guid){if(guid){return guid.toString()===this._guid;}
return false;};guid.prototype.toString=function(){return this._guid;};guid.newGuid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r,v;r=Math.random()*16|0;v=(c==='x'?r:r&0x3|0x8);return v.toString(16);});};guid.empty=new guid();guid.equals=function(x1,x2){if(x1===null||typeof x1==='undefined'){return x2===null||typeof x2==='undefined';}
if(x2===null||typeof x2==='undefined'){return x1===null||typeof x1==='undefined';}
return x1.equals(x2);};return guid;})();fm.holder=(function(){function holder(value){this._value=value;}
holder.prototype.getValue=function(){return this._value;};holder.prototype.setValue=function(value){return this._value=value;};return holder;})();fm.delegate=(function(){function delegate(){}
delegate.combine=function(a,b){var chain,f,fn,j,k,len,len1,ref,ref1,self;if(!a){return b;}
if(!b){return a;}
self=this;chain=[];fn=function(){var f,j,len,results;results=[];for(j=0,len=chain.length;j<len;j++){f=chain[j];results.push(f.apply(self,arguments));}
return results;};if(a._chain){ref=a._chain;for(j=0,len=ref.length;j<len;j++){f=ref[j];chain.push(f);}}else{chain.push(a);}
if(b._chain){ref1=b._chain;for(k=0,len1=ref1.length;k<len1;k++){f=ref1[k];chain.push(f);}}else{chain.push(b);}
fn._chain=chain;return fn;};delegate.remove=function(source,value){var f,i,j,len,ref;if(!source||source===value){return null;}
if(source._chain){ref=source._chain;for(i=j=0,len=ref.length;j<len;i=++j){f=ref[i];if(f===value){source._chain.splice(i,1);break;}}}
return source;};return delegate;})();var bind=function(fn,me){return function(){return fn.apply(me,arguments);};};fm.stack=(function(){function stack(){this.peek=bind(this.peek,this);this.pop=bind(this.pop,this);this.push=bind(this.push,this);this._list=[];}
stack.prototype.push=function(o){return this._list.push(o);};stack.prototype.pop=function(){return this._list.pop();};stack.prototype.peek=function(){if(this._list.length===0){return null;}
return this._list[this._list.length-1];};return stack;})();fm.managedThread=(function(){function managedThread(){}
managedThread.currentThreadId=function(){return'0';};return managedThread;})();fm.deferrer=(function(){function deferrer(){}
deferrer.defer=function(callback,timeout,state){return window.setTimeout((function(_this){return function(){return callback(state);};})(this),timeout);};return deferrer;})();fm.dateTimeStyles={AssumeUniversal:1,AdjustToUniversal:2};fm.dateTimeFormatInfo=(function(){function dateTimeFormatInfo(){}
dateTimeFormatInfo.getInvariantInfo=function(){return new fm.dateTimeFormatInfo();};return dateTimeFormatInfo;})();fm.convert=(function(){function convert(){}
convert.toInt32=function(s){return s.charCodeAt();};return convert;})();fm.parseAssistant=(function(){function parseAssistant(){}
parseAssistant.parseIntegerValue=function(s){return parseInt(s);};parseAssistant.parseLongValue=function(s){return parseInt(s);};parseAssistant.parseFloatValue=function(s){return parseFloat(s);};parseAssistant.parseDoubleValue=function(s){return parseFloat(s);};parseAssistant.parseDecimalValue=function(s){return parseFloat(s);};parseAssistant.parseBooleanValue=function(s){if(s.toLowerCase()==="true"||s.toLowerCase()==="y"||s==="1"){return true;}else{return false;}};parseAssistant.parseGuidValue=function(s){return new fm.guid(s);};parseAssistant.tryParseIntegerValue=function(s,h){if(isNaN(parseInt(s))){return false;}
h.setValue(parseInt(s));return true;};parseAssistant.tryParseLongValue=function(s,h){if(isNaN(parseInt(s))){return false;}
h.setValue(parseInt(s));return true;};parseAssistant.tryParseFloatValue=function(s,h){if(isNaN(parseFloat(s))){return false;}
h.setValue(parseFloat(s));return true;};parseAssistant.tryParseDoubleValue=function(s,h){if(isNaN(parseFloat(s))){return false;}
h.setValue(parseFloat(s));return true;};parseAssistant.tryParseDecimalValue=function(s,h){if(isNaN(parseFloat(s))){return false;}
h.setValue(parseFloat(s));return true;};parseAssistant.tryParseBooleanValue=function(s,h){if(s.toLowerCase()==="true"||s.toLowerCase()==="y"||s==="1"){h.setValue(true);}else{h.setValue(false);}
return true;};parseAssistant.tryParseGuidValue=function(s,h){if(!(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i.test(s))){return false;}
h.setValue(new fm.guid(s));return true;};return parseAssistant;})();fm.stringExtensions=(function(){function stringExtensions(){}
stringExtensions.empty='';stringExtensions.toString=function(){return arguments[0];};stringExtensions.trim=function(s){return s.replace(/^\s+|\s+$/g,'');};stringExtensions.concat=function(){var j,k,len,len1,ref,s,x;s='';if(arguments.length===1&&fm.util.isArray(arguments[0])){ref=arguments[0];for(j=0,len=ref.length;j<len;j++){x=ref[j];s=s+x;}}else{for(k=0,len1=arguments.length;k<len1;k++){x=arguments[k];s=s+x;}}
return s;};stringExtensions.join=function(separator,array){var i,j,len,sb,str;sb=new fm.stringBuilder();for(i=j=0,len=array.length;j<len;i=++j){str=array[i];if(i>0){sb.append(separator);}
sb.append(str);}
return sb.toString();};stringExtensions.split=function(s,chars){var c,i,j,k,len,ref,splits,start;splits=[];start=0;for(i=j=0,ref=s.length-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){for(k=0,len=chars.length;k<len;k++){c=chars[k];if(c===s.charAt(i)){splits.push(s.substring(start,i));start=i+1;}}}
splits.push(s.substring(start,s.length));return splits;};stringExtensions.isNullOrEmpty=function(s){var noe;noe=typeof s==='undefined'||s===null||s==='';if(!noe){if(typeof s!=='string'&&!(s instanceof String)){throw new Error('Object is not a string.');}}
return noe;};stringExtensions.indexOf=function(){var s,str,stringComparison;str=arguments[0];s=arguments[1];if(arguments.length>2){stringComparison=arguments[2];if(stringComparison===fm.stringComparison.CurrentCultureIgnoreCase||stringComparison===fm.stringComparison.InvariantCultureIgnoreCase||stringComparison===fm.stringComparison.OrdinalIgnoreCase){return str.toLowerCase().indexOf(s.toLowerCase());}}
return str.indexOf(s);};stringExtensions.lastIndexOf=function(){var s,str,stringComparison;str=arguments[0];s=arguments[1];if(arguments.length>2){stringComparison=arguments[2];if(stringComparison===fm.stringComparison.CurrentCultureIgnoreCase||stringComparison===fm.stringComparison.InvariantCultureIgnoreCase||stringComparison===fm.stringComparison.OrdinalIgnoreCase){return str.toLowerCase().lastIndexOf(s.toLowerCase());}}
return str.lastIndexOf(s);};stringExtensions.startsWith=function(){var s,str,stringComparison;str=arguments[0];s=arguments[1];if(arguments.length>2){stringComparison=arguments[2];if(stringComparison===fm.stringComparison.CurrentCultureIgnoreCase||stringComparison===fm.stringComparison.InvariantCultureIgnoreCase||stringComparison===fm.stringComparison.OrdinalIgnoreCase){return str.toLowerCase().indexOf(s.toLowerCase())===0;}}
return str.indexOf(s)===0;};stringExtensions.endsWith=function(){var s,str,stringComparison;str=arguments[0];s=arguments[1];if(arguments.length>2){stringComparison=arguments[2];if(stringComparison===fm.stringComparison.CurrentCultureIgnoreCase||stringComparison===fm.stringComparison.InvariantCultureIgnoreCase||stringComparison===fm.stringComparison.OrdinalIgnoreCase){return str.toLowerCase().indexOf(s.toLowerCase(),str.length-s.length)!==-1;}}
return str.indexOf(s,str.length-s.length)!==-1;};stringExtensions.compareTo=function(){var s1,s2;s1=arguments[0];s2=arguments[1];if(s1.toString()<s2.toString()){return-1;}
if(s1.toString()>s2.toString()){return 1;}
return 0;};stringExtensions.format=function(){var args,format,formatter,i,j,ref;format=arguments[0];args=[];if(arguments.length>1){if(fm.util.isArray(arguments[1])){args=arguments[1];}else{for(i=j=1,ref=arguments.length-1;1<=ref?j<=ref:j>=ref;i=1<=ref?++j:--j){args.push(arguments[i]?arguments[i]:'');}}}
formatter=function(match,number){if(args[number]!=null){return args[number];}
return match;};return format.replace(/{(\d+)}/g,formatter);};stringExtensions.toLower=function(){return arguments[0].toLowerCase();};stringExtensions.toUpper=function(){return arguments[0].toUpperCase();};stringExtensions.getLength=function(){return arguments[0].length;};stringExtensions.getChars=function(str){var chars,i,j,ref;chars=[];for(i=j=0,ref=str.length-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){chars.push(str[i]);}
return chars;};stringExtensions.substring=function(str,startIndex,length){return str.substring(startIndex,startIndex+length);};return stringExtensions;})();fm.arrayExtensions=(function(){function arrayExtensions(){}
arrayExtensions.getCount=function(array){return array.length;};arrayExtensions.add=function(array,value){return array.push(value);};arrayExtensions.remove=function(array,value){var i,j,len,obj;for(i=j=0,len=array.length;j<len;i=++j){obj=array[i];if(obj===value){array.splice(i,1);return true;}}
return false;};arrayExtensions.toArray=function(array){return array;};arrayExtensions.clear=function(array){return array.splice(0,array.length);};arrayExtensions.addRange=function(array,values){var j,len,results,v;results=[];for(j=0,len=values.length;j<len;j++){v=values[j];results.push(array.push(v));}
return results;};arrayExtensions.contains=function(array,value){var j,len,obj;for(j=0,len=array.length;j<len;j++){obj=array[j];if(obj===value){return true;}}
return false;};return arrayExtensions;})();fm.hashExtensions=(function(){function hashExtensions(){}
hashExtensions.getCount=function(obj){var i,k;i=0;for(k in obj){i++;}
return i;};hashExtensions.getKeys=function(obj){var k,keys;keys=[];for(k in obj){keys.push(k);}
return keys;};hashExtensions.getValues=function(obj){var k,v,values;values=[];for(k in obj){v=obj[k];values.push(v);}
return values;};hashExtensions.tryGetValue=function(obj,key,holder){if(hashExtensions.containsKey(obj,key)){holder.setValue(obj[key]);return true;}
return false;};hashExtensions.containsKey=function(obj,key){if(key in obj){return true;}else{return false;}};hashExtensions.containsValue=function(obj,value){var k,v;for(k in obj){v=obj[k];if(v===value){return true;}}
return false;};hashExtensions.add=function(obj,key,value){return obj[key]=value;};hashExtensions.remove=function(obj,key){return delete obj[key];};hashExtensions.clear=function(obj){var key,results;results=[];for(key in obj){results.push(delete obj[key]);}
return results;};return hashExtensions;})();fm.intExtensions=(function(){function intExtensions(){}
intExtensions.toString=function(){return arguments[0].toString();};return intExtensions;})();fm.xhr=(function(){function xhr(){}
xhr._count=0;xhr._current={};xhr._disableBinary=false;xhr.setDisableBinary=function(disableBinary){return xhr._disableBinary=disableBinary;};xhr.getDisableBinary=function(){if(typeof Uint8Array==='undefined'){return true;}
return xhr._disableBinary;};fm.util.observe(window,'unload',function(){var c,ref,x;ref=xhr._current;for(c in ref){x=ref[c];try{x._abortingOnUnload=true;x.abort();}catch(undefined){}}});xhr.failureHandler=function(options,message){if(options.onFailure){return options.onFailure({message:message});}};xhr.successHandler=function(options,x){var content,contentBinary,error,error3,headerString,headers,i,len,line,name,parts,receivedBinary,ref,value;if(options.onSuccess){headers={};headerString=x.getAllResponseHeaders();if(headerString){ref=headerString.split(/\r?\n/);for(i=0,len=ref.length;i<len;i++){line=ref[i];parts=line.split(':');if(parts.length!==2){continue;}
name=parts[0].replace(/\s+$/,'');value=parts[1].replace(/^\s+/,'');headers[name]=value;}}
content=null;contentBinary=null;receivedBinary=false;if(!xhr.getDisableBinary()){try{if(x.responseType==='arraybuffer'&&x.response){contentBinary=new Uint8Array(x.response);if(headers['Content-Type']!=='application/octet-stream'){content=fm.encoding.getUtf8().getString(contentBinary);}
receivedBinary=true;}}catch(error3){error=error3;xhr.setDisableBinary(true);}}
if(!receivedBinary){content=x.responseText;}
return options.onSuccess({content:content,contentBinary:contentBinary,statusCode:x.status,headers:headers});}};xhr.handler=function(options,x){if(x._aborting){return xhr.failureHandler(options,'XHR request timed out.');}else{if(options.onResponseReceived){options.onResponseReceived(x);}
return xhr.successHandler(options,x);}};xhr.send=function(options){var c,error,error1,error2,error3,error4,error5,error6,name,ref,sentBinary,url,value,x,xhrTimeout;options=fm.util.extend({sync:false,url:'',method:'POST',content:null,contentBinary:null,headers:{},timeout:15000,abortOnUnload:false,cacheBusterParameterName:'_cb',onRequestCreated:null,onResponseReceived:null,onFailure:null,onSuccess:null},options||{});try{if(window.XMLHttpRequest){x=new XMLHttpRequest();}else{try{x=new ActiveXObject('MSXML2.XMLHTTP.3.0');}catch(undefined){}
if(!x){try{x=new ActiveXObject('Microsoft.XMLHTTP');}catch(undefined){}}}
if(!x){return false;}
url=options.url;if(options.method==='GET'){url=url+(url.indexOf('?')===-1?'?':'&')+options.cacheBusterParameterName+'='+(new Date()).getTime();}
x.open(options.method,url,!options.sync);if(xhr.getDisableBinary()){x.setRequestHeader('X-FM-DisableBinary','true');}
if('withCredentials'in x){x.withCredentials=true;}
if(!xhr.getDisableBinary()&&!options.sync){try{x.responseType='arraybuffer';}catch(error3){error=error3;xhr.setDisableBinary(true);}}
if(options.onRequestCreated){options=options.onRequestCreated(x);ref=options.headers;for(name in ref){value=ref[name];if(name.toLowerCase()!=='referer'&&name.toLowerCase()!=='origin'){x.setRequestHeader(name,value);}}}
if(options.abortOnUnload){c=++xhr._count;xhr._current[c]=x;}
if(!options.sync){x.onreadystatechange=function(){var error4,ex;if(x.readyState>3&&!x._abortingOnUnload){clearTimeout(xhrTimeout);try{x.onreadystatechange=null;}catch(error4){ex=error4;x.onreadystatechange=function(){};}
if(x.status>0){xhr.handler(options,x);}else{xhr.failureHandler(options,'Invalid XHR response.');}
if(options.abortOnUnload){return delete xhr._current[c];}}};}
sentBinary=false;if(!xhr.getDisableBinary()&&options.contentBinary){try{x.send(options.contentBinary.buffer);sentBinary=true;}catch(error4){error1=error4;try{x.send(options.contentBinary);sentBinary=true;}catch(error5){error2=error5;xhr.setDisableBinary(true);}}}
if(!sentBinary){if(options.content){x.setRequestHeader('Content-Type','application/json');x.send(options.content);}else{x.send();}}
xhrTimeout=window.setTimeout(function(){try{x._aborting=true;return x.abort();}catch(undefined){}},options.timeout);if(options.sync){xhr.handler(options,x);if(options.abortOnUnload){delete xhr._current[c];}}
return true;}catch(error6){error=error6;return xhr.failureHandler(options,'XHR request failed. '+(error.message||error.error||error.description||error));}};return xhr;})();fm.postMessage=(function(){function postMessage(){}
postMessage._cache={};postMessage.createFrame=function(options,callback){var activateFrame,callbacks,frame,loadTimeout,record;record=postMessage._cache[options.frameUrl];if(!record){frame=document.createElement('iframe');frame.style.display='none';document.body.appendChild(frame);callbacks=[callback];frame.loading=true;postMessage._cache[options.frameUrl]=record={frame:frame,callbacks:callbacks};loadTimeout=window.setTimeout(function(){var results;frame.loading=false;frame.loaded=false;frame.timedOut=true;results=[];while(callbacks.length>0){results.push(callbacks.shift()(null,'Frame load timed out.'));}
return results;},options.timeout);activateFrame=null;fm.util.observe(frame,'load',function(){var pongTimeout,receivePong;if(frame.timedOut){return;}
clearTimeout(loadTimeout);receivePong=function(e){if(e.source===frame.contentWindow&&e.data==='pong'){if(frame.timedOut){return;}
clearTimeout(pongTimeout);frame.loading=false;frame.loaded=true;frame.timedOut=false;postMessage.listen(options,frame);while(callbacks.length>0){callbacks.shift()(frame);}
return fm.util.unobserve(window,'message',receivePong);}};pongTimeout=window.setTimeout(function(){frame.loading=false;frame.loaded=false;frame.timedOut=true;while(callbacks.length>0){callbacks.shift()(null,'Frame pong timed out.');}
if(receivePong){return fm.util.unobserve(window,'message',receivePong);}},500);fm.util.observe(window,'message',receivePong);return frame.contentWindow.postMessage('ping',postMessage.getOrigin(options.url));});return frame.src=fm.httpTransfer.addQueryToUrl(options.frameUrl,'type','pmf');}else{if(record.frame.loading){return record.callbacks.push(callback);}else{return window.setTimeout(function(){if(record.frame.loaded){return callback(record.frame);}else{return callback(null,'Frame not loaded.');}},1);}}};postMessage._optionsCounter=0;postMessage._optionsCache={};postMessage.getOrigin=function(url){return/\w+:\/\/[^\/]+/.exec(url)[0];};postMessage.send=function(options){options=fm.util.extend({url:'',onFailure:null,onSuccess:null,onRequestCreated:null,onResponseReceived:null},options||{});options.contentBinary=null;return postMessage.createFrame(options,function(frame,error){var message;if(frame){options.id=++postMessage._optionsCounter;postMessage._optionsCache[options.id]=options;return frame.contentWindow.postMessage(fm.json.serialize(options),postMessage.getOrigin(options.url));}else{if(options.onFailure){message='Could not initialize postMessage frame.';if(error){message+=' '+error;}
return options.onFailure({message:message,local:true});}}});};postMessage.listen=function(options,frame){return fm.util.observe(window,'message',function(e){var err,error1;if(e.source===frame.contentWindow){try{e=fm.json.deserialize(e.data);}catch(error1){err=error1;return;}
if(!e.id){return;}
options=postMessage._optionsCache[e.id];if(!options){return;}
if(e.type===1||e.type===2){delete postMessage._optionsCache[e.id];}
if(e.type===1){if(options.onFailure){return options.onFailure(e);}}else if(e.type===2){if(options.onSuccess){return options.onSuccess(e);}}else if(e.type===3){if(options.onRequestCreated){return options.onRequestCreated(null);}}else if(e.type===4){if(options.onResponseReceived){return options.onResponseReceived(null);}}}});};return postMessage;})();fm.jsonp=(function(){function jsonp(){}
jsonp.send=function(options){};jsonp._scriptFrame=null;jsonp._scriptFrameLoaded=false;jsonp._callbackCount=0;jsonp._cb={};jsonp._pastScriptFrames=[];jsonp._scriptFrameDestroyer=null;jsonp.maxUrlLength=2048;jsonp.getNextCallback=function(options){var name,namespace;name='cb'+(jsonp._callbackCount++);namespace='fm.jsonp._cb.';jsonp._cb[name]=function(response){var content,error,error1;try{if(options.onResponseReceived){options.onResponseReceived(null);}
if(options.onSuccess){if(options.robustResponse){content=response[options.contentParameterName];if(!content){content='';}else if(typeof content!=='string'){content=fm.json.serialize(content);}
return options.onSuccess({content:content,statusCode:response[options.statusCodeParameterName]||200,headers:response[options.headersParameterName]||{}});}else{content=response;if(!content){content='';}else if(typeof content!=='string'){content=fm.json.serialize(content);}
return options.onSuccess({content:content,statusCode:200,headers:{}});}}}catch(error1){error=error1;throw error;}finally{jsonp.cleanup((options.useFrame?'parent.':'')+namespace+name,options.useFrame);}};return(options.useFrame?'parent.':'')+namespace+name;};jsonp.failureHandler=function(options,callbackName,message){if(options.onFailure){options.onFailure({message:message});}
return jsonp.cleanup(callbackName,options.useFrame);};jsonp.send=function(options){var callbackName,container,doc,error,error1,error2,script,url;try{options=fm.util.extend({url:'',method:'POST',content:null,headers:{},timeout:15000,canSegmentJsonArray:false,robustResponse:false,callbackParameterName:'jsonp',contentParameterName:'content',methodParameterName:'method',headersParameterName:'headers',statusCodeParameterName:'statusCode',cacheBusterParameterName:'_cb',onRequestCreated:null,onResponseReceived:null,onFailure:null,onSuccess:null},options||{});options.useFrame=true;callbackName=jsonp.getNextCallback(options);if(options.useFrame){if(!jsonp._scriptFrameDestroyer){jsonp._scriptFrameDestroyer=window.setInterval(function(){var j,len,prop,ref;if(jsonp._scriptFrame!==null){jsonp._pastScriptFrames.push(jsonp._scriptFrame);jsonp._scriptFrame=null;jsonp._scriptFrameLoaded=false;if(jsonp._pastScriptFrames.length===2){ref=jsonp._pastScriptFrames[0];for(j=0,len=ref.length;j<len;j++){prop=ref[j];delete jsonp._pastScriptFrames[0][prop];}
document.body.removeChild(jsonp._pastScriptFrames[0]);return jsonp._pastScriptFrames.splice(0,1);}}},300000);}}
container=document.getElementsByTagName('head')[0];if(options.useFrame){if(!jsonp._scriptFrame){jsonp._scriptFrame=document.createElement('iframe');jsonp._scriptFrame.style.display='none';document.body.appendChild(jsonp._scriptFrame);}
doc=jsonp._scriptFrame.contentWindow.document;if(!doc){throw'Could not create script frame.';}
script=doc.createElement('script');}else{script=document.createElement('script');}
script.type='text/javascript';script.charset='utf-8';script.id=callbackName;url=options.url;url=fm.httpTransfer.addQueryToUrl(url,options.methodParameterName,options.method);url=fm.httpTransfer.addQueryToUrl(url,options.headersParameterName,fm.json.serialize(options.headers));url=fm.httpTransfer.addQueryToUrl(url,options.callbackParameterName,callbackName);url=fm.httpTransfer.addQueryToUrl(url,options.cacheBusterParameterName,(new Date()).getTime());url=fm.httpTransfer.addQueryToUrl(url,options.contentParameterName,options.content);script.src=url;if(options.onRequestCreated){options.onRequestCreated(null);}
window.setTimeout(function(){if(jsonp.callbackExists(callbackName)){return jsonp.failureHandler(options,callbackName,'JSONP request timed out.');}},options.timeout);if(options.useFrame){if(!jsonp._scriptFrameLoaded){return fm.util.observe(jsonp._scriptFrame,'load',function(){window.setTimeout(function(){var error,error1;try{container=jsonp._scriptFrame.contentWindow.document.body;return container.appendChild(script);}catch(error1){error=error1;return jsonp.failureHandler(options,callbackName,'JSONP request failed. Could not access script frame.');}},10);return jsonp._scriptFrameLoaded=true;});}else{try{container=jsonp._scriptFrame.contentWindow.document.body;return container.appendChild(script);}catch(error1){error=error1;return jsonp.failureHandler(options,callbackName,'JSONP request failed. Could not access script frame.');}}}else{return container.appendChild(script);}}catch(error2){error=error2;return jsonp.failureHandler(options,callbackName,'JSONP request failed. '+(error.message||error.error||error.description||error));}};jsonp.cleanup=function(callbackName,useFrame){var doc,error,error1,i,j,name,parts,ref,script,scriptFrames;parts=callbackName.split('.');name=parts[parts.length-1];jsonp._cb[name]=null;delete jsonp._cb[name];try{if(useFrame){scriptFrames=jsonp._pastScriptFrames.concat([]);if(jsonp._scriptFrame!==null){scriptFrames.push(jsonp._scriptFrame);}
for(i=j=ref=scriptFrames.length-1;ref<=0?j<=0:j>=0;i=ref<=0?++j:--j){doc=scriptFrames[i].contentWindow.document;if(doc){script=doc.getElementById(callbackName);}
if(script){break;}}
if(script){return doc.body.removeChild(script);}}else{script=document.getElementById(callbackName);if(script){return document.getElementsByTagName('head')[0].removeChild(script);}}}catch(error1){error=error1;if(window&&window.console&&window.console.error){return window.console.error('Could not remove script element. '+(error.message||error.error||error.description||error));}}};jsonp.callbackExists=function(callbackName){var name,parts;parts=callbackName.split('.');name=parts[parts.length-1];return name in jsonp._cb;};return jsonp;})();fm.json=(function(){function json(){}
json.useMicrosoftDateFormat=true;json._dateRegex=/^\/Date\((\d+[\-|\+]?\d{0,4})\)\/$/;json._reviver=function(key,value){var delim,parts,ticks,ticksAndZone;if(value&&typeof value==='string'&&json._dateRegex.test(value)){ticksAndZone=value.match(json._dateRegex)[1];delim=ticksAndZone.indexOf('-')>-1?'-':'+';parts=ticksAndZone.split(delim);ticks=parseInt(parts[0],10);return new Date(ticks);}
return value;};json._build_reviver=function(reviver){if(this.useMicrosoftDateFormat){if(reviver!=null){return(function(_this){return function(key,value){return reviver(key,_this._reviver(key,value));};})(this);}else{return this._reviver;}}else{return reviver;}};Date.prototype.toJSONFM=function(key){if(isFinite(this.valueOf())){return'/Date('+this.getTime()+'-0000)/';}else{return null;}};json.deserialize=function(){var args;args=Array.prototype.slice.call(arguments);if(args.length===0||args[0]===null||args[0]===''){return null;}
args[1]=json._build_reviver(args[1]);return JSON.parse.apply(json,args);};json.serialize=function(){var booleanToJSON,dateToJSON,j,numberToJSON,stringToJSON;if(json.useMicrosoftDateFormat){dateToJSON=Date.prototype.toJSON;stringToJSON=String.prototype.toJSON;numberToJSON=Number.prototype.toJSON;booleanToJSON=Boolean.prototype.toJSON;Date.prototype.toJSON=Date.prototype.toJSONFM;String.prototype.toJSON=String.prototype.toJSONFM;Number.prototype.toJSON=Number.prototype.toJSONFM;Boolean.prototype.toJSON=Boolean.prototype.toJSONFM;j=JSON.stringify.apply(json,arguments);if(typeof j==='undefined'){throw new Error('Cannot serialize undefined to JSON. Try using null instead.');}
j=j.replace(/\//g,'\\/');Date.prototype.toJSON=dateToJSON;String.prototype.toJSON=stringToJSON;Number.prototype.toJSON=numberToJSON;Boolean.prototype.toJSON=booleanToJSON;return j;}
return JSON.stringify.apply(json,arguments);};return json;})();fm.asyncException=(function(){function asyncException(){}
asyncException.asyncThrow=function(ex,source){var message;message='An exception in user code ('+source+') was unhandled.';fm.log.error(message,ex);if(ex.stack){fm.log.error(ex.stack);if(window&&window.console){console.error(ex.stack);}}
return window.setTimeout(function(){throw ex;},1);};return asyncException;})();fm.base64=(function(){function base64(){}
base64.b64ToUint6=function(cc){if(cc>64&&cc<91){return cc-65;}else if(cc>96&&cc<123){return cc-71;}else if(cc>47&&cc<58){return cc+4;}else if(cc===43){return 62;}else if(cc===47){return 63;}else{return 0;}};base64.decode=function(str64,blocksSize){var bi,blen,bytes,i,mod3,mod4,n,ref,si,slen,str;if(typeof Uint8Array==='undefined'){return null;}
str=str64.replace(/[^A-Za-z0-9\+\/]/g,'');slen=str.length;blen=blocksSize?Math.ceil((slen*3+1>>2)/blocksSize)*blocksSize:slen*3+1>>2;bytes=new Uint8Array(blen);n=0;bi=0;for(si=i=0,ref=slen-1;0<=ref?i<=ref:i>=ref;si=0<=ref?++i:--i){mod4=si&3;n|=this.b64ToUint6(str.charCodeAt(si))<<18-6*mod4;if(mod4===3||slen-si===1){mod3=0;while((mod3<3)&&(bi<blen)){bytes[bi]=n>>>(16>>>mod3&24)&255;mod3++;bi++;}
n=0;}}
return bytes;};base64.uint6ToB64=function(b){if(b<26){return b+65;}else if(b<52){return b+71;}else if(b<62){return b-4;}else if(b===62){return 43;}else if(b===63){return 47;}else{return 65;}};base64.encode=function(bytes){var bi,blen,i,mod3,n,ref,str;if(typeof Uint8Array==='undefined'){return null;}
str='';blen=bytes.length;n=0;for(bi=i=0,ref=blen-1;0<=ref?i<=ref:i>=ref;bi=0<=ref?++i:--i){mod3=bi%3;n|=bytes[bi]<<(16>>>mod3&24);if(mod3===2||bytes.length-bi===1){str+=String.fromCharCode(this.uint6ToB64(n>>>18&63),this.uint6ToB64(n>>>12&63),this.uint6ToB64(n>>>6&63),this.uint6ToB64(n&63));n=0;}}
return str.replace(/A(?=A$|$)/g,'=');};return base64;})();fm.encoding=(function(){function encoding(){}
encoding.getUtf8=function(){return new fm.encoding();};encoding.prototype.getString=function(bytes,index,count){var c,i,s,str;if(!bytes){return null;}
if(typeof index==='undefined'){index=0;}
if(typeof count==='undefined'){count=bytes.length;}
str='';i=index;while(i<(index+count)){if(bytes[i]<=0x7f){c=bytes[i];}else{if((bytes[i]>>5)===0x6){c=((bytes[i]&0x1f)<<6)|(bytes[++i]&0x3f);}else if((bytes[i]>>4)===0xe){c=((bytes[i]&0xf)<<12)|((bytes[++i]&0x3f)<<6)|(bytes[++i]&0x3f);}else{s=1;while(bytes[i]&(0x20>>>s)){s++;}
c=bytes[i]&(0x1f>>>s);while(s-->=0){c=(c<<6)^(bytes[++i]&0x3f);}}}
str+=String.fromCharCode(c);i++;}
return str;};encoding.prototype.getBytes=function(str){var c,i,idx,j,n,utf8;if(!str){return null;}
n=str.length;idx=0;utf8=new Uint8Array(new ArrayBuffer(n*4));i=0;while(i<n){c=str.charCodeAt(i);if(c<=0x7F){utf8[idx++]=c;}else if(c<=0x7FF){utf8[idx++]=0xC0|(c>>>6);utf8[idx++]=0x80|(c&0x3F);}else if(c<=0xFFFF){utf8[idx++]=0xE0|(c>>>12);utf8[idx++]=0x80|((c>>>6)&0x3F);utf8[idx++]=0x80|(c&0x3F);}else{j=4;while(c>>(6*j)){j++;}
utf8[idx++]=((0xFF00>>>j)&0xFF)|(c>>>(6*--j));while(j--){utf8[idx++]=0x80|((c>>>(6*j))&0x3F);}}
i++;}
return utf8.subarray(0,idx);};encoding.prototype.getByteCount=function(str){return this.getBytes(str).length;};return encoding;})();var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.randomizer=(function(superClass){extend(randomizer,superClass);function randomizer(){this.randomString=bind(this.randomString,this);this.nextDouble=bind(this.nextDouble,this);this.next=bind(this.next,this);return randomizer.__super__.constructor.apply(this,arguments);}
randomizer.prototype.next=function(minValue,maxValue){if(!minValue&&!maxValue){minValue=0;maxValue=2147483647;}else if(!maxValue){maxValue=minValue;minValue=0;}
return Math.floor(Math.random()*(maxValue-minValue))+minValue;};randomizer.prototype.nextDouble=function(){return Math.random();};randomizer.prototype._randomCharset='abcdefghijklmnopqrstuvwxyz0123456789';randomizer.prototype.randomString=function(size){var i,j,ref,s;s='';for(i=j=0,ref=size-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){s+=this._randomCharset.charAt(this.next(this._randomCharset.length));}
return s;};return randomizer;})(fm.object);fm.crypto=(function(){function crypto(){}
crypto.base64Regex=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/;crypto.base64Encode=function(b){if(!b){return null;}
return fm.base64.encode(b);};crypto.base64Decode=function(s){if(!s){return null;}
if(!crypto.base64Regex.test(s)){return null;}
return fm.base64.decode(s);};crypto.tryBase64Encode=function(b,result){var encoded,error,error1;try{encoded=crypto.base64Encode(b);result.setValue(encoded);if(!encoded){return false;}
return true;}catch(error1){error=error1;result.setValue(null);return false;}};crypto.tryBase64Decode=function(s,result){var decoded,error,error1;try{decoded=crypto.base64Decode(s);result.setValue(decoded);if(!decoded){return false;}
return true;}catch(error1){error=error1;result.setValue(null);return false;}};return crypto;})();fm.httpMethod={Get:1,Head:2,Post:3,Put:4,Patch:5,Delete:6};fm.backoffMode={Additive:1,Constant:2,None:3};fm.jsonCheckerMode={Array:1,Done:2,Key:3,Object:4,String:5};fm.logLevel={Debug:1,Info:2,Warn:3,Error:4,Fatal:5,None:6};fm.stringType={None:1,Single:2,Double:3};fm.webSocketStatusCode={Normal:1000,GoingAway:1001,ProtocolError:1002,InvalidType:1003,NoStatus:1005,Abnormal:1006,InvalidData:1007,PolicyViolation:1008,MessageTooLarge:1009,UnsupportedExtension:1010,UnexpectedCondition:1011,SecureHandshakeFailure:1015};var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.serializable=(function(superClass){extend(serializable,superClass);serializable.prototype.__serialized=null;serializable.prototype._isDirty=false;serializable.prototype._isSerialized=false;function serializable(){this.setSerialized=bind(this.setSerialized,this);this.setIsSerialized=bind(this.setIsSerialized,this);this.setIsDirty=bind(this.setIsDirty,this);this.getSerialized=bind(this.getSerialized,this);this.getIsSerialized=bind(this.getIsSerialized,this);this.getIsDirty=bind(this.getIsDirty,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serializable.__super__.constructor.call(this);this.setIsSerialized(false);this.setIsDirty(false);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serializable.__super__.constructor.call(this);this.setIsSerialized(false);this.setIsDirty(false);return instance;}
serializable.prototype.getIsDirty=function(){return this._isDirty;};serializable.prototype.getIsSerialized=function(){return this._isSerialized;};serializable.prototype.getSerialized=function(){return this.__serialized;};serializable.prototype.setIsDirty=function(){var value;value=arguments[0];return this._isDirty=value;};serializable.prototype.setIsSerialized=function(){var value;value=arguments[0];return this._isSerialized=value;};serializable.prototype.setSerialized=function(){var value;value=arguments[0];this.__serialized=value;this.setIsSerialized(true);return this.setIsDirty(false);};return serializable;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.dynamic=(function(superClass){extend(dynamic,superClass);dynamic.prototype.__dynamicProperties=null;dynamic.prototype.__dynamicPropertiesLock=null;function dynamic(){this.unsetDynamicValue=bind(this.unsetDynamicValue,this);this.setDynamicValue=bind(this.setDynamicValue,this);this.setDynamicProperties=bind(this.setDynamicProperties,this);this.getDynamicValue=bind(this.getDynamicValue,this);this.getDynamicProperties=bind(this.getDynamicProperties,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=dynamic.__super__.constructor.call(this);this.__dynamicProperties={};this.__dynamicPropertiesLock=new fm.object();fm.util.attachProperties(this,arguments[0]);return instance;}
instance=dynamic.__super__.constructor.call(this);this.__dynamicProperties={};this.__dynamicPropertiesLock=new fm.object();return instance;}
dynamic.prototype.getDynamicProperties=function(){var _var0,dictionary,i,len,str;dictionary={};_var0=fm.hashExtensions.getKeys(this.__dynamicProperties);for(i=0,len=_var0.length;i<len;i++){str=_var0[i];dictionary[str]=this.__dynamicProperties[str];}
return dictionary;};dynamic.prototype.getDynamicValue=function(){var _var0,_var1,key,obj2;key=arguments[0];obj2=null;_var0=new fm.holder(obj2);_var1=fm.hashExtensions.tryGetValue(this.__dynamicProperties,key,_var0);obj2=_var0.getValue();if(_var1){return obj2;}
return null;};dynamic.prototype.setDynamicProperties=function(){var _var0,dictionary,i,len,str,value;value=arguments[0];if(fm.global.equals(value,null)){value={};}
dictionary={};_var0=fm.hashExtensions.getKeys(value);for(i=0,len=_var0.length;i<len;i++){str=_var0[i];dictionary[str]=value[str];}
return this.__dynamicProperties=dictionary;};dynamic.prototype.setDynamicValue=function(){var key,value;key=arguments[0];value=arguments[1];return this.__dynamicProperties[key]=value;};dynamic.prototype.unsetDynamicValue=function(){var key;key=arguments[0];return fm.hashExtensions.remove(this.__dynamicProperties,key);};return dynamic;})(fm.serializable);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpResponseReceivedArgs=(function(superClass){extend(httpResponseReceivedArgs,superClass);httpResponseReceivedArgs.prototype._requestArgs=null;httpResponseReceivedArgs.prototype._response=null;httpResponseReceivedArgs.prototype._sender=null;function httpResponseReceivedArgs(){this.setSender=bind(this.setSender,this);this.setResponse=bind(this.setResponse,this);this.setRequestArgs=bind(this.setRequestArgs,this);this.getSender=bind(this.getSender,this);this.getResponse=bind(this.getResponse,this);this.getRequestArgs=bind(this.getRequestArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpResponseReceivedArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpResponseReceivedArgs.__super__.constructor.call(this);return instance;}
httpResponseReceivedArgs.prototype.getRequestArgs=function(){return this._requestArgs;};httpResponseReceivedArgs.prototype.getResponse=function(){return this._response;};httpResponseReceivedArgs.prototype.getSender=function(){return this._sender;};httpResponseReceivedArgs.prototype.setRequestArgs=function(){var value;value=arguments[0];return this._requestArgs=value;};httpResponseReceivedArgs.prototype.setResponse=function(){var value;value=arguments[0];return this._response=value;};httpResponseReceivedArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return httpResponseReceivedArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketCloseArgs=(function(superClass){extend(webSocketCloseArgs,superClass);webSocketCloseArgs.prototype._onComplete=null;webSocketCloseArgs.prototype._reason=null;webSocketCloseArgs.prototype._statusCode=null;function webSocketCloseArgs(){this.setStatusCode=bind(this.setStatusCode,this);this.setReason=bind(this.setReason,this);this.setOnComplete=bind(this.setOnComplete,this);this.getStatusCode=bind(this.getStatusCode,this);this.getReason=bind(this.getReason,this);this.getOnComplete=bind(this.getOnComplete,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketCloseArgs.__super__.constructor.call(this);this.setStatusCode(fm.webSocketStatusCode.Normal);this.setReason(fm.stringExtensions.empty);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketCloseArgs.__super__.constructor.call(this);this.setStatusCode(fm.webSocketStatusCode.Normal);this.setReason(fm.stringExtensions.empty);return instance;}
webSocketCloseArgs.prototype.getOnComplete=function(){return this._onComplete;};webSocketCloseArgs.prototype.getReason=function(){return this._reason;};webSocketCloseArgs.prototype.getStatusCode=function(){return this._statusCode;};webSocketCloseArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};webSocketCloseArgs.prototype.setReason=function(){var value;value=arguments[0];return this._reason=value;};webSocketCloseArgs.prototype.setStatusCode=function(){var value;value=arguments[0];return this._statusCode=value;};return webSocketCloseArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketCloseCompleteArgs=(function(superClass){extend(webSocketCloseCompleteArgs,superClass);webSocketCloseCompleteArgs.prototype._closeArgs=null;webSocketCloseCompleteArgs.prototype._reason=null;webSocketCloseCompleteArgs.prototype._statusCode=null;function webSocketCloseCompleteArgs(){this.setStatusCode=bind(this.setStatusCode,this);this.setReason=bind(this.setReason,this);this.setCloseArgs=bind(this.setCloseArgs,this);this.getStatusCode=bind(this.getStatusCode,this);this.getReason=bind(this.getReason,this);this.getCloseArgs=bind(this.getCloseArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketCloseCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketCloseCompleteArgs.__super__.constructor.call(this);return instance;}
webSocketCloseCompleteArgs.prototype.getCloseArgs=function(){return this._closeArgs;};webSocketCloseCompleteArgs.prototype.getReason=function(){return this._reason;};webSocketCloseCompleteArgs.prototype.getStatusCode=function(){return this._statusCode;};webSocketCloseCompleteArgs.prototype.setCloseArgs=function(){var value;value=arguments[0];return this._closeArgs=value;};webSocketCloseCompleteArgs.prototype.setReason=function(){var value;value=arguments[0];return this._reason=value;};webSocketCloseCompleteArgs.prototype.setStatusCode=function(){var value;value=arguments[0];return this._statusCode=value;};return webSocketCloseCompleteArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketOpenArgs=(function(superClass){extend(webSocketOpenArgs,superClass);webSocketOpenArgs.prototype._handshakeTimeout=0;webSocketOpenArgs.prototype._headers=null;webSocketOpenArgs.prototype._onFailure=null;webSocketOpenArgs.prototype._onReceive=null;webSocketOpenArgs.prototype._onRequestCreated=null;webSocketOpenArgs.prototype._onResponseReceived=null;webSocketOpenArgs.prototype._onStreamFailure=null;webSocketOpenArgs.prototype._onSuccess=null;webSocketOpenArgs.prototype._sender=null;webSocketOpenArgs.prototype._streamTimeout=0;function webSocketOpenArgs(){this.setStreamTimeout=bind(this.setStreamTimeout,this);this.setSender=bind(this.setSender,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnStreamFailure=bind(this.setOnStreamFailure,this);this.setOnResponseReceived=bind(this.setOnResponseReceived,this);this.setOnRequestCreated=bind(this.setOnRequestCreated,this);this.setOnReceive=bind(this.setOnReceive,this);this.setOnFailure=bind(this.setOnFailure,this);this.setHeaders=bind(this.setHeaders,this);this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this);this.getStreamTimeout=bind(this.getStreamTimeout,this);this.getSender=bind(this.getSender,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnStreamFailure=bind(this.getOnStreamFailure,this);this.getOnResponseReceived=bind(this.getOnResponseReceived,this);this.getOnRequestCreated=bind(this.getOnRequestCreated,this);this.getOnReceive=bind(this.getOnReceive,this);this.getOnFailure=bind(this.getOnFailure,this);this.getHeaders=bind(this.getHeaders,this);this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketOpenArgs.__super__.constructor.call(this);this.setHandshakeTimeout(15000);this.setStreamTimeout(40000);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketOpenArgs.__super__.constructor.call(this);this.setHandshakeTimeout(15000);this.setStreamTimeout(40000);return instance;}
webSocketOpenArgs.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout;};webSocketOpenArgs.prototype.getHeaders=function(){return this._headers;};webSocketOpenArgs.prototype.getOnFailure=function(){return this._onFailure;};webSocketOpenArgs.prototype.getOnReceive=function(){return this._onReceive;};webSocketOpenArgs.prototype.getOnRequestCreated=function(){return this._onRequestCreated;};webSocketOpenArgs.prototype.getOnResponseReceived=function(){return this._onResponseReceived;};webSocketOpenArgs.prototype.getOnStreamFailure=function(){return this._onStreamFailure;};webSocketOpenArgs.prototype.getOnSuccess=function(){return this._onSuccess;};webSocketOpenArgs.prototype.getSender=function(){return this._sender;};webSocketOpenArgs.prototype.getStreamTimeout=function(){return this._streamTimeout;};webSocketOpenArgs.prototype.setHandshakeTimeout=function(){var value;value=arguments[0];return this._handshakeTimeout=value;};webSocketOpenArgs.prototype.setHeaders=function(){var value;value=arguments[0];return this._headers=value;};webSocketOpenArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};webSocketOpenArgs.prototype.setOnReceive=function(){var value;value=arguments[0];return this._onReceive=value;};webSocketOpenArgs.prototype.setOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=value;};webSocketOpenArgs.prototype.setOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=value;};webSocketOpenArgs.prototype.setOnStreamFailure=function(){var value;value=arguments[0];return this._onStreamFailure=value;};webSocketOpenArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};webSocketOpenArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};webSocketOpenArgs.prototype.setStreamTimeout=function(){var value;value=arguments[0];return this._streamTimeout=value;};return webSocketOpenArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketOpenFailureArgs=(function(superClass){extend(webSocketOpenFailureArgs,superClass);webSocketOpenFailureArgs.prototype._exception=null;webSocketOpenFailureArgs.prototype._openArgs=null;webSocketOpenFailureArgs.prototype._statusCode=null;function webSocketOpenFailureArgs(){this.setStatusCode=bind(this.setStatusCode,this);this.setOpenArgs=bind(this.setOpenArgs,this);this.setException=bind(this.setException,this);this.getStatusCode=bind(this.getStatusCode,this);this.getOpenArgs=bind(this.getOpenArgs,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketOpenFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketOpenFailureArgs.__super__.constructor.call(this);return instance;}
webSocketOpenFailureArgs.prototype.getException=function(){return this._exception;};webSocketOpenFailureArgs.prototype.getOpenArgs=function(){return this._openArgs;};webSocketOpenFailureArgs.prototype.getStatusCode=function(){return this._statusCode;};webSocketOpenFailureArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};webSocketOpenFailureArgs.prototype.setOpenArgs=function(){var value;value=arguments[0];return this._openArgs=value;};webSocketOpenFailureArgs.prototype.setStatusCode=function(){var value;value=arguments[0];return this._statusCode=value;};return webSocketOpenFailureArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketOpenSuccessArgs=(function(superClass){extend(webSocketOpenSuccessArgs,superClass);webSocketOpenSuccessArgs.prototype._openArgs=null;function webSocketOpenSuccessArgs(){this.setOpenArgs=bind(this.setOpenArgs,this);this.getOpenArgs=bind(this.getOpenArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketOpenSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketOpenSuccessArgs.__super__.constructor.call(this);return instance;}
webSocketOpenSuccessArgs.prototype.getOpenArgs=function(){return this._openArgs;};webSocketOpenSuccessArgs.prototype.setOpenArgs=function(){var value;value=arguments[0];return this._openArgs=value;};return webSocketOpenSuccessArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketReceiveArgs=(function(superClass){extend(webSocketReceiveArgs,superClass);webSocketReceiveArgs.prototype._binaryMessage=null;webSocketReceiveArgs.prototype._openArgs=null;webSocketReceiveArgs.prototype._textMessage=null;function webSocketReceiveArgs(){this.setTextMessage=bind(this.setTextMessage,this);this.setOpenArgs=bind(this.setOpenArgs,this);this.setBinaryMessage=bind(this.setBinaryMessage,this);this.getTextMessage=bind(this.getTextMessage,this);this.getOpenArgs=bind(this.getOpenArgs,this);this.getIsText=bind(this.getIsText,this);this.getBinaryMessage=bind(this.getBinaryMessage,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketReceiveArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketReceiveArgs.__super__.constructor.call(this);return instance;}
webSocketReceiveArgs.prototype.getBinaryMessage=function(){return this._binaryMessage;};webSocketReceiveArgs.prototype.getIsText=function(){return!fm.global.equals(this.getTextMessage(),null);};webSocketReceiveArgs.prototype.getOpenArgs=function(){return this._openArgs;};webSocketReceiveArgs.prototype.getTextMessage=function(){return this._textMessage;};webSocketReceiveArgs.prototype.setBinaryMessage=function(){var value;value=arguments[0];return this._binaryMessage=value;};webSocketReceiveArgs.prototype.setOpenArgs=function(){var value;value=arguments[0];return this._openArgs=value;};webSocketReceiveArgs.prototype.setTextMessage=function(){var value;value=arguments[0];return this._textMessage=value;};return webSocketReceiveArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketSendArgs=(function(superClass){extend(webSocketSendArgs,superClass);webSocketSendArgs.prototype._binaryMessage=null;webSocketSendArgs.prototype._textMessage=null;webSocketSendArgs.prototype._timeout=0;function webSocketSendArgs(){this.setTimeout=bind(this.setTimeout,this);this.setTextMessage=bind(this.setTextMessage,this);this.setBinaryMessage=bind(this.setBinaryMessage,this);this.getTimeout=bind(this.getTimeout,this);this.getTextMessage=bind(this.getTextMessage,this);this.getIsText=bind(this.getIsText,this);this.getBinaryMessage=bind(this.getBinaryMessage,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketSendArgs.__super__.constructor.call(this);this.setTimeout(15000);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketSendArgs.__super__.constructor.call(this);this.setTimeout(15000);return instance;}
webSocketSendArgs.prototype.getBinaryMessage=function(){return this._binaryMessage;};webSocketSendArgs.prototype.getIsText=function(){return!fm.global.equals(this.getTextMessage(),null);};webSocketSendArgs.prototype.getTextMessage=function(){return this._textMessage;};webSocketSendArgs.prototype.getTimeout=function(){return this._timeout;};webSocketSendArgs.prototype.setBinaryMessage=function(){var value;value=arguments[0];return this._binaryMessage=value;};webSocketSendArgs.prototype.setTextMessage=function(){var value;value=arguments[0];return this._textMessage=value;};webSocketSendArgs.prototype.setTimeout=function(){var value;value=arguments[0];return this._timeout=value;};return webSocketSendArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketStreamFailureArgs=(function(superClass){extend(webSocketStreamFailureArgs,superClass);webSocketStreamFailureArgs.prototype._exception=null;webSocketStreamFailureArgs.prototype._openArgs=null;webSocketStreamFailureArgs.prototype._statusCode=null;function webSocketStreamFailureArgs(){this.setStatusCode=bind(this.setStatusCode,this);this.setOpenArgs=bind(this.setOpenArgs,this);this.setException=bind(this.setException,this);this.getStatusCode=bind(this.getStatusCode,this);this.getOpenArgs=bind(this.getOpenArgs,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketStreamFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketStreamFailureArgs.__super__.constructor.call(this);return instance;}
webSocketStreamFailureArgs.prototype.getException=function(){return this._exception;};webSocketStreamFailureArgs.prototype.getOpenArgs=function(){return this._openArgs;};webSocketStreamFailureArgs.prototype.getStatusCode=function(){return this._statusCode;};webSocketStreamFailureArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};webSocketStreamFailureArgs.prototype.setOpenArgs=function(){var value;value=arguments[0];return this._openArgs=value;};webSocketStreamFailureArgs.prototype.setStatusCode=function(){var value;value=arguments[0];return this._statusCode=value;};return webSocketStreamFailureArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.baseTimeoutTimer=(function(superClass){extend(baseTimeoutTimer,superClass);function baseTimeoutTimer(){this.stop=bind(this.stop,this);this.start=bind(this.start,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseTimeoutTimer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseTimeoutTimer.__super__.constructor.call(this);return instance;}
baseTimeoutTimer.prototype.start=function(){var timeout;return timeout=arguments[0];};baseTimeoutTimer.prototype.stop=function(){};return baseTimeoutTimer;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.baseWebSocket=(function(superClass){extend(baseWebSocket,superClass);function baseWebSocket(){this.send=bind(this.send,this);this.open=bind(this.open,this);this.getSecure=bind(this.getSecure,this);this.getIsOpen=bind(this.getIsOpen,this);this.getBufferedAmount=bind(this.getBufferedAmount,this);this.close=bind(this.close,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseWebSocket.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseWebSocket.__super__.constructor.call(this);return instance;}
baseWebSocket.prototype.close=function(){var closeArgs;if(arguments.length===0){return;}
if(arguments.length===1){closeArgs=arguments[0];}};baseWebSocket.prototype.getBufferedAmount=function(){};baseWebSocket.prototype.getIsOpen=function(){};baseWebSocket.prototype.getSecure=function(){};baseWebSocket.prototype.open=function(){var openArgs;return openArgs=arguments[0];};baseWebSocket.prototype.send=function(){var sendArgs;return sendArgs=arguments[0];};return baseWebSocket;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.byteHolder=(function(superClass){extend(byteHolder,superClass);byteHolder.prototype._value=0;function byteHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=byteHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=byteHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=byteHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
byteHolder.prototype.getValue=function(){return this._value;};byteHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return byteHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.callbackState=(function(superClass){extend(callbackState,superClass);callbackState.prototype._callback=null;callbackState.prototype._state=null;function callbackState(){this.setState=bind(this.setState,this);this.setCallback=bind(this.setCallback,this);this.getState=bind(this.getState,this);this.getCallback=bind(this.getCallback,this);this.execute=bind(this.execute,this);var callback,instance,state;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=callbackState.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
callback=arguments[0];state=arguments[1];instance=callbackState.__super__.constructor.call(this);this.setCallback(callback);this.setState(state);return instance;}
callbackState.prototype.execute=function(){if(!fm.global.equals(this.getCallback(),null)){return this.getCallback()(this.getState());}};callbackState.prototype.getCallback=function(){return this._callback;};callbackState.prototype.getState=function(){return this._state;};callbackState.prototype.setCallback=function(){var value;value=arguments[0];return this._callback=value;};callbackState.prototype.setState=function(){var value;value=arguments[0];return this._state=value;};return callbackState;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.characterHolder=(function(superClass){extend(characterHolder,superClass);characterHolder.prototype._value='\0';function characterHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=characterHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=characterHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=characterHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
characterHolder.prototype.getValue=function(){return this._value;};characterHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return characterHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.logProvider=(function(superClass){extend(logProvider,superClass);logProvider.prototype._level=null;function logProvider(){this.writeLine=bind(this.writeLine,this);this.warnFormat=bind(this.warnFormat,this);this.warn=bind(this.warn,this);this.setLevel=bind(this.setLevel,this);this.log=bind(this.log,this);this.isEnabled=bind(this.isEnabled,this);this.infoFormat=bind(this.infoFormat,this);this.info=bind(this.info,this);this.getLevel=bind(this.getLevel,this);this.getIsWarnEnabled=bind(this.getIsWarnEnabled,this);this.getIsInfoEnabled=bind(this.getIsInfoEnabled,this);this.getIsFatalEnabled=bind(this.getIsFatalEnabled,this);this.getIsErrorEnabled=bind(this.getIsErrorEnabled,this);this.getIsDebugEnabled=bind(this.getIsDebugEnabled,this);this.formatAndWriteLine=bind(this.formatAndWriteLine,this);this.fatalFormat=bind(this.fatalFormat,this);this.fatal=bind(this.fatal,this);this.errorFormat=bind(this.errorFormat,this);this.error=bind(this.error,this);this.debugFormat=bind(this.debugFormat,this);this.debug=bind(this.debug,this);this._log=bind(this._log,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=logProvider.__super__.constructor.call(this);this.setLevel(fm.logLevel.None);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=logProvider.__super__.constructor.call(this);this.setLevel(fm.logLevel.None);return instance;}
logProvider.getPrefix=function(){var includeTimestamp,level,prefixLevel;level=arguments[0];includeTimestamp=arguments[1];prefixLevel=fm.logProvider.getPrefixLevel(level);if(includeTimestamp){prefixLevel=fm.stringExtensions.format("{0} {1}",prefixLevel,fm.logProvider.getPrefixTimestamp(fm.dateTime.getUtcNow()));}
return prefixLevel;};logProvider.getPrefixLevel=function(){var level;level=arguments[0];switch(level){case fm.logLevel.Debug:return"DEBUG";case fm.logLevel.Info:return"INFO ";case fm.logLevel.Warn:return"WARN ";case fm.logLevel.Error:return"ERROR";case fm.logLevel.Fatal:return"FATAL";case fm.logLevel.None:return"NONE ";}
return"?????";};logProvider.getPrefixTimestamp=function(){var str,str2,str3,str4,str5,str6,timestamp;timestamp=arguments[0];str=fm.intExtensions.toString(timestamp.getYear());str2=fm.intExtensions.toString(timestamp.getMonth());str3=fm.intExtensions.toString(timestamp.getDay());str4=fm.intExtensions.toString(timestamp.getHour());str5=fm.intExtensions.toString(timestamp.getMinute());str6=fm.intExtensions.toString(timestamp.getSecond());while(str.length<4){str=fm.stringExtensions.concat("0",str);}
while(str2.length<2){str2=fm.stringExtensions.concat("0",str2);}
while(str3.length<2){str3=fm.stringExtensions.concat("0",str3);}
while(str4.length<2){str4=fm.stringExtensions.concat("0",str4);}
while(str5.length<2){str5=fm.stringExtensions.concat("0",str5);}
while(str6.length<2){str6=fm.stringExtensions.concat("0",str6);}
return fm.stringExtensions.format("{0}/{1}/{2}-{3}:{4}:{5}",[str,str2,str3,str4,str5,str6]);};logProvider.prototype._log=function(){var error,error1,ex,level,message,obj1;if(arguments.length===2){level=arguments[0];message=arguments[1];if(this.isEnabled(level)){try{this.log(level,message);}catch(error){obj1=error;}finally{}}
return;}
if(arguments.length===3){level=arguments[0];message=arguments[1];ex=arguments[2];if(this.isEnabled(level)){try{this.log(level,message,ex);}catch(error1){obj1=error1;}finally{}}}};logProvider.prototype.debug=function(){var ex,message;if(arguments.length===2){message=arguments[0];ex=arguments[1];this._log(fm.logLevel.Debug,message,ex);return;}
if(arguments.length===1){message=arguments[0];this._log(fm.logLevel.Debug,message);}};logProvider.prototype.debugFormat=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.debug(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.error=function(){var ex,message;if(arguments.length===1){message=arguments[0];this._log(fm.logLevel.Error,message);return;}
if(arguments.length===2){message=arguments[0];ex=arguments[1];this._log(fm.logLevel.Error,message,ex);}};logProvider.prototype.errorFormat=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.error(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.fatal=function(){var ex,message;if(arguments.length===2){message=arguments[0];ex=arguments[1];this._log(fm.logLevel.Fatal,message,ex);return;}
if(arguments.length===1){message=arguments[0];this._log(fm.logLevel.Fatal,message);}};logProvider.prototype.fatalFormat=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.fatal(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.formatAndWriteLine=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.writeLine(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.getIsDebugEnabled=function(){return this.isEnabled(fm.logLevel.Debug);};logProvider.prototype.getIsErrorEnabled=function(){return this.isEnabled(fm.logLevel.Error);};logProvider.prototype.getIsFatalEnabled=function(){return this.isEnabled(fm.logLevel.Fatal);};logProvider.prototype.getIsInfoEnabled=function(){return this.isEnabled(fm.logLevel.Info);};logProvider.prototype.getIsWarnEnabled=function(){return this.isEnabled(fm.logLevel.Warn);};logProvider.prototype.getLevel=function(){return this._level;};logProvider.prototype.info=function(){var ex,message;if(arguments.length===1){message=arguments[0];this._log(fm.logLevel.Info,message);return;}
if(arguments.length===2){message=arguments[0];ex=arguments[1];this._log(fm.logLevel.Info,message,ex);}};logProvider.prototype.infoFormat=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.info(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.isEnabled=function(){var level;level=arguments[0];return level>=this.getLevel();};logProvider.prototype.log=function(){var ex,level,message;if(arguments.length===2){level=arguments[0];message=arguments[1];return;}
if(arguments.length===3){level=arguments[0];message=arguments[1];ex=arguments[2];}};logProvider.prototype.setLevel=function(){var value;value=arguments[0];return this._level=value;};logProvider.prototype.warn=function(){var ex,message;if(arguments.length===2){message=arguments[0];ex=arguments[1];this._log(fm.logLevel.Warn,message,ex);return;}
if(arguments.length===1){message=arguments[0];this._log(fm.logLevel.Warn,message);}};logProvider.prototype.warnFormat=function(){var args,error,format,obj1;format=arguments[0];args=arguments[1];try{return this.warn(fm.stringExtensions.format(format,args));}catch(error){obj1=error;}finally{}};logProvider.prototype.writeLine=function(){var text;return text=arguments[0];};return logProvider;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.booleanHolder=(function(superClass){extend(booleanHolder,superClass);booleanHolder.prototype._value=false;function booleanHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=booleanHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=booleanHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=booleanHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
booleanHolder.prototype.getValue=function(){return this._value;};booleanHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return booleanHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketTransfer=(function(superClass){extend(webSocketTransfer,superClass);webSocketTransfer.prototype.__url=null;webSocketTransfer.prototype._handshakeTimeout=0;webSocketTransfer.prototype._onOpenFailure=null;webSocketTransfer.prototype._onOpenSuccess=null;webSocketTransfer.prototype._onRequestCreated=null;webSocketTransfer.prototype._onResponseReceived=null;webSocketTransfer.prototype._onStreamFailure=null;webSocketTransfer.prototype._sender=null;webSocketTransfer.prototype._streamTimeout=0;function webSocketTransfer(){this.shutdown=bind(this.shutdown,this);this.setUrl=bind(this.setUrl,this);this.setStreamTimeout=bind(this.setStreamTimeout,this);this.setSender=bind(this.setSender,this);this.setOnStreamFailure=bind(this.setOnStreamFailure,this);this.setOnResponseReceived=bind(this.setOnResponseReceived,this);this.setOnRequestCreated=bind(this.setOnRequestCreated,this);this.setOnOpenSuccess=bind(this.setOnOpenSuccess,this);this.setOnOpenFailure=bind(this.setOnOpenFailure,this);this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this);this.sendAsync=bind(this.sendAsync,this);this.send=bind(this.send,this);this.open=bind(this.open,this);this.getUrl=bind(this.getUrl,this);this.getStreamTimeout=bind(this.getStreamTimeout,this);this.getSender=bind(this.getSender,this);this.getOnStreamFailure=bind(this.getOnStreamFailure,this);this.getOnResponseReceived=bind(this.getOnResponseReceived,this);this.getOnRequestCreated=bind(this.getOnRequestCreated,this);this.getOnOpenSuccess=bind(this.getOnOpenSuccess,this);this.getOnOpenFailure=bind(this.getOnOpenFailure,this);this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var instance,url;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketTransfer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
url=arguments[0];instance=webSocketTransfer.__super__.constructor.call(this);this.setUrl(url);return instance;}
webSocketTransfer.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout;};webSocketTransfer.prototype.getOnOpenFailure=function(){return this._onOpenFailure;};webSocketTransfer.prototype.getOnOpenSuccess=function(){return this._onOpenSuccess;};webSocketTransfer.prototype.getOnRequestCreated=function(){return this._onRequestCreated;};webSocketTransfer.prototype.getOnResponseReceived=function(){return this._onResponseReceived;};webSocketTransfer.prototype.getOnStreamFailure=function(){return this._onStreamFailure;};webSocketTransfer.prototype.getSender=function(){return this._sender;};webSocketTransfer.prototype.getStreamTimeout=function(){return this._streamTimeout;};webSocketTransfer.prototype.getUrl=function(){return this.__url;};webSocketTransfer.prototype.open=function(){var headers;return headers=arguments[0];};webSocketTransfer.prototype.send=function(){var requestArgs;return requestArgs=arguments[0];};webSocketTransfer.prototype.sendAsync=function(){var callback,requestArgs;requestArgs=arguments[0];return callback=arguments[1];};webSocketTransfer.prototype.setHandshakeTimeout=function(){var value;value=arguments[0];return this._handshakeTimeout=value;};webSocketTransfer.prototype.setOnOpenFailure=function(){var value;value=arguments[0];return this._onOpenFailure=value;};webSocketTransfer.prototype.setOnOpenSuccess=function(){var value;value=arguments[0];return this._onOpenSuccess=value;};webSocketTransfer.prototype.setOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=value;};webSocketTransfer.prototype.setOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=value;};webSocketTransfer.prototype.setOnStreamFailure=function(){var value;value=arguments[0];return this._onStreamFailure=value;};webSocketTransfer.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};webSocketTransfer.prototype.setStreamTimeout=function(){var value;value=arguments[0];return this._streamTimeout=value;};webSocketTransfer.prototype.setUrl=function(){var value;value=arguments[0];value=value.replace("https://","wss://");value=value.replace("http://","ws://");return this.__url=value;};webSocketTransfer.prototype.shutdown=function(){};return webSocketTransfer;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketTransferFactory=(function(superClass){extend(webSocketTransferFactory,superClass);webSocketTransferFactory._createWebSocketTransfer=null;function webSocketTransferFactory(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketTransferFactory.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketTransferFactory.__super__.constructor.call(this);return instance;}
webSocketTransferFactory.defaultCreateWebSocketTransfer=function(){var url;url=arguments[0];return new fm.webSocketWebRequestTransfer(url);};webSocketTransferFactory.getCreateWebSocketTransfer=function(){return fm.webSocketTransferFactory._createWebSocketTransfer;};webSocketTransferFactory.getWebSocketTransfer=function(){var transfer,url;url=arguments[0];if(fm.global.equals(fm.webSocketTransferFactory.getCreateWebSocketTransfer(),null)){webSocketTransferFactory.setCreateWebSocketTransfer(webSocketTransferFactory.defaultCreateWebSocketTransfer);}
transfer=fm.webSocketTransferFactory.getCreateWebSocketTransfer()(url);if(fm.global.equals(transfer,null)){transfer=fm.webSocketTransferFactory.defaultCreateWebSocketTransfer(url);}
return transfer;};webSocketTransferFactory.setCreateWebSocketTransfer=function(){var value;value=arguments[0];return webSocketTransferFactory._createWebSocketTransfer=value;};return webSocketTransferFactory;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.jsonProvider=(function(superClass){extend(jsonProvider,superClass);function jsonProvider(){this.serialize=bind(this.serialize,this);this.deserialize=bind(this.deserialize,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=jsonProvider.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=jsonProvider.__super__.constructor.call(this);return instance;}
jsonProvider.prototype.deserialize=function(){var valueJson;return valueJson=arguments[0];};jsonProvider.prototype.serialize=function(){var value;return value=arguments[0];};return jsonProvider;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.nullJsonProvider=(function(superClass){extend(nullJsonProvider,superClass);function nullJsonProvider(){this.serialize=bind(this.serialize,this);this.deserialize=bind(this.deserialize,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=nullJsonProvider.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=nullJsonProvider.__super__.constructor.call(this);return instance;}
nullJsonProvider.prototype.deserialize=function(){var valueJson;valueJson=arguments[0];return null;};nullJsonProvider.prototype.serialize=function(){var value;value=arguments[0];return null;};return nullJsonProvider;})(fm.jsonProvider);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.doubleHolder=(function(superClass){extend(doubleHolder,superClass);doubleHolder.prototype._value=0.0;function doubleHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=doubleHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=doubleHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=doubleHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
doubleHolder.prototype.getValue=function(){return this._value;};doubleHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return doubleHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.floatHolder=(function(superClass){extend(floatHolder,superClass);floatHolder.prototype._value=0.0;function floatHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=floatHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=floatHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=floatHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
floatHolder.prototype.getValue=function(){return this._value;};floatHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return floatHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpRequestArgs=(function(superClass){extend(httpRequestArgs,superClass);httpRequestArgs.prototype.__headers=null;httpRequestArgs.prototype._binaryContent=null;httpRequestArgs.prototype._method=null;httpRequestArgs.prototype._onRequestCreated=null;httpRequestArgs.prototype._onResponseReceived=null;httpRequestArgs.prototype._sender=null;httpRequestArgs.prototype._textContent=null;httpRequestArgs.prototype._timeout=0;httpRequestArgs.prototype._url=null;function httpRequestArgs(){this.setUrl=bind(this.setUrl,this);this.setTimeout=bind(this.setTimeout,this);this.setTextContent=bind(this.setTextContent,this);this.setSender=bind(this.setSender,this);this.setOnResponseReceived=bind(this.setOnResponseReceived,this);this.setOnRequestCreated=bind(this.setOnRequestCreated,this);this.setMethod=bind(this.setMethod,this);this.setHeaders=bind(this.setHeaders,this);this.setBinaryContent=bind(this.setBinaryContent,this);this.getUrl=bind(this.getUrl,this);this.getTimeout=bind(this.getTimeout,this);this.getTextContent=bind(this.getTextContent,this);this.getSender=bind(this.getSender,this);this.getOnResponseReceived=bind(this.getOnResponseReceived,this);this.getOnRequestCreated=bind(this.getOnRequestCreated,this);this.getMethod=bind(this.getMethod,this);this.getHeaders=bind(this.getHeaders,this);this.getBinaryContent=bind(this.getBinaryContent,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpRequestArgs.__super__.constructor.call(this);this.setTimeout(15000);this.setMethod(fm.httpMethod.Post);this.__headers=new fm.nameValueCollection();fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpRequestArgs.__super__.constructor.call(this);this.setTimeout(15000);this.setMethod(fm.httpMethod.Post);this.__headers=new fm.nameValueCollection();return instance;}
httpRequestArgs.prototype.getBinaryContent=function(){return this._binaryContent;};httpRequestArgs.prototype.getHeaders=function(){return this.__headers;};httpRequestArgs.prototype.getMethod=function(){return this._method;};httpRequestArgs.prototype.getOnRequestCreated=function(){return this._onRequestCreated;};httpRequestArgs.prototype.getOnResponseReceived=function(){return this._onResponseReceived;};httpRequestArgs.prototype.getSender=function(){return this._sender;};httpRequestArgs.prototype.getTextContent=function(){return this._textContent;};httpRequestArgs.prototype.getTimeout=function(){return this._timeout;};httpRequestArgs.prototype.getUrl=function(){return this._url;};httpRequestArgs.prototype.setBinaryContent=function(){var value;value=arguments[0];return this._binaryContent=value;};httpRequestArgs.prototype.setHeaders=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){return this.__headers=new fm.nameValueCollection();}else{return this.__headers=value;}};httpRequestArgs.prototype.setMethod=function(){var value;value=arguments[0];return this._method=value;};httpRequestArgs.prototype.setOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=value;};httpRequestArgs.prototype.setOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=value;};httpRequestArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};httpRequestArgs.prototype.setTextContent=function(){var value;value=arguments[0];return this._textContent=value;};httpRequestArgs.prototype.setTimeout=function(){var value;value=arguments[0];return this._timeout=value;};httpRequestArgs.prototype.setUrl=function(){var value;value=arguments[0];return this._url=value;};return httpRequestArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpRequestCreatedArgs=(function(superClass){extend(httpRequestCreatedArgs,superClass);httpRequestCreatedArgs.prototype._request=null;httpRequestCreatedArgs.prototype._requestArgs=null;httpRequestCreatedArgs.prototype._sender=null;function httpRequestCreatedArgs(){this.setSender=bind(this.setSender,this);this.setRequestArgs=bind(this.setRequestArgs,this);this.setRequest=bind(this.setRequest,this);this.getSender=bind(this.getSender,this);this.getRequestArgs=bind(this.getRequestArgs,this);this.getRequest=bind(this.getRequest,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpRequestCreatedArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpRequestCreatedArgs.__super__.constructor.call(this);return instance;}
httpRequestCreatedArgs.prototype.getRequest=function(){return this._request;};httpRequestCreatedArgs.prototype.getRequestArgs=function(){return this._requestArgs;};httpRequestCreatedArgs.prototype.getSender=function(){return this._sender;};httpRequestCreatedArgs.prototype.setRequest=function(){var value;value=arguments[0];return this._request=value;};httpRequestCreatedArgs.prototype.setRequestArgs=function(){var value;value=arguments[0];return this._requestArgs=value;};httpRequestCreatedArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return httpRequestCreatedArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpResponseArgs=(function(superClass){extend(httpResponseArgs,superClass);httpResponseArgs.prototype._binaryContent=null;httpResponseArgs.prototype._exception=null;httpResponseArgs.prototype._headers=null;httpResponseArgs.prototype._requestArgs=null;httpResponseArgs.prototype._statusCode=0;httpResponseArgs.prototype._textContent=null;function httpResponseArgs(){this.setTextContent=bind(this.setTextContent,this);this.setStatusCode=bind(this.setStatusCode,this);this.setRequestArgs=bind(this.setRequestArgs,this);this.setHeaders=bind(this.setHeaders,this);this.setException=bind(this.setException,this);this.setBinaryContent=bind(this.setBinaryContent,this);this.getTextContent=bind(this.getTextContent,this);this.getStatusCode=bind(this.getStatusCode,this);this.getRequestArgs=bind(this.getRequestArgs,this);this.getHeaders=bind(this.getHeaders,this);this.getException=bind(this.getException,this);this.getBinaryContent=bind(this.getBinaryContent,this);var instance,requestArgs;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpResponseArgs.__super__.constructor.call(this);this.setHeaders(new fm.nameValueCollection());fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=httpResponseArgs.__super__.constructor.call(this);this.setHeaders(new fm.nameValueCollection());return instance;}
if(arguments.length===1){requestArgs=arguments[0];httpResponseArgs.call(this);this.setRequestArgs(requestArgs);return instance;}}
httpResponseArgs.prototype.getBinaryContent=function(){return this._binaryContent;};httpResponseArgs.prototype.getException=function(){return this._exception;};httpResponseArgs.prototype.getHeaders=function(){return this._headers;};httpResponseArgs.prototype.getRequestArgs=function(){return this._requestArgs;};httpResponseArgs.prototype.getStatusCode=function(){return this._statusCode;};httpResponseArgs.prototype.getTextContent=function(){return this._textContent;};httpResponseArgs.prototype.setBinaryContent=function(){var value;value=arguments[0];return this._binaryContent=value;};httpResponseArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};httpResponseArgs.prototype.setHeaders=function(){var value;value=arguments[0];return this._headers=value;};httpResponseArgs.prototype.setRequestArgs=function(){var value;value=arguments[0];return this._requestArgs=value;};httpResponseArgs.prototype.setStatusCode=function(){var value;value=arguments[0];return this._statusCode=value;};httpResponseArgs.prototype.setTextContent=function(){var value;value=arguments[0];return this._textContent=value;};return httpResponseArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpSendFinishArgs=(function(superClass){extend(httpSendFinishArgs,superClass);httpSendFinishArgs.prototype._requestBinaryContent=null;httpSendFinishArgs.prototype._requestTextContent=null;httpSendFinishArgs.prototype._responseBinaryContent=null;httpSendFinishArgs.prototype._responseHeaders=null;httpSendFinishArgs.prototype._responseTextContent=null;httpSendFinishArgs.prototype._sender=null;function httpSendFinishArgs(){this.setSender=bind(this.setSender,this);this.setResponseTextContent=bind(this.setResponseTextContent,this);this.setResponseHeaders=bind(this.setResponseHeaders,this);this.setResponseBinaryContent=bind(this.setResponseBinaryContent,this);this.setRequestTextContent=bind(this.setRequestTextContent,this);this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this);this.getSender=bind(this.getSender,this);this.getResponseTextContent=bind(this.getResponseTextContent,this);this.getResponseHeaders=bind(this.getResponseHeaders,this);this.getResponseBinaryContent=bind(this.getResponseBinaryContent,this);this.getRequestTextContent=bind(this.getRequestTextContent,this);this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpSendFinishArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpSendFinishArgs.__super__.constructor.call(this);return instance;}
httpSendFinishArgs.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent;};httpSendFinishArgs.prototype.getRequestTextContent=function(){return this._requestTextContent;};httpSendFinishArgs.prototype.getResponseBinaryContent=function(){return this._responseBinaryContent;};httpSendFinishArgs.prototype.getResponseHeaders=function(){return this._responseHeaders;};httpSendFinishArgs.prototype.getResponseTextContent=function(){return this._responseTextContent;};httpSendFinishArgs.prototype.getSender=function(){return this._sender;};httpSendFinishArgs.prototype.setRequestBinaryContent=function(){var value;value=arguments[0];return this._requestBinaryContent=value;};httpSendFinishArgs.prototype.setRequestTextContent=function(){var value;value=arguments[0];return this._requestTextContent=value;};httpSendFinishArgs.prototype.setResponseBinaryContent=function(){var value;value=arguments[0];return this._responseBinaryContent=value;};httpSendFinishArgs.prototype.setResponseHeaders=function(){var value;value=arguments[0];return this._responseHeaders=value;};httpSendFinishArgs.prototype.setResponseTextContent=function(){var value;value=arguments[0];return this._responseTextContent=value;};httpSendFinishArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return httpSendFinishArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpSendStartArgs=(function(superClass){extend(httpSendStartArgs,superClass);httpSendStartArgs.prototype._requestBinaryContent=null;httpSendStartArgs.prototype._requestTextContent=null;httpSendStartArgs.prototype._sender=null;function httpSendStartArgs(){this.setSender=bind(this.setSender,this);this.setRequestTextContent=bind(this.setRequestTextContent,this);this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this);this.getSender=bind(this.getSender,this);this.getRequestTextContent=bind(this.getRequestTextContent,this);this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpSendStartArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpSendStartArgs.__super__.constructor.call(this);return instance;}
httpSendStartArgs.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent;};httpSendStartArgs.prototype.getRequestTextContent=function(){return this._requestTextContent;};httpSendStartArgs.prototype.getSender=function(){return this._sender;};httpSendStartArgs.prototype.setRequestBinaryContent=function(){var value;value=arguments[0];return this._requestBinaryContent=value;};httpSendStartArgs.prototype.setRequestTextContent=function(){var value;value=arguments[0];return this._requestTextContent=value;};httpSendStartArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return httpSendStartArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.integerHolder=(function(superClass){extend(integerHolder,superClass);integerHolder.prototype._value=0;function integerHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=integerHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=integerHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=integerHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
integerHolder.prototype.getValue=function(){return this._value;};integerHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return integerHolder;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.lockedRandomizer=(function(superClass){extend(lockedRandomizer,superClass);lockedRandomizer._randomizer=null;lockedRandomizer._randomLock=null;function lockedRandomizer(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=lockedRandomizer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}}
lockedRandomizer.next=function(){var maxValue,minValue;if(arguments.length===2){minValue=arguments[0];maxValue=arguments[1];return fm.lockedRandomizer._randomizer.next(minValue,maxValue);}
if(arguments.length===0){return fm.lockedRandomizer._randomizer.next();}
if(arguments.length===1){maxValue=arguments[0];return fm.lockedRandomizer._randomizer.next(maxValue);}};lockedRandomizer.nextBytes=function(){var buffer;buffer=arguments[0];return fm.lockedRandomizer._randomizer.nextBytes(buffer);};lockedRandomizer.nextDouble=function(){return fm.lockedRandomizer._randomizer.nextDouble();};lockedRandomizer.nextLong=function(){return fm.lockedRandomizer._randomizer.nextDouble()*9.22337203685478e+18;};lockedRandomizer.randomString=function(){var size;size=arguments[0];return fm.lockedRandomizer._randomizer.randomString(size);};lockedRandomizer._randomizer=new fm.randomizer();lockedRandomizer._randomLock=new fm.object();return lockedRandomizer;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.log=(function(superClass){extend(log,superClass);log.__provider=null;function log(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=log.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=log.__super__.constructor.call(this);return instance;}
log.debug=function(){var ex,message;if(arguments.length===1){message=arguments[0];fm.log.getProvider().debug(message);return;}
if(arguments.length===2){message=arguments[0];ex=arguments[1];fm.log.getProvider().debug(message,ex);}};log.debugFormat=function(){var args,format;format=arguments[0];args=arguments[1];return fm.log.getProvider().debugFormat(format,args);};log.error=function(){var ex,message;if(arguments.length===2){message=arguments[0];ex=arguments[1];fm.log.getProvider().error(message,ex);return;}
if(arguments.length===1){message=arguments[0];fm.log.getProvider().error(message);}};log.errorFormat=function(){var args,format;format=arguments[0];args=arguments[1];return fm.log.getProvider().errorFormat(format,args);};log.fatal=function(){var ex,message;if(arguments.length===1){message=arguments[0];fm.log.getProvider().fatal(message);return;}
if(arguments.length===2){message=arguments[0];ex=arguments[1];fm.log.getProvider().fatal(message,ex);}};log.fatalFormat=function(){var args,format;format=arguments[0];args=arguments[1];return fm.log.getProvider().fatalFormat(format,args);};log.getDefault=function(){return new fm.nullLogProvider();};log.getIsDebugEnabled=function(){return fm.log.getProvider().getIsDebugEnabled();};log.getIsErrorEnabled=function(){return fm.log.getProvider().getIsErrorEnabled();};log.getIsFatalEnabled=function(){return fm.log.getProvider().getIsFatalEnabled();};log.getIsInfoEnabled=function(){return fm.log.getProvider().getIsInfoEnabled();};log.getIsWarnEnabled=function(){return fm.log.getProvider().getIsWarnEnabled();};log.getProvider=function(){if(fm.global.equals(fm.log.__provider,null)){log.__provider=fm.log.getDefault();}
return fm.log.__provider;};log.info=function(){var ex,message;if(arguments.length===2){message=arguments[0];ex=arguments[1];fm.log.getProvider().info(message,ex);return;}
if(arguments.length===1){message=arguments[0];fm.log.getProvider().info(message);}};log.infoFormat=function(){var args,format;format=arguments[0];args=arguments[1];return fm.log.getProvider().infoFormat(format,args);};log.setProvider=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){value=fm.log.getDefault();}
return log.__provider=value;};log.warn=function(){var ex,message;if(arguments.length===1){message=arguments[0];fm.log.getProvider().warn(message);return;}
if(arguments.length===2){message=arguments[0];ex=arguments[1];fm.log.getProvider().warn(message,ex);}};log.warnFormat=function(){var args,format;format=arguments[0];args=arguments[1];return fm.log.getProvider().warnFormat(format,args);};log.writeLine=function(){var args,format,text;if(arguments.length===1){text=arguments[0];fm.log.getProvider().writeLine(text);return;}
if(arguments.length===2){format=arguments[0];args=arguments[1];fm.log.getProvider().formatAndWriteLine(format,args);}};return log;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.longHolder=(function(superClass){extend(longHolder,superClass);longHolder.prototype._value=0;function longHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=longHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=longHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=longHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
longHolder.prototype.getValue=function(){return this._value;};longHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return longHolder;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.shortHolder=(function(superClass){extend(shortHolder,superClass);shortHolder.prototype._value=0;function shortHolder(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);var instance,value;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=shortHolder.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=shortHolder.__super__.constructor.call(this);return instance;}
if(arguments.length===1){value=arguments[0];instance=shortHolder.__super__.constructor.call(this);this.setValue(value);return instance;}}
shortHolder.prototype.getValue=function(){return this._value;};shortHolder.prototype.setValue=function(){var value;value=arguments[0];return this._value=value;};return shortHolder;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.splitter=(function(superClass){extend(splitter,superClass);function splitter(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=splitter.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=splitter.__super__.constructor.call(this);return instance;}
splitter.split=function(){var ch,ch2,delimiter,i,list,num2,startIndex,str;str=arguments[0];delimiter=arguments[1];if(fm.global.equals(str,null)){throw new Error("str cannot be null.");}
if(fm.global.equals(delimiter,null)){throw new Error("delimiter cannot be null.");}
if(fm.global.equals(delimiter.length,0)){return[str];}
startIndex=0;num2=0;list=[];i=0;while(i<str.length){try{ch=str.charAt(i);ch2=delimiter.charAt(num2);if(fm.global.equals(ch,ch2)){if(fm.global.equals(num2,delimiter.length-1)){fm.arrayExtensions.add(list,fm.stringExtensions.substring(str,startIndex,(i-num2)-startIndex));startIndex=i+1;num2=0;}else{num2++;}}else{num2=0;}}finally{i++;}}
fm.arrayExtensions.add(list,str.substring(startIndex));return fm.arrayExtensions.toArray(list);};return splitter;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.textLogProvider=(function(superClass){extend(textLogProvider,superClass);textLogProvider.prototype.__callback=null;textLogProvider.prototype.__text=null;textLogProvider.prototype.__textLock=null;function textLogProvider(){this.writeLine=bind(this.writeLine,this);this.setCallback=bind(this.setCallback,this);this.log=bind(this.log,this);this.getText=bind(this.getText,this);this.getCallback=bind(this.getCallback,this);this.clear=bind(this.clear,this);var instance,level;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){textLogProvider.call(this,fm.logLevel.Warn);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){textLogProvider.call(this,fm.logLevel.Warn);return instance;}
if(arguments.length===1){level=arguments[0];instance=textLogProvider.__super__.constructor.call(this);this.__text=new fm.stringBuilder();this.__textLock=new fm.object();this.setLevel(level);return instance;}}
textLogProvider.prototype.clear=function(){var str;str=this.__text.toString();this.__text=new fm.stringBuilder();return str;};textLogProvider.prototype.getCallback=function(){return this.__callback;};textLogProvider.prototype.getText=function(){return this.__text.toString();};textLogProvider.prototype.log=function(){var ex,level,message;if(arguments.length===3){level=arguments[0];message=arguments[1];ex=arguments[2];this.log(level,fm.stringExtensions.format("{0}\n{1}",message,ex));return;}
if(arguments.length===2){level=arguments[0];message=arguments[1];this.writeLine(fm.stringExtensions.format("{0} {1}",fm.logProvider.getPrefix(level,true),message));}};textLogProvider.prototype.setCallback=function(){var str,value;value=arguments[0];str=this.__text.toString();if(!fm.stringExtensions.isNullOrEmpty(str)){if(fm.stringExtensions.endsWith(str,"\n")){str=fm.stringExtensions.substring(str,0,str.length-1);}
value(str);}
return this.__callback=value;};textLogProvider.prototype.writeLine=function(){var text;text=arguments[0];this.__text.append(fm.stringExtensions.concat(text,"\n"));if(!fm.global.equals(this.__callback,null)){return this.__callback(text);}};return textLogProvider;})(fm.logProvider);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.stringAssistant=(function(superClass){extend(stringAssistant,superClass);function stringAssistant(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=stringAssistant.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=stringAssistant.__super__.constructor.call(this);return instance;}
stringAssistant.isNullOrWhiteSpace=function(){var s;s=arguments[0];return(fm.global.equals(s,null))||fm.stringExtensions.isNullOrEmpty(fm.stringExtensions.trim(s));};stringAssistant.subArray=function(){var array,count,i,offset,strArray;if(arguments.length===2){array=arguments[0];offset=arguments[1];return fm.stringAssistant.subArray(array,offset,array.length-offset);}
if(arguments.length===3){array=arguments[0];offset=arguments[1];count=arguments[2];strArray=new Array(count);i=0;while(i<count){try{strArray[i]=array[offset+i];}finally{i++;}}
return strArray;}};return stringAssistant;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpTransfer=(function(superClass){extend(httpTransfer,superClass);httpTransfer.__wildcardCharacters=null;httpTransfer.prototype._httpTransferCallbackKey=null;httpTransfer._onSendFinish=null;httpTransfer._onSendStart=null;function httpTransfer(){this.startRequest=bind(this.startRequest,this);this.shutdown=bind(this.shutdown,this);this.sendTextAsync=bind(this.sendTextAsync,this);this.sendText=bind(this.sendText,this);this.sendBinaryAsync=bind(this.sendBinaryAsync,this);this.sendBinary=bind(this.sendBinary,this);this.sendAsyncCallback=bind(this.sendAsyncCallback,this);this.sendAsync=bind(this.sendAsync,this);this.send=bind(this.send,this);this.raiseOnSendStart=bind(this.raiseOnSendStart,this);this.raiseOnSendFinish=bind(this.raiseOnSendFinish,this);this.finishRequest=bind(this.finishRequest,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpTransfer.__super__.constructor.call(this);this._httpTransferCallbackKey="fm.httpTransfer.callback";fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpTransfer.__super__.constructor.call(this);this._httpTransferCallbackKey="fm.httpTransfer.callback";return instance;}
httpTransfer.addOnSendFinish=function(){var value;value=arguments[0];return fm.httpTransfer._onSendFinish=fm.delegate.combine(fm.httpTransfer._onSendFinish,value);};httpTransfer.addOnSendStart=function(){var value;value=arguments[0];return fm.httpTransfer._onSendStart=fm.delegate.combine(fm.httpTransfer._onSendStart,value);};httpTransfer.addQueryToUrl=function(){var key,url,value;if(arguments.length===2){url=arguments[0];key=arguments[1];return fm.httpTransfer.addQueryToUrl(url,key,null);}
if(arguments.length===3){url=arguments[0];key=arguments[1];value=arguments[2];if(fm.stringExtensions.isNullOrEmpty(key)){return url;}
if(fm.global.equals(value,null)){value=fm.stringExtensions.empty;}
key=fm.uri.escapeDataString(key);value=fm.uri.escapeDataString(value);return fm.stringExtensions.concat([url,(fm.global.equals(fm.stringExtensions.indexOf(url,"?",fm.stringComparison.OrdinalIgnoreCase),-1)?"?":"&"),key,"=",value]);}};httpTransfer.getRandomWildcardCharacter=function(){var startIndex,wildcardCharacters;wildcardCharacters=fm.httpTransfer.getWildcardCharacters();startIndex=new fm.randomizer().next(wildcardCharacters.length);return fm.stringExtensions.substring(wildcardCharacters,startIndex,1);};httpTransfer.getWildcardCharacters=function(){return fm.httpTransfer.__wildcardCharacters;};httpTransfer.removeOnSendFinish=function(){var value;value=arguments[0];return fm.httpTransfer._onSendFinish=fm.delegate.remove(fm.httpTransfer._onSendFinish,value);};httpTransfer.removeOnSendStart=function(){var value;value=arguments[0];return fm.httpTransfer._onSendStart=fm.delegate.remove(fm.httpTransfer._onSendStart,value);};httpTransfer.replaceWildcards=function(){var url;url=arguments[0];return url.replace("*",fm.httpTransfer.getRandomWildcardCharacter());};httpTransfer.setWildcardCharacters=function(){var value;value=arguments[0];return httpTransfer.__wildcardCharacters=value;};httpTransfer.prototype.finishRequest=function(){var responseArgs;responseArgs=arguments[0];return this.raiseOnSendFinish(responseArgs);};httpTransfer.prototype.raiseOnSendFinish=function(){var onSendFinish,p,responseArgs;responseArgs=arguments[0];onSendFinish=fm.httpTransfer._onSendFinish;if(!fm.global.equals(onSendFinish,null)){p=new fm.httpSendFinishArgs();p.setSender(responseArgs.getRequestArgs().getSender());p.setRequestBinaryContent(responseArgs.getRequestArgs().getBinaryContent());p.setRequestTextContent(responseArgs.getRequestArgs().getTextContent());p.setResponseBinaryContent(responseArgs.getBinaryContent());p.setResponseTextContent(responseArgs.getTextContent());p.setResponseHeaders(responseArgs.getHeaders());return onSendFinish(p);}};httpTransfer.prototype.raiseOnSendStart=function(){var onSendStart,p,requestArgs;requestArgs=arguments[0];onSendStart=fm.httpTransfer._onSendStart;if(!fm.global.equals(onSendStart,null)){p=new fm.httpSendStartArgs();p.setSender(requestArgs.getSender());p.setRequestBinaryContent(requestArgs.getBinaryContent());p.setRequestTextContent(requestArgs.getTextContent());return onSendStart(p);}};httpTransfer.prototype.send=function(){var args,args2,error,exception,requestArgs;requestArgs=arguments[0];this.startRequest(requestArgs);try{if(!fm.global.equals(requestArgs.getBinaryContent(),null)){args=this.sendBinary(requestArgs);}else{args=this.sendText(requestArgs);}}catch(error){exception=error;args2=new fm.httpResponseArgs(requestArgs);args2.setException(exception);args=args2;}finally{}
this.finishRequest(args);return args;};httpTransfer.prototype.sendAsync=function(){var callback,error,exception,p,requestArgs;requestArgs=arguments[0];callback=arguments[1];this.startRequest(requestArgs);requestArgs.setDynamicValue(this._httpTransferCallbackKey,callback);try{if(!fm.global.equals(requestArgs.getBinaryContent(),null)){return this.sendBinaryAsync(requestArgs,this.sendAsyncCallback);}else{return this.sendTextAsync(requestArgs,this.sendAsyncCallback);}}catch(error){exception=error;p=new fm.httpResponseArgs(requestArgs);p.setException(exception);return callback(p);}finally{}};httpTransfer.prototype.sendAsyncCallback=function(){var dynamicValue,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getRequestArgs().getDynamicValue(this._httpTransferCallbackKey);responseArgs.getRequestArgs().unsetDynamicValue(this._httpTransferCallbackKey);this.finishRequest(responseArgs);return dynamicValue(responseArgs);};httpTransfer.prototype.sendBinary=function(){var requestArgs;return requestArgs=arguments[0];};httpTransfer.prototype.sendBinaryAsync=function(){var callback,requestArgs;requestArgs=arguments[0];return callback=arguments[1];};httpTransfer.prototype.sendText=function(){var requestArgs;return requestArgs=arguments[0];};httpTransfer.prototype.sendTextAsync=function(){var callback,requestArgs;requestArgs=arguments[0];return callback=arguments[1];};httpTransfer.prototype.shutdown=function(){};httpTransfer.prototype.startRequest=function(){var requestArgs;requestArgs=arguments[0];return this.raiseOnSendStart(requestArgs);};httpTransfer.__wildcardCharacters="abcdefghijklmnopqrstuvwxyz";return httpTransfer;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpTransferFactory=(function(superClass){extend(httpTransferFactory,superClass);httpTransferFactory._createHttpTransfer=null;function httpTransferFactory(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpTransferFactory.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpTransferFactory.__super__.constructor.call(this);return instance;}
httpTransferFactory.defaultCreateHttpTransfer=function(){return new fm.httpWebRequestTransfer();};httpTransferFactory.getCreateHttpTransfer=function(){return fm.httpTransferFactory._createHttpTransfer;};httpTransferFactory.getHttpTransfer=function(){var transfer;if(fm.global.equals(fm.httpTransferFactory.getCreateHttpTransfer(),null)){httpTransferFactory.setCreateHttpTransfer(httpTransferFactory.defaultCreateHttpTransfer);}
transfer=fm.httpTransferFactory.getCreateHttpTransfer()();if(fm.global.equals(transfer,null)){transfer=fm.httpTransferFactory.defaultCreateHttpTransfer();}
return transfer;};httpTransferFactory.setCreateHttpTransfer=function(){var value;value=arguments[0];return httpTransferFactory._createHttpTransfer=value;};return httpTransferFactory;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.jsonChecker=(function(superClass){extend(jsonChecker,superClass);jsonChecker.prototype.__depth=0;jsonChecker.prototype.__offset=0;jsonChecker.prototype.__stack=null;jsonChecker.prototype.__state=0;jsonChecker._ascii_class=null;jsonChecker._state_transition_table=null;function jsonChecker(){this.push=bind(this.push,this);this.pop=bind(this.pop,this);this.onError=bind(this.onError,this);this.finalCheck=bind(this.finalCheck,this);this.checkString=bind(this.checkString,this);this.check=bind(this.check,this);var depth,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){jsonChecker.call(this,0);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){jsonChecker.call(this,0);return instance;}
if(arguments.length===1){depth=arguments[0];instance=jsonChecker.__super__.constructor.call(this);if(depth<0){throw new Error("Invalid depth.");}
this.__state=0;this.__depth=depth;this.__stack=new fm.stack(depth);this.push(fm.jsonCheckerMode.Done);return instance;}}
jsonChecker.prototype.check=function(){var ch,mode,num,num2;ch=arguments[0];if(ch<0){this.onError();}
if(ch>=128){num=30;}else{num=fm.jsonChecker._ascii_class[ch];if(num<=-1){this.onError();}}
num2=fm.jsonChecker._state_transition_table[this.__state][num];if(num2>=0){this.__state=num2;return this.__offset=this.__offset+1;}else{if(fm.global.equals(num2,-9)){this.pop(fm.jsonCheckerMode.Key);this.__state=1;}else{if(fm.global.equals(num2,-8)){this.pop(fm.jsonCheckerMode.Object);this.__state=1;}else{if(fm.global.equals(num2,-7)){this.pop(fm.jsonCheckerMode.Array);this.__state=1;}else{if(fm.global.equals(num2,-6)){this.push(fm.jsonCheckerMode.Key);this.__state=2;}else{if(fm.global.equals(num2,-5)){this.push(fm.jsonCheckerMode.Array);this.__state=6;}else{if(fm.global.equals(num2,-4)){mode=this.__stack.peek();if(fm.global.equals(mode,fm.jsonCheckerMode.Key)){this.__state=4;}else{if((fm.global.equals(mode,fm.jsonCheckerMode.Array))||(fm.global.equals(mode,fm.jsonCheckerMode.Object))){this.__state=1;}else{if(fm.global.equals(mode,fm.jsonCheckerMode.Done)){this.push(fm.jsonCheckerMode.String);this.__state=7;}else{if(fm.global.equals(mode,fm.jsonCheckerMode.String)){this.pop(fm.jsonCheckerMode.String);this.__state=1;}else{this.onError();}}}}}else{if(fm.global.equals(num2,-3)){mode=this.__stack.peek();if(fm.global.equals(mode,fm.jsonCheckerMode.Object)){this.pop(fm.jsonCheckerMode.Object);this.push(fm.jsonCheckerMode.Key);this.__state=3;}else{if(fm.global.equals(mode,fm.jsonCheckerMode.Array)){this.__state=5;}else{this.onError();}}}else{if(fm.global.equals(num2,-2)){this.pop(fm.jsonCheckerMode.Key);this.push(fm.jsonCheckerMode.Object);this.__state=5;}else{this.onError();}}}}}}}}
return this.__offset=this.__offset+1;}};jsonChecker.prototype.checkString=function(){var _var0,_var1,_var2,_var3,decimalResult,doubleResult,error,exception1,i,str;str=arguments[0];doubleResult=0;decimalResult=0;_var0=new fm.holder(doubleResult);_var1=fm.parseAssistant.tryParseDoubleValue(str,_var0);doubleResult=_var0.getValue();_var2=new fm.holder(decimalResult);_var3=fm.parseAssistant.tryParseDecimalValue(str,_var2);decimalResult=_var2.getValue();if((((fm.global.equals(str,"true"))||(fm.global.equals(str,"false")))||((fm.global.equals(str,"null"))||_var1))||_var3){return true;}
try{i=0;while(i<str.length){try{this.check(fm.convert.toInt32(str.charAt(i)));}finally{i++;}}
this.finalCheck();return true;}catch(error){exception1=error;return false;}finally{}};jsonChecker.prototype.finalCheck=function(){if(!fm.global.equals(this.__state,1)){this.onError();}
return this.pop(fm.jsonCheckerMode.Done);};jsonChecker.prototype.onError=function(){throw new Error(fm.stringExtensions.format("Invalid JSON text at character offset {0}.",fm.intExtensions.toString(this.__offset,"N0")));};jsonChecker.prototype.pop=function(){var mode;mode=arguments[0];if(!fm.global.equals(this.__stack.pop(),mode)){return this.onError();}};jsonChecker.prototype.push=function(){var mode;mode=arguments[0];if((this.__depth>0)&&(this.__stack.getCount()>=this.__depth)){this.onError();}
return this.__stack.push(mode);};jsonChecker._ascii_class=[-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,30,8,30,30,30,30,30,30,30,30,11,7,12,13,10,14,15,15,15,15,15,15,15,15,15,6,30,30,30,30,30,30,28,28,28,28,29,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,4,9,5,30,30,30,16,17,18,19,20,21,30,30,30,30,30,22,30,23,30,30,30,24,25,26,27,30,30,30,30,30,2,30,3,30,30];jsonChecker._state_transition_table=[[0,0,-6,-1,-5,-1,-1,-1,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,2,-1,-9,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,3,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,4,-1,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,5,-6,-1,-5,-1,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[6,6,-6,-1,-5,-7,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[7,-1,7,7,7,7,7,7,-4,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,7,-1,7,7,-1,7,9,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,10,10,10,10,10,10,10,-1,-1,-1,-1,-1,-1,10,10,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,11,11,11,11,11,11,11,-1,-1,-1,-1,-1,-1,11,11,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,12,12,12,12,12,12,12,12,-1,-1,-1,-1,-1,-1,12,12,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,7,7,7,7,7,-1,-1,-1,-1,-1,-1,7,7,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,15,15,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,16,16,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,18,18,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,21,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,22,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,25,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,28,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,29,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1]];return jsonChecker;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.nullLogProvider=(function(superClass){extend(nullLogProvider,superClass);function nullLogProvider(){this.writeLine=bind(this.writeLine,this);this.log=bind(this.log,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=nullLogProvider.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=nullLogProvider.__super__.constructor.call(this);return instance;}
nullLogProvider.prototype.log=function(){var ex,level,message;if(arguments.length===3){level=arguments[0];message=arguments[1];ex=arguments[2];return;}
if(arguments.length===2){level=arguments[0];message=arguments[1];}};nullLogProvider.prototype.writeLine=function(){var text;return text=arguments[0];};return nullLogProvider;})(fm.logProvider);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.serializer=(function(superClass){extend(serializer,superClass);function serializer(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serializer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serializer.__super__.constructor.call(this);return instance;}
serializer.charToUnicodeString=function(){var ch,ch2,ch3,ch4,value;value=arguments[0];ch=fm.serializer.intToHex((value>>12)&15);ch2=fm.serializer.intToHex((value>>8)&15);ch3=fm.serializer.intToHex((value>>4)&15);ch4=fm.serializer.intToHex(value&15);return fm.stringExtensions.concat(["\\u",ch.toString(),ch2.toString(),ch3.toString(),ch4.toString()]);};serializer.deserializeBoolean=function(){var _var0,_var1,boolResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
boolResult=false;_var0=new fm.holder(boolResult);_var1=fm.parseAssistant.tryParseBooleanValue(valueJson,_var0);boolResult=_var0.getValue();if(_var1){return boolResult;}}
return null;};serializer.deserializeBooleanArray=function(){var arrayJson,flagArray,i,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
flagArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){flagArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);flagArray=new Array(strArray.length);i=0;while(i<strArray.length){try{flagArray[i]=fm.serializer.deserializeBoolean(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return flagArray;};serializer.deserializeDecimal=function(){var _var0,_var1,decimalResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
decimalResult=0;_var0=new fm.holder(decimalResult);_var1=fm.parseAssistant.tryParseDecimalValue(valueJson,_var0);decimalResult=_var0.getValue();if(_var1){return decimalResult;}}
return null;};serializer.deserializeDecimalArray=function(){var arrayJson,i,numArray,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
numArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){numArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);numArray=new Array(strArray.length);i=0;while(i<strArray.length){try{numArray[i]=fm.serializer.deserializeDecimal(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return numArray;};serializer.deserializeDouble=function(){var _var0,_var1,doubleResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
doubleResult=0;_var0=new fm.holder(doubleResult);_var1=fm.parseAssistant.tryParseDoubleValue(valueJson,_var0);doubleResult=_var0.getValue();if(_var1){return doubleResult;}}
return null;};serializer.deserializeDoubleArray=function(){var arrayJson,i,numArray,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
numArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){numArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);numArray=new Array(strArray.length);i=0;while(i<strArray.length){try{numArray[i]=fm.serializer.deserializeDouble(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return numArray;};serializer.deserializeFloat=function(){var _var0,_var1,floatResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
floatResult=0;_var0=new fm.holder(floatResult);_var1=fm.parseAssistant.tryParseFloatValue(valueJson,_var0);floatResult=_var0.getValue();if(_var1){return floatResult;}}
return null;};serializer.deserializeFloatArray=function(){var arrayJson,i,numArray,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
numArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){numArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);numArray=new Array(strArray.length);i=0;while(i<strArray.length){try{numArray[i]=fm.serializer.deserializeFloat(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return numArray;};serializer.deserializeGuid=function(){var _var0,_var1,empty,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
empty=fm.guid.empty;_var0=new fm.holder(empty);_var1=fm.parseAssistant.tryParseGuidValue(fm.serializer.deserializeString(valueJson),_var0);empty=_var0.getValue();if(_var1){return empty;}}
return null;};serializer.deserializeGuidArray=function(){var arrayJson,guidArray,i,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
guidArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){guidArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);guidArray=new Array(strArray.length);i=0;while(i<strArray.length){try{guidArray[i]=fm.serializer.deserializeGuid(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return guidArray;};serializer.deserializeInteger=function(){var _var0,_var1,intResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
intResult=0;_var0=new fm.holder(intResult);_var1=fm.parseAssistant.tryParseIntegerValue(valueJson,_var0);intResult=_var0.getValue();if(_var1){return intResult;}}
return null;};serializer.deserializeIntegerArray=function(){var arrayJson,i,numArray,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
numArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){numArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);numArray=new Array(strArray.length);i=0;while(i<strArray.length){try{numArray[i]=fm.serializer.deserializeInteger(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return numArray;};serializer.deserializeLong=function(){var _var0,_var1,longResult,valueJson;valueJson=arguments[0];if(!fm.stringExtensions.isNullOrEmpty(valueJson)){valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
longResult=0;_var0=new fm.holder(longResult);_var1=fm.parseAssistant.tryParseLongValue(valueJson,_var0);longResult=_var0.getValue();if(_var1){return longResult;}}
return null;};serializer.deserializeLongArray=function(){var arrayJson,i,numArray,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
numArray=null;if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){numArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);numArray=new Array(strArray.length);i=0;while(i<strArray.length){try{numArray[i]=fm.serializer.deserializeLong(fm.stringExtensions.trim(strArray[i]));}finally{i++;}}}}
return numArray;};serializer.deserializeObject=function(){var callback,ch,creator,flag,flag2,flag3,i,json,none,num,num2,num3,num5,startIndex,str2,target,type2,valueJson;json=arguments[0];creator=arguments[1];callback=arguments[2];if(fm.global.equals(json,null)){return null;}
json=fm.stringExtensions.trim(json);if((fm.global.equals(json,"null"))||(json.length<2)){return null;}
target=creator();if(((fm.global.equals(json.charAt(0),'{'))&&(fm.global.equals(json.charAt(json.length-1),'}')))&&(json.length>2)){json=fm.stringExtensions.concat(fm.stringExtensions.substring(json,1,json.length-2),",");num=0;num2=0;flag=false;num3=-2;none=fm.stringType.None;startIndex=0;num5=0;valueJson=fm.stringExtensions.empty;str2=fm.stringExtensions.empty;i=0;while(i<json.length){try{ch=json.charAt(i);flag2=fm.global.equals(num3,i-1);flag3=false;if(!flag){switch(ch){case'[':num2++;flag3=true;break;case']':num2--;flag3=true;break;case'{':num++;flag3=true;break;case'}':num--;flag3=true;break;}}
if(!flag3){if(flag&&!((!fm.global.equals(ch,'\\'))||flag2)){num3=i;flag3=true;}
if(!flag3){if((fm.global.equals(num,0))&&(fm.global.equals(num2,0))){switch(ch){case',':if(!flag){str2=fm.stringExtensions.trim(fm.stringExtensions.substring(json,num5,i-num5));callback(target,fm.serializer.deserializeString(valueJson),str2);startIndex=i+1;}
flag3=true;break;case':':if(!flag){valueJson=fm.stringExtensions.trim(fm.stringExtensions.substring(json,startIndex,i-startIndex));num5=i+1;}
flag3=true;break;}}
if(!flag3&&(((fm.global.equals(ch,'\''))||(fm.global.equals(ch,'"')))&&!flag2)){type2=(fm.global.equals(ch,'"')?fm.stringType.Double:fm.stringType.Single);if(!flag){flag=true;none=type2;}else{if(fm.global.equals(none,type2)){flag=false;none=fm.stringType.None;}}
flag3=true;}}}}finally{i++;}}}
return target;};serializer.deserializeObjectArray=function(){var _var0,callback,creator,item,j,json,len,list,list2,str;json=arguments[0];creator=arguments[1];callback=arguments[2];list=fm.serializer.deserializeRawArray(json);if(fm.global.equals(list,null)){return null;}
list2=[];_var0=list;for(j=0,len=_var0.length;j<len;j++){str=_var0[j];item=fm.serializer.deserializeObject(str,creator,callback);fm.arrayExtensions.add(list2,item);}
return list2;};serializer.deserializeObjectArrayFast=function(){var _var0,callback,creator,item,j,json,len,list,list2,str;json=arguments[0];creator=arguments[1];callback=arguments[2];list=fm.serializer.deserializeRawArray(json);if(fm.global.equals(list,null)){return null;}
list2=[];_var0=list;for(j=0,len=_var0.length;j<len;j++){str=_var0[j];item=fm.serializer.deserializeObject(str,creator,callback);item.setSerialized(str);fm.arrayExtensions.add(list2,item);}
return list2;};serializer.deserializeObjectFast=function(){var callback,creator,json,local;json=arguments[0];creator=arguments[1];callback=arguments[2];local=fm.serializer.deserializeObject(json,creator,callback);if(!fm.global.equals(local,null)){local.setSerialized(json);}
return local;};serializer.deserializeRaw=function(){var dataJson;dataJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(dataJson)){return null;}
return fm.stringExtensions.trim(dataJson);};serializer.deserializeRawArray=function(){var ch,flag,flag2,i,json,list,none,num,num3,startIndex,type2;json=arguments[0];if(fm.global.equals(json,null)){return null;}
json=fm.stringExtensions.trim(json);if((fm.global.equals(json,"null"))||(json.length<2)){return null;}
list=[];if(((fm.global.equals(json.charAt(0),'['))&&(fm.global.equals(json.charAt(json.length-1),']')))&&(json.length>2)){num=0;startIndex=0;flag=false;num3=-2;none=fm.stringType.None;i=1;while(i<(json.length-1)){try{ch=json.charAt(i);flag2=fm.global.equals(num3,i-1);if(!flag){switch(ch){case'{':if(fm.global.equals(num,0)){startIndex=i;}
num++;break;case'}':num--;if(fm.global.equals(num,0)){fm.arrayExtensions.add(list,fm.stringExtensions.substring(json,startIndex,(i-startIndex)+1));}
break;}}
if(flag&&!((!fm.global.equals(ch,'\\'))||flag2)){num3=i;}else{if(((fm.global.equals(ch,'\''))||(fm.global.equals(ch,'"')))&&!flag2){type2=(fm.global.equals(ch,'"')?fm.stringType.Double:fm.stringType.Single);if(!flag){flag=true;none=type2;}else{if(fm.global.equals(none,type2)){flag=false;none=fm.stringType.None;}}}}}finally{i++;}}}
return list;};serializer.deserializeString=function(){var flag,flag2,valueJson;valueJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(valueJson)){return null;}
valueJson=fm.stringExtensions.trim(valueJson);if(fm.global.equals(valueJson,"null")){return null;}
flag=fm.stringExtensions.startsWith(valueJson,"\"")||fm.stringExtensions.startsWith(valueJson,"'");flag2=fm.stringExtensions.endsWith(valueJson,"\"")||fm.stringExtensions.endsWith(valueJson,"'");if(!(flag&&flag2)){return null;}
return fm.serializer.unescapeString(fm.serializer.trimQuotes(valueJson));};serializer.deserializeStringArray=function(){var arrayJson,i,strArray;arrayJson=arguments[0];if(fm.stringExtensions.isNullOrEmpty(arrayJson)){return null;}
arrayJson=fm.stringExtensions.trim(arrayJson);if(fm.global.equals(arrayJson,"null")){return null;}
if(fm.global.equals(arrayJson.charAt(0),'[')){arrayJson=fm.stringExtensions.substring(arrayJson,1,arrayJson.length-2);if(fm.stringExtensions.isNullOrEmpty(arrayJson)){strArray=new Array(0);}else{strArray=fm.stringExtensions.split(arrayJson,[',']);i=0;while(i<strArray.length){try{strArray[i]=fm.serializer.unescapeString(fm.serializer.trimQuotes(fm.stringExtensions.trim(strArray[i])));}finally{i++;}}}
return strArray;}
return[arrayJson];};serializer.escapeString=function(){var builder,ch,i,startIndex,text;text=arguments[0];builder=new fm.stringBuilder();startIndex=-1;i=0;while(i<text.length){try{ch=text.charAt(i);if(ch>'~'){if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append(fm.serializer.charToUnicodeString(ch));}else{switch(ch){case'\b':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\b");break;case'\f':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\f");break;case'\n':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\n");break;case'\r':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\r");break;case'\t':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\t");break;case'"':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\\"");break;case'/':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\/");break;case'\\':if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
builder.append("\\\\");break;default:if(fm.global.equals(startIndex,-1)){startIndex=i;}
break;}}}finally{i++;}}
if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,text.length-startIndex);}
return builder.toString();};serializer.intToHex=function(){var value;value=arguments[0];if(value<=9){return value+48;}
return(value-10)+97;};serializer.isValidJson=function(){var json;json=arguments[0];return new fm.jsonChecker().checkString(json);};serializer.serializeBoolean=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
if(value){return"true";}
return"false";};serializer.serializeBooleanArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeBoolean(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeDecimal=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return value.toString();};serializer.serializeDecimalArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeDecimal(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeDouble=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return value.toString();};serializer.serializeDoubleArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeDouble(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeFloat=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return value.toString();};serializer.serializeFloatArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeFloat(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeGuid=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return fm.stringExtensions.concat("\"",value.toString(),"\"");};serializer.serializeGuidArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeGuid(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeInteger=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return fm.intExtensions.toString(value);};serializer.serializeIntegerArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeInteger(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeLong=function(){var value;value=arguments[0];if(!(value!==null)){return"null";}
return fm.intExtensions.toString(value);};serializer.serializeLongArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeLong(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeObject=function(){var _var0,callback,j,jsonObject,len,list,source,str;source=arguments[0];callback=arguments[1];if(fm.global.equals(source,null)){return"null";}
jsonObject={};callback(source,jsonObject);list=[];_var0=fm.hashExtensions.getKeys(jsonObject);for(j=0,len=_var0.length;j<len;j++){str=_var0[j];fm.arrayExtensions.add(list,fm.stringExtensions.concat(fm.serializer.serializeString(str),":",jsonObject[str]));}
return fm.stringExtensions.concat("{",fm.stringExtensions.join(",",fm.arrayExtensions.toArray(list)),"}");};serializer.serializeObjectArray=function(){var callback,i,objects,strArray;objects=arguments[0];callback=arguments[1];if(fm.global.equals(objects,null)){return"null";}
if(fm.global.equals(objects.length,0)){return"[]";}
strArray=new Array(objects.length);i=0;while(i<objects.length){try{strArray[i]=fm.serializer.serializeObject(objects[i],callback);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeObjectArrayFast=function(){var callback,i,objects,strArray;objects=arguments[0];callback=arguments[1];if(fm.global.equals(objects,null)){return"null";}
if(fm.global.equals(objects.length,0)){return"[]";}
strArray=new Array(objects.length);i=0;while(i<objects.length){try{strArray[i]=fm.serializer.serializeObjectFast(objects[i],callback);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeObjectFast=function(){var callback,source;source=arguments[0];callback=arguments[1];if(fm.global.equals(source,null)){return"null";}
if(!(source.getIsSerialized()&&!source.getIsDirty())){source.setSerialized(fm.serializer.serializeObject(source,callback));}
return source.getSerialized();};serializer.serializeRaw=function(){var dataJson;dataJson=arguments[0];return dataJson;};serializer.serializeRawArray=function(){var jsons;jsons=arguments[0];if(fm.global.equals(jsons,null)){return"null";}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",jsons),"]");};serializer.serializeString=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){return"null";}
return fm.stringExtensions.concat("\"",fm.serializer.escapeString(value),"\"");};serializer.serializeStringArray=function(){var array,i,strArray;array=arguments[0];if(fm.global.equals(array,null)){return"null";}
strArray=new Array(array.length);i=0;while(i<array.length){try{strArray[i]=fm.serializer.serializeString(array[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.trimQuotes=function(){var ch,ch2,value;value=arguments[0];if(value.length>1){ch=value.charAt(0);ch2=value.charAt(value.length-1);if((fm.global.equals(ch,ch2))&&((fm.global.equals(ch,'\''))||(fm.global.equals(ch,'"')))){value=fm.stringExtensions.substring(value,1,value.length-2);}}
return value;};serializer.unescapeString=function(){var builder,ch,ch2,i,startIndex,text;text=arguments[0];builder=new fm.stringBuilder();startIndex=-1;i=0;while(i<text.length){try{ch=text.charAt(i);if(fm.global.equals(ch,'\\')){if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,i-startIndex);startIndex=-1;}
if(fm.global.equals(i,text.length-1)){continue;}
ch2=text.charAt(i+1);switch(ch2){case'b':builder.append("\b");break;case'f':builder.append("\f");break;case'n':builder.append("\n");break;case'r':builder.append("\r");break;case't':builder.append("\t");break;case'/':builder.append("/");break;case'u':if(i<(text.length-5)){builder.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(text,i,6)).toString());i=i+4;}else{builder.append("u");}
break;case'x':if(i<(text.length-3)){builder.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(text,i,4)).toString());i=i+2;}else{builder.append("x");}
break;default:builder.append(ch2.toString());break;}
i++;continue;}
if(fm.global.equals(startIndex,-1)){startIndex=i;}}finally{i++;}}
if(!fm.global.equals(startIndex,-1)){builder.append(text,startIndex,text.length-startIndex);}
return builder.toString();};serializer.unicodeStringToChar=function(){var value;value=arguments[0];if(value.length<2){throw new Error("Unicode string has invalid length.");}
return fm.convert.toInt32(value.substring(2),16);};return serializer;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketSendState=(function(superClass){extend(webSocketSendState,superClass);webSocketSendState.prototype._requestBytes=null;webSocketSendState.prototype._sendArgs=null;function webSocketSendState(){this.setSendArgs=bind(this.setSendArgs,this);this.setRequestBytes=bind(this.setRequestBytes,this);this.getSendArgs=bind(this.getSendArgs,this);this.getRequestBytes=bind(this.getRequestBytes,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketSendState.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketSendState.__super__.constructor.call(this);return instance;}
webSocketSendState.prototype.getRequestBytes=function(){return this._requestBytes;};webSocketSendState.prototype.getSendArgs=function(){return this._sendArgs;};webSocketSendState.prototype.setRequestBytes=function(){var value;value=arguments[0];return this._requestBytes=value;};webSocketSendState.prototype.setSendArgs=function(){var value;value=arguments[0];return this._sendArgs=value;};return webSocketSendState;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketRequest=(function(superClass){extend(webSocketRequest,superClass);webSocketRequest.prototype._args=null;webSocketRequest.prototype._callback=null;function webSocketRequest(){this.setCallback=bind(this.setCallback,this);this.setArgs=bind(this.setArgs,this);this.getCallback=bind(this.getCallback,this);this.getArgs=bind(this.getArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketRequest.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=webSocketRequest.__super__.constructor.call(this);return instance;}
webSocketRequest.prototype.getArgs=function(){return this._args;};webSocketRequest.prototype.getCallback=function(){return this._callback;};webSocketRequest.prototype.setArgs=function(){var value;value=arguments[0];return this._args=value;};webSocketRequest.prototype.setCallback=function(){var value;value=arguments[0];return this._callback=value;};return webSocketRequest;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocketWebRequestTransfer=(function(superClass){extend(webSocketWebRequestTransfer,superClass);webSocketWebRequestTransfer.prototype._activeRequest=null;webSocketWebRequestTransfer.prototype._webSocket=null;function webSocketWebRequestTransfer(){this.streamFailure=bind(this.streamFailure,this);this.shutdown=bind(this.shutdown,this);this.setWebSocket=bind(this.setWebSocket,this);this.sendAsync=bind(this.sendAsync,this);this.send=bind(this.send,this);this.receive=bind(this.receive,this);this.open=bind(this.open,this);this.getWebSocket=bind(this.getWebSocket,this);this.connectSuccess=bind(this.connectSuccess,this);this.connectFailure=bind(this.connectFailure,this);var instance,url;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketWebRequestTransfer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
url=arguments[0];instance=webSocketWebRequestTransfer.__super__.constructor.call(this,url);return instance;}
webSocketWebRequestTransfer.prototype.connectFailure=function(){var e;e=arguments[0];if(!fm.global.equals(this.getOnOpenFailure(),null)){return this.getOnOpenFailure()(e);}};webSocketWebRequestTransfer.prototype.connectSuccess=function(){var e;e=arguments[0];if(!fm.global.equals(this.getOnOpenSuccess(),null)){return this.getOnOpenSuccess()(e);}};webSocketWebRequestTransfer.prototype.getWebSocket=function(){return this._webSocket;};webSocketWebRequestTransfer.prototype.open=function(){var error,exception,headers,openArgs;headers=arguments[0];this.setWebSocket(new fm.webSocket(this.getUrl()));try{openArgs=new fm.webSocketOpenArgs();openArgs.setHandshakeTimeout(this.getHandshakeTimeout());openArgs.setHeaders(headers);openArgs.setOnSuccess(this.connectSuccess);openArgs.setOnFailure(this.connectFailure);openArgs.setOnStreamFailure(this.streamFailure);openArgs.setOnRequestCreated(this.getOnRequestCreated());openArgs.setOnResponseReceived(this.getOnResponseReceived());openArgs.setOnReceive(this.receive);openArgs.setSender(this.getSender());return this.getWebSocket().open(openArgs);}catch(error){exception=error;return fm.log.error("Could not open WebSocket.",exception);}finally{}};webSocketWebRequestTransfer.prototype.receive=function(){var e,p;e=arguments[0];p=new fm.httpResponseArgs(this._activeRequest.getArgs());p.setTextContent(e.getTextMessage());p.setBinaryContent(e.getBinaryMessage());return this._activeRequest.getCallback()(p);};webSocketWebRequestTransfer.prototype.send=function(){var requestArgs;requestArgs=arguments[0];throw new Error("Synchronous WebSockets are not supported.");};webSocketWebRequestTransfer.prototype.sendAsync=function(){var args2,callback,error,exception,p,request,request2,requestArgs,sendArgs;requestArgs=arguments[0];callback=arguments[1];try{request2=new fm.webSocketRequest();request2.setArgs(requestArgs);request2.setCallback(callback);request=request2;args2=new fm.webSocketSendArgs();args2.setTimeout(request.getArgs().getTimeout());sendArgs=args2;sendArgs.setTextMessage(request.getArgs().getTextContent());sendArgs.setBinaryMessage(request.getArgs().getBinaryContent());this._activeRequest=request;return this.getWebSocket().send(sendArgs);}catch(error){exception=error;p=new fm.httpResponseArgs(requestArgs);p.setException(exception);p.setStatusCode(0);return callback(p);}finally{}};webSocketWebRequestTransfer.prototype.setWebSocket=function(){var value;value=arguments[0];return this._webSocket=value;};webSocketWebRequestTransfer.prototype.shutdown=function(){return this.getWebSocket().close();};webSocketWebRequestTransfer.prototype.streamFailure=function(){var e;e=arguments[0];if(!fm.global.equals(this.getOnStreamFailure(),null)){return this.getOnStreamFailure()(e);}};return webSocketWebRequestTransfer;})(fm.webSocketTransfer);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.timeoutTimer=(function(superClass){extend(timeoutTimer,superClass);timeoutTimer.prototype._timer=null;timeoutTimer.prototype._callback=null;timeoutTimer.prototype._state=null;timeoutTimer.prototype._currentTimeout=0;function timeoutTimer(callback,state){this._timerCallback=bind(this._timerCallback,this);this.stop=bind(this.stop,this);this.start=bind(this.start,this);timeoutTimer.__super__.constructor.call(this);this._callback=callback;this._state=state;}
timeoutTimer.prototype.start=function(timeout){if(this._timer){throw new Error('Timer is currently active.');}
this._currentTimeout=timeout;timeout=fm.mathAssistant.max(0,timeout);return this._timer=setTimeout(this._timerCallback,timeout);};timeoutTimer.prototype.stop=function(){if(!this._timer){return false;}
clearTimeout(this._timer);this._timer=null;return true;};timeoutTimer.prototype._timerCallback=function(){if(this._currentTimeout>=0&&this.stop()&&this._callback){return this._callback(this._state);}};return timeoutTimer;})(fm.baseTimeoutTimer);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.webSocket=(function(superClass){extend(webSocket,superClass);webSocket.getExists=function(){return true;};webSocket._disableBinary=false;webSocket.setDisableBinary=function(disableBinary){return webSocket._disableBinary=disableBinary;};webSocket.getDisableBinary=function(){if(typeof Uint8Array==='undefined'){return true;}
return webSocket._disableBinary;};function webSocket(requestUrl,protocol){this.raiseOnResponseReceived=bind(this.raiseOnResponseReceived,this);this.raiseOnRequestCreated=bind(this.raiseOnRequestCreated,this);this.raiseCloseComplete=bind(this.raiseCloseComplete,this);this.raiseReceive=bind(this.raiseReceive,this);this.raiseStreamFailure=bind(this.raiseStreamFailure,this);this.raiseOpenFailure=bind(this.raiseOpenFailure,this);this.raiseOpenSuccess=bind(this.raiseOpenSuccess,this);this.close=bind(this.close,this);this.send=bind(this.send,this);this._onMessage=bind(this._onMessage,this);this._onClose=bind(this._onClose,this);this._onError=bind(this._onError,this);this._onOpen=bind(this._onOpen,this);this.open=bind(this.open,this);this.getIsOpen=bind(this.getIsOpen,this);this.getBufferedAmount=bind(this.getBufferedAmount,this);webSocket.__super__.constructor.call(this);requestUrl=fm.util.absolutizeUrl(requestUrl);requestUrl=requestUrl.replace("https://","wss://");requestUrl=requestUrl.replace("http://","ws://");this._requestUrl=requestUrl;this._protocol=protocol;}
webSocket.prototype.getBufferedAmount=function(){if(!this._webSocket){return 0;}
return this._webSocket.bufferedAmount;};webSocket.prototype.getIsOpen=function(){if(!this._webSocket){return false;}
return this._webSocket.readyState===1;};webSocket.prototype.open=function(args){var error,error1,headers,headersHash,url;url=this._requestUrl;this._openArgs=args;this._onRequestCreated=args.getOnRequestCreated();this._onResponseReceived=args.getOnResponseReceived();this.raiseOnRequestCreated(args);headers=args.getHeaders();headersHash={};if(headers){headersHash=headers.toHash();}
if(fm.webSocket.getDisableBinary()){headersHash['X-FM-DisableBinary']='true';}
url=fm.httpTransfer.addQueryToUrl(url,'headers',fm.json.serialize(headersHash));if('WebSocket'in window){this._webSocket=this._protocol?new WebSocket(url,this._protocol):new WebSocket(url);}
if(!this._webSocket){this.raiseOpenFailure(args,{statusCode:0,exception:new Error('Could not create WebSocket.')});return;}
if(!fm.webSocket.getDisableBinary()){try{this._webSocket.binaryType='arraybuffer';}catch(error1){error=error1;fm.webSocket.setDisableBinary(true);}}
this._opening=true;this._closing=false;this._raisedStreamFailure=false;this._raisedOpenFailure=false;this._webSocket.onopen=this._onOpen;this._webSocket.onerror=this._onError;this._webSocket.onclose=this._onClose;return this._webSocket.onmessage=this._onMessage;};webSocket.prototype._onOpen=function(e){var args;args=this._openArgs;this.raiseOnResponseReceived(args);this._opening=false;return this.raiseOpenSuccess(args);};webSocket.prototype._onError=function(e){var args;args=this._openArgs;if(this._opening){this._opening=false;if(!this._raisedOpenFailure){this._raisedOpenFailure=true;return this.raiseOpenFailure(args,{statusCode:e.code,exception:new Error(e.message||'Unspecified WebSocket error.')});}}else if(!this._closing){if(!this._raisedStreamFailure){this._raisedStreamFailure=true;return this.raiseStreamFailure(args,{statusCode:e.code,exception:new Error(e.message||'Unspecified WebSocket error.')});}}};webSocket.prototype._onClose=function(e){var args;args=this._openArgs;if(this._opening){this._opening=false;if(!this._raisedOpenFailure){this._raisedOpenFailure=true;return this.raiseOpenFailure(args,{statusCode:e.code,exception:new Error('Could not open WebSocket.')});}}else if(this._aborting){if(!this._raisedStreamFailure){this._raisedStreamFailure=true;return this.raiseStreamFailure(args,{statusCode:e.code,exception:new Error('WebSocket request timed out.')});}}else if(!this._closing){if(!this._raisedStreamFailure){this._raisedStreamFailure=true;return this.raiseStreamFailure(args,{statusCode:e.code,exception:new Error('WebSocket closed.')});}}};webSocket.prototype._onMessage=function(e){var args,binaryMessage,textMessage;args=this._openArgs;if(this._timer){window.clearTimeout(this._timer);}
this._sendArgs=null;binaryMessage=null;textMessage=null;if(!fm.webSocket.getDisableBinary()&&e.data instanceof ArrayBuffer){binaryMessage=new Uint8Array(e.data);}else{textMessage=e.data;}
return this.raiseReceive(args,{textMessage:textMessage,binaryMessage:binaryMessage});};webSocket.prototype.send=function(args){var binary,error,error1,sentBinary,timeout;if(!this._webSocket){return;}
this._sendArgs=args;if(this._timer){window.clearTimeout(this._timer);}
timeout=args.getTimeout();if(timeout>0){this._timer=window.setTimeout((function(_this){return function(){_this._aborting=true;_this._webSocket.close();return _this._onClose({code:0});};})(this),timeout);}
sentBinary=false;binary=args.getBinaryMessage();if(!fm.webSocket.getDisableBinary()&&binary){try{this._webSocket.send(binary.buffer);sentBinary=true;}catch(error1){error=error1;fm.webSocket.setDisableBinary(true);}}
if(!sentBinary){return this._webSocket.send(args.getTextMessage());}};webSocket.prototype.close=function(args){var code,reason;if(!args){this.close(new fm.webSocketCloseArgs());}
if(!this._webSocket){return false;}
code=args.getStatusCode()||fm.webSocketStatusCode.Normal;reason=args.getReason()||'';this._closing=true;this._webSocket.close(code,reason);this._webSocket=null;this.raiseCloseComplete(args,{statusCode:code,reason:reason});return true;};webSocket.prototype.raiseOpenSuccess=function(openArgs){var args,cb;cb=openArgs.getOnSuccess();if(cb){args=new fm.webSocketOpenSuccessArgs();args.setOpenArgs(openArgs);return cb(args);}};webSocket.prototype.raiseOpenFailure=function(openArgs,e){var args,cb;cb=openArgs.getOnFailure();if(cb){args=new fm.webSocketOpenFailureArgs(e);args.setOpenArgs(openArgs);return cb(args);}};webSocket.prototype.raiseStreamFailure=function(openArgs,e){var args,cb;cb=openArgs.getOnStreamFailure();if(cb){args=new fm.webSocketStreamFailureArgs(e);args.setOpenArgs(openArgs);return cb(args);}};webSocket.prototype.raiseReceive=function(openArgs,e){var args,cb;cb=openArgs.getOnReceive();if(cb){args=new fm.webSocketReceiveArgs(e);args.setOpenArgs(openArgs);return cb(args);}};webSocket.prototype.raiseCloseComplete=function(closeArgs,e){var args,cb;cb=closeArgs.getOnComplete();if(cb){args=new fm.webSocketCloseCompleteArgs(e);args.setCloseArgs(closeArgs);return cb(args);}};webSocket.prototype.raiseOnRequestCreated=function(requestArgs){var args,cb;cb=this._onRequestCreated;if(cb){args=new fm.httpRequestCreatedArgs();args.setRequestArgs(requestArgs);args.setSender(requestArgs.getSender());args.setRequest(null);return cb(args);}};webSocket.prototype.raiseOnResponseReceived=function(requestArgs){var args,cb;cb=this._onResponseReceived;if(cb){args=new fm.httpResponseReceivedArgs();args.setRequestArgs(requestArgs);args.setSender(requestArgs.getSender());args.setResponse(null);return cb(args);}};return webSocket;})(fm.baseWebSocket);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.httpWebRequestTransfer=(function(superClass){extend(httpWebRequestTransfer,superClass);function httpWebRequestTransfer(){this.sendInternal=bind(this.sendInternal,this);this.process=bind(this.process,this);this.sendBinary=bind(this.sendBinary,this);this.sendBinaryAsync=bind(this.sendBinaryAsync,this);this.sendText=bind(this.sendText,this);this.sendTextAsync=bind(this.sendTextAsync,this);return httpWebRequestTransfer.__super__.constructor.apply(this,arguments);}
httpWebRequestTransfer._corsFailCache={};httpWebRequestTransfer._corsSuccessCache={};httpWebRequestTransfer._pmFailCache={};httpWebRequestTransfer._pmSuccessCache={};httpWebRequestTransfer.getPlatformCode=function(){return'js';};httpWebRequestTransfer.setDisableCORS=function(disableCORS){return httpWebRequestTransfer._disableCORS=disableCORS;};httpWebRequestTransfer.getDisableCORS=function(){return httpWebRequestTransfer._disableCORS||false;};httpWebRequestTransfer.setDisablePostMessage=function(disablePostMessage){return httpWebRequestTransfer._disablePostMessage=disablePostMessage;};httpWebRequestTransfer.getDisablePostMessage=function(){return httpWebRequestTransfer._disablePostMessage||false;};httpWebRequestTransfer.setDisableJSONP=function(disableJSONP){return httpWebRequestTransfer._disableJSONP=disableJSONP;};httpWebRequestTransfer.getDisableJSONP=function(){return httpWebRequestTransfer._disableJSONP||false;};httpWebRequestTransfer.setForceJSONP=function(forceJSONP){return httpWebRequestTransfer._forceJSONP=forceJSONP;};httpWebRequestTransfer.getForceJSONP=function(){return httpWebRequestTransfer._forceJSONP||false;};httpWebRequestTransfer.prototype.sendTextAsync=function(requestArgs,callback){return fm.util.addOnLoad((function(_this){return function(){return _this.process(requestArgs,callback);};})(this));};httpWebRequestTransfer.prototype.sendText=function(requestArgs){return this.process(requestArgs,null);};httpWebRequestTransfer.prototype.sendBinaryAsync=function(requestArgs,callback){return fm.util.addOnLoad((function(_this){return function(){return _this.process(requestArgs,callback);};})(this));};httpWebRequestTransfer.prototype.sendBinary=function(requestArgs){return this.process(requestArgs,null);};httpWebRequestTransfer.prototype.process=function(requestArgs,callback){var cors,disableCORS,disableJSONP,disablePostMessage,fn,forceJSONP,hwrt,pm,sender,url;hwrt=fm.httpWebRequestTransfer;url=requestArgs.getUrl();if(!requestArgs._processed){url=fm.util.absolutizeUrl(url);requestArgs.setUrl(url);requestArgs._processed=true;}
sender=requestArgs.getSender();disableCORS=hwrt.getDisableCORS()||(sender?sender.getDisableCORS():false);disablePostMessage=hwrt.getDisablePostMessage()||(sender?sender.getDisablePostMessage():false);disableJSONP=hwrt.getDisableJSONP()||(sender?sender.getDisableJSONP():false);forceJSONP=hwrt.getForceJSONP()||(sender?sender.getForceJSONP():false);fn=fm.xhr.send;cors=false;pm=false;if(fm.util.isXD(url)){if(!disableCORS&&hwrt.canCORS()&&!hwrt._corsFailCache[url]){cors=true;}else if(!disablePostMessage&&hwrt.canPostMessage()&&!hwrt._pmFailCache[url]){pm=true;fn=fm.postMessage.send;}else{fn=fm.jsonp.send;}
if(disableJSONP&&fn===fm.jsonp.send){pm=true;fn=fm.postMessage.send;}}
if(forceJSONP){fn=fm.jsonp.send;}
return this.sendInternal(fn,cors,pm,requestArgs,callback);};httpWebRequestTransfer.prototype.sendInternal=function(fn,cors,pm,requestArgs,callback){var frameUrl,method,options,responseArgs,self,url;self=this;responseArgs=new fm.httpResponseArgs(requestArgs);responseArgs.setException(new Error('Environment does not support synchronous requests.'));url=requestArgs.getUrl();frameUrl=requestArgs.getDynamicProperties()['frameUrl'];if(frameUrl&&!requestArgs._processedFrame){frameUrl=fm.util.absolutizeUrl(frameUrl);requestArgs.getDynamicProperties()['frameUrl']=frameUrl;requestArgs._processedFrame=true;}
frameUrl=frameUrl||url;method='GET';switch(requestArgs.getMethod()){case fm.httpMethod.Head:method='HEAD';break;case fm.httpMethod.Post:method='POST';break;case fm.httpMethod.Put:method='PUT';break;case fm.httpMethod.Patch:method='PATCH';break;case fm.httpMethod.Delete:method='DELETE';}
options={sync:(callback?false:true),url:url,frameUrl:frameUrl,method:method,content:requestArgs.getTextContent(),contentBinary:requestArgs.getBinaryContent(),headers:requestArgs.getHeaders().toHash(),timeout:requestArgs.getTimeout(),robustResponse:true};options.onRequestCreated=(function(_this){return function(request){var args,onRequestCreated;onRequestCreated=requestArgs.getOnRequestCreated();if(onRequestCreated){args=new fm.httpRequestCreatedArgs();args.setRequestArgs(requestArgs);args.setSender(requestArgs.getSender());args.setRequest(request);onRequestCreated(args);options.content=requestArgs.getTextContent();options.contentBinary=requestArgs.getBinaryContent();options.headers=requestArgs.getHeaders().toHash();options.timeout=requestArgs.getTimeout();}
return options;};})(this);options.onResponseReceived=(function(_this){return function(response){var args,onResponseReceived;onResponseReceived=requestArgs.getOnResponseReceived();if(onResponseReceived){args=new fm.httpResponseReceivedArgs();args.setRequestArgs(requestArgs);args.setSender(requestArgs.getSender());args.setResponse(response);return onResponseReceived(args);}};})(this);options.onSuccess=(function(_this){return function(e){if(e.statusCode===0&&cors){if(!fm.httpWebRequestTransfer._corsSuccessCache[url]){fm.httpWebRequestTransfer._corsFailCache[url]=true;}
if(callback){self.sendTextAsync(requestArgs,callback);}else{responseArgs=self.sendText(requestArgs);}
return;}else if(cors){fm.httpWebRequestTransfer._corsSuccessCache[url]=true;delete fm.httpWebRequestTransfer._corsFailCache[url];}else if(pm){fm.httpWebRequestTransfer._pmSuccessCache[url]=true;delete fm.httpWebRequestTransfer._pmFailCache[url];}
responseArgs.setException(null);responseArgs.setTextContent(e.content);if(e.hasOwnProperty('contentBinary')){responseArgs.setBinaryContent(e.contentBinary);}
responseArgs.setStatusCode(e.statusCode);responseArgs.setHeaders(new fm.nameValueCollection(e.headers));if(callback){return callback(responseArgs);}};})(this);options.onFailure=(function(_this){return function(e){var exception;if(cors&&!fm.httpWebRequestTransfer._corsSuccessCache[url]){fm.httpWebRequestTransfer._corsFailCache[url]=true;if(callback){self.sendTextAsync(requestArgs,callback);}else{responseArgs=self.sendText(requestArgs);}
return;}else if(pm&&(e.local||!fm.httpWebRequestTransfer._pmSuccessCache[url])){fm.httpWebRequestTransfer._pmFailCache[url]=true;if(callback){self.sendTextAsync(requestArgs,callback);}else{responseArgs=self.sendText(requestArgs);}
return;}
exception=new Error(e.message);responseArgs.setException(exception);if(callback){return callback(responseArgs);}};})(this);fn(options);return responseArgs;};httpWebRequestTransfer.canCORS=function(){return window.XMLHttpRequest&&('withCredentials'in new XMLHttpRequest());};httpWebRequestTransfer.canPostMessage=function(){if(fm.util.isIE6()||fm.util.isIE7()){return false;}
if(window.postMessage){return true;}else{return false;}};return httpWebRequestTransfer;})(fm.httpTransfer);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.domLogProvider=(function(superClass){extend(domLogProvider,superClass);domLogProvider.prototype._container=null;function domLogProvider(container,level){this.log=bind(this.log,this);this.writeLine=bind(this.writeLine,this);this._container=container;domLogProvider.__super__.constructor.call(this);if(!level){level=fm.logLevel.Warn;}
this.setLevel(level);}
domLogProvider.prototype.writeLine=function(text){var div;div=document.createElement('div');div.innerHTML=text.replace(/\n/g,'<br />');return this._container.appendChild(div);};domLogProvider.prototype.log=function(level,message,ex){var text;text=fm.logProvider.getPrefix(level,true)+' '+(message||'');if(ex){text+='<br />'+ex.message;}
return this.writeLine(text);};return domLogProvider;})(fm.logProvider);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.consoleLogProvider=(function(superClass){extend(consoleLogProvider,superClass);function consoleLogProvider(level){this.log=bind(this.log,this);this.writeLine=bind(this.writeLine,this);consoleLogProvider.__super__.constructor.call(this);if(!level){level=fm.logLevel.Warn;}
this.setLevel(level);}
consoleLogProvider.prototype.writeLine=function(text){if(window.console&&window.console.log){return window.console.log(text);}};consoleLogProvider.prototype.log=function(level,message,ex){var text;text=fm.logProvider.getPrefix(level,true)+' '+message;if(ex){text+='\n'+ex.message;}
return this.writeLine(text);};return consoleLogProvider;})(fm.logProvider);(function(){return fm.httpTransfer.addQueryToUrl=function(){var key,url,value;if(arguments.length===1){url=arguments[0];return url;}
if(arguments.length===2){url=arguments[0];key=arguments[1];return fm.httpTransfer.addQueryToUrl(url,key,null);}
if(arguments.length===3){url=arguments[0];key=arguments[1];value=arguments[2];if(fm.stringExtensions.isNullOrEmpty(key)){return url;}
if(value===null||typeof value==='undefined'){value='';}
value=encodeURIComponent(value);return fm.stringExtensions.concat([url,(fm.stringExtensions.indexOf(url,"?",fm.stringComparison.OrdinalIgnoreCase)===-1?"?":"&"),key,"=",value]);}};})();return fm;}));(function(name,dependencies,definition){if(typeof define==='function'&&define.amd){define(name,dependencies,definition);}else if(typeof exports==='object'){for(var i=0;i<dependencies.length;i++){require('./'+dependencies[i]);}
module.exports=definition();}else{this[name]=definition();}}('fm.websync',['fm'],function(){if(typeof global!=='undefined'&&!global.window){global.window=global;global.document={cookie:''};}
if(!window.fm){throw new Error("fm must be loaded before fm.websync.");}
if(!window.fm.websync){window.fm.websync={};}
fm.websync.getVersion=function(){return'4.9.22';};fm.websync.connectRetryMode={Aggressive:1,Intelligent:2,None:3,Default:2};fm.websync.concurrencyMode={Low:1,High:2,Default:1};fm.websync.reconnect={Retry:1,Handshake:2,None:3};fm.websync.connectionType={WebSocket:1,LongPolling:2,CallbackPolling:3,IFrame:4,Flash:5,Unknown:99};fm.websync.messageType={Connect:1,Disconnect:2,Bind:3,Unbind:4,Subscribe:5,Unsubscribe:6,Publish:7,Notify:8,Service:9,Stream:10,Unknown:11};var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.backoffArgs=(function(superClass){extend(backoffArgs,superClass);backoffArgs.prototype._index=0;backoffArgs.prototype._lastTimeout=0;function backoffArgs(){this.setLastTimeout=bind(this.setLastTimeout,this);this.setIndex=bind(this.setIndex,this);this.getLastTimeout=bind(this.getLastTimeout,this);this.getIndex=bind(this.getIndex,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=backoffArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=backoffArgs.__super__.constructor.call(this);return instance;}
backoffArgs.prototype.getIndex=function(){return this._index;};backoffArgs.prototype.getLastTimeout=function(){return this._lastTimeout;};backoffArgs.prototype.setIndex=function(){var value;value=arguments[0];return this._index=value;};backoffArgs.prototype.setLastTimeout=function(){var value;value=arguments[0];return this._lastTimeout=value;};return backoffArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.extensible=(function(superClass){extend(extensible,superClass);extensible.prototype.__extensions=null;extensible._acknowledgementExtensionName="fm.ack";extensible._disableBinaryExtensionName="fm.dbin";extensible._lastClientIdExtensionName="fm.lcid";extensible._lastSessionIdExtensionName="fm.lsid";extensible._metaExtensionName="fm.meta";extensible._notifyClientIdExtensionName="fm.notify";extensible._notifyingClientExtensionName="fm.notifying";extensible._publishingClientExtensionName="fm.publishing";extensible._serverActionsExtensionName="fm.server";extensible._serverTimeoutExtensionName="fm.timeout";extensible._sessionIdExtensionName="fm.sessionId";extensible._tagExtensionName="fm.tag";function extensible(){this.setMeta=bind(this.setMeta,this);this.setExtensionValue=bind(this.setExtensionValue,this);this.getMeta=bind(this.getMeta,this);this.getExtensionValue=bind(this.getExtensionValue,this);this.setMetaJson=bind(this.setMetaJson,this);this.setExtensionValueJson=bind(this.setExtensionValueJson,this);this.setExtensions=bind(this.setExtensions,this);this.getMetaJson=bind(this.getMetaJson,this);this.getExtensionValueJson=bind(this.getExtensionValueJson,this);this.getExtensions=bind(this.getExtensions,this);this.getExtensionNames=bind(this.getExtensionNames,this);this.getExtensionCount=bind(this.getExtensionCount,this);this.copyExtensions=bind(this.copyExtensions,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=extensible.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=extensible.__super__.constructor.call(this);return instance;}
extensible.convertKeyToRecord=function(){var key;key=arguments[0];return new fm.websync.record(key);};extensible.convertRecordToKey=function(){var record;record=arguments[0];return record.getKey();};extensible.sharedGetChannel=function(){var channels;channels=arguments[0];if((fm.global.equals(channels,null))||(fm.global.equals(channels.length,0))){return null;}
return channels[0];};extensible.sharedGetChannels=function(){var channels;channels=arguments[0];return channels;};extensible.sharedGetKey=function(){var record,records;records=arguments[0];record=fm.websync.extensible.sharedGetRecord(records);if(fm.global.equals(record,null)){return null;}
return fm.websync.extensible.convertRecordToKey(record);};extensible.sharedGetKeys=function(){var _var0,i,len,list,record,records;records=arguments[0];records=fm.websync.extensible.sharedGetRecords(records);if(fm.global.equals(records,null)){return null;}
list=[];_var0=records;for(i=0,len=_var0.length;i<len;i++){record=_var0[i];fm.arrayExtensions.add(list,fm.websync.extensible.convertRecordToKey(record));}
return fm.arrayExtensions.toArray(list);};extensible.sharedGetRecord=function(){var records;records=arguments[0];if((fm.global.equals(records,null))||(fm.global.equals(records.length,0))){return null;}
return records[0];};extensible.sharedGetRecords=function(){var records;records=arguments[0];return records;};extensible.sharedSetChannel=function(){var _var0,_var1,channel,error,validate;if(arguments.length===2){channel=arguments[0];validate=arguments[1];if(fm.global.equals(channel,null)){return null;}
error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateChannel(channel,_var0);error=_var0.getValue();if(!(!validate||_var1)){throw new Error(fm.stringExtensions.format("Invalid channel. {0}",error));}
return[channel];}
if(arguments.length===1){channel=arguments[0];return fm.websync.extensible.sharedSetChannel(channel,true);}};extensible.sharedSetChannels=function(){var _var0,_var1,_var2,channels,error,i,len,str,validate;if(arguments.length===2){channels=arguments[0];validate=arguments[1];if(!fm.global.equals(channels,null)){_var0=channels;for(i=0,len=_var0.length;i<len;i++){str=_var0[i];error=null;_var1=new fm.holder(error);_var2=fm.websync.extensible.validateChannel(str,_var1);error=_var1.getValue();if(!(!validate||_var2)){throw new Error(fm.stringExtensions.format("Invalid channel. {0}",error));}}}
return channels;}
if(arguments.length===1){channels=arguments[0];return fm.websync.extensible.sharedSetChannels(channels,true);}};extensible.sharedSetKey=function(){var _var0,_var1,error,key,record,validate;if(arguments.length===2){key=arguments[0];validate=arguments[1];if(fm.global.equals(key,null)){return null;}
record=fm.websync.extensible.convertKeyToRecord(key);error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateRecord(record,_var0);error=_var0.getValue();if(!(!validate||_var1)){throw new Error(fm.stringExtensions.format("Invalid record. {0}",error));}
return[record];}
if(arguments.length===1){key=arguments[0];return fm.websync.extensible.sharedSetKey(key,true);}};extensible.sharedSetKeys=function(){var _var0,_var1,_var2,error,i,keys,len,list,record,str,validate;if(arguments.length===1){keys=arguments[0];return fm.websync.extensible.sharedSetKeys(keys,true);}
if(arguments.length===2){keys=arguments[0];validate=arguments[1];if(fm.global.equals(keys,null)){return null;}
list=[];_var0=keys;for(i=0,len=_var0.length;i<len;i++){str=_var0[i];record=fm.websync.extensible.convertKeyToRecord(str);error=null;_var1=new fm.holder(error);_var2=fm.websync.extensible.validateRecord(record,_var1);error=_var1.getValue();if(!(!validate||_var2)){throw new Error(fm.stringExtensions.format("Invalid record. {0}",error));}
fm.arrayExtensions.add(list,record);}
return fm.arrayExtensions.toArray(list);}};extensible.sharedSetRecord=function(){var _var0,_var1,error,record,validate;if(arguments.length===2){record=arguments[0];validate=arguments[1];error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateRecord(record,_var0);error=_var0.getValue();if(!(!validate||_var1)){throw new Error(fm.stringExtensions.format("Invalid record. {0}",error));}
return[record];}
if(arguments.length===1){record=arguments[0];return fm.websync.extensible.sharedSetRecord(record,true);}};extensible.sharedSetRecords=function(){var _var0,_var1,_var2,error,i,len,record,records,validate;if(arguments.length===2){records=arguments[0];validate=arguments[1];if(!fm.global.equals(records,null)){_var0=records;for(i=0,len=_var0.length;i<len;i++){record=_var0[i];error=null;_var1=new fm.holder(error);_var2=fm.websync.extensible.validateRecord(record,_var1);error=_var1.getValue();if(!(!validate||_var2)){throw new Error(fm.stringExtensions.format("Invalid record. {0}",error));}}}
return records;}
if(arguments.length===1){records=arguments[0];return fm.websync.extensible.sharedSetRecords(records,true);}};extensible.validateChannel=function(){var channel,error;channel=arguments[0];error=arguments[1];if(fm.global.equals(channel,null)){error.setValue("Channel is null.");return false;}
if(!fm.stringExtensions.startsWith(channel,"/",fm.stringComparison.Ordinal)){error.setValue("Channel must start with a forward-slash (/).");return false;}
if(fm.stringExtensions.indexOf(channel,"*",fm.stringComparison.Ordinal)>=0){error.setValue("Channel may not contain asterisks (*).");return false;}
if(fm.websync.metaChannels.isReservedChannel(channel)){error.setValue("Channel is reserved.");return false;}
error.setValue(null);return true;};extensible.validateRecord=function(){var error,record;record=arguments[0];error=arguments[1];if(fm.global.equals(record,null)){error.setValue("Record is null.");return false;}
if(fm.stringExtensions.isNullOrEmpty(record.getKey())){error.setValue("Key is null or empty.");return false;}
error.setValue(null);return true;};extensible.prototype.copyExtensions=function(){var _var0,extensible,i,len,results,str;extensible=arguments[0];_var0=extensible.getExtensionNames();results=[];for(i=0,len=_var0.length;i<len;i++){str=_var0[i];results.push(this.setExtensionValueJson(str,extensible.getExtensionValueJson(str),false));}
return results;};extensible.prototype.getExtensionCount=function(){return this.getExtensions().getCount();};extensible.prototype.getExtensionNames=function(){return this.getExtensions().getNames();};extensible.prototype.getExtensions=function(){if(fm.global.equals(this.__extensions,null)){this.__extensions=new fm.websync.extensions();}
return this.__extensions;};extensible.prototype.getExtensionValueJson=function(){var name;name=arguments[0];return this.getExtensions().getValueJson(name);};extensible.prototype.getMetaJson=function(){return this.getExtensionValueJson("fm.meta");};extensible.prototype.setExtensions=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){return this.__extensions=new fm.websync.extensions();}else{return this.__extensions=value;}};extensible.prototype.setExtensionValueJson=function(){var name,validate,valueJson;if(arguments.length===3){name=arguments[0];valueJson=arguments[1];validate=arguments[2];this.getExtensions().setValueJson(name,valueJson,validate);this.setIsDirty(true);return;}
if(arguments.length===2){name=arguments[0];valueJson=arguments[1];this.getExtensions().setValueJson(name,valueJson);this.setIsDirty(true);}};extensible.prototype.setMetaJson=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.meta",value);};extensible.prototype.getExtensionValue=function(){var name;name=arguments[0];return fm.json.deserialize(this.getExtensionValueJson.apply(this,arguments));};extensible.prototype.getMeta=function(){return fm.json.deserialize(this.getMetaJson.apply(this,arguments));};extensible.prototype.setExtensionValue=function(){var extensionValue,name,valueJson;if(arguments.length===3){name=arguments[0];valueJson=arguments[1];extensionValue=arguments[2];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);this.setExtensionValueJson.apply(this,arguments);return;}
if(arguments.length===2){name=arguments[0];extensionValue=arguments[1];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);this.setExtensionValueJson.apply(this,arguments);}};extensible.prototype.setMeta=function(){var meta;meta=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setMetaJson.apply(this,arguments);};return extensible;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseInputArgs=(function(superClass){extend(baseInputArgs,superClass);baseInputArgs.prototype._isRetry=false;baseInputArgs.prototype._requestTimeout=null;baseInputArgs.prototype._requestUrl=null;baseInputArgs.prototype._synchronous=null;function baseInputArgs(){this.setSynchronous=bind(this.setSynchronous,this);this.setRequestUrl=bind(this.setRequestUrl,this);this.setRequestTimeout=bind(this.setRequestTimeout,this);this.setIsRetry=bind(this.setIsRetry,this);this.getSynchronous=bind(this.getSynchronous,this);this.getRequestUrl=bind(this.getRequestUrl,this);this.getRequestTimeout=bind(this.getRequestTimeout,this);this.getIsRetry=bind(this.getIsRetry,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseInputArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseInputArgs.__super__.constructor.call(this);return instance;}
baseInputArgs.prototype.getIsRetry=function(){return this._isRetry;};baseInputArgs.prototype.getRequestTimeout=function(){return this._requestTimeout;};baseInputArgs.prototype.getRequestUrl=function(){return this._requestUrl;};baseInputArgs.prototype.getSynchronous=function(){return this._synchronous;};baseInputArgs.prototype.setIsRetry=function(){var value;value=arguments[0];return this._isRetry=value;};baseInputArgs.prototype.setRequestTimeout=function(){var value;value=arguments[0];return this._requestTimeout=value;};baseInputArgs.prototype.setRequestUrl=function(){var value;value=arguments[0];return this._requestUrl=value;};baseInputArgs.prototype.setSynchronous=function(){var value;value=arguments[0];return this._synchronous=value;};return baseInputArgs;})(fm.websync.extensible);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseOutputArgs=(function(superClass){extend(baseOutputArgs,superClass);baseOutputArgs.prototype.__timestamp=null;baseOutputArgs.prototype._client=null;function baseOutputArgs(){this.setTimestamp=bind(this.setTimestamp,this);this.setClient=bind(this.setClient,this);this.getTimestamp=bind(this.getTimestamp,this);this.getClient=bind(this.getClient,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseOutputArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseOutputArgs.__super__.constructor.call(this);return instance;}
baseOutputArgs.prototype.getClient=function(){return this._client;};baseOutputArgs.prototype.getTimestamp=function(){return this.__timestamp;};baseOutputArgs.prototype.setClient=function(){var value;value=arguments[0];return this._client=value;};baseOutputArgs.prototype.setTimestamp=function(){var value;value=arguments[0];if(value!==null){return this.__timestamp=value;}else{return this.__timestamp=null;}};return baseOutputArgs;})(fm.websync.extensible);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.basePublisherEventArgs=(function(superClass){extend(basePublisherEventArgs,superClass);basePublisherEventArgs.prototype._publisher=null;function basePublisherEventArgs(){this.setPublisher=bind(this.setPublisher,this);this.getPublisher=bind(this.getPublisher,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=basePublisherEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=basePublisherEventArgs.__super__.constructor.call(this);return instance;}
basePublisherEventArgs.prototype.getPublisher=function(){return this._publisher;};basePublisherEventArgs.prototype.setPublisher=function(){var value;value=arguments[0];return this._publisher=value;};return basePublisherEventArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgs=(function(superClass){extend(basePublisherResponseEventArgs,superClass);basePublisherResponseEventArgs.prototype._exception=null;function basePublisherResponseEventArgs(){this.setException=bind(this.setException,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=basePublisherResponseEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=basePublisherResponseEventArgs.__super__.constructor.call(this);return instance;}
basePublisherResponseEventArgs.prototype.getException=function(){return this._exception;};basePublisherResponseEventArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};return basePublisherResponseEventArgs;})(fm.websync.basePublisherEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgsGeneric=(function(superClass){extend(basePublisherResponseEventArgsGeneric,superClass);basePublisherResponseEventArgsGeneric.prototype._requests=null;basePublisherResponseEventArgsGeneric.prototype._responses=null;function basePublisherResponseEventArgsGeneric(){this.setResponses=bind(this.setResponses,this);this.setRequests=bind(this.setRequests,this);this.getResponses=bind(this.getResponses,this);this.getRequests=bind(this.getRequests,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=basePublisherResponseEventArgsGeneric.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=basePublisherResponseEventArgsGeneric.__super__.constructor.call(this);return instance;}
basePublisherResponseEventArgsGeneric.prototype.getRequests=function(){return this._requests;};basePublisherResponseEventArgsGeneric.prototype.getResponses=function(){return this._responses;};basePublisherResponseEventArgsGeneric.prototype.setRequests=function(){var value;value=arguments[0];return this._requests=value;};basePublisherResponseEventArgsGeneric.prototype.setResponses=function(){var value;value=arguments[0];return this._responses=value;};return basePublisherResponseEventArgsGeneric;})(fm.websync.basePublisherResponseEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgs=(function(superClass){extend(basePublisherRequestEventArgs,superClass);basePublisherRequestEventArgs.prototype._cancel=false;function basePublisherRequestEventArgs(){this.setCancel=bind(this.setCancel,this);this.getCancel=bind(this.getCancel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=basePublisherRequestEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=basePublisherRequestEventArgs.__super__.constructor.call(this);return instance;}
basePublisherRequestEventArgs.prototype.getCancel=function(){return this._cancel;};basePublisherRequestEventArgs.prototype.setCancel=function(){var value;value=arguments[0];return this._cancel=value;};return basePublisherRequestEventArgs;})(fm.websync.basePublisherEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgsGeneric=(function(superClass){extend(basePublisherRequestEventArgsGeneric,superClass);basePublisherRequestEventArgsGeneric.prototype._requests=null;function basePublisherRequestEventArgsGeneric(){this.setRequests=bind(this.setRequests,this);this.getRequests=bind(this.getRequests,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=basePublisherRequestEventArgsGeneric.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=basePublisherRequestEventArgsGeneric.__super__.constructor.call(this);return instance;}
basePublisherRequestEventArgsGeneric.prototype.getRequests=function(){return this._requests;};basePublisherRequestEventArgsGeneric.prototype.setRequests=function(){var value;value=arguments[0];return this._requests=value;};return basePublisherRequestEventArgsGeneric;})(fm.websync.basePublisherRequestEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientEventArgs=(function(superClass){extend(baseClientEventArgs,superClass);baseClientEventArgs.prototype._client=null;function baseClientEventArgs(){this.setClient=bind(this.setClient,this);this.getClient=bind(this.getClient,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientEventArgs.__super__.constructor.call(this);return instance;}
baseClientEventArgs.prototype.getClient=function(){return this._client;};baseClientEventArgs.prototype.setClient=function(){var value;value=arguments[0];return this._client=value;};return baseClientEventArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientEndEventArgs=(function(superClass){extend(baseClientEndEventArgs,superClass);baseClientEndEventArgs.prototype._exception=null;baseClientEndEventArgs.prototype._response=null;function baseClientEndEventArgs(){this.setResponse=bind(this.setResponse,this);this.setException=bind(this.setException,this);this.getResponse=bind(this.getResponse,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientEndEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientEndEventArgs.__super__.constructor.call(this);return instance;}
baseClientEndEventArgs.prototype.getException=function(){return this._exception;};baseClientEndEventArgs.prototype.getResponse=function(){return this._response;};baseClientEndEventArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};baseClientEndEventArgs.prototype.setResponse=function(){var value;value=arguments[0];return this._response=value;};return baseClientEndEventArgs;})(fm.websync.baseClientEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientEndEventArgsGeneric=(function(superClass){extend(baseClientEndEventArgsGeneric,superClass);baseClientEndEventArgsGeneric.prototype._methodArgs=null;function baseClientEndEventArgsGeneric(){this.setMethodArgs=bind(this.setMethodArgs,this);this.getMethodArgs=bind(this.getMethodArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientEndEventArgsGeneric.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientEndEventArgsGeneric.__super__.constructor.call(this);return instance;}
baseClientEndEventArgsGeneric.prototype.getMethodArgs=function(){return this._methodArgs;};baseClientEndEventArgsGeneric.prototype.setMethodArgs=function(){var value;value=arguments[0];return this._methodArgs=value;};return baseClientEndEventArgsGeneric;})(fm.websync.baseClientEndEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientResponseEventArgs=(function(superClass){extend(baseClientResponseEventArgs,superClass);baseClientResponseEventArgs.prototype._exception=null;baseClientResponseEventArgs.prototype._response=null;function baseClientResponseEventArgs(){this.setResponse=bind(this.setResponse,this);this.setException=bind(this.setException,this);this.getResponse=bind(this.getResponse,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientResponseEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientResponseEventArgs.__super__.constructor.call(this);return instance;}
baseClientResponseEventArgs.prototype.getException=function(){return this._exception;};baseClientResponseEventArgs.prototype.getResponse=function(){return this._response;};baseClientResponseEventArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};baseClientResponseEventArgs.prototype.setResponse=function(){var value;value=arguments[0];return this._response=value;};return baseClientResponseEventArgs;})(fm.websync.baseClientEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientResponseEventArgsGeneric=(function(superClass){extend(baseClientResponseEventArgsGeneric,superClass);baseClientResponseEventArgsGeneric.prototype._methodArgs=null;function baseClientResponseEventArgsGeneric(){this.setMethodArgs=bind(this.setMethodArgs,this);this.getMethodArgs=bind(this.getMethodArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientResponseEventArgsGeneric.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientResponseEventArgsGeneric.__super__.constructor.call(this);return instance;}
baseClientResponseEventArgsGeneric.prototype.getMethodArgs=function(){return this._methodArgs;};baseClientResponseEventArgsGeneric.prototype.setMethodArgs=function(){var value;value=arguments[0];return this._methodArgs=value;};return baseClientResponseEventArgsGeneric;})(fm.websync.baseClientResponseEventArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientNotifyResponseArgs=(function(superClass){extend(clientNotifyResponseArgs,superClass);function clientNotifyResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientNotifyResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientNotifyResponseArgs.__super__.constructor.call(this);return instance;}
return clientNotifyResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseServerArgs=(function(superClass){extend(baseServerArgs,superClass);function baseServerArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseServerArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseServerArgs.__super__.constructor.call(this);return instance;}
return baseServerArgs;})(fm.websync.baseOutputArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseSuccessArgs=(function(superClass){extend(baseSuccessArgs,superClass);function baseSuccessArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseSuccessArgs.__super__.constructor.call(this);return instance;}
return baseSuccessArgs;})(fm.websync.baseOutputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseReceiveArgs=(function(superClass){extend(baseReceiveArgs,superClass);baseReceiveArgs.prototype.__connectionType=null;baseReceiveArgs.prototype.__dataBytes=null;baseReceiveArgs.prototype.__dataJson=null;baseReceiveArgs.prototype._reconnectAfter=0;function baseReceiveArgs(){this.getData=bind(this.getData,this);this.setReconnectAfter=bind(this.setReconnectAfter,this);this.getTag=bind(this.getTag,this);this.getReconnectAfter=bind(this.getReconnectAfter,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getConnectionType=bind(this.getConnectionType,this);var connectionType,dataBytes,dataJson,instance,reconnectAfter;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseReceiveArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
dataJson=arguments[0];dataBytes=arguments[1];connectionType=arguments[2];reconnectAfter=arguments[3];instance=baseReceiveArgs.__super__.constructor.call(this);this.__dataJson=dataJson;this.__dataBytes=dataBytes;this.__connectionType=connectionType;this.setReconnectAfter(reconnectAfter);return instance;}
baseReceiveArgs.prototype.getConnectionType=function(){return this.__connectionType;};baseReceiveArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};baseReceiveArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};baseReceiveArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};baseReceiveArgs.prototype.getReconnectAfter=function(){return this._reconnectAfter;};baseReceiveArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};baseReceiveArgs.prototype.setReconnectAfter=function(){var value;value=arguments[0];return this._reconnectAfter=value;};baseReceiveArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return baseReceiveArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientRequestEventArgs=(function(superClass){extend(baseClientRequestEventArgs,superClass);baseClientRequestEventArgs.prototype._cancel=false;function baseClientRequestEventArgs(){this.setCancel=bind(this.setCancel,this);this.getCancel=bind(this.getCancel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientRequestEventArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientRequestEventArgs.__super__.constructor.call(this);return instance;}
baseClientRequestEventArgs.prototype.getCancel=function(){return this._cancel;};baseClientRequestEventArgs.prototype.setCancel=function(){var value;value=arguments[0];return this._cancel=value;};return baseClientRequestEventArgs;})(fm.websync.baseClientEventArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClientRequestEventArgsGeneric=(function(superClass){extend(baseClientRequestEventArgsGeneric,superClass);baseClientRequestEventArgsGeneric.prototype._methodArgs=null;function baseClientRequestEventArgsGeneric(){this.setMethodArgs=bind(this.setMethodArgs,this);this.getMethodArgs=bind(this.getMethodArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClientRequestEventArgsGeneric.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClientRequestEventArgsGeneric.__super__.constructor.call(this);return instance;}
baseClientRequestEventArgsGeneric.prototype.getMethodArgs=function(){return this._methodArgs;};baseClientRequestEventArgsGeneric.prototype.setMethodArgs=function(){var value;value=arguments[0];return this._methodArgs=value;};return baseClientRequestEventArgsGeneric;})(fm.websync.baseClientRequestEventArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientNotifyRequestArgs=(function(superClass){extend(clientNotifyRequestArgs,superClass);function clientNotifyRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientNotifyRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientNotifyRequestArgs.__super__.constructor.call(this);return instance;}
return clientNotifyRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientSubscribeEndArgs=(function(superClass){extend(clientSubscribeEndArgs,superClass);function clientSubscribeEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientSubscribeEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientSubscribeEndArgs.__super__.constructor.call(this);return instance;}
return clientSubscribeEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientBindEndArgs=(function(superClass){extend(clientBindEndArgs,superClass);function clientBindEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientBindEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientBindEndArgs.__super__.constructor.call(this);return instance;}
return clientBindEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientConnectEndArgs=(function(superClass){extend(clientConnectEndArgs,superClass);function clientConnectEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientConnectEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientConnectEndArgs.__super__.constructor.call(this);return instance;}
return clientConnectEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientDisconnectEndArgs=(function(superClass){extend(clientDisconnectEndArgs,superClass);function clientDisconnectEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientDisconnectEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientDisconnectEndArgs.__super__.constructor.call(this);return instance;}
return clientDisconnectEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientNotifyEndArgs=(function(superClass){extend(clientNotifyEndArgs,superClass);function clientNotifyEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientNotifyEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientNotifyEndArgs.__super__.constructor.call(this);return instance;}
return clientNotifyEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientPublishEndArgs=(function(superClass){extend(clientPublishEndArgs,superClass);function clientPublishEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientPublishEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientPublishEndArgs.__super__.constructor.call(this);return instance;}
return clientPublishEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientServiceEndArgs=(function(superClass){extend(clientServiceEndArgs,superClass);function clientServiceEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientServiceEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientServiceEndArgs.__super__.constructor.call(this);return instance;}
return clientServiceEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnbindEndArgs=(function(superClass){extend(clientUnbindEndArgs,superClass);function clientUnbindEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnbindEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnbindEndArgs.__super__.constructor.call(this);return instance;}
return clientUnbindEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnsubscribeEndArgs=(function(superClass){extend(clientUnsubscribeEndArgs,superClass);function clientUnsubscribeEndArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnsubscribeEndArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnsubscribeEndArgs.__super__.constructor.call(this);return instance;}
return clientUnsubscribeEndArgs;})(fm.websync.baseClientEndEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherServiceRequestArgs=(function(superClass){extend(publisherServiceRequestArgs,superClass);function publisherServiceRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherServiceRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherServiceRequestArgs.__super__.constructor.call(this);return instance;}
return publisherServiceRequestArgs;})(fm.websync.basePublisherRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherServiceResponseArgs=(function(superClass){extend(publisherServiceResponseArgs,superClass);function publisherServiceResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherServiceResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherServiceResponseArgs.__super__.constructor.call(this);return instance;}
return publisherServiceResponseArgs;})(fm.websync.basePublisherResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.stateRestoredArgs=(function(superClass){extend(stateRestoredArgs,superClass);function stateRestoredArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=stateRestoredArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=stateRestoredArgs.__super__.constructor.call(this);return instance;}
return stateRestoredArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifyReceiveArgs=(function(superClass){extend(notifyReceiveArgs,superClass);function notifyReceiveArgs(){this.getWasSentByMe=bind(this.getWasSentByMe,this);this.getNotifyingClient=bind(this.getNotifyingClient,this);var connectionType,dataBytes,dataJson,instance,reconnectAfter;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifyReceiveArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
dataJson=arguments[0];dataBytes=arguments[1];connectionType=arguments[2];reconnectAfter=arguments[3];instance=notifyReceiveArgs.__super__.constructor.call(this,dataJson,dataBytes,connectionType,reconnectAfter);return instance;}
notifyReceiveArgs.prototype.getNotifyingClient=function(){return fm.websync.notifyingClient.fromJson(this.getExtensionValueJson("fm.notifying"));};notifyReceiveArgs.prototype.getWasSentByMe=function(){return(((!fm.global.equals(this.getNotifyingClient(),null))&&(!fm.global.equals(this.getClient(),null)))&&(this.getNotifyingClient().getClientId()!==null))&&(fm.guid.equals(this.getNotifyingClient().getClientId(),this.getClient().getClientId()));};return notifyReceiveArgs;})(fm.websync.baseReceiveArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serverSubscribeArgs=(function(superClass){extend(serverSubscribeArgs,superClass);serverSubscribeArgs.prototype.__channels=null;function serverSubscribeArgs(){this.getTag=bind(this.getTag,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serverSubscribeArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serverSubscribeArgs.__super__.constructor.call(this);return instance;}
serverSubscribeArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};serverSubscribeArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};serverSubscribeArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};return serverSubscribeArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serverUnsubscribeArgs=(function(superClass){extend(serverUnsubscribeArgs,superClass);serverUnsubscribeArgs.prototype.__channels=null;function serverUnsubscribeArgs(){this.getTag=bind(this.getTag,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serverUnsubscribeArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serverUnsubscribeArgs.__super__.constructor.call(this);return instance;}
serverUnsubscribeArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};serverUnsubscribeArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};serverUnsubscribeArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};return serverUnsubscribeArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serverUnbindArgs=(function(superClass){extend(serverUnbindArgs,superClass);serverUnbindArgs.prototype.__records=null;function serverUnbindArgs(){this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serverUnbindArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serverUnbindArgs.__super__.constructor.call(this);return instance;}
serverUnbindArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};serverUnbindArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};serverUnbindArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};serverUnbindArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};return serverUnbindArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serverBindArgs=(function(superClass){extend(serverBindArgs,superClass);serverBindArgs.prototype.__records=null;function serverBindArgs(){this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serverBindArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serverBindArgs.__super__.constructor.call(this);return instance;}
serverBindArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};serverBindArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};serverBindArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};serverBindArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};return serverBindArgs;})(fm.websync.baseServerArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageRequestCreatedArgs=(function(superClass){extend(messageRequestCreatedArgs,superClass);messageRequestCreatedArgs.prototype._requests=null;messageRequestCreatedArgs.prototype._sender=null;function messageRequestCreatedArgs(){this.setSender=bind(this.setSender,this);this.setRequests=bind(this.setRequests,this);this.getSender=bind(this.getSender,this);this.getRequests=bind(this.getRequests,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageRequestCreatedArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=messageRequestCreatedArgs.__super__.constructor.call(this);return instance;}
messageRequestCreatedArgs.prototype.getRequests=function(){return this._requests;};messageRequestCreatedArgs.prototype.getSender=function(){return this._sender;};messageRequestCreatedArgs.prototype.setRequests=function(){var value;value=arguments[0];return this._requests=value;};messageRequestCreatedArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return messageRequestCreatedArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageResponseReceivedArgs=(function(superClass){extend(messageResponseReceivedArgs,superClass);messageResponseReceivedArgs.prototype._responses=null;messageResponseReceivedArgs.prototype._sender=null;function messageResponseReceivedArgs(){this.setSender=bind(this.setSender,this);this.setResponses=bind(this.setResponses,this);this.getSender=bind(this.getSender,this);this.getResponses=bind(this.getResponses,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageResponseReceivedArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=messageResponseReceivedArgs.__super__.constructor.call(this);return instance;}
messageResponseReceivedArgs.prototype.getResponses=function(){return this._responses;};messageResponseReceivedArgs.prototype.getSender=function(){return this._sender;};messageResponseReceivedArgs.prototype.setResponses=function(){var value;value=arguments[0];return this._responses=value;};messageResponseReceivedArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};return messageResponseReceivedArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageRequestArgs=(function(superClass){extend(messageRequestArgs,superClass);messageRequestArgs.prototype._headers=null;messageRequestArgs.prototype._messages=null;messageRequestArgs.prototype._onHttpRequestCreated=null;messageRequestArgs.prototype._onHttpResponseReceived=null;messageRequestArgs.prototype._onRequestCreated=null;messageRequestArgs.prototype._onResponseReceived=null;messageRequestArgs.prototype._sender=null;messageRequestArgs.prototype._timeout=0;messageRequestArgs.prototype._url=null;function messageRequestArgs(){this.setUrl=bind(this.setUrl,this);this.setTimeout=bind(this.setTimeout,this);this.setSender=bind(this.setSender,this);this.setOnResponseReceived=bind(this.setOnResponseReceived,this);this.setOnRequestCreated=bind(this.setOnRequestCreated,this);this.setOnHttpResponseReceived=bind(this.setOnHttpResponseReceived,this);this.setOnHttpRequestCreated=bind(this.setOnHttpRequestCreated,this);this.setMessages=bind(this.setMessages,this);this.setHeaders=bind(this.setHeaders,this);this.getUrl=bind(this.getUrl,this);this.getTimeout=bind(this.getTimeout,this);this.getSender=bind(this.getSender,this);this.getOnResponseReceived=bind(this.getOnResponseReceived,this);this.getOnRequestCreated=bind(this.getOnRequestCreated,this);this.getOnHttpResponseReceived=bind(this.getOnHttpResponseReceived,this);this.getOnHttpRequestCreated=bind(this.getOnHttpRequestCreated,this);this.getMessages=bind(this.getMessages,this);this.getIsBinary=bind(this.getIsBinary,this);this.getHeaders=bind(this.getHeaders,this);var headers,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageRequestArgs.__super__.constructor.call(this);this.setTimeout(15000);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=messageRequestArgs.__super__.constructor.call(this);this.setTimeout(15000);return instance;}
if(arguments.length===1){headers=arguments[0];messageRequestArgs.call(this);this.setHeaders(headers);return instance;}}
messageRequestArgs.prototype.getHeaders=function(){return this._headers;};messageRequestArgs.prototype.getIsBinary=function(){var _var0,i,len,message;_var0=this.getMessages();for(i=0,len=_var0.length;i<len;i++){message=_var0[i];if(!((!fm.global.equals(message.getDisableBinary(),true))&&message.getIsBinary())){return false;}}
return true;};messageRequestArgs.prototype.getMessages=function(){return this._messages;};messageRequestArgs.prototype.getOnHttpRequestCreated=function(){return this._onHttpRequestCreated;};messageRequestArgs.prototype.getOnHttpResponseReceived=function(){return this._onHttpResponseReceived;};messageRequestArgs.prototype.getOnRequestCreated=function(){return this._onRequestCreated;};messageRequestArgs.prototype.getOnResponseReceived=function(){return this._onResponseReceived;};messageRequestArgs.prototype.getSender=function(){return this._sender;};messageRequestArgs.prototype.getTimeout=function(){return this._timeout;};messageRequestArgs.prototype.getUrl=function(){return this._url;};messageRequestArgs.prototype.setHeaders=function(){var value;value=arguments[0];return this._headers=value;};messageRequestArgs.prototype.setMessages=function(){var value;value=arguments[0];return this._messages=value;};messageRequestArgs.prototype.setOnHttpRequestCreated=function(){var value;value=arguments[0];return this._onHttpRequestCreated=value;};messageRequestArgs.prototype.setOnHttpResponseReceived=function(){var value;value=arguments[0];return this._onHttpResponseReceived=value;};messageRequestArgs.prototype.setOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=value;};messageRequestArgs.prototype.setOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=value;};messageRequestArgs.prototype.setSender=function(){var value;value=arguments[0];return this._sender=value;};messageRequestArgs.prototype.setTimeout=function(){var value;value=arguments[0];return this._timeout=value;};messageRequestArgs.prototype.setUrl=function(){var value;value=arguments[0];return this._url=value;};return messageRequestArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageResponseArgs=(function(superClass){extend(messageResponseArgs,superClass);messageResponseArgs.prototype._exception=null;messageResponseArgs.prototype._headers=null;messageResponseArgs.prototype._messages=null;messageResponseArgs.prototype._requestArgs=null;function messageResponseArgs(){this.setRequestArgs=bind(this.setRequestArgs,this);this.setMessages=bind(this.setMessages,this);this.setHeaders=bind(this.setHeaders,this);this.setException=bind(this.setException,this);this.getRequestArgs=bind(this.getRequestArgs,this);this.getMessages=bind(this.getMessages,this);this.getHeaders=bind(this.getHeaders,this);this.getException=bind(this.getException,this);var instance,requestArgs;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
requestArgs=arguments[0];instance=messageResponseArgs.__super__.constructor.call(this);this.setRequestArgs(requestArgs);return instance;}
messageResponseArgs.prototype.getException=function(){return this._exception;};messageResponseArgs.prototype.getHeaders=function(){return this._headers;};messageResponseArgs.prototype.getMessages=function(){return this._messages;};messageResponseArgs.prototype.getRequestArgs=function(){return this._requestArgs;};messageResponseArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};messageResponseArgs.prototype.setHeaders=function(){var value;value=arguments[0];return this._headers=value;};messageResponseArgs.prototype.setMessages=function(){var value;value=arguments[0];return this._messages=value;};messageResponseArgs.prototype.setRequestArgs=function(){var value;value=arguments[0];return this._requestArgs=value;};return messageResponseArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifyArgs=(function(superClass){extend(notifyArgs,superClass);notifyArgs.prototype.__dataBytes=null;notifyArgs.prototype.__dataJson=null;notifyArgs.prototype._onComplete=null;notifyArgs.prototype._onFailure=null;notifyArgs.prototype._onSuccess=null;function notifyArgs(){this.setData=bind(this.setData,this);this.getData=bind(this.getData,this);this.setTag=bind(this.setTag,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setDataJson=bind(this.setDataJson,this);this.setDataBytes=bind(this.setDataBytes,this);this.setClientId=bind(this.setClientId,this);this.getTag=bind(this.getTag,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getClientId=bind(this.getClientId,this);var clientId,dataJson,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifyArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===3){clientId=arguments[0];dataJson=arguments[1];tag=arguments[2];instance=notifyArgs.__super__.constructor.call(this);this.setClientId(clientId);this.setDataJson(dataJson);this.setTag(tag);return instance;}
if(arguments.length===2){clientId=arguments[0];dataJson=arguments[1];notifyArgs.call(this,clientId,dataJson,null);return instance;}}
notifyArgs.prototype.getClientId=function(){var nullable;nullable=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"));if(nullable!==null){return nullable;}
return fm.guid.empty;};notifyArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};notifyArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};notifyArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};notifyArgs.prototype.getOnComplete=function(){return this._onComplete;};notifyArgs.prototype.getOnFailure=function(){return this._onFailure;};notifyArgs.prototype.getOnSuccess=function(){return this._onSuccess;};notifyArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};notifyArgs.prototype.setClientId=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(value),false);};notifyArgs.prototype.setDataBytes=function(){var value;value=arguments[0];this.__dataJson=null;return this.__dataBytes=value;};notifyArgs.prototype.setDataJson=function(){var value;value=arguments[0];if(!((fm.global.equals(value,null))||fm.serializer.isValidJson(value))){throw new Error("The value is not valid JSON.");}
this.__dataJson=value;return this.__dataBytes=null;};notifyArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};notifyArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};notifyArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};notifyArgs.prototype.setTag=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value),false);};notifyArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};notifyArgs.prototype.setData=function(){var data;data=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setDataJson.apply(this,arguments);};return notifyArgs;})(fm.websync.baseInputArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseCompleteArgs=(function(superClass){extend(baseCompleteArgs,superClass);function baseCompleteArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseCompleteArgs.__super__.constructor.call(this);return instance;}
return baseCompleteArgs;})(fm.websync.baseOutputArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifyCompleteArgs=(function(superClass){extend(notifyCompleteArgs,superClass);function notifyCompleteArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifyCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=notifyCompleteArgs.__super__.constructor.call(this);return instance;}
return notifyCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseFailureArgs=(function(superClass){extend(baseFailureArgs,superClass);baseFailureArgs.prototype._exception=null;baseFailureArgs.prototype._retry=false;function baseFailureArgs(){this.setRetry=bind(this.setRetry,this);this.setException=bind(this.setException,this);this.getRetry=bind(this.getRetry,this);this.getException=bind(this.getException,this);this.getErrorMessage=bind(this.getErrorMessage,this);this.getErrorCode=bind(this.getErrorCode,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseFailureArgs.__super__.constructor.call(this);return instance;}
baseFailureArgs.getErrorCode=function(){var _var0,_var1,error,exception,intResult,obj1,s;exception=arguments[0];intResult=-1;try{if((fm.global.equals(exception,null))||fm.stringExtensions.isNullOrEmpty(exception.message)){return intResult;}
if(fm.stringExtensions.indexOf(exception.message,"::")<=-1){return intResult;}
s=fm.splitter.split(exception.message,"::")[0];_var0=new fm.holder(intResult);_var1=fm.parseAssistant.tryParseIntegerValue(s,_var0);intResult=_var0.getValue();if(!_var1){intResult=-1;}}catch(error){obj1=error;}finally{}
return intResult;};baseFailureArgs.getErrorMessage=function(){var error,exception,message,obj1;exception=arguments[0];message=null;try{if((fm.global.equals(exception,null))||fm.stringExtensions.isNullOrEmpty(exception.message)){return message;}
if(fm.stringExtensions.indexOf(exception.message,"::")>-1){return fm.splitter.split(exception.message,"::")[1];}
message=exception.message;}catch(error){obj1=error;}finally{}
return message;};baseFailureArgs.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException());};baseFailureArgs.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException());};baseFailureArgs.prototype.getException=function(){return this._exception;};baseFailureArgs.prototype.getRetry=function(){return this._retry;};baseFailureArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};baseFailureArgs.prototype.setRetry=function(){var value;value=arguments[0];return this._retry=value;};return baseFailureArgs;})(fm.websync.baseOutputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifyFailureArgs=(function(superClass){extend(notifyFailureArgs,superClass);notifyFailureArgs.prototype.__dataBytes=null;notifyFailureArgs.prototype.__dataJson=null;function notifyFailureArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getClientId=bind(this.getClientId,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifyFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=notifyFailureArgs.__super__.constructor.call(this);return instance;}
notifyFailureArgs.prototype.getClientId=function(){var nullable;nullable=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"));if(nullable!==null){return nullable;}
return fm.guid.empty;};notifyFailureArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};notifyFailureArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};notifyFailureArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};notifyFailureArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};notifyFailureArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return notifyFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifySuccessArgs=(function(superClass){extend(notifySuccessArgs,superClass);notifySuccessArgs.prototype.__dataBytes=null;notifySuccessArgs.prototype.__dataJson=null;function notifySuccessArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getClientId=bind(this.getClientId,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifySuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=notifySuccessArgs.__super__.constructor.call(this);return instance;}
notifySuccessArgs.prototype.getClientId=function(){var nullable;nullable=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"));if(nullable!==null){return nullable;}
return fm.guid.empty;};notifySuccessArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};notifySuccessArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};notifySuccessArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};notifySuccessArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};notifySuccessArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return notifySuccessArgs;})(fm.websync.baseSuccessArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherNotifyResponseArgs=(function(superClass){extend(publisherNotifyResponseArgs,superClass);function publisherNotifyResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherNotifyResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherNotifyResponseArgs.__super__.constructor.call(this);return instance;}
return publisherNotifyResponseArgs;})(fm.websync.basePublisherResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherNotifyRequestArgs=(function(superClass){extend(publisherNotifyRequestArgs,superClass);function publisherNotifyRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherNotifyRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherNotifyRequestArgs.__super__.constructor.call(this);return instance;}
return publisherNotifyRequestArgs;})(fm.websync.basePublisherRequestEventArgsGeneric);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unhandledExceptionArgs=(function(superClass){extend(unhandledExceptionArgs,superClass);unhandledExceptionArgs.prototype.__exception=null;unhandledExceptionArgs.prototype._handled=false;function unhandledExceptionArgs(){this.setHandled=bind(this.setHandled,this);this.getHandled=bind(this.getHandled,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unhandledExceptionArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unhandledExceptionArgs.__super__.constructor.call(this);return instance;}
unhandledExceptionArgs.prototype.getException=function(){return this.__exception;};unhandledExceptionArgs.prototype.getHandled=function(){return this._handled;};unhandledExceptionArgs.prototype.setHandled=function(){var value;value=arguments[0];return this._handled=value;};return unhandledExceptionArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientResponseArgs=(function(superClass){extend(clientResponseArgs,superClass);clientResponseArgs.prototype._exception=null;clientResponseArgs.prototype._responses=null;function clientResponseArgs(){this.setResponses=bind(this.setResponses,this);this.setResponse=bind(this.setResponse,this);this.setException=bind(this.setException,this);this.getResponses=bind(this.getResponses,this);this.getResponse=bind(this.getResponse,this);this.getException=bind(this.getException,this);this.getErrorMessage=bind(this.getErrorMessage,this);this.getErrorCode=bind(this.getErrorCode,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientResponseArgs.__super__.constructor.call(this);return instance;}
clientResponseArgs.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException());};clientResponseArgs.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException());};clientResponseArgs.prototype.getException=function(){return this._exception;};clientResponseArgs.prototype.getResponse=function(){if((fm.global.equals(this.getResponses(),null))||(fm.global.equals(this.getResponses().length,0))){return null;}
return this.getResponses()[0];};clientResponseArgs.prototype.getResponses=function(){return this._responses;};clientResponseArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};clientResponseArgs.prototype.setResponse=function(){var value;value=arguments[0];return this.setResponses([value]);};clientResponseArgs.prototype.setResponses=function(){var value;value=arguments[0];return this._responses=value;};return clientResponseArgs;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.connectArgs=(function(superClass){extend(connectArgs,superClass);connectArgs.prototype._defaultRetryBackoffTimeout=0;connectArgs.prototype._isReconnect=false;connectArgs.prototype._lastClientId=null;connectArgs.prototype._lastSessionId=null;connectArgs.prototype._onComplete=null;connectArgs.prototype._onFailure=null;connectArgs.prototype._onStateRestored=null;connectArgs.prototype._onStreamFailure=null;connectArgs.prototype._onSuccess=null;connectArgs.prototype._retryBackoff=null;connectArgs.prototype._retryMode=null;function connectArgs(){this.setRetryMode=bind(this.setRetryMode,this);this.setRetryBackoff=bind(this.setRetryBackoff,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnStreamFailure=bind(this.setOnStreamFailure,this);this.setOnStateRestored=bind(this.setOnStateRestored,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setLastSessionId=bind(this.setLastSessionId,this);this.setLastClientId=bind(this.setLastClientId,this);this.setIsReconnect=bind(this.setIsReconnect,this);this.getRetryMode=bind(this.getRetryMode,this);this.getRetryBackoff=bind(this.getRetryBackoff,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnStreamFailure=bind(this.getOnStreamFailure,this);this.getOnStateRestored=bind(this.getOnStateRestored,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getLastSessionId=bind(this.getLastSessionId,this);this.getLastClientId=bind(this.getLastClientId,this);this.getIsReconnect=bind(this.getIsReconnect,this);this.defaultRetryBackoff=bind(this.defaultRetryBackoff,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=connectArgs.__super__.constructor.call(this);this._defaultRetryBackoffTimeout=500;this.setRetryMode(fm.websync.connectRetryMode.Intelligent);this.setRetryBackoff(this.defaultRetryBackoff);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=connectArgs.__super__.constructor.call(this);this._defaultRetryBackoffTimeout=500;this.setRetryMode(fm.websync.connectRetryMode.Intelligent);this.setRetryBackoff(this.defaultRetryBackoff);return instance;}
connectArgs.prototype.defaultRetryBackoff=function(){var e;e=arguments[0];if(fm.global.equals(e.getIndex(),0)){return this._defaultRetryBackoffTimeout;}
return e.getLastTimeout()*2;};connectArgs.prototype.getIsReconnect=function(){return this._isReconnect;};connectArgs.prototype.getLastClientId=function(){return this._lastClientId;};connectArgs.prototype.getLastSessionId=function(){return this._lastSessionId;};connectArgs.prototype.getOnComplete=function(){return this._onComplete;};connectArgs.prototype.getOnFailure=function(){return this._onFailure;};connectArgs.prototype.getOnStateRestored=function(){return this._onStateRestored;};connectArgs.prototype.getOnStreamFailure=function(){return this._onStreamFailure;};connectArgs.prototype.getOnSuccess=function(){return this._onSuccess;};connectArgs.prototype.getRetryBackoff=function(){return this._retryBackoff;};connectArgs.prototype.getRetryMode=function(){return this._retryMode;};connectArgs.prototype.setIsReconnect=function(){var value;value=arguments[0];return this._isReconnect=value;};connectArgs.prototype.setLastClientId=function(){var value;value=arguments[0];return this._lastClientId=value;};connectArgs.prototype.setLastSessionId=function(){var value;value=arguments[0];return this._lastSessionId=value;};connectArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};connectArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};connectArgs.prototype.setOnStateRestored=function(){var value;value=arguments[0];return this._onStateRestored=value;};connectArgs.prototype.setOnStreamFailure=function(){var value;value=arguments[0];return this._onStreamFailure=value;};connectArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};connectArgs.prototype.setRetryBackoff=function(){var value;value=arguments[0];return this._retryBackoff=value;};connectArgs.prototype.setRetryMode=function(){var value;value=arguments[0];return this._retryMode=value;};return connectArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.bindArgs=(function(superClass){extend(bindArgs,superClass);bindArgs.prototype.__records=null;bindArgs.prototype._autoRebind=null;bindArgs.prototype._isRebind=false;bindArgs.prototype._onComplete=null;bindArgs.prototype._onFailure=null;bindArgs.prototype._onSuccess=null;function bindArgs(){this.setRecords=bind(this.setRecords,this);this.setRecord=bind(this.setRecord,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setIsRebind=bind(this.setIsRebind,this);this.setAutoRebind=bind(this.setAutoRebind,this);this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getIsRebind=bind(this.getIsRebind,this);this.getAutoRebind=bind(this.getAutoRebind,this);var instance,records;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=bindArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
records=arguments[0];instance=bindArgs.__super__.constructor.call(this);this.setRecords(records);return instance;}
bindArgs.prototype.getAutoRebind=function(){return this._autoRebind;};bindArgs.prototype.getIsRebind=function(){return this._isRebind;};bindArgs.prototype.getOnComplete=function(){return this._onComplete;};bindArgs.prototype.getOnFailure=function(){return this._onFailure;};bindArgs.prototype.getOnSuccess=function(){return this._onSuccess;};bindArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};bindArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};bindArgs.prototype.setAutoRebind=function(){var value;value=arguments[0];return this._autoRebind=value;};bindArgs.prototype.setIsRebind=function(){var value;value=arguments[0];return this._isRebind=value;};bindArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};bindArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};bindArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};bindArgs.prototype.setRecord=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetRecord(value);};bindArgs.prototype.setRecords=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetRecords(value);};return bindArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serviceArgs=(function(superClass){extend(serviceArgs,superClass);serviceArgs.prototype.__channel=null;serviceArgs.prototype.__dataBytes=null;serviceArgs.prototype.__dataJson=null;serviceArgs.prototype._onComplete=null;serviceArgs.prototype._onFailure=null;serviceArgs.prototype._onSuccess=null;function serviceArgs(){this.setData=bind(this.setData,this);this.getData=bind(this.getData,this);this.setTag=bind(this.setTag,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setDataJson=bind(this.setDataJson,this);this.setDataBytes=bind(this.setDataBytes,this);this.setChannel=bind(this.setChannel,this);this.getTag=bind(this.getTag,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var channel,dataJson,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serviceArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===3){channel=arguments[0];dataJson=arguments[1];tag=arguments[2];instance=serviceArgs.__super__.constructor.call(this);this.setChannel(channel);this.setDataJson(dataJson);this.setTag(tag);return instance;}
if(arguments.length===2){channel=arguments[0];dataJson=arguments[1];serviceArgs.call(this,channel,dataJson,null);return instance;}}
serviceArgs.prototype.getChannel=function(){return this.__channel;};serviceArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};serviceArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};serviceArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};serviceArgs.prototype.getOnComplete=function(){return this._onComplete;};serviceArgs.prototype.getOnFailure=function(){return this._onFailure;};serviceArgs.prototype.getOnSuccess=function(){return this._onSuccess;};serviceArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};serviceArgs.prototype.setChannel=function(){var _var0,_var1,error,value;value=arguments[0];error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateChannel(value,_var0);error=_var0.getValue();if(!_var1){throw new Error(fm.stringExtensions.format("Invalid channel. {0}",error));}
return this.__channel=value;};serviceArgs.prototype.setDataBytes=function(){var value;value=arguments[0];this.__dataJson=null;return this.__dataBytes=value;};serviceArgs.prototype.setDataJson=function(){var value;value=arguments[0];if(!((fm.global.equals(value,null))||fm.serializer.isValidJson(value))){throw new Error("The value is not valid JSON.");}
this.__dataJson=value;return this.__dataBytes=null;};serviceArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};serviceArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};serviceArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};serviceArgs.prototype.setTag=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value),false);};serviceArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};serviceArgs.prototype.setData=function(){var data;data=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setDataJson.apply(this,arguments);};return serviceArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unbindArgs=(function(superClass){extend(unbindArgs,superClass);unbindArgs.prototype.__records=null;unbindArgs.prototype._onComplete=null;unbindArgs.prototype._onFailure=null;unbindArgs.prototype._onSuccess=null;function unbindArgs(){this.setRecords=bind(this.setRecords,this);this.setRecord=bind(this.setRecord,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setKeys=bind(this.setKeys,this);this.setKey=bind(this.setKey,this);this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);var instance,records;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unbindArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
records=arguments[0];instance=unbindArgs.__super__.constructor.call(this);this.setRecords(records);return instance;}
unbindArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};unbindArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};unbindArgs.prototype.getOnComplete=function(){return this._onComplete;};unbindArgs.prototype.getOnFailure=function(){return this._onFailure;};unbindArgs.prototype.getOnSuccess=function(){return this._onSuccess;};unbindArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};unbindArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};unbindArgs.prototype.setKey=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetKey(value);};unbindArgs.prototype.setKeys=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetKeys(value);};unbindArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};unbindArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};unbindArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};unbindArgs.prototype.setRecord=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetRecord(value);};unbindArgs.prototype.setRecords=function(){var value;value=arguments[0];return this.__records=fm.websync.extensible.sharedSetRecords(value);};return unbindArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.disconnectArgs=(function(superClass){extend(disconnectArgs,superClass);disconnectArgs.prototype._onComplete=null;function disconnectArgs(){this.setOnComplete=bind(this.setOnComplete,this);this.getOnComplete=bind(this.getOnComplete,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=disconnectArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=disconnectArgs.__super__.constructor.call(this);return instance;}
disconnectArgs.prototype.getOnComplete=function(){return this._onComplete;};disconnectArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};return disconnectArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publishArgs=(function(superClass){extend(publishArgs,superClass);publishArgs.prototype.__channel=null;publishArgs.prototype.__dataBytes=null;publishArgs.prototype.__dataJson=null;publishArgs.prototype._onComplete=null;publishArgs.prototype._onFailure=null;publishArgs.prototype._onSuccess=null;function publishArgs(){this.setData=bind(this.setData,this);this.getData=bind(this.getData,this);this.setTag=bind(this.setTag,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setDataJson=bind(this.setDataJson,this);this.setDataBytes=bind(this.setDataBytes,this);this.setChannel=bind(this.setChannel,this);this.getTag=bind(this.getTag,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var channel,dataJson,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publishArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===3){channel=arguments[0];dataJson=arguments[1];tag=arguments[2];instance=publishArgs.__super__.constructor.call(this);this.setChannel(channel);this.setDataJson(dataJson);this.setTag(tag);return instance;}
if(arguments.length===2){channel=arguments[0];dataJson=arguments[1];publishArgs.call(this,channel,dataJson,null);return instance;}}
publishArgs.prototype.getChannel=function(){return this.__channel;};publishArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};publishArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};publishArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};publishArgs.prototype.getOnComplete=function(){return this._onComplete;};publishArgs.prototype.getOnFailure=function(){return this._onFailure;};publishArgs.prototype.getOnSuccess=function(){return this._onSuccess;};publishArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};publishArgs.prototype.setChannel=function(){var _var0,_var1,error,value;value=arguments[0];error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateChannel(value,_var0);error=_var0.getValue();if(!_var1){throw new Error(fm.stringExtensions.format("Invalid channel. {0}",error));}
return this.__channel=value;};publishArgs.prototype.setDataBytes=function(){var value;value=arguments[0];this.__dataJson=null;return this.__dataBytes=value;};publishArgs.prototype.setDataJson=function(){var value;value=arguments[0];if(!((fm.global.equals(value,null))||fm.serializer.isValidJson(value))){throw new Error("The value is not valid JSON.");}
this.__dataJson=value;return this.__dataBytes=null;};publishArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};publishArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};publishArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};publishArgs.prototype.setTag=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value),false);};publishArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};publishArgs.prototype.setData=function(){var data;data=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setDataJson.apply(this,arguments);};return publishArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribeArgs=(function(superClass){extend(subscribeArgs,superClass);subscribeArgs.prototype.__channels=null;subscribeArgs.prototype._autoResubscribe=null;subscribeArgs.prototype._isResubscribe=false;subscribeArgs.prototype._onComplete=null;subscribeArgs.prototype._onFailure=null;subscribeArgs.prototype._onReceive=null;subscribeArgs.prototype._onSuccess=null;function subscribeArgs(){this.setTag=bind(this.setTag,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnReceive=bind(this.setOnReceive,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setIsResubscribe=bind(this.setIsResubscribe,this);this.setChannels=bind(this.setChannels,this);this.setChannel=bind(this.setChannel,this);this.setAutoResubscribe=bind(this.setAutoResubscribe,this);this.getTag=bind(this.getTag,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnReceive=bind(this.getOnReceive,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getIsResubscribe=bind(this.getIsResubscribe,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);this.getAutoResubscribe=bind(this.getAutoResubscribe,this);var channels,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribeArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){channels=arguments[0];tag=arguments[1];instance=subscribeArgs.__super__.constructor.call(this);this.setChannels(channels);this.setTag(tag);return instance;}
if(arguments.length===1){channels=arguments[0];instance=subscribeArgs.__super__.constructor.call(this);this.setChannels(channels);return instance;}}
subscribeArgs.prototype.getAutoResubscribe=function(){return this._autoResubscribe;};subscribeArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};subscribeArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};subscribeArgs.prototype.getIsResubscribe=function(){return this._isResubscribe;};subscribeArgs.prototype.getOnComplete=function(){return this._onComplete;};subscribeArgs.prototype.getOnFailure=function(){return this._onFailure;};subscribeArgs.prototype.getOnReceive=function(){return this._onReceive;};subscribeArgs.prototype.getOnSuccess=function(){return this._onSuccess;};subscribeArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};subscribeArgs.prototype.setAutoResubscribe=function(){var value;value=arguments[0];return this._autoResubscribe=value;};subscribeArgs.prototype.setChannel=function(){var value;value=arguments[0];return this.__channels=fm.websync.extensible.sharedSetChannel(value);};subscribeArgs.prototype.setChannels=function(){var value;value=arguments[0];return this.__channels=fm.websync.extensible.sharedSetChannels(value);};subscribeArgs.prototype.setIsResubscribe=function(){var value;value=arguments[0];return this._isResubscribe=value;};subscribeArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};subscribeArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};subscribeArgs.prototype.setOnReceive=function(){var value;value=arguments[0];return this._onReceive=value;};subscribeArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};subscribeArgs.prototype.setTag=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value!=null?value:fm.stringExtensions.empty),false);};return subscribeArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unsubscribeArgs=(function(superClass){extend(unsubscribeArgs,superClass);unsubscribeArgs.prototype.__channels=null;unsubscribeArgs.prototype._onComplete=null;unsubscribeArgs.prototype._onFailure=null;unsubscribeArgs.prototype._onSuccess=null;function unsubscribeArgs(){this.setTag=bind(this.setTag,this);this.setOnSuccess=bind(this.setOnSuccess,this);this.setOnFailure=bind(this.setOnFailure,this);this.setOnComplete=bind(this.setOnComplete,this);this.setChannels=bind(this.setChannels,this);this.setChannel=bind(this.setChannel,this);this.getTag=bind(this.getTag,this);this.getOnSuccess=bind(this.getOnSuccess,this);this.getOnFailure=bind(this.getOnFailure,this);this.getOnComplete=bind(this.getOnComplete,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var channels,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unsubscribeArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){channels=arguments[0];tag=arguments[1];instance=unsubscribeArgs.__super__.constructor.call(this);this.setChannels(channels);this.setTag(tag);return instance;}
if(arguments.length===1){channels=arguments[0];instance=unsubscribeArgs.__super__.constructor.call(this);this.setChannels(channels);return instance;}}
unsubscribeArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};unsubscribeArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};unsubscribeArgs.prototype.getOnComplete=function(){return this._onComplete;};unsubscribeArgs.prototype.getOnFailure=function(){return this._onFailure;};unsubscribeArgs.prototype.getOnSuccess=function(){return this._onSuccess;};unsubscribeArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};unsubscribeArgs.prototype.setChannel=function(){var value;value=arguments[0];return this.__channels=fm.websync.extensible.sharedSetChannel(value);};unsubscribeArgs.prototype.setChannels=function(){var value;value=arguments[0];return this.__channels=fm.websync.extensible.sharedSetChannels(value);};unsubscribeArgs.prototype.setOnComplete=function(){var value;value=arguments[0];return this._onComplete=value;};unsubscribeArgs.prototype.setOnFailure=function(){var value;value=arguments[0];return this._onFailure=value;};unsubscribeArgs.prototype.setOnSuccess=function(){var value;value=arguments[0];return this._onSuccess=value;};unsubscribeArgs.prototype.setTag=function(){var value;value=arguments[0];return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value!=null?value:fm.stringExtensions.empty),false);};return unsubscribeArgs;})(fm.websync.baseInputArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.connectCompleteArgs=(function(superClass){extend(connectCompleteArgs,superClass);connectCompleteArgs.prototype._isReconnect=false;function connectCompleteArgs(){this.setIsReconnect=bind(this.setIsReconnect,this);this.getIsReconnect=bind(this.getIsReconnect,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=connectCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=connectCompleteArgs.__super__.constructor.call(this);return instance;}
connectCompleteArgs.prototype.getIsReconnect=function(){return this._isReconnect;};connectCompleteArgs.prototype.setIsReconnect=function(){var value;value=arguments[0];return this._isReconnect=value;};return connectCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.bindCompleteArgs=(function(superClass){extend(bindCompleteArgs,superClass);bindCompleteArgs.prototype._isRebind=false;function bindCompleteArgs(){this.setIsRebind=bind(this.setIsRebind,this);this.getIsRebind=bind(this.getIsRebind,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=bindCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=bindCompleteArgs.__super__.constructor.call(this);return instance;}
bindCompleteArgs.prototype.getIsRebind=function(){return this._isRebind;};bindCompleteArgs.prototype.setIsRebind=function(){var value;value=arguments[0];return this._isRebind=value;};return bindCompleteArgs;})(fm.websync.baseCompleteArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serviceCompleteArgs=(function(superClass){extend(serviceCompleteArgs,superClass);function serviceCompleteArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serviceCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serviceCompleteArgs.__super__.constructor.call(this);return instance;}
return serviceCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unbindCompleteArgs=(function(superClass){extend(unbindCompleteArgs,superClass);unbindCompleteArgs.prototype.__forced=false;function unbindCompleteArgs(){this.getForced=bind(this.getForced,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unbindCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unbindCompleteArgs.__super__.constructor.call(this);return instance;}
unbindCompleteArgs.prototype.getForced=function(){return this.__forced;};return unbindCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.disconnectCompleteArgs=(function(superClass){extend(disconnectCompleteArgs,superClass);disconnectCompleteArgs.prototype._exception=null;function disconnectCompleteArgs(){this.setException=bind(this.setException,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=disconnectCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=disconnectCompleteArgs.__super__.constructor.call(this);return instance;}
disconnectCompleteArgs.prototype.getException=function(){return this._exception;};disconnectCompleteArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};return disconnectCompleteArgs;})(fm.websync.baseCompleteArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publishCompleteArgs=(function(superClass){extend(publishCompleteArgs,superClass);function publishCompleteArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publishCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publishCompleteArgs.__super__.constructor.call(this);return instance;}
return publishCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribeCompleteArgs=(function(superClass){extend(subscribeCompleteArgs,superClass);subscribeCompleteArgs.prototype._isResubscribe=false;function subscribeCompleteArgs(){this.setIsResubscribe=bind(this.setIsResubscribe,this);this.getIsResubscribe=bind(this.getIsResubscribe,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribeCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=subscribeCompleteArgs.__super__.constructor.call(this);return instance;}
subscribeCompleteArgs.prototype.getIsResubscribe=function(){return this._isResubscribe;};subscribeCompleteArgs.prototype.setIsResubscribe=function(){var value;value=arguments[0];return this._isResubscribe=value;};return subscribeCompleteArgs;})(fm.websync.baseCompleteArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unsubscribeCompleteArgs=(function(superClass){extend(unsubscribeCompleteArgs,superClass);unsubscribeCompleteArgs.prototype.__forced=false;function unsubscribeCompleteArgs(){this.getForced=bind(this.getForced,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unsubscribeCompleteArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unsubscribeCompleteArgs.__super__.constructor.call(this);return instance;}
unsubscribeCompleteArgs.prototype.getForced=function(){return this.__forced;};return unsubscribeCompleteArgs;})(fm.websync.baseCompleteArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientConnectResponseArgs=(function(superClass){extend(clientConnectResponseArgs,superClass);function clientConnectResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientConnectResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientConnectResponseArgs.__super__.constructor.call(this);return instance;}
return clientConnectResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientDisconnectResponseArgs=(function(superClass){extend(clientDisconnectResponseArgs,superClass);function clientDisconnectResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientDisconnectResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientDisconnectResponseArgs.__super__.constructor.call(this);return instance;}
return clientDisconnectResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientPublishResponseArgs=(function(superClass){extend(clientPublishResponseArgs,superClass);function clientPublishResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientPublishResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientPublishResponseArgs.__super__.constructor.call(this);return instance;}
return clientPublishResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientSubscribeResponseArgs=(function(superClass){extend(clientSubscribeResponseArgs,superClass);function clientSubscribeResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientSubscribeResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientSubscribeResponseArgs.__super__.constructor.call(this);return instance;}
return clientSubscribeResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnsubscribeResponseArgs=(function(superClass){extend(clientUnsubscribeResponseArgs,superClass);function clientUnsubscribeResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnsubscribeResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnsubscribeResponseArgs.__super__.constructor.call(this);return instance;}
return clientUnsubscribeResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientBindResponseArgs=(function(superClass){extend(clientBindResponseArgs,superClass);function clientBindResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientBindResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientBindResponseArgs.__super__.constructor.call(this);return instance;}
return clientBindResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnbindResponseArgs=(function(superClass){extend(clientUnbindResponseArgs,superClass);function clientUnbindResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnbindResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnbindResponseArgs.__super__.constructor.call(this);return instance;}
return clientUnbindResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientServiceResponseArgs=(function(superClass){extend(clientServiceResponseArgs,superClass);function clientServiceResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientServiceResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientServiceResponseArgs.__super__.constructor.call(this);return instance;}
return clientServiceResponseArgs;})(fm.websync.baseClientResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientConnectRequestArgs=(function(superClass){extend(clientConnectRequestArgs,superClass);function clientConnectRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientConnectRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientConnectRequestArgs.__super__.constructor.call(this);return instance;}
return clientConnectRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientDisconnectRequestArgs=(function(superClass){extend(clientDisconnectRequestArgs,superClass);function clientDisconnectRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientDisconnectRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientDisconnectRequestArgs.__super__.constructor.call(this);return instance;}
return clientDisconnectRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientPublishRequestArgs=(function(superClass){extend(clientPublishRequestArgs,superClass);function clientPublishRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientPublishRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientPublishRequestArgs.__super__.constructor.call(this);return instance;}
return clientPublishRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientSubscribeRequestArgs=(function(superClass){extend(clientSubscribeRequestArgs,superClass);function clientSubscribeRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientSubscribeRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientSubscribeRequestArgs.__super__.constructor.call(this);return instance;}
return clientSubscribeRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnsubscribeRequestArgs=(function(superClass){extend(clientUnsubscribeRequestArgs,superClass);function clientUnsubscribeRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnsubscribeRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnsubscribeRequestArgs.__super__.constructor.call(this);return instance;}
return clientUnsubscribeRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientBindRequestArgs=(function(superClass){extend(clientBindRequestArgs,superClass);function clientBindRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientBindRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientBindRequestArgs.__super__.constructor.call(this);return instance;}
return clientBindRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientUnbindRequestArgs=(function(superClass){extend(clientUnbindRequestArgs,superClass);function clientUnbindRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientUnbindRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientUnbindRequestArgs.__super__.constructor.call(this);return instance;}
return clientUnbindRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientServiceRequestArgs=(function(superClass){extend(clientServiceRequestArgs,superClass);function clientServiceRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientServiceRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientServiceRequestArgs.__super__.constructor.call(this);return instance;}
return clientServiceRequestArgs;})(fm.websync.baseClientRequestEventArgsGeneric);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.connectFailureArgs=(function(superClass){extend(connectFailureArgs,superClass);connectFailureArgs.prototype._isReconnect=false;function connectFailureArgs(){this.setIsReconnect=bind(this.setIsReconnect,this);this.getIsReconnect=bind(this.getIsReconnect,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=connectFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=connectFailureArgs.__super__.constructor.call(this);return instance;}
connectFailureArgs.prototype.getIsReconnect=function(){return this._isReconnect;};connectFailureArgs.prototype.setIsReconnect=function(){var value;value=arguments[0];return this._isReconnect=value;};return connectFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.bindFailureArgs=(function(superClass){extend(bindFailureArgs,superClass);bindFailureArgs.prototype.__records=null;bindFailureArgs.prototype._isRebind=false;function bindFailureArgs(){this.setIsRebind=bind(this.setIsRebind,this);this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);this.getIsRebind=bind(this.getIsRebind,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=bindFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=bindFailureArgs.__super__.constructor.call(this);return instance;}
bindFailureArgs.prototype.getIsRebind=function(){return this._isRebind;};bindFailureArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};bindFailureArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};bindFailureArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};bindFailureArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};bindFailureArgs.prototype.setIsRebind=function(){var value;value=arguments[0];return this._isRebind=value;};return bindFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serviceFailureArgs=(function(superClass){extend(serviceFailureArgs,superClass);serviceFailureArgs.prototype.__channel=null;serviceFailureArgs.prototype.__dataBytes=null;serviceFailureArgs.prototype.__dataJson=null;function serviceFailureArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serviceFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serviceFailureArgs.__super__.constructor.call(this);return instance;}
serviceFailureArgs.prototype.getChannel=function(){return this.__channel;};serviceFailureArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};serviceFailureArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};serviceFailureArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};serviceFailureArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};serviceFailureArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return serviceFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unbindFailureArgs=(function(superClass){extend(unbindFailureArgs,superClass);unbindFailureArgs.prototype.__records=null;function unbindFailureArgs(){this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unbindFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unbindFailureArgs.__super__.constructor.call(this);return instance;}
unbindFailureArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};unbindFailureArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};unbindFailureArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};unbindFailureArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};return unbindFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.streamFailureArgs=(function(superClass){extend(streamFailureArgs,superClass);streamFailureArgs.prototype._connectArgs=null;function streamFailureArgs(){this.setConnectArgs=bind(this.setConnectArgs,this);this.getConnectArgs=bind(this.getConnectArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=streamFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=streamFailureArgs.__super__.constructor.call(this);return instance;}
streamFailureArgs.prototype.getConnectArgs=function(){return this._connectArgs;};streamFailureArgs.prototype.setConnectArgs=function(){var value;value=arguments[0];return this._connectArgs=value;};return streamFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publishFailureArgs=(function(superClass){extend(publishFailureArgs,superClass);publishFailureArgs.prototype.__channel=null;publishFailureArgs.prototype.__dataBytes=null;publishFailureArgs.prototype.__dataJson=null;function publishFailureArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publishFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publishFailureArgs.__super__.constructor.call(this);return instance;}
publishFailureArgs.prototype.getChannel=function(){return this.__channel;};publishFailureArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};publishFailureArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};publishFailureArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};publishFailureArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};publishFailureArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return publishFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribeFailureArgs=(function(superClass){extend(subscribeFailureArgs,superClass);subscribeFailureArgs.prototype.__channels=null;subscribeFailureArgs.prototype._isResubscribe=false;function subscribeFailureArgs(){this.setIsResubscribe=bind(this.setIsResubscribe,this);this.getTag=bind(this.getTag,this);this.getIsResubscribe=bind(this.getIsResubscribe,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribeFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=subscribeFailureArgs.__super__.constructor.call(this);return instance;}
subscribeFailureArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};subscribeFailureArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};subscribeFailureArgs.prototype.getIsResubscribe=function(){return this._isResubscribe;};subscribeFailureArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};subscribeFailureArgs.prototype.setIsResubscribe=function(){var value;value=arguments[0];return this._isResubscribe=value;};return subscribeFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unsubscribeFailureArgs=(function(superClass){extend(unsubscribeFailureArgs,superClass);unsubscribeFailureArgs.prototype.__channels=null;function unsubscribeFailureArgs(){this.getTag=bind(this.getTag,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unsubscribeFailureArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unsubscribeFailureArgs.__super__.constructor.call(this);return instance;}
unsubscribeFailureArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};unsubscribeFailureArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};unsubscribeFailureArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};return unsubscribeFailureArgs;})(fm.websync.baseFailureArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.connectSuccessArgs=(function(superClass){extend(connectSuccessArgs,superClass);connectSuccessArgs.prototype._connectionType=null;connectSuccessArgs.prototype._isReconnect=false;function connectSuccessArgs(){this.setIsReconnect=bind(this.setIsReconnect,this);this.setConnectionType=bind(this.setConnectionType,this);this.getIsReconnect=bind(this.getIsReconnect,this);this.getConnectionType=bind(this.getConnectionType,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=connectSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=connectSuccessArgs.__super__.constructor.call(this);return instance;}
connectSuccessArgs.prototype.getConnectionType=function(){return this._connectionType;};connectSuccessArgs.prototype.getIsReconnect=function(){return this._isReconnect;};connectSuccessArgs.prototype.setConnectionType=function(){var value;value=arguments[0];return this._connectionType=value;};connectSuccessArgs.prototype.setIsReconnect=function(){var value;value=arguments[0];return this._isReconnect=value;};return connectSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.bindSuccessArgs=(function(superClass){extend(bindSuccessArgs,superClass);bindSuccessArgs.prototype.__records=null;bindSuccessArgs.prototype._isRebind=false;function bindSuccessArgs(){this.setIsRebind=bind(this.setIsRebind,this);this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);this.getIsRebind=bind(this.getIsRebind,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=bindSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=bindSuccessArgs.__super__.constructor.call(this);return instance;}
bindSuccessArgs.prototype.getIsRebind=function(){return this._isRebind;};bindSuccessArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};bindSuccessArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};bindSuccessArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};bindSuccessArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};bindSuccessArgs.prototype.setIsRebind=function(){var value;value=arguments[0];return this._isRebind=value;};return bindSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serviceSuccessArgs=(function(superClass){extend(serviceSuccessArgs,superClass);serviceSuccessArgs.prototype.__channel=null;serviceSuccessArgs.prototype.__dataBytes=null;serviceSuccessArgs.prototype.__dataJson=null;function serviceSuccessArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serviceSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serviceSuccessArgs.__super__.constructor.call(this);return instance;}
serviceSuccessArgs.prototype.getChannel=function(){return this.__channel;};serviceSuccessArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};serviceSuccessArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};serviceSuccessArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};serviceSuccessArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};serviceSuccessArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return serviceSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unbindSuccessArgs=(function(superClass){extend(unbindSuccessArgs,superClass);unbindSuccessArgs.prototype.__forced=false;unbindSuccessArgs.prototype.__records=null;function unbindSuccessArgs(){this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);this.getForced=bind(this.getForced,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unbindSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unbindSuccessArgs.__super__.constructor.call(this);return instance;}
unbindSuccessArgs.prototype.getForced=function(){return this.__forced;};unbindSuccessArgs.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};unbindSuccessArgs.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};unbindSuccessArgs.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};unbindSuccessArgs.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};return unbindSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publishSuccessArgs=(function(superClass){extend(publishSuccessArgs,superClass);publishSuccessArgs.prototype.__channel=null;publishSuccessArgs.prototype.__dataBytes=null;publishSuccessArgs.prototype.__dataJson=null;function publishSuccessArgs(){this.getData=bind(this.getData,this);this.getTag=bind(this.getTag,this);this.getIsBinary=bind(this.getIsBinary,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publishSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publishSuccessArgs.__super__.constructor.call(this);return instance;}
publishSuccessArgs.prototype.getChannel=function(){return this.__channel;};publishSuccessArgs.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};publishSuccessArgs.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};publishSuccessArgs.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};publishSuccessArgs.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};publishSuccessArgs.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};return publishSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribeReceiveArgs=(function(superClass){extend(subscribeReceiveArgs,superClass);subscribeReceiveArgs.prototype.__channel=null;function subscribeReceiveArgs(){this.getWasSentByMe=bind(this.getWasSentByMe,this);this.getPublishingClient=bind(this.getPublishingClient,this);this.getChannel=bind(this.getChannel,this);var channel,connectionType,dataBytes,dataJson,instance,reconnectAfter;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribeReceiveArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
channel=arguments[0];dataJson=arguments[1];dataBytes=arguments[2];connectionType=arguments[3];reconnectAfter=arguments[4];instance=subscribeReceiveArgs.__super__.constructor.call(this,dataJson,dataBytes,connectionType,reconnectAfter);this.__channel=channel;return instance;}
subscribeReceiveArgs.prototype.getChannel=function(){return this.__channel;};subscribeReceiveArgs.prototype.getPublishingClient=function(){return fm.websync.publishingClient.fromJson(this.getExtensionValueJson("fm.publishing"));};subscribeReceiveArgs.prototype.getWasSentByMe=function(){return(((!fm.global.equals(this.getPublishingClient(),null))&&(!fm.global.equals(this.getClient(),null)))&&(this.getPublishingClient().getClientId()!==null))&&(fm.guid.equals(this.getPublishingClient().getClientId(),this.getClient().getClientId()));};return subscribeReceiveArgs;})(fm.websync.baseReceiveArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribeSuccessArgs=(function(superClass){extend(subscribeSuccessArgs,superClass);subscribeSuccessArgs.prototype.__channels=null;subscribeSuccessArgs.prototype._isResubscribe=false;function subscribeSuccessArgs(){this.setIsResubscribe=bind(this.setIsResubscribe,this);this.getTag=bind(this.getTag,this);this.getIsResubscribe=bind(this.getIsResubscribe,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribeSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=subscribeSuccessArgs.__super__.constructor.call(this);return instance;}
subscribeSuccessArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};subscribeSuccessArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};subscribeSuccessArgs.prototype.getIsResubscribe=function(){return this._isResubscribe;};subscribeSuccessArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};subscribeSuccessArgs.prototype.setIsResubscribe=function(){var value;value=arguments[0];return this._isResubscribe=value;};return subscribeSuccessArgs;})(fm.websync.baseSuccessArgs);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.unsubscribeSuccessArgs=(function(superClass){extend(unsubscribeSuccessArgs,superClass);unsubscribeSuccessArgs.prototype.__channels=null;unsubscribeSuccessArgs.prototype.__forced=false;function unsubscribeSuccessArgs(){this.getTag=bind(this.getTag,this);this.getForced=bind(this.getForced,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=unsubscribeSuccessArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=unsubscribeSuccessArgs.__super__.constructor.call(this);return instance;}
unsubscribeSuccessArgs.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};unsubscribeSuccessArgs.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};unsubscribeSuccessArgs.prototype.getForced=function(){return this.__forced;};unsubscribeSuccessArgs.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};return unsubscribeSuccessArgs;})(fm.websync.baseSuccessArgs);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherPublishResponseArgs=(function(superClass){extend(publisherPublishResponseArgs,superClass);function publisherPublishResponseArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherPublishResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherPublishResponseArgs.__super__.constructor.call(this);return instance;}
return publisherPublishResponseArgs;})(fm.websync.basePublisherResponseEventArgsGeneric);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherPublishRequestArgs=(function(superClass){extend(publisherPublishRequestArgs,superClass);function publisherPublishRequestArgs(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherPublishRequestArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherPublishRequestArgs.__super__.constructor.call(this);return instance;}
return publisherPublishRequestArgs;})(fm.websync.basePublisherRequestEventArgsGeneric);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.deferredRetryConnectState=(function(superClass){extend(deferredRetryConnectState,superClass);deferredRetryConnectState.prototype._backoffTimeout=0;deferredRetryConnectState.prototype._connectArgs=null;function deferredRetryConnectState(){this.setConnectArgs=bind(this.setConnectArgs,this);this.setBackoffTimeout=bind(this.setBackoffTimeout,this);this.getConnectArgs=bind(this.getConnectArgs,this);this.getBackoffTimeout=bind(this.getBackoffTimeout,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=deferredRetryConnectState.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=deferredRetryConnectState.__super__.constructor.call(this);return instance;}
deferredRetryConnectState.prototype.getBackoffTimeout=function(){return this._backoffTimeout;};deferredRetryConnectState.prototype.getConnectArgs=function(){return this._connectArgs;};deferredRetryConnectState.prototype.setBackoffTimeout=function(){var value;value=arguments[0];return this._backoffTimeout=value;};deferredRetryConnectState.prototype.setConnectArgs=function(){var value;value=arguments[0];return this._connectArgs=value;};return deferredRetryConnectState;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.deferredStreamState=(function(superClass){extend(deferredStreamState,superClass);deferredStreamState.prototype._connectArgs=null;deferredStreamState.prototype._receivedMessages=false;function deferredStreamState(){this.setReceivedMessages=bind(this.setReceivedMessages,this);this.setConnectArgs=bind(this.setConnectArgs,this);this.getReceivedMessages=bind(this.getReceivedMessages,this);this.getConnectArgs=bind(this.getConnectArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=deferredStreamState.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=deferredStreamState.__super__.constructor.call(this);return instance;}
deferredStreamState.prototype.getConnectArgs=function(){return this._connectArgs;};deferredStreamState.prototype.getReceivedMessages=function(){return this._receivedMessages;};deferredStreamState.prototype.setConnectArgs=function(){var value;value=arguments[0];return this._connectArgs=value;};deferredStreamState.prototype.setReceivedMessages=function(){var value;value=arguments[0];return this._receivedMessages=value;};return deferredStreamState;})(fm.object);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageTransferFactory=(function(superClass){extend(messageTransferFactory,superClass);messageTransferFactory._createHttpMessageTransfer=null;messageTransferFactory._createWebSocketMessageTransfer=null;function messageTransferFactory(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageTransferFactory.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=messageTransferFactory.__super__.constructor.call(this);return instance;}
messageTransferFactory.defaultCreateHttpMessageTransfer=function(){return new fm.websync.httpMessageTransfer();};messageTransferFactory.defaultCreateWebSocketMessageTransfer=function(){var requestUrl;requestUrl=arguments[0];return new fm.websync.webSocketMessageTransfer(requestUrl);};messageTransferFactory.getCreateHttpMessageTransfer=function(){return fm.websync.messageTransferFactory._createHttpMessageTransfer;};messageTransferFactory.getCreateWebSocketMessageTransfer=function(){return fm.websync.messageTransferFactory._createWebSocketMessageTransfer;};messageTransferFactory.getHttpMessageTransfer=function(){var transfer;if(fm.global.equals(fm.websync.messageTransferFactory.getCreateHttpMessageTransfer(),null)){messageTransferFactory.setCreateHttpMessageTransfer(messageTransferFactory.defaultCreateHttpMessageTransfer);}
transfer=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer()();if(fm.global.equals(transfer,null)){transfer=fm.websync.messageTransferFactory.defaultCreateHttpMessageTransfer();}
return transfer;};messageTransferFactory.getWebSocketMessageTransfer=function(){var requestUrl,transfer;requestUrl=arguments[0];if(fm.global.equals(fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer(),null)){messageTransferFactory.setCreateWebSocketMessageTransfer(messageTransferFactory.defaultCreateWebSocketMessageTransfer);}
transfer=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer()(requestUrl);if(fm.global.equals(transfer,null)){transfer=fm.websync.messageTransferFactory.defaultCreateWebSocketMessageTransfer(requestUrl);}
return transfer;};messageTransferFactory.setCreateHttpMessageTransfer=function(){var value;value=arguments[0];return messageTransferFactory._createHttpMessageTransfer=value;};messageTransferFactory.setCreateWebSocketMessageTransfer=function(){var value;value=arguments[0];return messageTransferFactory._createWebSocketMessageTransfer=value;};return messageTransferFactory;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.messageTransfer=(function(superClass){extend(messageTransfer,superClass);messageTransfer.prototype._messageTransferCallbackKey=null;messageTransfer.prototype._requestArgsKey=null;function messageTransfer(){this.shutdown=bind(this.shutdown,this);this.sendMessagesAsync=bind(this.sendMessagesAsync,this);this.sendMessages=bind(this.sendMessages,this);this.sendAsyncCallback=bind(this.sendAsyncCallback,this);this.sendAsync=bind(this.sendAsync,this);this.send=bind(this.send,this);this.messageRequestArgsToHttpRequestArgs=bind(this.messageRequestArgsToHttpRequestArgs,this);this.httpResponseArgsToMessageResponseArgs=bind(this.httpResponseArgsToMessageResponseArgs,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=messageTransfer.__super__.constructor.call(this);this._messageTransferCallbackKey="fm.websync.messageTransfer.callback";this._requestArgsKey="fm.websync.messageTransfer.requestArgs";fm.util.attachProperties(this,arguments[0]);return instance;}
instance=messageTransfer.__super__.constructor.call(this);this._messageTransferCallbackKey="fm.websync.messageTransfer.callback";this._requestArgsKey="fm.websync.messageTransfer.requestArgs";return instance;}
messageTransfer.raiseRequestCreated=function(){var p,requestArgs;requestArgs=arguments[0];if(!fm.global.equals(requestArgs.getOnRequestCreated(),null)){p=new fm.websync.messageRequestCreatedArgs();p.setRequests(requestArgs.getMessages());p.setSender(requestArgs.getSender());return requestArgs.getOnRequestCreated()(p);}};messageTransfer.raiseResponseReceived=function(){var p,responseArgs;responseArgs=arguments[0];if((fm.global.equals(responseArgs.getException(),null))&&(!fm.global.equals(responseArgs.getRequestArgs().getOnResponseReceived(),null))){p=new fm.websync.messageResponseReceivedArgs();p.setResponses(responseArgs.getMessages());p.setSender(responseArgs.getRequestArgs().getSender());return responseArgs.getRequestArgs().getOnResponseReceived()(p);}};messageTransfer.prototype.httpResponseArgsToMessageResponseArgs=function(){var args2,args3,dynamicValue,httpResponseArgs;httpResponseArgs=arguments[0];dynamicValue=httpResponseArgs.getRequestArgs().getDynamicValue(this._requestArgsKey);args3=new fm.websync.messageResponseArgs(dynamicValue);args3.setException(httpResponseArgs.getException());args3.setHeaders(httpResponseArgs.getHeaders());args2=args3;if(!fm.stringExtensions.isNullOrEmpty(httpResponseArgs.getTextContent())){args2.setMessages(fm.websync.message.fromJsonMultiple(httpResponseArgs.getTextContent()));return args2;}
if(!fm.global.equals(httpResponseArgs.getBinaryContent(),null)){args2.setMessages(fm.websync.message.fromBinaryMultiple(httpResponseArgs.getBinaryContent()));}
return args2;};messageTransfer.prototype.messageRequestArgsToHttpRequestArgs=function(){var _var0,args,args2,i,len,requestArgs,str;requestArgs=arguments[0];args2=new fm.httpRequestArgs();args2.setMethod(fm.httpMethod.Post);args2.setOnRequestCreated(requestArgs.getOnHttpRequestCreated());args2.setOnResponseReceived(requestArgs.getOnHttpResponseReceived());args2.setSender(requestArgs.getSender());args2.setTimeout(requestArgs.getTimeout());args2.setUrl(requestArgs.getUrl());args2.setDynamicProperties(requestArgs.getDynamicProperties());args=args2;args.setDynamicValue(this._requestArgsKey,requestArgs);_var0=requestArgs.getHeaders().getAllKeys();for(i=0,len=_var0.length;i<len;i++){str=_var0[i];args.getHeaders().set(str,requestArgs.getHeaders().get(str));}
args.setTextContent(fm.websync.message.toJsonMultiple(requestArgs.getMessages()));args.getHeaders().set("Content-Type","application/json");if(requestArgs.getIsBinary()){args.setBinaryContent(fm.websync.message.toBinaryMultiple(requestArgs.getMessages()));args.getHeaders().set("Content-Type","application/octet-stream");}
return args;};messageTransfer.prototype.send=function(){var args,args2,error,exception,requestArgs;requestArgs=arguments[0];fm.websync.messageTransfer.raiseRequestCreated(requestArgs);try{args=this.sendMessages(requestArgs);fm.websync.messageTransfer.raiseResponseReceived(args);}catch(error){exception=error;args2=new fm.websync.messageResponseArgs(requestArgs);args2.setException(exception);args=args2;}finally{}
return args;};messageTransfer.prototype.sendAsync=function(){var callback,error,exception,p,requestArgs;requestArgs=arguments[0];callback=arguments[1];fm.websync.messageTransfer.raiseRequestCreated(requestArgs);requestArgs.setDynamicValue(this._messageTransferCallbackKey,callback);try{return this.sendMessagesAsync(requestArgs,this.sendAsyncCallback);}catch(error){exception=error;p=new fm.websync.messageResponseArgs(requestArgs);p.setException(exception);return callback(p);}finally{}};messageTransfer.prototype.sendAsyncCallback=function(){var dynamicValue,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getRequestArgs().getDynamicValue(this._messageTransferCallbackKey);responseArgs.getRequestArgs().unsetDynamicValue(this._messageTransferCallbackKey);fm.websync.messageTransfer.raiseResponseReceived(responseArgs);return dynamicValue(responseArgs);};messageTransfer.prototype.sendMessages=function(){var requestArgs;return requestArgs=arguments[0];};messageTransfer.prototype.sendMessagesAsync=function(){var callback,requestArgs;requestArgs=arguments[0];return callback=arguments[1];};messageTransfer.prototype.shutdown=function(){};return messageTransfer;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.httpMessageTransfer=(function(superClass){extend(httpMessageTransfer,superClass);httpMessageTransfer.prototype._callbackKey=null;httpMessageTransfer.prototype._httpTransfer=null;function httpMessageTransfer(){this.shutdown=bind(this.shutdown,this);this.sendMessagesAsyncCallback=bind(this.sendMessagesAsyncCallback,this);this.sendMessagesAsync=bind(this.sendMessagesAsync,this);this.sendMessages=bind(this.sendMessages,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=httpMessageTransfer.__super__.constructor.call(this);this._callbackKey="fm.websync.httpMessageTransfer.callback";this._httpTransfer=fm.httpTransferFactory.getHttpTransfer();fm.util.attachProperties(this,arguments[0]);return instance;}
instance=httpMessageTransfer.__super__.constructor.call(this);this._callbackKey="fm.websync.httpMessageTransfer.callback";this._httpTransfer=fm.httpTransferFactory.getHttpTransfer();return instance;}
httpMessageTransfer.prototype.sendMessages=function(){var args,httpResponseArgs,requestArgs;requestArgs=arguments[0];args=this.messageRequestArgsToHttpRequestArgs(requestArgs);httpResponseArgs=this._httpTransfer.send(args);return this.httpResponseArgsToMessageResponseArgs(httpResponseArgs);};httpMessageTransfer.prototype.sendMessagesAsync=function(){var args,callback,requestArgs;requestArgs=arguments[0];callback=arguments[1];args=this.messageRequestArgsToHttpRequestArgs(requestArgs);args.setDynamicValue(this._callbackKey,callback);return this._httpTransfer.sendAsync(args,this.sendMessagesAsyncCallback);};httpMessageTransfer.prototype.sendMessagesAsyncCallback=function(){var dynamicValue,httpResponseArgs;httpResponseArgs=arguments[0];dynamicValue=httpResponseArgs.getRequestArgs().getDynamicValue(this._callbackKey);httpResponseArgs.getRequestArgs().unsetDynamicValue(this._callbackKey);return dynamicValue(this.httpResponseArgsToMessageResponseArgs(httpResponseArgs));};httpMessageTransfer.prototype.shutdown=function(){var error,exception1;try{return this._httpTransfer.shutdown();}catch(error){exception1=error;}finally{}};return httpMessageTransfer;})(fm.websync.messageTransfer);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notifyingClient=(function(superClass){extend(notifyingClient,superClass);notifyingClient.prototype._boundRecords=null;notifyingClient.prototype._clientId=null;function notifyingClient(){this.getBoundRecordValue=bind(this.getBoundRecordValue,this);this.toJson=bind(this.toJson,this);this.setClientId=bind(this.setClientId,this);this.setBoundRecords=bind(this.setBoundRecords,this);this.getClientId=bind(this.getClientId,this);this.getBoundRecordValueJson=bind(this.getBoundRecordValueJson,this);this.getBoundRecords=bind(this.getBoundRecords,this);var boundRecords,clientId,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notifyingClient.__super__.constructor.call(this);this.setBoundRecords({});fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){clientId=arguments[0];boundRecords=arguments[1];instance=notifyingClient.__super__.constructor.call(this);this.setClientId(clientId);this.setBoundRecords(boundRecords);return instance;}
if(arguments.length===0){instance=notifyingClient.__super__.constructor.call(this);this.setBoundRecords({});return instance;}}
notifyingClient.fromJson=function(){var notifyingClientJson;notifyingClientJson=arguments[0];return fm.websync.serializer.deserializeNotifyingClient(notifyingClientJson);};notifyingClient.toJson=function(){var notifyingClient;notifyingClient=arguments[0];return fm.websync.serializer.serializeNotifyingClient(notifyingClient);};notifyingClient.prototype.getBoundRecords=function(){return this._boundRecords;};notifyingClient.prototype.getBoundRecordValueJson=function(){var _var0,_var1,key,record;key=arguments[0];if(fm.global.equals(this.getBoundRecords(),null)){return null;}
record=null;_var0=new fm.holder(record);_var1=fm.hashExtensions.tryGetValue(this.getBoundRecords(),key,_var0);record=_var0.getValue();if(!_var1){return null;}
return record.getValueJson();};notifyingClient.prototype.getClientId=function(){return this._clientId;};notifyingClient.prototype.setBoundRecords=function(){var value;value=arguments[0];return this._boundRecords=value;};notifyingClient.prototype.setClientId=function(){var value;value=arguments[0];return this._clientId=value;};notifyingClient.prototype.toJson=function(){return fm.websync.notifyingClient.toJson(this);};notifyingClient.prototype.getBoundRecordValue=function(){var key;key=arguments[0];return fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments));};return notifyingClient;})(fm.serializable);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseMessage=(function(superClass){extend(baseMessage,superClass);baseMessage.prototype.__dataBytes=null;baseMessage.prototype.__dataJson=null;baseMessage.prototype.__error=null;baseMessage.prototype.__successful=false;baseMessage.prototype.__timestamp=null;baseMessage.prototype._validate=false;function baseMessage(){this.setData=bind(this.setData,this);this.getData=bind(this.getData,this);this.setValidate=bind(this.setValidate,this);this.setTimestamp=bind(this.setTimestamp,this);this.setSuccessful=bind(this.setSuccessful,this);this.setError=bind(this.setError,this);this.setDataJson=bind(this.setDataJson,this);this.setDataBytes=bind(this.setDataBytes,this);this.getValidate=bind(this.getValidate,this);this.getTimestamp=bind(this.getTimestamp,this);this.getSuccessful=bind(this.getSuccessful,this);this.getIsBinary=bind(this.getIsBinary,this);this.getError=bind(this.getError,this);this.getDataJson=bind(this.getDataJson,this);this.getDataBytes=bind(this.getDataBytes,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseMessage.__super__.constructor.call(this);this.setValidate(true);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseMessage.__super__.constructor.call(this);this.setValidate(true);return instance;}
baseMessage.prototype.getDataBytes=function(){var _var0,_var1,decoded,valueJson;decoded=this.__dataBytes;valueJson=this.__dataJson;if(!fm.global.equals(decoded,null)){return decoded;}
if(!fm.global.equals(valueJson,null)){_var0=new fm.holder(decoded);_var1=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(valueJson),_var0);decoded=_var0.getValue();if(!_var1){decoded=null;}
this.__dataBytes=decoded;return decoded;}
return null;};baseMessage.prototype.getDataJson=function(){var b,str;str=this.__dataJson;b=this.__dataBytes;if(!fm.global.equals(str,null)){return str;}
if(!fm.global.equals(b,null)){str=fm.serializer.serializeString(fm.crypto.base64Encode(b));this.__dataJson=str;return str;}
return null;};baseMessage.prototype.getError=function(){return this.__error;};baseMessage.prototype.getIsBinary=function(){return!fm.global.equals(this.getDataBytes(),null);};baseMessage.prototype.getSuccessful=function(){return this.__successful;};baseMessage.prototype.getTimestamp=function(){return this.__timestamp;};baseMessage.prototype.getValidate=function(){return this._validate;};baseMessage.prototype.setDataBytes=function(){var value;value=arguments[0];this.__dataJson=null;this.__dataBytes=value;return this.setIsDirty(true);};baseMessage.prototype.setDataJson=function(){var value;value=arguments[0];if(!((!this.getValidate()||(fm.global.equals(value,null)))||fm.serializer.isValidJson(value))){throw new Error("The value is not valid JSON.");}
this.__dataJson=value;this.__dataBytes=null;return this.setIsDirty(true);};baseMessage.prototype.setError=function(){var value;value=arguments[0];this.__error=value;return this.setIsDirty(true);};baseMessage.prototype.setSuccessful=function(){var value;value=arguments[0];this.__successful=value;return this.setIsDirty(true);};baseMessage.prototype.setTimestamp=function(){var value;value=arguments[0];this.__timestamp=value;return this.setIsDirty(true);};baseMessage.prototype.setValidate=function(){var value;value=arguments[0];return this._validate=value;};baseMessage.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments));};baseMessage.prototype.setData=function(){var data;data=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setDataJson.apply(this,arguments);};return baseMessage;})(fm.websync.extensible);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.notification=(function(superClass){extend(notification,superClass);function notification(){this.toJson=bind(this.toJson,this);this.setTag=bind(this.setTag,this);this.setClientId=bind(this.setClientId,this);this.getTag=bind(this.getTag,this);this.getClientId=bind(this.getClientId,this);var clientId,dataJson,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=notification.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){clientId=arguments[0];dataJson=arguments[1];notification.call(this,clientId,dataJson,null);return instance;}
if(arguments.length===3){clientId=arguments[0];dataJson=arguments[1];tag=arguments[2];instance=notification.__super__.constructor.call(this);this.setClientId(clientId);this.setDataJson(dataJson);this.setTag(tag);return instance;}
if(arguments.length===0){instance=notification.__super__.constructor.call(this);return instance;}
if(arguments.length===1){clientId=arguments[0];instance=notification.__super__.constructor.call(this);this.setClientId(clientId);return instance;}}
notification.fromJson=function(){var notificationJson;notificationJson=arguments[0];return fm.websync.serializer.deserializeNotification(notificationJson);};notification.fromJsonMultiple=function(){var notificationsJson;notificationsJson=arguments[0];return fm.websync.serializer.deserializeNotificationArray(notificationsJson);};notification.fromMessage=function(){var message,notification;message=arguments[0];if(fm.global.equals(message,null)){return null;}
notification=new fm.websync.notification();notification.setClientId(message.getNotifyClientId());notification.setSuccessful(message.getSuccessful());notification.setError(message.getError());notification.setTimestamp(message.getTimestamp());notification.setDataJson(message.getDataJson());notification.setExtensions(message.getExtensions());return notification;};notification.fromMessages=function(){var i,messages,notificationArray;messages=arguments[0];if(fm.global.equals(messages,null)){return null;}
notificationArray=new Array(messages.length);i=0;while(i<messages.length){try{notificationArray[i]=fm.websync.notification.fromMessage(messages[i]);}finally{i++;}}
return notificationArray;};notification.toJson=function(){var notification;notification=arguments[0];return fm.websync.serializer.serializeNotification(notification);};notification.toJsonMultiple=function(){var notifications;notifications=arguments[0];return fm.websync.serializer.serializeNotificationArray(notifications);};notification.toMessage=function(){var message,notification;notification=arguments[0];if(fm.global.equals(notification,null)){return null;}
message=new fm.websync.message("/meta/notify");message.setNotifyClientId(notification.getClientId());message.setSuccessful(notification.getSuccessful());message.setError(notification.getError());message.setTimestamp(notification.getTimestamp());message.setDataJson(notification.getDataJson());message.setExtensions(notification.getExtensions());return message;};notification.toMessages=function(){var i,messageArray,notifications;notifications=arguments[0];if(fm.global.equals(notifications,null)){return null;}
messageArray=new Array(notifications.length);i=0;while(i<notifications.length){try{messageArray[i]=fm.websync.notification.toMessage(notifications[i]);}finally{i++;}}
return messageArray;};notification.prototype.getClientId=function(){var nullable;nullable=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"));if(nullable!==null){return nullable;}
return fm.guid.empty;};notification.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};notification.prototype.setClientId=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(value),false);return this.setIsDirty(true);};notification.prototype.setTag=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value),false);return this.setIsDirty(true);};notification.prototype.toJson=function(){return fm.websync.notification.toJson(this);};return notification;})(fm.websync.baseMessage);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisherResponseArgs=(function(superClass){extend(publisherResponseArgs,superClass);publisherResponseArgs.prototype._exception=null;publisherResponseArgs.prototype._responses=null;function publisherResponseArgs(){this.setResponses=bind(this.setResponses,this);this.setResponse=bind(this.setResponse,this);this.setException=bind(this.setException,this);this.getResponses=bind(this.getResponses,this);this.getResponse=bind(this.getResponse,this);this.getException=bind(this.getException,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisherResponseArgs.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=publisherResponseArgs.__super__.constructor.call(this);return instance;}
publisherResponseArgs.prototype.getException=function(){return this._exception;};publisherResponseArgs.prototype.getResponse=function(){if((fm.global.equals(this.getResponses(),null))||(fm.global.equals(this.getResponses().length,0))){return null;}
return this.getResponses()[0];};publisherResponseArgs.prototype.getResponses=function(){return this._responses;};publisherResponseArgs.prototype.setException=function(){var value;value=arguments[0];return this._exception=value;};publisherResponseArgs.prototype.setResponse=function(){var value;value=arguments[0];return this.setResponses([value]);};publisherResponseArgs.prototype.setResponses=function(){var value;value=arguments[0];return this._responses=value;};return publisherResponseArgs;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseClient=(function(superClass){extend(baseClient,superClass);baseClient.prototype.__domainName=null;baseClient.prototype.__requestUrl=null;baseClient.prototype._concurrencyMode=null;baseClient.prototype._disableBinary=false;baseClient.prototype._domainKey=null;baseClient._headers=null;baseClient._invalidResponseMessage="Invalid response received from server.";baseClient.prototype._onHttpRequestCreated=null;baseClient.prototype._onHttpResponseReceived=null;baseClient.prototype._onRequestCreated=null;baseClient.prototype._onResponseReceived=null;baseClient.prototype._onUnhandledException=null;baseClient.prototype._requestTimeout=0;function baseClient(){this.setRequestUrl=bind(this.setRequestUrl,this);this.setRequestTimeout=bind(this.setRequestTimeout,this);this.setDomainName=bind(this.setDomainName,this);this.setDomainKeyString=bind(this.setDomainKeyString,this);this.setDomainKey=bind(this.setDomainKey,this);this.setDisableBinary=bind(this.setDisableBinary,this);this.setConcurrencyMode=bind(this.setConcurrencyMode,this);this.removeOnUnhandledException=bind(this.removeOnUnhandledException,this);this.removeOnResponseReceived=bind(this.removeOnResponseReceived,this);this.removeOnRequestCreated=bind(this.removeOnRequestCreated,this);this.removeOnHttpResponseReceived=bind(this.removeOnHttpResponseReceived,this);this.removeOnHttpRequestCreated=bind(this.removeOnHttpRequestCreated,this);this.raiseUnhandledException=bind(this.raiseUnhandledException,this);this.raiseBaseEvent=bind(this.raiseBaseEvent,this);this.internalOnResponseReceived=bind(this.internalOnResponseReceived,this);this.internalOnRequestCreated=bind(this.internalOnRequestCreated,this);this.internalOnHttpResponseReceived=bind(this.internalOnHttpResponseReceived,this);this.internalOnHttpRequestCreated=bind(this.internalOnHttpRequestCreated,this);this.getRequestUrl=bind(this.getRequestUrl,this);this.getRequestTimeout=bind(this.getRequestTimeout,this);this.getDomainName=bind(this.getDomainName,this);this.getDomainKeyString=bind(this.getDomainKeyString,this);this.getDomainKey=bind(this.getDomainKey,this);this.getDisableBinary=bind(this.getDisableBinary,this);this.getConcurrencyMode=bind(this.getConcurrencyMode,this);this.createHeadersNoCache=bind(this.createHeadersNoCache,this);this.createHeaders=bind(this.createHeaders,this);this.addOnUnhandledException=bind(this.addOnUnhandledException,this);this.addOnResponseReceived=bind(this.addOnResponseReceived,this);this.addOnRequestCreated=bind(this.addOnRequestCreated,this);this.addOnHttpResponseReceived=bind(this.addOnHttpResponseReceived,this);this.addOnHttpRequestCreated=bind(this.addOnHttpRequestCreated,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseClient.__super__.constructor.call(this);this.setRequestTimeout(15000);this.setDomainKey(fm.websync.defaults.getDomainKey());this.setDomainName(fm.websync.defaults.getDomainName());this.setConcurrencyMode(fm.websync.concurrencyMode.Low);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseClient.__super__.constructor.call(this);this.setRequestTimeout(15000);this.setDomainKey(fm.websync.defaults.getDomainKey());this.setDomainName(fm.websync.defaults.getDomainName());this.setConcurrencyMode(fm.websync.concurrencyMode.Low);return instance;}
baseClient.sanitizeDomainName=function(){var domainName,index;domainName=arguments[0];if(fm.stringExtensions.startsWith(domainName,"http://",fm.stringComparison.Ordinal)){domainName=domainName.substring("http://".length);}else{if(fm.stringExtensions.startsWith(domainName,"https://",fm.stringComparison.Ordinal)){domainName=domainName.substring("https://".length);}}
index=fm.stringExtensions.indexOf(domainName,"/");if(!fm.global.equals(index,-1)){domainName=fm.stringExtensions.substring(domainName,0,index);}
return domainName;};baseClient.prototype.addOnHttpRequestCreated=function(){var value;value=arguments[0];return this._onHttpRequestCreated=fm.delegate.combine(this._onHttpRequestCreated,value);};baseClient.prototype.addOnHttpResponseReceived=function(){var value;value=arguments[0];return this._onHttpResponseReceived=fm.delegate.combine(this._onHttpResponseReceived,value);};baseClient.prototype.addOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=fm.delegate.combine(this._onRequestCreated,value);};baseClient.prototype.addOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=fm.delegate.combine(this._onResponseReceived,value);};baseClient.prototype.addOnUnhandledException=function(){var value;value=arguments[0];return this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,value);};baseClient.prototype.createHeaders=function(){if(fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)){if(fm.global.equals(fm.websync.baseClient._headers,null)){this._headers=this.createHeadersNoCache();}
return fm.websync.baseClient._headers;}
return this.createHeadersNoCache();};baseClient.prototype.createHeadersNoCache=function(){var values;values=new fm.nameValueCollection();if(!fm.global.equals(this.getDomainName(),fm.websync.defaults.getDomainName())){values.set("X-FM-DomainName",this.getDomainName());}
if(!fm.guid.equals(this.getDomainKey(),fm.websync.defaults.getDomainKey())){values.set("X-FM-DomainKey",this.getDomainKey().toString());}
return values;};baseClient.prototype.getConcurrencyMode=function(){return this._concurrencyMode;};baseClient.prototype.getDisableBinary=function(){return this._disableBinary;};baseClient.prototype.getDomainKey=function(){return this._domainKey;};baseClient.prototype.getDomainKeyString=function(){return this.getDomainKey().toString();};baseClient.prototype.getDomainName=function(){return this.__domainName;};baseClient.prototype.getRequestTimeout=function(){return this._requestTimeout;};baseClient.prototype.getRequestUrl=function(){return this.__requestUrl;};baseClient.prototype.internalOnHttpRequestCreated=function(){var e;e=arguments[0];return this.raiseBaseEvent(this._onHttpRequestCreated,e,"OnHttpRequestCreated");};baseClient.prototype.internalOnHttpResponseReceived=function(){var e;e=arguments[0];return this.raiseBaseEvent(this._onHttpResponseReceived,e,"OnHttpResponseReceived");};baseClient.prototype.internalOnRequestCreated=function(){var e;e=arguments[0];return this.raiseBaseEvent(this._onRequestCreated,e,"OnRequestCreated");};baseClient.prototype.internalOnResponseReceived=function(){var e;e=arguments[0];return this.raiseBaseEvent(this._onResponseReceived,e,"OnResponseReceived");};baseClient.prototype.raiseBaseEvent=function(){var args,error,eventMethod,eventName,exception;eventMethod=arguments[0];args=arguments[1];eventName=arguments[2];if(!fm.global.equals(eventMethod,null)){try{return eventMethod(args);}catch(error){exception=error;if(!this.raiseUnhandledException(exception)){return fm.asyncException.asyncThrow(exception,fm.stringExtensions.format("BaseClient -> {0}",eventName));}}finally{}}};baseClient.prototype.raiseUnhandledException=function(){var args2,error,exception,exception2,onUnhandledException,p;exception=arguments[0];onUnhandledException=this._onUnhandledException;if(!fm.global.equals(onUnhandledException,null)){args2=new fm.websync.unhandledExceptionArgs();args2.__exception=exception;p=args2;try{onUnhandledException(p);}catch(error){exception2=error;fm.asyncException.asyncThrow(exception2,"BaseClient -> OnUnhandledException");}finally{}
return p.getHandled();}
return false;};baseClient.prototype.removeOnHttpRequestCreated=function(){var value;value=arguments[0];return this._onHttpRequestCreated=fm.delegate.remove(this._onHttpRequestCreated,value);};baseClient.prototype.removeOnHttpResponseReceived=function(){var value;value=arguments[0];return this._onHttpResponseReceived=fm.delegate.remove(this._onHttpResponseReceived,value);};baseClient.prototype.removeOnRequestCreated=function(){var value;value=arguments[0];return this._onRequestCreated=fm.delegate.remove(this._onRequestCreated,value);};baseClient.prototype.removeOnResponseReceived=function(){var value;value=arguments[0];return this._onResponseReceived=fm.delegate.remove(this._onResponseReceived,value);};baseClient.prototype.removeOnUnhandledException=function(){var value;value=arguments[0];return this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,value);};baseClient.prototype.setConcurrencyMode=function(){var value;value=arguments[0];return this._concurrencyMode=value;};baseClient.prototype.setDisableBinary=function(){var value;value=arguments[0];return this._disableBinary=value;};baseClient.prototype.setDomainKey=function(){var value;value=arguments[0];return this._domainKey=value;};baseClient.prototype.setDomainKeyString=function(){var value;value=arguments[0];return this.setDomainKey(new fm.guid(value));};baseClient.prototype.setDomainName=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){value=fm.websync.defaults.getDomainName();}
return this.__domainName=fm.websync.baseClient.sanitizeDomainName(value);};baseClient.prototype.setRequestTimeout=function(){var value;value=arguments[0];return this._requestTimeout=value;};baseClient.prototype.setRequestUrl=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){throw new Error("Request URL cannot be null.");}
return this.__requestUrl=fm.httpTransfer.replaceWildcards(value);};baseClient._headers=null;return baseClient;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.baseAdvice=(function(superClass){extend(baseAdvice,superClass);baseAdvice.prototype.__hosts=null;baseAdvice.prototype.__interval=null;baseAdvice.prototype.__reconnect=null;function baseAdvice(){this.toJson=bind(this.toJson,this);this.setReconnect=bind(this.setReconnect,this);this.setInterval=bind(this.setInterval,this);this.setHosts=bind(this.setHosts,this);this.getReconnect=bind(this.getReconnect,this);this.getInterval=bind(this.getInterval,this);this.getHosts=bind(this.getHosts,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=baseAdvice.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=baseAdvice.__super__.constructor.call(this);return instance;}
baseAdvice.fromJson=function(){var baseAdviceJson;baseAdviceJson=arguments[0];return fm.websync.serializer.deserializeBaseAdvice(baseAdviceJson);};baseAdvice.toJson=function(){var baseAdvice;baseAdvice=arguments[0];return fm.websync.serializer.serializeBaseAdvice(baseAdvice);};baseAdvice.prototype.getHosts=function(){return this.__hosts;};baseAdvice.prototype.getInterval=function(){return this.__interval;};baseAdvice.prototype.getReconnect=function(){return this.__reconnect;};baseAdvice.prototype.setHosts=function(){var value;value=arguments[0];this.__hosts=value;return this.setIsDirty(true);};baseAdvice.prototype.setInterval=function(){var value;value=arguments[0];this.__interval=value;return this.setIsDirty(true);};baseAdvice.prototype.setReconnect=function(){var value;value=arguments[0];this.__reconnect=value;return this.setIsDirty(true);};baseAdvice.prototype.toJson=function(){return fm.websync.baseAdvice.toJson(this);};return baseAdvice;})(fm.serializable);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.advice=(function(superClass){extend(advice,superClass);advice.prototype._callbackPolling=null;advice.prototype._longPolling=null;advice.prototype._webSocket=null;function advice(){this.toJson=bind(this.toJson,this);this.setWebSocket=bind(this.setWebSocket,this);this.setLongPolling=bind(this.setLongPolling,this);this.setCallbackPolling=bind(this.setCallbackPolling,this);this.getWebSocket=bind(this.getWebSocket,this);this.getLongPolling=bind(this.getLongPolling,this);this.getCallbackPolling=bind(this.getCallbackPolling,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=advice.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=advice.__super__.constructor.call(this);return instance;}
advice.fromJson=function(){var adviceJson;adviceJson=arguments[0];return fm.websync.serializer.deserializeAdvice(adviceJson);};advice.toJson=function(){var advice;advice=arguments[0];return fm.websync.serializer.serializeAdvice(advice);};advice.prototype.getCallbackPolling=function(){return this._callbackPolling;};advice.prototype.getLongPolling=function(){return this._longPolling;};advice.prototype.getWebSocket=function(){return this._webSocket;};advice.prototype.setCallbackPolling=function(){var value;value=arguments[0];return this._callbackPolling=value;};advice.prototype.setLongPolling=function(){var value;value=arguments[0];return this._longPolling=value;};advice.prototype.setWebSocket=function(){var value;value=arguments[0];return this._webSocket=value;};advice.prototype.toJson=function(){return fm.websync.advice.toJson(this);};return advice;})(fm.websync.baseAdvice);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.metaChannels=(function(superClass){extend(metaChannels,superClass);metaChannels._bind="/meta/bind";metaChannels._connect="/meta/connect";metaChannels._disconnect="/meta/disconnect";metaChannels._handshake="/meta/handshake";metaChannels._metaPrefix="/meta/";metaChannels._notify="/meta/notify";metaChannels._servicePrefix="/service/";metaChannels._subscribe="/meta/subscribe";metaChannels._unbind="/meta/unbind";metaChannels._unsubscribe="/meta/unsubscribe";function metaChannels(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=metaChannels.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}}
metaChannels.convertChannelFromServiced=function(){var channel;channel=arguments[0];if(!fm.websync.metaChannels.isServiceChannel(channel)){return channel;}
return channel.substring("/service/".length-1);};metaChannels.convertChannelToServiced=function(){var channel;channel=arguments[0];if((fm.global.equals(channel,null))||(channel.length<1)){return"/service/";}
return fm.stringExtensions.concat("/service/",channel.substring(1));};metaChannels.getMessageType=function(){var bayeuxChannel;bayeuxChannel=arguments[0];if(fm.global.equals(bayeuxChannel,"/meta/handshake")){return fm.websync.messageType.Connect;}
if(fm.global.equals(bayeuxChannel,"/meta/connect")){return fm.websync.messageType.Stream;}
if(fm.global.equals(bayeuxChannel,"/meta/disconnect")){return fm.websync.messageType.Disconnect;}
if(fm.global.equals(bayeuxChannel,"/meta/bind")){return fm.websync.messageType.Bind;}
if(fm.global.equals(bayeuxChannel,"/meta/unbind")){return fm.websync.messageType.Unbind;}
if(fm.global.equals(bayeuxChannel,"/meta/subscribe")){return fm.websync.messageType.Subscribe;}
if(fm.global.equals(bayeuxChannel,"/meta/unsubscribe")){return fm.websync.messageType.Unsubscribe;}
if(fm.global.equals(bayeuxChannel,"/meta/notify")){return fm.websync.messageType.Notify;}
if(fm.websync.metaChannels.isServiceChannel(bayeuxChannel)){return fm.websync.messageType.Service;}
if(!fm.websync.metaChannels.isMetaChannel(bayeuxChannel)){return fm.websync.messageType.Publish;}
return fm.websync.messageType.Unknown;};metaChannels.isMetaChannel=function(){var channel;channel=arguments[0];return(!fm.global.equals(channel,null))&&fm.stringExtensions.startsWith(channel,"/meta/",fm.stringComparison.Ordinal);};metaChannels.isReservedChannel=function(){var channel;channel=arguments[0];return fm.websync.metaChannels.isMetaChannel(channel)||fm.websync.metaChannels.isServiceChannel(channel);};metaChannels.isServiceChannel=function(){var channel;channel=arguments[0];return(!fm.global.equals(channel,null))&&fm.stringExtensions.startsWith(channel,"/service/",fm.stringComparison.Ordinal);};return metaChannels;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.client=(function(superClass){extend(client,superClass);client.prototype.__streamRequestUrl=null;client._argsKey=null;client.prototype._batchCounter=0;client.prototype._batchCounterLock=null;client._bayeuxMinimumVersion=null;client._bayeuxVersion=null;client.prototype._boundRecords=null;client.prototype._boundRecordsLock=null;client.prototype._clientId=null;client.prototype._connectArgs=null;client.prototype._connectionType=null;client.prototype._counter=0;client.prototype._counterLock=null;client.prototype._customOnReceives=null;client.prototype._customOnReceivesLock=null;client.prototype._disableWebSockets=false;client.prototype._disconnectCalled=false;client.prototype._instanceId=null;client.prototype._isConnected=false;client.prototype._isConnecting=false;client.prototype._isDisconnecting=false;client.prototype._lastBackoffIndex=0;client.prototype._lastBackoffTimeout=0;client.prototype._lastInterval=0;client.prototype._lastReconnect=null;client.prototype._onBindComplete=null;client._onBindEnd=null;client.prototype._onBindFailure=null;client._onBindRequest=null;client._onBindResponse=null;client.prototype._onBindSuccess=null;client.prototype._onConnectComplete=null;client._onConnectEnd=null;client.prototype._onConnectFailure=null;client._onConnectRequest=null;client._onConnectResponse=null;client.prototype._onConnectSuccess=null;client.prototype._onDisconnectComplete=null;client._onDisconnectEnd=null;client._onDisconnectRequest=null;client._onDisconnectResponse=null;client.prototype._onNotify=null;client.prototype._onNotifyComplete=null;client._onNotifyEnd=null;client.prototype._onNotifyFailure=null;client._onNotifyRequest=null;client._onNotifyResponse=null;client.prototype._onNotifySuccess=null;client.prototype._onPublishComplete=null;client._onPublishEnd=null;client.prototype._onPublishFailure=null;client._onPublishRequest=null;client._onPublishResponse=null;client.prototype._onPublishSuccess=null;client.prototype._onServerBind=null;client.prototype._onServerSubscribe=null;client.prototype._onServerUnbind=null;client.prototype._onServerUnsubscribe=null;client.prototype._onServiceComplete=null;client._onServiceEnd=null;client.prototype._onServiceFailure=null;client._onServiceRequest=null;client._onServiceResponse=null;client.prototype._onServiceSuccess=null;client.prototype._onStateRestored=null;client.prototype._onStreamFailure=null;client.prototype._onSubscribeComplete=null;client._onSubscribeEnd=null;client.prototype._onSubscribeFailure=null;client._onSubscribeRequest=null;client._onSubscribeResponse=null;client.prototype._onSubscribeSuccess=null;client.prototype._onUnbindComplete=null;client._onUnbindEnd=null;client.prototype._onUnbindFailure=null;client._onUnbindRequest=null;client._onUnbindResponse=null;client.prototype._onUnbindSuccess=null;client.prototype._onUnsubscribeComplete=null;client._onUnsubscribeEnd=null;client.prototype._onUnsubscribeFailure=null;client._onUnsubscribeRequest=null;client._onUnsubscribeResponse=null;client.prototype._onUnsubscribeSuccess=null;client.prototype._pendingReceives=null;client.prototype._pendingRestoreStateCalls=0;client.prototype._pendingRestoreStateCallsLock=null;client.prototype._queueActivated=false;client.prototype._queueLock=null;client.prototype._rebindCache=null;client.prototype._reconnectCache=null;client.prototype._reconnectCacheLock=null;client.prototype._requestQueue=null;client.prototype._requestTransfer=null;client._requestUrlCache=null;client._requestUrlCacheLock=null;client.prototype._responseArgs=null;client.prototype._resubscribeCache=null;client.prototype._serverTimeout=0;client.prototype._sessionId=null;client._stateKey=null;client.prototype._stateLock=null;client.prototype._streamRequestTransfer=null;client.prototype._subscribedChannels=null;client.prototype._subscribedChannelsLock=null;client.prototype._subscribedDynamicProperties=null;client.prototype._subscribedOnReceives=null;client.prototype._subscribedOnReceivesLock=null;client.prototype._supportedConnectionTypes=null;client.prototype._synchronous=null;client.prototype._threadCounters=null;client.prototype._threadCountersLock=null;client.prototype._token=null;client.prototype._webSocketOpened=false;function client(){this.webSocketStreamFailure=bind(this.webSocketStreamFailure,this);this.webSocketOpenSuccess=bind(this.webSocketOpenSuccess,this);this.webSocketOpenFailure=bind(this.webSocketOpenFailure,this);this.unsubscribe=bind(this.unsubscribe,this);this.unsetCustomOnReceiveWithTag=bind(this.unsetCustomOnReceiveWithTag,this);this.unsetCustomOnReceive=bind(this.unsetCustomOnReceive,this);this.unbind=bind(this.unbind,this);this.tryWebSocket=bind(this.tryWebSocket,this);this.subscribe=bind(this.subscribe,this);this.streamDeferred=bind(this.streamDeferred,this);this.streamCallback=bind(this.streamCallback,this);this.stream=bind(this.stream,this);this.startBatch=bind(this.startBatch,this);this.setToken=bind(this.setToken,this);this.setSynchronous=bind(this.setSynchronous,this);this.setStreamRequestUrl=bind(this.setStreamRequestUrl,this);this.setSessionId=bind(this.setSessionId,this);this.setServerTimeout=bind(this.setServerTimeout,this);this.setIsDisconnecting=bind(this.setIsDisconnecting,this);this.setIsConnecting=bind(this.setIsConnecting,this);this.setIsConnected=bind(this.setIsConnected,this);this.setInstanceId=bind(this.setInstanceId,this);this.setDisableWebSockets=bind(this.setDisableWebSockets,this);this.setCustomOnReceiveWithTag=bind(this.setCustomOnReceiveWithTag,this);this.setCustomOnReceive=bind(this.setCustomOnReceive,this);this.setClientId=bind(this.setClientId,this);this.service=bind(this.service,this);this.sendMany=bind(this.sendMany,this);this.sendCallback=bind(this.sendCallback,this);this.send=bind(this.send,this);this.retryConnectDeferred=bind(this.retryConnectDeferred,this);this.retryConnect=bind(this.retryConnect,this);this.restream=bind(this.restream,this);this.removeSubscribedOnReceive=bind(this.removeSubscribedOnReceive,this);this.removeSubscribedChannels=bind(this.removeSubscribedChannels,this);this.removeOnUnsubscribeSuccess=bind(this.removeOnUnsubscribeSuccess,this);this.removeOnUnsubscribeFailure=bind(this.removeOnUnsubscribeFailure,this);this.removeOnUnsubscribeComplete=bind(this.removeOnUnsubscribeComplete,this);this.removeOnUnbindSuccess=bind(this.removeOnUnbindSuccess,this);this.removeOnUnbindFailure=bind(this.removeOnUnbindFailure,this);this.removeOnUnbindComplete=bind(this.removeOnUnbindComplete,this);this.removeOnSubscribeSuccess=bind(this.removeOnSubscribeSuccess,this);this.removeOnSubscribeFailure=bind(this.removeOnSubscribeFailure,this);this.removeOnSubscribeComplete=bind(this.removeOnSubscribeComplete,this);this.removeOnStreamFailure=bind(this.removeOnStreamFailure,this);this.removeOnStateRestored=bind(this.removeOnStateRestored,this);this.removeOnServiceSuccess=bind(this.removeOnServiceSuccess,this);this.removeOnServiceFailure=bind(this.removeOnServiceFailure,this);this.removeOnServiceComplete=bind(this.removeOnServiceComplete,this);this.removeOnServerUnsubscribe=bind(this.removeOnServerUnsubscribe,this);this.removeOnServerUnbind=bind(this.removeOnServerUnbind,this);this.removeOnServerSubscribe=bind(this.removeOnServerSubscribe,this);this.removeOnServerBind=bind(this.removeOnServerBind,this);this.removeOnPublishSuccess=bind(this.removeOnPublishSuccess,this);this.removeOnPublishFailure=bind(this.removeOnPublishFailure,this);this.removeOnPublishComplete=bind(this.removeOnPublishComplete,this);this.removeOnNotifySuccess=bind(this.removeOnNotifySuccess,this);this.removeOnNotifyFailure=bind(this.removeOnNotifyFailure,this);this.removeOnNotifyComplete=bind(this.removeOnNotifyComplete,this);this.removeOnNotify=bind(this.removeOnNotify,this);this.removeOnDisconnectComplete=bind(this.removeOnDisconnectComplete,this);this.removeOnConnectSuccess=bind(this.removeOnConnectSuccess,this);this.removeOnConnectFailure=bind(this.removeOnConnectFailure,this);this.removeOnConnectComplete=bind(this.removeOnConnectComplete,this);this.removeOnBindSuccess=bind(this.removeOnBindSuccess,this);this.removeOnBindFailure=bind(this.removeOnBindFailure,this);this.removeOnBindComplete=bind(this.removeOnBindComplete,this);this.removeBoundRecords=bind(this.removeBoundRecords,this);this.reconnect=bind(this.reconnect,this);this.receiveSink=bind(this.receiveSink,this);this.receiveMessage=bind(this.receiveMessage,this);this.raiseUnsubscribeSuccess=bind(this.raiseUnsubscribeSuccess,this);this.raiseUnsubscribeFailure=bind(this.raiseUnsubscribeFailure,this);this.raiseUnsubscribeComplete=bind(this.raiseUnsubscribeComplete,this);this.raiseUnbindSuccess=bind(this.raiseUnbindSuccess,this);this.raiseUnbindFailure=bind(this.raiseUnbindFailure,this);this.raiseUnbindComplete=bind(this.raiseUnbindComplete,this);this.raiseSubscribeSuccess=bind(this.raiseSubscribeSuccess,this);this.raiseSubscribeFailure=bind(this.raiseSubscribeFailure,this);this.raiseSubscribeDelivery=bind(this.raiseSubscribeDelivery,this);this.raiseSubscribeComplete=bind(this.raiseSubscribeComplete,this);this.raiseStreamFailure=bind(this.raiseStreamFailure,this);this.raiseStateRestored=bind(this.raiseStateRestored,this);this.raiseServiceSuccess=bind(this.raiseServiceSuccess,this);this.raiseServiceFailure=bind(this.raiseServiceFailure,this);this.raiseServiceComplete=bind(this.raiseServiceComplete,this);this.raiseServerUnsubscribe=bind(this.raiseServerUnsubscribe,this);this.raiseServerUnbind=bind(this.raiseServerUnbind,this);this.raiseServerSubscribe=bind(this.raiseServerSubscribe,this);this.raiseServerBind=bind(this.raiseServerBind,this);this.raiseSendException=bind(this.raiseSendException,this);this.raiseRetriable=bind(this.raiseRetriable,this);this.raiseResponseEvent=bind(this.raiseResponseEvent,this);this.raiseRequestEvent=bind(this.raiseRequestEvent,this);this.raisePublishSuccess=bind(this.raisePublishSuccess,this);this.raisePublishFailure=bind(this.raisePublishFailure,this);this.raisePublishComplete=bind(this.raisePublishComplete,this);this.raiseNotifySuccess=bind(this.raiseNotifySuccess,this);this.raiseNotifyFailure=bind(this.raiseNotifyFailure,this);this.raiseNotifyDelivery=bind(this.raiseNotifyDelivery,this);this.raiseNotifyComplete=bind(this.raiseNotifyComplete,this);this.raiseFunctionManual=bind(this.raiseFunctionManual,this);this.raiseFunction=bind(this.raiseFunction,this);this.raiseForcedUnsubscribes=bind(this.raiseForcedUnsubscribes,this);this.raiseForcedUnbinds=bind(this.raiseForcedUnbinds,this);this.raiseEvent=bind(this.raiseEvent,this);this.raiseDisconnectComplete=bind(this.raiseDisconnectComplete,this);this.raiseConnectSuccess=bind(this.raiseConnectSuccess,this);this.raiseConnectFailure=bind(this.raiseConnectFailure,this);this.raiseConnectComplete=bind(this.raiseConnectComplete,this);this.raiseCompleteEvent=bind(this.raiseCompleteEvent,this);this.raiseBindSuccess=bind(this.raiseBindSuccess,this);this.raiseBindFailure=bind(this.raiseBindFailure,this);this.raiseBindComplete=bind(this.raiseBindComplete,this);this.raiseActionManual=bind(this.raiseActionManual,this);this.raiseAction=bind(this.raiseAction,this);this.publish=bind(this.publish,this);this.processServerAction=bind(this.processServerAction,this);this.processRequestUrl=bind(this.processRequestUrl,this);this.processQueue=bind(this.processQueue,this);this.processPendingReceives=bind(this.processPendingReceives,this);this.processAdvice=bind(this.processAdvice,this);this.preRaise=bind(this.preRaise,this);this.postRaise=bind(this.postRaise,this);this.performUnsubscribeCallback=bind(this.performUnsubscribeCallback,this);this.performUnsubscribe=bind(this.performUnsubscribe,this);this.performUnbindCallback=bind(this.performUnbindCallback,this);this.performUnbind=bind(this.performUnbind,this);this.performSubscribeCallback=bind(this.performSubscribeCallback,this);this.performSubscribe=bind(this.performSubscribe,this);this.performServiceCallback=bind(this.performServiceCallback,this);this.performService=bind(this.performService,this);this.performPublishCallback=bind(this.performPublishCallback,this);this.performPublish=bind(this.performPublish,this);this.performNotifyCallback=bind(this.performNotifyCallback,this);this.performNotify=bind(this.performNotify,this);this.performDisconnectCallback=bind(this.performDisconnectCallback,this);this.performDisconnect=bind(this.performDisconnect,this);this.performConnectCallback=bind(this.performConnectCallback,this);this.performConnect=bind(this.performConnect,this);this.performBindCallback=bind(this.performBindCallback,this);this.performBind=bind(this.performBind,this);this.notify=bind(this.notify,this);this.maybeRaiseStateRestored=bind(this.maybeRaiseStateRestored,this);this.inCallback=bind(this.inCallback,this);this.inBatch=bind(this.inBatch,this);this.getToken=bind(this.getToken,this);this.getThreadId=bind(this.getThreadId,this);this.getSynchronous=bind(this.getSynchronous,this);this.getSubscribedChannels=bind(this.getSubscribedChannels,this);this.getStreamRequestUrl=bind(this.getStreamRequestUrl,this);this.getStreamRequestTimeout=bind(this.getStreamRequestTimeout,this);this.getSessionId=bind(this.getSessionId,this);this.getServerTimeout=bind(this.getServerTimeout,this);this.getIsDisconnecting=bind(this.getIsDisconnecting,this);this.getIsConnecting=bind(this.getIsConnecting,this);this.getIsConnected=bind(this.getIsConnected,this);this.getInstanceId=bind(this.getInstanceId,this);this.getDisableWebSockets=bind(this.getDisableWebSockets,this);this.getCustomOnReceiveWithTag=bind(this.getCustomOnReceiveWithTag,this);this.getCustomOnReceive=bind(this.getCustomOnReceive,this);this.getClientId=bind(this.getClientId,this);this.getBoundRecords=bind(this.getBoundRecords,this);this.endBatch=bind(this.endBatch,this);this.doLongPolling=bind(this.doLongPolling,this);this.disconnect=bind(this.disconnect,this);this.decrementPendingRestoreStateCalls=bind(this.decrementPendingRestoreStateCalls,this);this.connect=bind(this.connect,this);this.clearSubscribedChannels=bind(this.clearSubscribedChannels,this);this.clearBoundRecords=bind(this.clearBoundRecords,this);this.checkSynchronous=bind(this.checkSynchronous,this);this.bind=bind(this.bind,this);this.addToQueue=bind(this.addToQueue,this);this.addSubscribedOnReceive=bind(this.addSubscribedOnReceive,this);this.addSubscribedChannels=bind(this.addSubscribedChannels,this);this.addOnUnsubscribeSuccess=bind(this.addOnUnsubscribeSuccess,this);this.addOnUnsubscribeFailure=bind(this.addOnUnsubscribeFailure,this);this.addOnUnsubscribeComplete=bind(this.addOnUnsubscribeComplete,this);this.addOnUnbindSuccess=bind(this.addOnUnbindSuccess,this);this.addOnUnbindFailure=bind(this.addOnUnbindFailure,this);this.addOnUnbindComplete=bind(this.addOnUnbindComplete,this);this.addOnSubscribeSuccess=bind(this.addOnSubscribeSuccess,this);this.addOnSubscribeFailure=bind(this.addOnSubscribeFailure,this);this.addOnSubscribeComplete=bind(this.addOnSubscribeComplete,this);this.addOnStreamFailure=bind(this.addOnStreamFailure,this);this.addOnStateRestored=bind(this.addOnStateRestored,this);this.addOnServiceSuccess=bind(this.addOnServiceSuccess,this);this.addOnServiceFailure=bind(this.addOnServiceFailure,this);this.addOnServiceComplete=bind(this.addOnServiceComplete,this);this.addOnServerUnsubscribe=bind(this.addOnServerUnsubscribe,this);this.addOnServerUnbind=bind(this.addOnServerUnbind,this);this.addOnServerSubscribe=bind(this.addOnServerSubscribe,this);this.addOnServerBind=bind(this.addOnServerBind,this);this.addOnPublishSuccess=bind(this.addOnPublishSuccess,this);this.addOnPublishFailure=bind(this.addOnPublishFailure,this);this.addOnPublishComplete=bind(this.addOnPublishComplete,this);this.addOnNotifySuccess=bind(this.addOnNotifySuccess,this);this.addOnNotifyFailure=bind(this.addOnNotifyFailure,this);this.addOnNotifyComplete=bind(this.addOnNotifyComplete,this);this.addOnNotify=bind(this.addOnNotify,this);this.addOnDisconnectComplete=bind(this.addOnDisconnectComplete,this);this.addOnConnectSuccess=bind(this.addOnConnectSuccess,this);this.addOnConnectFailure=bind(this.addOnConnectFailure,this);this.addOnConnectComplete=bind(this.addOnConnectComplete,this);this.addOnBindSuccess=bind(this.addOnBindSuccess,this);this.addOnBindFailure=bind(this.addOnBindFailure,this);this.addOnBindComplete=bind(this.addOnBindComplete,this);this.addBoundRecords=bind(this.addBoundRecords,this);this.activateStream=bind(this.activateStream,this);var instance,requestUrl,streamRequestUrl;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=client.__super__.constructor.call(this);this._disconnectCalled=false;this._counter=0;this._lastBackoffTimeout=0;this._lastBackoffIndex=-1;this._threadCounters={};this._threadCountersLock=new fm.object();this._lastInterval=0;this._lastReconnect=null;this._connectArgs=null;this._responseArgs=null;this._reconnectCacheLock=new fm.object();this._reconnectCache=[];this._rebindCache={};this._resubscribeCache={};this._boundRecordsLock=new fm.object();this._boundRecords={};this._subscribedChannelsLock=new fm.object();this._subscribedChannels={};this._subscribedOnReceivesLock=new fm.object();this._subscribedOnReceives={};this._subscribedDynamicProperties={};this._pendingReceives={};this._customOnReceivesLock=new fm.object();this._customOnReceives={};this._stateLock=new fm.object();this._queueLock=new fm.object();this._queueActivated=false;this._requestQueue={};this._supportedConnectionTypes=new Array(0);this._connectionType=fm.websync.connectionType.LongPolling;this._batchCounter=0;this._batchCounterLock=new fm.object();this._pendingRestoreStateCalls=0;this._pendingRestoreStateCallsLock=new fm.object();this._webSocketOpened=false;this._counterLock=new fm.object();this.setSynchronous(false);this.setToken(fm.websync.client.generateToken());this.setInstanceId(fm.guid.newGuid());this.setDisableWebSockets(true);this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer();fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=client.__super__.constructor.call(this);this._disconnectCalled=false;this._counter=0;this._lastBackoffTimeout=0;this._lastBackoffIndex=-1;this._threadCounters={};this._threadCountersLock=new fm.object();this._lastInterval=0;this._lastReconnect=null;this._connectArgs=null;this._responseArgs=null;this._reconnectCacheLock=new fm.object();this._reconnectCache=[];this._rebindCache={};this._resubscribeCache={};this._boundRecordsLock=new fm.object();this._boundRecords={};this._subscribedChannelsLock=new fm.object();this._subscribedChannels={};this._subscribedOnReceivesLock=new fm.object();this._subscribedOnReceives={};this._subscribedDynamicProperties={};this._pendingReceives={};this._customOnReceivesLock=new fm.object();this._customOnReceives={};this._stateLock=new fm.object();this._queueLock=new fm.object();this._queueActivated=false;this._requestQueue={};this._supportedConnectionTypes=new Array(0);this._connectionType=fm.websync.connectionType.LongPolling;this._batchCounter=0;this._batchCounterLock=new fm.object();this._pendingRestoreStateCalls=0;this._pendingRestoreStateCallsLock=new fm.object();this._webSocketOpened=false;this._counterLock=new fm.object();this.setSynchronous(false);this.setToken(fm.websync.client.generateToken());this.setInstanceId(fm.guid.newGuid());this.setDisableWebSockets(true);this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer();return instance;}
if(arguments.length===1){requestUrl=arguments[0];client.call(this,requestUrl,requestUrl);return instance;}
if(arguments.length===2){requestUrl=arguments[0];streamRequestUrl=arguments[1];client.call(this);this.setRequestUrl(requestUrl);this.setStreamRequestUrl(streamRequestUrl);return instance;}}
client.addOnBindEnd=function(){var value;value=arguments[0];return fm.websync.client._onBindEnd=fm.delegate.combine(fm.websync.client._onBindEnd,value);};client.addOnBindRequest=function(){var value;value=arguments[0];return fm.websync.client._onBindRequest=fm.delegate.combine(fm.websync.client._onBindRequest,value);};client.addOnBindResponse=function(){var value;value=arguments[0];return fm.websync.client._onBindResponse=fm.delegate.combine(fm.websync.client._onBindResponse,value);};client.addOnConnectEnd=function(){var value;value=arguments[0];return fm.websync.client._onConnectEnd=fm.delegate.combine(fm.websync.client._onConnectEnd,value);};client.addOnConnectRequest=function(){var value;value=arguments[0];return fm.websync.client._onConnectRequest=fm.delegate.combine(fm.websync.client._onConnectRequest,value);};client.addOnConnectResponse=function(){var value;value=arguments[0];return fm.websync.client._onConnectResponse=fm.delegate.combine(fm.websync.client._onConnectResponse,value);};client.addOnDisconnectEnd=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectEnd=fm.delegate.combine(fm.websync.client._onDisconnectEnd,value);};client.addOnDisconnectRequest=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectRequest=fm.delegate.combine(fm.websync.client._onDisconnectRequest,value);};client.addOnDisconnectResponse=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectResponse=fm.delegate.combine(fm.websync.client._onDisconnectResponse,value);};client.addOnNotifyEnd=function(){var value;value=arguments[0];return fm.websync.client._onNotifyEnd=fm.delegate.combine(fm.websync.client._onNotifyEnd,value);};client.addOnNotifyRequest=function(){var value;value=arguments[0];return fm.websync.client._onNotifyRequest=fm.delegate.combine(fm.websync.client._onNotifyRequest,value);};client.addOnNotifyResponse=function(){var value;value=arguments[0];return fm.websync.client._onNotifyResponse=fm.delegate.combine(fm.websync.client._onNotifyResponse,value);};client.addOnPublishEnd=function(){var value;value=arguments[0];return fm.websync.client._onPublishEnd=fm.delegate.combine(fm.websync.client._onPublishEnd,value);};client.addOnPublishRequest=function(){var value;value=arguments[0];return fm.websync.client._onPublishRequest=fm.delegate.combine(fm.websync.client._onPublishRequest,value);};client.addOnPublishResponse=function(){var value;value=arguments[0];return fm.websync.client._onPublishResponse=fm.delegate.combine(fm.websync.client._onPublishResponse,value);};client.addOnServiceEnd=function(){var value;value=arguments[0];return fm.websync.client._onServiceEnd=fm.delegate.combine(fm.websync.client._onServiceEnd,value);};client.addOnServiceRequest=function(){var value;value=arguments[0];return fm.websync.client._onServiceRequest=fm.delegate.combine(fm.websync.client._onServiceRequest,value);};client.addOnServiceResponse=function(){var value;value=arguments[0];return fm.websync.client._onServiceResponse=fm.delegate.combine(fm.websync.client._onServiceResponse,value);};client.addOnSubscribeEnd=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeEnd=fm.delegate.combine(fm.websync.client._onSubscribeEnd,value);};client.addOnSubscribeRequest=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeRequest=fm.delegate.combine(fm.websync.client._onSubscribeRequest,value);};client.addOnSubscribeResponse=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeResponse=fm.delegate.combine(fm.websync.client._onSubscribeResponse,value);};client.addOnUnbindEnd=function(){var value;value=arguments[0];return fm.websync.client._onUnbindEnd=fm.delegate.combine(fm.websync.client._onUnbindEnd,value);};client.addOnUnbindRequest=function(){var value;value=arguments[0];return fm.websync.client._onUnbindRequest=fm.delegate.combine(fm.websync.client._onUnbindRequest,value);};client.addOnUnbindResponse=function(){var value;value=arguments[0];return fm.websync.client._onUnbindResponse=fm.delegate.combine(fm.websync.client._onUnbindResponse,value);};client.addOnUnsubscribeEnd=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeEnd=fm.delegate.combine(fm.websync.client._onUnsubscribeEnd,value);};client.addOnUnsubscribeRequest=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeRequest=fm.delegate.combine(fm.websync.client._onUnsubscribeRequest,value);};client.addOnUnsubscribeResponse=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeResponse=fm.delegate.combine(fm.websync.client._onUnsubscribeResponse,value);};client.generateToken=function(){var str;str=fm.intExtensions.toString(fm.dateTime.getUtcNow().getTicks());return fm.stringExtensions.substring(str,str.length-12,8);};client.getChannelForPublish=function(){var publishArgs,response;response=arguments[0];publishArgs=arguments[1];if(fm.global.equals(response,null)){return publishArgs.__channel;}
if(fm.global.equals(response.getChannel(),null)){return publishArgs.__channel;}
return response.getChannel();};client.getChannelForService=function(){var response,serviceArgs;response=arguments[0];serviceArgs=arguments[1];if(fm.global.equals(response,null)){return serviceArgs.__channel;}
if(fm.global.equals(response.getChannel(),null)){return serviceArgs.__channel;}
return response.getChannel();};client.getChannelsForSubscribe=function(){var response,subscribeArgs;response=arguments[0];subscribeArgs=arguments[1];if(fm.global.equals(response,null)){return subscribeArgs.__channels;}
if(fm.global.equals(response.getChannels(),null)){return subscribeArgs.__channels;}
return response.getChannels();};client.getChannelsForUnsubscribe=function(){var response,unsubscribeArgs;response=arguments[0];unsubscribeArgs=arguments[1];if(fm.global.equals(response,null)){return unsubscribeArgs.__channels;}
if(fm.global.equals(response.getChannels(),null)){return unsubscribeArgs.__channels;}
return response.getChannels();};client.getDataBytesForNotify=function(){var notifyArgs,response;response=arguments[0];notifyArgs=arguments[1];if(fm.global.equals(response,null)){return notifyArgs.__dataBytes;}
if(fm.global.equals(response.getDataBytes(),null)){return notifyArgs.__dataBytes;}
return response.getDataBytes();};client.getDataBytesForPublish=function(){var publishArgs,response;response=arguments[0];publishArgs=arguments[1];if(fm.global.equals(response,null)){return publishArgs.__dataBytes;}
if(fm.global.equals(response.getDataBytes(),null)){return publishArgs.__dataBytes;}
return response.getDataBytes();};client.getDataBytesForService=function(){var response,serviceArgs;response=arguments[0];serviceArgs=arguments[1];if(fm.global.equals(response,null)){return serviceArgs.__dataBytes;}
if(fm.global.equals(response.getDataBytes(),null)){return serviceArgs.__dataBytes;}
return response.getDataBytes();};client.getDataJsonForNotify=function(){var notifyArgs,response;response=arguments[0];notifyArgs=arguments[1];if(fm.global.equals(response,null)){return notifyArgs.__dataJson;}
if(fm.global.equals(response.getDataJson(),null)){return notifyArgs.__dataJson;}
return response.getDataJson();};client.getDataJsonForPublish=function(){var publishArgs,response;response=arguments[0];publishArgs=arguments[1];if(fm.global.equals(response,null)){return publishArgs.__dataJson;}
if(fm.global.equals(response.getDataJson(),null)){return publishArgs.__dataJson;}
return response.getDataJson();};client.getDataJsonForService=function(){var response,serviceArgs;response=arguments[0];serviceArgs=arguments[1];if(fm.global.equals(response,null)){return serviceArgs.__dataJson;}
if(fm.global.equals(response.getDataJson(),null)){return serviceArgs.__dataJson;}
return response.getDataJson();};client.getExtensions=function(){var methodArgs,response;response=arguments[0];methodArgs=arguments[1];if(!fm.global.equals(response,null)){return response.getExtensions();}
return methodArgs.getExtensions();};client.getRecordsForBind=function(){var bindArgs,response;response=arguments[0];bindArgs=arguments[1];if(fm.global.equals(response,null)){return bindArgs.__records;}
if(fm.global.equals(response.getRecords(),null)){return bindArgs.__records;}
return response.getRecords();};client.getRecordsForUnbind=function(){var response,unbindArgs;response=arguments[0];unbindArgs=arguments[1];if(fm.global.equals(response,null)){return unbindArgs.__records;}
if(fm.global.equals(response.getRecords(),null)){return unbindArgs.__records;}
return response.getRecords();};client.getSubscribeKey=function(){var channel,tag;channel=arguments[0];tag=arguments[1];if(fm.global.equals(tag,null)){return fm.stringExtensions.format("-1|{0}",channel);}
return fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(tag.length),tag,channel);};client.getTimestamp=function(){var response;response=arguments[0];if(!fm.global.equals(response,null)){return response.getTimestamp();}
return null;};client.removeOnBindEnd=function(){var value;value=arguments[0];return fm.websync.client._onBindEnd=fm.delegate.remove(fm.websync.client._onBindEnd,value);};client.removeOnBindRequest=function(){var value;value=arguments[0];return fm.websync.client._onBindRequest=fm.delegate.remove(fm.websync.client._onBindRequest,value);};client.removeOnBindResponse=function(){var value;value=arguments[0];return fm.websync.client._onBindResponse=fm.delegate.remove(fm.websync.client._onBindResponse,value);};client.removeOnConnectEnd=function(){var value;value=arguments[0];return fm.websync.client._onConnectEnd=fm.delegate.remove(fm.websync.client._onConnectEnd,value);};client.removeOnConnectRequest=function(){var value;value=arguments[0];return fm.websync.client._onConnectRequest=fm.delegate.remove(fm.websync.client._onConnectRequest,value);};client.removeOnConnectResponse=function(){var value;value=arguments[0];return fm.websync.client._onConnectResponse=fm.delegate.remove(fm.websync.client._onConnectResponse,value);};client.removeOnDisconnectEnd=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectEnd=fm.delegate.remove(fm.websync.client._onDisconnectEnd,value);};client.removeOnDisconnectRequest=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectRequest=fm.delegate.remove(fm.websync.client._onDisconnectRequest,value);};client.removeOnDisconnectResponse=function(){var value;value=arguments[0];return fm.websync.client._onDisconnectResponse=fm.delegate.remove(fm.websync.client._onDisconnectResponse,value);};client.removeOnNotifyEnd=function(){var value;value=arguments[0];return fm.websync.client._onNotifyEnd=fm.delegate.remove(fm.websync.client._onNotifyEnd,value);};client.removeOnNotifyRequest=function(){var value;value=arguments[0];return fm.websync.client._onNotifyRequest=fm.delegate.remove(fm.websync.client._onNotifyRequest,value);};client.removeOnNotifyResponse=function(){var value;value=arguments[0];return fm.websync.client._onNotifyResponse=fm.delegate.remove(fm.websync.client._onNotifyResponse,value);};client.removeOnPublishEnd=function(){var value;value=arguments[0];return fm.websync.client._onPublishEnd=fm.delegate.remove(fm.websync.client._onPublishEnd,value);};client.removeOnPublishRequest=function(){var value;value=arguments[0];return fm.websync.client._onPublishRequest=fm.delegate.remove(fm.websync.client._onPublishRequest,value);};client.removeOnPublishResponse=function(){var value;value=arguments[0];return fm.websync.client._onPublishResponse=fm.delegate.remove(fm.websync.client._onPublishResponse,value);};client.removeOnServiceEnd=function(){var value;value=arguments[0];return fm.websync.client._onServiceEnd=fm.delegate.remove(fm.websync.client._onServiceEnd,value);};client.removeOnServiceRequest=function(){var value;value=arguments[0];return fm.websync.client._onServiceRequest=fm.delegate.remove(fm.websync.client._onServiceRequest,value);};client.removeOnServiceResponse=function(){var value;value=arguments[0];return fm.websync.client._onServiceResponse=fm.delegate.remove(fm.websync.client._onServiceResponse,value);};client.removeOnSubscribeEnd=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeEnd=fm.delegate.remove(fm.websync.client._onSubscribeEnd,value);};client.removeOnSubscribeRequest=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeRequest=fm.delegate.remove(fm.websync.client._onSubscribeRequest,value);};client.removeOnSubscribeResponse=function(){var value;value=arguments[0];return fm.websync.client._onSubscribeResponse=fm.delegate.remove(fm.websync.client._onSubscribeResponse,value);};client.removeOnUnbindEnd=function(){var value;value=arguments[0];return fm.websync.client._onUnbindEnd=fm.delegate.remove(fm.websync.client._onUnbindEnd,value);};client.removeOnUnbindRequest=function(){var value;value=arguments[0];return fm.websync.client._onUnbindRequest=fm.delegate.remove(fm.websync.client._onUnbindRequest,value);};client.removeOnUnbindResponse=function(){var value;value=arguments[0];return fm.websync.client._onUnbindResponse=fm.delegate.remove(fm.websync.client._onUnbindResponse,value);};client.removeOnUnsubscribeEnd=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeEnd=fm.delegate.remove(fm.websync.client._onUnsubscribeEnd,value);};client.removeOnUnsubscribeRequest=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeRequest=fm.delegate.remove(fm.websync.client._onUnsubscribeRequest,value);};client.removeOnUnsubscribeResponse=function(){var value;value=arguments[0];return fm.websync.client._onUnsubscribeResponse=fm.delegate.remove(fm.websync.client._onUnsubscribeResponse,value);};client.prototype.activateStream=function(){var args,connectArgs,responseArgs;connectArgs=arguments[0];responseArgs=arguments[1];this.raiseConnectSuccess(this._connectArgs,this._responseArgs);this.raiseConnectComplete(this._connectArgs,this._responseArgs);args=new fm.websync.clientConnectEndArgs();args.setMethodArgs(connectArgs);this.raiseCompleteEvent(fm.websync.client._onConnectEnd,args,"OnConnectEnd",responseArgs);this.processQueue(true);return this.stream(this._connectArgs,false);};client.prototype.addBoundRecords=function(){var _var0,j,len,record,records,results;records=arguments[0];_var0=records;results=[];for(j=0,len=_var0.length;j<len;j++){record=_var0[j];results.push(this._boundRecords[record.getKey()]=record);}
return results;};client.prototype.addOnBindComplete=function(){var value;value=arguments[0];return this._onBindComplete=fm.delegate.combine(this._onBindComplete,value);};client.prototype.addOnBindFailure=function(){var value;value=arguments[0];return this._onBindFailure=fm.delegate.combine(this._onBindFailure,value);};client.prototype.addOnBindSuccess=function(){var value;value=arguments[0];return this._onBindSuccess=fm.delegate.combine(this._onBindSuccess,value);};client.prototype.addOnConnectComplete=function(){var value;value=arguments[0];return this._onConnectComplete=fm.delegate.combine(this._onConnectComplete,value);};client.prototype.addOnConnectFailure=function(){var value;value=arguments[0];return this._onConnectFailure=fm.delegate.combine(this._onConnectFailure,value);};client.prototype.addOnConnectSuccess=function(){var value;value=arguments[0];return this._onConnectSuccess=fm.delegate.combine(this._onConnectSuccess,value);};client.prototype.addOnDisconnectComplete=function(){var value;value=arguments[0];return this._onDisconnectComplete=fm.delegate.combine(this._onDisconnectComplete,value);};client.prototype.addOnNotify=function(){var value;value=arguments[0];return this._onNotify=fm.delegate.combine(this._onNotify,value);};client.prototype.addOnNotifyComplete=function(){var value;value=arguments[0];return this._onNotifyComplete=fm.delegate.combine(this._onNotifyComplete,value);};client.prototype.addOnNotifyFailure=function(){var value;value=arguments[0];return this._onNotifyFailure=fm.delegate.combine(this._onNotifyFailure,value);};client.prototype.addOnNotifySuccess=function(){var value;value=arguments[0];return this._onNotifySuccess=fm.delegate.combine(this._onNotifySuccess,value);};client.prototype.addOnPublishComplete=function(){var value;value=arguments[0];return this._onPublishComplete=fm.delegate.combine(this._onPublishComplete,value);};client.prototype.addOnPublishFailure=function(){var value;value=arguments[0];return this._onPublishFailure=fm.delegate.combine(this._onPublishFailure,value);};client.prototype.addOnPublishSuccess=function(){var value;value=arguments[0];return this._onPublishSuccess=fm.delegate.combine(this._onPublishSuccess,value);};client.prototype.addOnServerBind=function(){var value;value=arguments[0];return this._onServerBind=fm.delegate.combine(this._onServerBind,value);};client.prototype.addOnServerSubscribe=function(){var value;value=arguments[0];return this._onServerSubscribe=fm.delegate.combine(this._onServerSubscribe,value);};client.prototype.addOnServerUnbind=function(){var value;value=arguments[0];return this._onServerUnbind=fm.delegate.combine(this._onServerUnbind,value);};client.prototype.addOnServerUnsubscribe=function(){var value;value=arguments[0];return this._onServerUnsubscribe=fm.delegate.combine(this._onServerUnsubscribe,value);};client.prototype.addOnServiceComplete=function(){var value;value=arguments[0];return this._onServiceComplete=fm.delegate.combine(this._onServiceComplete,value);};client.prototype.addOnServiceFailure=function(){var value;value=arguments[0];return this._onServiceFailure=fm.delegate.combine(this._onServiceFailure,value);};client.prototype.addOnServiceSuccess=function(){var value;value=arguments[0];return this._onServiceSuccess=fm.delegate.combine(this._onServiceSuccess,value);};client.prototype.addOnStateRestored=function(){var value;value=arguments[0];return this._onStateRestored=fm.delegate.combine(this._onStateRestored,value);};client.prototype.addOnStreamFailure=function(){var value;value=arguments[0];return this._onStreamFailure=fm.delegate.combine(this._onStreamFailure,value);};client.prototype.addOnSubscribeComplete=function(){var value;value=arguments[0];return this._onSubscribeComplete=fm.delegate.combine(this._onSubscribeComplete,value);};client.prototype.addOnSubscribeFailure=function(){var value;value=arguments[0];return this._onSubscribeFailure=fm.delegate.combine(this._onSubscribeFailure,value);};client.prototype.addOnSubscribeSuccess=function(){var value;value=arguments[0];return this._onSubscribeSuccess=fm.delegate.combine(this._onSubscribeSuccess,value);};client.prototype.addOnUnbindComplete=function(){var value;value=arguments[0];return this._onUnbindComplete=fm.delegate.combine(this._onUnbindComplete,value);};client.prototype.addOnUnbindFailure=function(){var value;value=arguments[0];return this._onUnbindFailure=fm.delegate.combine(this._onUnbindFailure,value);};client.prototype.addOnUnbindSuccess=function(){var value;value=arguments[0];return this._onUnbindSuccess=fm.delegate.combine(this._onUnbindSuccess,value);};client.prototype.addOnUnsubscribeComplete=function(){var value;value=arguments[0];return this._onUnsubscribeComplete=fm.delegate.combine(this._onUnsubscribeComplete,value);};client.prototype.addOnUnsubscribeFailure=function(){var value;value=arguments[0];return this._onUnsubscribeFailure=fm.delegate.combine(this._onUnsubscribeFailure,value);};client.prototype.addOnUnsubscribeSuccess=function(){var value;value=arguments[0];return this._onUnsubscribeSuccess=fm.delegate.combine(this._onUnsubscribeSuccess,value);};client.prototype.addSubscribedChannels=function(){var _var0,_var1,_var2,channels,dictionary,j,len,results,str,tag;tag=arguments[0];channels=arguments[1];dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._subscribedChannels,tag,_var0);dictionary=_var0.getValue();if(!_var1){dictionary={};this._subscribedChannels[tag]=dictionary;}
_var2=channels;results=[];for(j=0,len=_var2.length;j<len;j++){str=_var2[j];if(!fm.hashExtensions.containsKey(dictionary,str)){results.push(dictionary[str]=new fm.object());}else{results.push(void 0);}}
return results;};client.prototype.addSubscribedOnReceive=function(){var _var0,_var1,_var2,channels,dictionary,dynamicProperties,j,len,onReceive,reconnectAfter,str,tag;tag=arguments[0];channels=arguments[1];onReceive=arguments[2];dynamicProperties=arguments[3];reconnectAfter=arguments[4];dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,tag,_var0);dictionary=_var0.getValue();if(!_var1){dictionary={};this._subscribedOnReceives[tag]=dictionary;}
_var2=channels;for(j=0,len=_var2.length;j<len;j++){str=_var2[j];dictionary[str]=onReceive;this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(str,tag)]=dynamicProperties;}
reconnectAfter=this.processPendingReceives(channels,reconnectAfter);return reconnectAfter;};client.prototype.addToQueue=function(){var key,request,synchronous,timeout,url;request=arguments[0];url=arguments[1];synchronous=arguments[2];timeout=arguments[3];url=url!=null?url:this.getRequestUrl();key=fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(timeout),(synchronous?"1":"0"),url);if(!fm.hashExtensions.containsKey(this._requestQueue,key)){this._requestQueue[key]=[];}
return fm.arrayExtensions.add(this._requestQueue[key],request);};client.prototype.bind=function(){var _var0,bindArgs,j,len,record;bindArgs=arguments[0];if((fm.global.equals(bindArgs.getRecords(),null))||(fm.global.equals(bindArgs.getRecords().length,0))){throw new Error("records cannot be null.");}
_var0=bindArgs.getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];if(fm.global.equals(record.getKey(),null)){throw new Error("key cannot be null.");}
if(fm.global.equals(record.getValueJson(),null)){throw new Error("valueJson cannot be null.");}}
this.performBind(bindArgs);return this;};client.prototype.checkSynchronous=function(){var synchronous;synchronous=arguments[0];if(synchronous!==null){return synchronous;}
if(this.getSynchronous()!==null){return this.getSynchronous();}
return false;};client.prototype.clearBoundRecords=function(){return fm.hashExtensions.clear(this._boundRecords);};client.prototype.clearSubscribedChannels=function(){fm.hashExtensions.clear(this._subscribedChannels);return fm.hashExtensions.clear(this._customOnReceives);};client.prototype.connect=function(){var connectArgs;if(arguments.length===1){connectArgs=arguments[0];this.performConnect(connectArgs);return this;}
if(arguments.length===0){return this.connect(new fm.websync.connectArgs());}};client.prototype.decrementPendingRestoreStateCalls=function(){this._pendingRestoreStateCalls--;return this._pendingRestoreStateCalls;};client.prototype.disconnect=function(){var disconnectArgs;if(arguments.length===0){return this.disconnect(new fm.websync.disconnectArgs());}
if(arguments.length===1){disconnectArgs=arguments[0];this.performDisconnect(disconnectArgs);return this;}};client.prototype.doLongPolling=function(){this._connectionType=fm.websync.connectionType.LongPolling;this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer();return this.activateStream(this._connectArgs,this._responseArgs);};client.prototype.endBatch=function(){var flag;flag=false;this._batchCounter--;if(this._batchCounter<=0){this._batchCounter=0;flag=true;}
if(flag){this.processQueue(false);}
return this;};client.prototype.getBoundRecords=function(){var _var0,dictionary,j,len,str;dictionary={};_var0=fm.hashExtensions.getKeys(this._boundRecords);for(j=0,len=_var0.length;j<len;j++){str=_var0[j];dictionary[str]=this._boundRecords[str].duplicate();}
return dictionary;};client.prototype.getClientId=function(){return this._clientId;};client.prototype.getCustomOnReceive=function(){var channel;channel=arguments[0];return this.getCustomOnReceiveWithTag(channel,fm.stringExtensions.empty);};client.prototype.getCustomOnReceiveWithTag=function(){var _var0,_var1,_var2,_var3,action,channel,dictionary,tag;channel=arguments[0];tag=arguments[1];if(fm.global.equals(channel,null)){throw new Error("channel cannot be null.");}
if(fm.global.equals(tag,null)){tag=fm.stringExtensions.empty;}
action=null;dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._customOnReceives,tag,_var0);dictionary=_var0.getValue();if(!_var1){return action;}
_var2=new fm.holder(action);_var3=fm.hashExtensions.tryGetValue(dictionary,channel,_var2);action=_var2.getValue();if(!_var3){action=null;}
return action;};client.prototype.getDisableWebSockets=function(){return this._disableWebSockets;};client.prototype.getInstanceId=function(){return this._instanceId;};client.prototype.getIsConnected=function(){return this._isConnected;};client.prototype.getIsConnecting=function(){return this._isConnecting;};client.prototype.getIsDisconnecting=function(){return this._isDisconnecting;};client.prototype.getServerTimeout=function(){return this._serverTimeout;};client.prototype.getSessionId=function(){return this._sessionId;};client.prototype.getStreamRequestTimeout=function(){return this.getRequestTimeout()+this.getServerTimeout();};client.prototype.getStreamRequestUrl=function(){return this.__streamRequestUrl;};client.prototype.getSubscribedChannels=function(){var _var0,_var1,_var2,dictionary,j,k,l,len,len1,len2,list,str,str2,tag;if(arguments.length===1){tag=arguments[0];list=[];dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._subscribedChannels,tag,_var0);dictionary=_var0.getValue();if(!_var1){dictionary=null;}
if(!fm.global.equals(dictionary,null)){_var2=fm.hashExtensions.getKeys(dictionary);for(j=0,len=_var2.length;j<len;j++){str=_var2[j];fm.arrayExtensions.add(list,str);}}
return fm.arrayExtensions.toArray(list);}
if(arguments.length===0){list=[];_var0=fm.hashExtensions.getKeys(this._subscribedChannels);for(k=0,len1=_var0.length;k<len1;k++){str=_var0[k];_var1=fm.hashExtensions.getKeys(this._subscribedChannels[str]);for(l=0,len2=_var1.length;l<len2;l++){str2=_var1[l];fm.arrayExtensions.add(list,str2);}}
return fm.arrayExtensions.toArray(list);}};client.prototype.getSynchronous=function(){return this._synchronous;};client.prototype.getThreadId=function(){return fm.managedThread.currentThreadId();};client.prototype.getToken=function(){return this._token;};client.prototype.inBatch=function(){return this._batchCounter>0;};client.prototype.inCallback=function(){var threadId;threadId=this.getThreadId();return fm.hashExtensions.containsKey(this._threadCounters,threadId)&&(this._threadCounters[threadId]>0);};client.prototype.maybeRaiseStateRestored=function(){var connectArgs;if(fm.global.equals(this.decrementPendingRestoreStateCalls(),0)){connectArgs=this._connectArgs;if(!fm.global.equals(connectArgs,null)){return this.raiseStateRestored(connectArgs);}}};client.prototype.notify=function(){var notifyArgs;notifyArgs=arguments[0];if(fm.stringExtensions.isNullOrEmpty(notifyArgs.getDataJson())){throw new Error("dataJson cannot be null.");}
this.performNotify(notifyArgs);return this;};client.prototype.performBind=function(){var args,bindArgs,message,request,request2,synchronous;bindArgs=arguments[0];if(!(bindArgs.getAutoRebind()!==null)){bindArgs.setAutoRebind(!this.inCallback());}
args=new fm.websync.clientBindRequestArgs();args.setMethodArgs(bindArgs);if(this.raiseRequestEvent(fm.websync.client._onBindRequest,args,"OnBindRequest")){synchronous=this.checkSynchronous(bindArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/bind");message.setValidate(false);message.setRecords(bindArgs.getRecords());message.setExtensions(bindArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performBindCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,bindArgs);this.addToQueue(request,bindArgs.getRequestUrl(),synchronous,(bindArgs.getRequestTimeout()!==null?bindArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performBindCallback=function(){var _var0,args,args2,args3,dynamicValue,flag,j,len,record,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientBindResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onBindResponse,args,"OnBindResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseBindFailure(dynamicValue,responseArgs,false);this.raiseBindComplete(dynamicValue,responseArgs);args2=new fm.websync.clientBindEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onBindEnd,args2,"OnBindEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.bind(dynamicValue);}else{if(dynamicValue.getIsRebind()){return this.maybeRaiseStateRestored();}}}else{if(fm.global.equals(dynamicValue.getAutoRebind(),true)){fm.arrayExtensions.add(this._reconnectCache,dynamicValue);_var0=responseArgs.getResponse().getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];this._rebindCache[record.getKey()]=dynamicValue;}}
this.addBoundRecords(responseArgs.getResponse().getRecords());this.raiseBindSuccess(dynamicValue,responseArgs);this.raiseBindComplete(dynamicValue,responseArgs);args3=new fm.websync.clientBindEndArgs();args3.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onBindEnd,args3,"OnBindEnd",responseArgs);if(dynamicValue.getIsRebind()){return this.maybeRaiseStateRestored();}}};client.prototype.performConnect=function(){var args,args2,args4,args5,connectArgs,list,message,message2,request,request2,responseArgs,str,synchronous;connectArgs=arguments[0];args5=new fm.websync.clientConnectRequestArgs();args5.setMethodArgs(connectArgs);if(this.raiseRequestEvent(fm.websync.client._onConnectRequest,args5,"OnConnectRequest")){if(this._disconnectCalled&&(connectArgs.getIsRetry()||connectArgs.getIsReconnect())){return;}
this._disconnectCalled=false;if(this.getIsConnecting()||this.getIsConnected()){str=(this.getIsConnecting()?"Client is already connecting.":"Client is already connected.");args2=new fm.websync.clientResponseArgs();args2.setDynamicProperties(connectArgs.getDynamicProperties());message=new fm.websync.message("/meta/handshake");message.setExtensions(connectArgs.getExtensions());message.setTimestamp(fm.dateTime.getUtcNow());message.setSuccessful(false);message.setError(str);args2.setResponse(message);args2.setException(new Error(str));responseArgs=args2;args=new fm.websync.clientConnectResponseArgs();args.setMethodArgs(connectArgs);this.raiseResponseEvent(fm.websync.client._onConnectResponse,args,"OnConnectResponse",responseArgs);this.raiseConnectFailure(connectArgs,responseArgs,false);this.raiseConnectComplete(connectArgs,responseArgs);args4=new fm.websync.clientConnectEndArgs();args4.setMethodArgs(connectArgs);this.raiseCompleteEvent(fm.websync.client._onConnectEnd,args4,"OnConnectEnd",responseArgs);return;}
this.setIsConnecting(true);this._connectArgs=connectArgs;list=[];if(!this.getDisableWebSockets()){fm.arrayExtensions.add(list,fm.websync.connectionType.WebSocket);}
fm.arrayExtensions.add(list,fm.websync.connectionType.LongPolling);this._supportedConnectionTypes=fm.arrayExtensions.toArray(list);synchronous=this.checkSynchronous(connectArgs.getSynchronous());request2=new fm.websync.clientRequest();message2=new fm.websync.message("/meta/handshake");message2.setVersion(fm.websync.client._bayeuxVersion);message2.setMinimumVersion(fm.websync.client._bayeuxMinimumVersion);message2.setSupportedConnectionTypes(this._supportedConnectionTypes);message2.setExtensions(connectArgs.getExtensions());request2.setMessage(message2);request2.setCallback(this.performConnectCallback);request=request2;if((connectArgs.getLastClientId()!==null)&&(connectArgs.getLastSessionId()!==null)){request.getMessage().setLastClientId(connectArgs.getLastClientId());request.getMessage().setLastSessionId(connectArgs.getLastSessionId());}
request.setDynamicValue(fm.websync.client._argsKey,connectArgs);return this.send(request,connectArgs.getRequestUrl(),synchronous,(connectArgs.getRequestTimeout()!==null?connectArgs.getRequestTimeout():0));}};client.prototype.performConnectCallback=function(){var _var0,_var1,args,args2,args3,args6,args7,args8,bindArgs,dynamicValue,extensible,i,index,j,k,len,len1,list,message,responseArgs,retry,serverTimeout,sessionId,state,str,subscribeArgs,timeout,type;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientConnectResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onConnectResponse,args,"OnConnectResponse",responseArgs);if(fm.global.equals(responseArgs.getException(),null)){this.setClientId(responseArgs.getResponse().getClientId());sessionId=responseArgs.getResponse().getSessionId();if(sessionId!==null){this.setSessionId(sessionId);}
serverTimeout=responseArgs.getResponse().getServerTimeout();if(serverTimeout!==null){this.setServerTimeout(serverTimeout);}else{this.setServerTimeout(25000);}
index=2147483647;_var0=responseArgs.getResponse().getSupportedConnectionTypes();for(j=0,len=_var0.length;j<len;j++){type=_var0[j];i=0;while(i<this._supportedConnectionTypes.length){try{if(fm.global.equals(this._supportedConnectionTypes[i],type)){if(i<index){index=i;}
break;}}finally{i++;}}}
if((index<0)||(index>this._supportedConnectionTypes.length)){responseArgs.setException(new Error("Could not negotiate a connection type with the server."));}else{this._connectionType=this._supportedConnectionTypes[index];}}
if(fm.global.equals(responseArgs.getException(),null)){this._lastBackoffIndex=-1;this._lastBackoffTimeout=0;list=[];fm.arrayExtensions.addRange(list,this._reconnectCache);fm.arrayExtensions.clear(this._reconnectCache);fm.hashExtensions.clear(this._rebindCache);fm.hashExtensions.clear(this._resubscribeCache);this._pendingRestoreStateCalls=fm.arrayExtensions.getCount(list);_var1=list;for(k=0,len1=_var1.length;k<len1;k++){extensible=_var1[k];bindArgs=fm.global.tryCast(extensible,fm.websync.bindArgs);if(!fm.global.equals(bindArgs,null)){bindArgs.setIsRetry(false);bindArgs.setIsRebind(true);this.bind(bindArgs);}else{subscribeArgs=fm.global.tryCast(extensible,fm.websync.subscribeArgs);if(!fm.global.equals(subscribeArgs,null)){subscribeArgs.setIsRetry(false);subscribeArgs.setIsResubscribe(true);this.subscribe(subscribeArgs);continue;}}}
this.setIsConnecting(false);this.setIsConnected(true);if(this._disconnectCalled){this.disconnect();if(!(dynamicValue.getIsRetry()||dynamicValue.getIsReconnect())){str="Client was disconnected while connecting.";args6=new fm.websync.clientResponseArgs();args6.setDynamicProperties(dynamicValue.getDynamicProperties());message=new fm.websync.message("/meta/handshake");message.setExtensions(dynamicValue.getExtensions());message.setTimestamp(fm.dateTime.getUtcNow());message.setSuccessful(false);message.setError(str);args6.setResponse(message);args6.setException(new Error(str));responseArgs=args6;args7=new fm.websync.clientConnectResponseArgs();args7.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onConnectResponse,args7,"OnConnectResponse",responseArgs);this.raiseConnectFailure(dynamicValue,responseArgs,false);this.raiseConnectComplete(dynamicValue,responseArgs);args8=new fm.websync.clientConnectEndArgs();args8.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onConnectEnd,args8,"OnConnectEnd",responseArgs);}
return;}
this._responseArgs=responseArgs;if((fm.global.equals(this._connectionType,fm.websync.connectionType.WebSocket))&&!this.getDisableWebSockets()){if(!this.tryWebSocket()){return this.doLongPolling();}}else{return this.doLongPolling();}}else{this.setIsConnecting(false);if(this._disconnectCalled&&(dynamicValue.getIsRetry()||dynamicValue.getIsReconnect())){return;}
retry=false;switch(dynamicValue.getRetryMode()){case fm.websync.connectRetryMode.Aggressive:retry=true;break;case fm.websync.connectRetryMode.Intelligent:retry=(responseArgs.getErrorCode()<800)||(responseArgs.getErrorCode()>899);break;}
retry=this.raiseConnectFailure(dynamicValue,responseArgs,retry);this.raiseConnectComplete(dynamicValue,responseArgs);args3=new fm.websync.clientConnectEndArgs();args3.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onConnectEnd,args3,"OnConnectEnd",responseArgs);if(retry){timeout=0;if(!fm.global.equals(dynamicValue.getRetryBackoff(),null)){args2=new fm.websync.backoffArgs();args2.setIndex(this._lastBackoffIndex+1);args2.setLastTimeout(this._lastBackoffTimeout);timeout=dynamicValue.getRetryBackoff()(args2);}
if(timeout>0){state=new fm.websync.deferredRetryConnectState();state.setConnectArgs(dynamicValue);state.setBackoffTimeout(timeout);return fm.deferrer.defer(this.retryConnectDeferred,timeout,state);}else{return this.retryConnect(dynamicValue,timeout);}}}};client.prototype.performDisconnect=function(){var args,args2,args3,args4,args5,args6,args7,args8,disconnectArgs,message,message2,message3,request,request2,str,synchronous;disconnectArgs=arguments[0];args8=new fm.websync.clientDisconnectRequestArgs();args8.setMethodArgs(disconnectArgs);if(this.raiseRequestEvent(fm.websync.client._onDisconnectRequest,args8,"OnDisconnectRequest")){this._disconnectCalled=true;if(!(this.getIsConnected()&&!this.getIsConnecting())){args2=new fm.websync.clientResponseArgs();args2.setDynamicProperties(disconnectArgs.getDynamicProperties());message=new fm.websync.message("/meta/handshake");message.setExtensions(disconnectArgs.getExtensions());message.setTimestamp(fm.dateTime.getUtcNow());message.setSuccessful(true);args2.setResponse(message);args=args2;args3=new fm.websync.clientDisconnectResponseArgs();args3.setMethodArgs(disconnectArgs);this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,args3,"OnDisconnectResponse",args);this.raiseDisconnectComplete(disconnectArgs,args);args4=new fm.websync.clientDisconnectEndArgs();args4.setMethodArgs(disconnectArgs);this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,args4,"OnDisconnectEnd",args);return;}
if(this.getIsDisconnecting()){str="Client is already disconnecting.";args5=new fm.websync.clientResponseArgs();args5.setDynamicProperties(disconnectArgs.getDynamicProperties());message2=new fm.websync.message("/meta/handshake");message2.setExtensions(disconnectArgs.getExtensions());message2.setTimestamp(fm.dateTime.getUtcNow());message2.setSuccessful(false);message2.setError(str);args5.setResponse(message2);args5.setException(new Error(str));args=args5;args6=new fm.websync.clientDisconnectResponseArgs();args6.setMethodArgs(disconnectArgs);this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,args6,"OnDisconnectResponse",args);this.raiseDisconnectComplete(disconnectArgs,args);args7=new fm.websync.clientDisconnectEndArgs();args7.setMethodArgs(disconnectArgs);this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,args7,"OnDisconnectEnd",args);return;}
this.setIsDisconnecting(true);synchronous=this.checkSynchronous(disconnectArgs.getSynchronous());request2=new fm.websync.clientRequest();message3=new fm.websync.message("/meta/disconnect");message3.setExtensions(disconnectArgs.getExtensions());request2.setMessage(message3);request2.setCallback(this.performDisconnectCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,disconnectArgs);this.addToQueue(request,disconnectArgs.getRequestUrl(),synchronous,(disconnectArgs.getRequestTimeout()!==null?disconnectArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performDisconnectCallback=function(){var args,args3,dynamicValue,error,exception1,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientDisconnectResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,args,"OnDisconnectResponse",responseArgs);this.raiseForcedUnsubscribes(dynamicValue,responseArgs);this.raiseForcedUnbinds(dynamicValue,responseArgs);this.clearBoundRecords();this.clearSubscribedChannels();this.setIsDisconnecting(false);this.setIsConnected(false);this._webSocketOpened=false;try{if(!fm.global.equals(this._requestTransfer,null)){this._requestTransfer.shutdown();}
if(!fm.global.equals(this._streamRequestTransfer,null)){this._streamRequestTransfer.shutdown();}}catch(error){exception1=error;}finally{}
this.raiseDisconnectComplete(dynamicValue,responseArgs);this._queueActivated=false;args3=new fm.websync.clientDisconnectEndArgs();args3.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,args3,"OnDisconnectEnd",responseArgs);};client.prototype.performNotify=function(){var args,message,notifyArgs,request,request2,synchronous;notifyArgs=arguments[0];args=new fm.websync.clientNotifyRequestArgs();args.setMethodArgs(notifyArgs);if(this.raiseRequestEvent(fm.websync.client._onNotifyRequest,args,"OnNotifyRequest")){synchronous=this.checkSynchronous(notifyArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/notify");message.setValidate(false);message.setDataJson(notifyArgs.getDataJson());message.setExtensions(notifyArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performNotifyCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,notifyArgs);this.addToQueue(request,notifyArgs.getRequestUrl(),synchronous,(notifyArgs.getRequestTimeout()!==null?notifyArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performNotifyCallback=function(){var args,args2,args3,dynamicValue,flag,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientNotifyResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onNotifyResponse,args,"OnNotifyResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseNotifyFailure(dynamicValue,responseArgs,false);this.raiseNotifyComplete(dynamicValue,responseArgs);args2=new fm.websync.clientNotifyEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,args2,"OnNotifyEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.notify(dynamicValue);}}else{this.raiseNotifySuccess(dynamicValue,responseArgs);this.raiseNotifyComplete(dynamicValue,responseArgs);args3=new fm.websync.clientNotifyEndArgs();args3.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,args3,"OnNotifyEnd",responseArgs);}};client.prototype.performPublish=function(){var args,message,publishArgs,request,request2,synchronous;publishArgs=arguments[0];args=new fm.websync.clientPublishRequestArgs();args.setMethodArgs(publishArgs);if(this.raiseRequestEvent(fm.websync.client._onPublishRequest,args,"OnPublishRequest")){synchronous=this.checkSynchronous(publishArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message(publishArgs.getChannel());message.setValidate(false);message.setDataJson(publishArgs.getDataJson());message.setExtensions(publishArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performPublishCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,publishArgs);this.addToQueue(request,publishArgs.getRequestUrl(),synchronous,(publishArgs.getRequestTimeout()!==null?publishArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performPublishCallback=function(){var args,args2,args3,dynamicValue,flag,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientPublishResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onPublishResponse,args,"OnPublishResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raisePublishFailure(dynamicValue,responseArgs,false);this.raisePublishComplete(dynamicValue,responseArgs);args2=new fm.websync.clientPublishEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onPublishEnd,args2,"OnPublishEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.publish(dynamicValue);}}else{this.raisePublishSuccess(dynamicValue,responseArgs);this.raisePublishComplete(dynamicValue,responseArgs);args3=new fm.websync.clientPublishEndArgs();args3.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onPublishEnd,args3,"OnPublishEnd",responseArgs);}};client.prototype.performService=function(){var args,message,request,request2,serviceArgs,synchronous;serviceArgs=arguments[0];args=new fm.websync.clientServiceRequestArgs();args.setMethodArgs(serviceArgs);if(this.raiseRequestEvent(fm.websync.client._onServiceRequest,args,"OnServiceRequest")){synchronous=this.checkSynchronous(serviceArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(serviceArgs.getChannel()));message.setValidate(false);message.setDataJson(serviceArgs.getDataJson());message.setExtensions(serviceArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performServiceCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,serviceArgs);this.addToQueue(request,serviceArgs.getRequestUrl(),synchronous,(serviceArgs.getRequestTimeout()!==null?serviceArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performServiceCallback=function(){var args,args2,args3,dynamicValue,flag,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientServiceResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onServiceResponse,args,"OnServiceResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseServiceFailure(dynamicValue,responseArgs,false);this.raiseServiceComplete(dynamicValue,responseArgs);args2=new fm.websync.clientServiceEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onServiceEnd,args2,"OnServiceEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.service(dynamicValue);}}else{this.raiseServiceSuccess(dynamicValue,responseArgs);this.raiseServiceComplete(dynamicValue,responseArgs);args3=new fm.websync.clientServiceEndArgs();args3.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onServiceEnd,args3,"OnServiceEnd",responseArgs);}};client.prototype.performSubscribe=function(){var args,message,request,request2,subscribeArgs,synchronous;subscribeArgs=arguments[0];if(!(subscribeArgs.getAutoResubscribe()!==null)){subscribeArgs.setAutoResubscribe(!this.inCallback());}
args=new fm.websync.clientSubscribeRequestArgs();args.setMethodArgs(subscribeArgs);if(this.raiseRequestEvent(fm.websync.client._onSubscribeRequest,args,"OnSubscribeRequest")){synchronous=this.checkSynchronous(subscribeArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/subscribe");message.setValidate(false);message.setChannels(subscribeArgs.getChannels());message.setExtensions(subscribeArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performSubscribeCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,subscribeArgs);this.addToQueue(request,subscribeArgs.getRequestUrl(),synchronous,(subscribeArgs.getRequestTimeout()!==null?subscribeArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performSubscribeCallback=function(){var _var0,_var1,args,args2,args3,dynamicValue,flag,j,k,len,len1,responseArgs,str;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientSubscribeResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onSubscribeResponse,args,"OnSubscribeResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseSubscribeFailure(dynamicValue,responseArgs,false);this.raiseSubscribeComplete(dynamicValue,responseArgs);args2=new fm.websync.clientSubscribeEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,args2,"OnSubscribeEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.subscribe(dynamicValue);}else{if(dynamicValue.getIsResubscribe()){return this.maybeRaiseStateRestored();}}}else{if(fm.global.equals(dynamicValue.getAutoResubscribe(),true)){fm.arrayExtensions.add(this._reconnectCache,dynamicValue);_var0=responseArgs.getResponse().getChannels();for(j=0,len=_var0.length;j<len;j++){str=_var0[j];this._resubscribeCache[fm.websync.client.getSubscribeKey(str,dynamicValue.getTag())]=dynamicValue;}}
_var1=responseArgs.getResponse().getChannels();for(k=0,len1=_var1.length;k<len1;k++){str=_var1[k];this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(str,dynamicValue.getTag())]=dynamicValue.getDynamicProperties();}
this.addSubscribedChannels(responseArgs.getResponse().getTag(),responseArgs.getResponse().getChannels());this.raiseSubscribeSuccess(dynamicValue,responseArgs);this.raiseSubscribeComplete(dynamicValue,responseArgs);this.addSubscribedOnReceive(responseArgs.getResponse().getTag(),responseArgs.getResponse().getChannels(),dynamicValue.getOnReceive(),dynamicValue.getDynamicProperties(),this._lastInterval);args3=new fm.websync.clientSubscribeEndArgs();args3.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,args3,"OnSubscribeEnd",responseArgs);if(dynamicValue.getIsResubscribe()){return this.maybeRaiseStateRestored();}}};client.prototype.performUnbind=function(){var args,message,request,request2,synchronous,unbindArgs;unbindArgs=arguments[0];args=new fm.websync.clientUnbindRequestArgs();args.setMethodArgs(unbindArgs);if(this.raiseRequestEvent(fm.websync.client._onUnbindRequest,args,"OnUnbindRequest")){synchronous=this.checkSynchronous(unbindArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/unbind");message.setValidate(false);message.setRecords(unbindArgs.getRecords());message.setExtensions(unbindArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performUnbindCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,unbindArgs);this.addToQueue(request,unbindArgs.getRequestUrl(),synchronous,(unbindArgs.getRequestTimeout()!==null?unbindArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performUnbindCallback=function(){var _var0,_var1,_var2,args,args2,args3,args4,dynamicValue,flag,i,j,len,list,record,responseArgs;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientUnbindResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onUnbindResponse,args,"OnUnbindResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseUnbindFailure(dynamicValue,responseArgs,false);this.raiseUnbindComplete(dynamicValue,responseArgs,false);args2=new fm.websync.clientUnbindEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,args2,"OnUnbindEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.unbind(dynamicValue);}}else{_var0=responseArgs.getResponse().getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];args3=null;_var1=new fm.holder(args3);_var2=fm.hashExtensions.tryGetValue(this._rebindCache,record.getKey(),_var1);args3=_var1.getValue();if(!_var2){args3=null;}
if(!fm.global.equals(args3,null)){list=[];i=0;while(i<fm.arrayExtensions.getCount(list)){try{if(fm.global.equals(list[i].getKey(),record.getKey())){list.removeAt(i);i--;}}finally{i++;}}
args3.setRecords(fm.arrayExtensions.toArray(list));fm.hashExtensions.remove(this._rebindCache,record.getKey());if(!fm.hashExtensions.containsValue(this._rebindCache,args3)){fm.arrayExtensions.remove(this._reconnectCache,args3);}}}
this.removeBoundRecords(responseArgs.getResponse().getRecords());this.raiseUnbindSuccess(dynamicValue,responseArgs,false);this.raiseUnbindComplete(dynamicValue,responseArgs,false);args4=new fm.websync.clientUnbindEndArgs();args4.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,args4,"OnUnbindEnd",responseArgs);}};client.prototype.performUnsubscribe=function(){var args,message,request,request2,synchronous,unsubscribeArgs;unsubscribeArgs=arguments[0];args=new fm.websync.clientUnsubscribeRequestArgs();args.setMethodArgs(unsubscribeArgs);if(this.raiseRequestEvent(fm.websync.client._onUnsubscribeRequest,args,"OnUnsubscribeRequest")){synchronous=this.checkSynchronous(unsubscribeArgs.getSynchronous());request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/unsubscribe");message.setValidate(false);message.setChannels(unsubscribeArgs.getChannels());message.setExtensions(unsubscribeArgs.getExtensions());request2.setMessage(message);request2.setCallback(this.performUnsubscribeCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,unsubscribeArgs);this.addToQueue(request,unsubscribeArgs.getRequestUrl(),synchronous,(unsubscribeArgs.getRequestTimeout()!==null?unsubscribeArgs.getRequestTimeout():0));return this.processQueue(false);}};client.prototype.performUnsubscribeCallback=function(){var _var0,_var1,_var2,args,args2,args3,args4,dynamicValue,flag,j,len,list,responseArgs,str,subscribeKey;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);args=new fm.websync.clientUnsubscribeResponseArgs();args.setMethodArgs(dynamicValue);this.raiseResponseEvent(fm.websync.client._onUnsubscribeResponse,args,"OnUnsubscribeResponse",responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){flag=this.raiseUnsubscribeFailure(dynamicValue,responseArgs,false);this.raiseUnsubscribeComplete(dynamicValue,responseArgs,false);args2=new fm.websync.clientUnsubscribeEndArgs();args2.setMethodArgs(dynamicValue);this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,args2,"OnUnsubscribeEnd",responseArgs);if(flag){dynamicValue.setIsRetry(true);return this.unsubscribe(dynamicValue);}}else{_var0=responseArgs.getResponse().getChannels();for(j=0,len=_var0.length;j<len;j++){str=_var0[j];args3=null;subscribeKey=fm.websync.client.getSubscribeKey(str,dynamicValue.getTag());_var1=new fm.holder(args3);_var2=fm.hashExtensions.tryGetValue(this._resubscribeCache,subscribeKey,_var1);args3=_var1.getValue();if(!_var2){args3=null;}
if(!fm.global.equals(args3,null)){list=[];fm.arrayExtensions.remove(list,str);args3.setChannels(fm.arrayExtensions.toArray(list));fm.hashExtensions.remove(this._resubscribeCache,subscribeKey);if(!fm.hashExtensions.containsValue(this._resubscribeCache,args3)){fm.arrayExtensions.remove(this._reconnectCache,args3);}}}
this.removeSubscribedChannels(responseArgs.getResponse().getTag(),responseArgs.getResponse().getChannels());this.removeSubscribedOnReceive(responseArgs.getResponse().getTag(),responseArgs.getResponse().getChannels());this.raiseUnsubscribeSuccess(dynamicValue,responseArgs,false);this.raiseUnsubscribeComplete(dynamicValue,responseArgs,false);args4=new fm.websync.clientUnsubscribeEndArgs();args4.setMethodArgs(dynamicValue);return this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,args4,"OnUnsubscribeEnd",responseArgs);}};client.prototype.postRaise=function(){var num,threadId;threadId=arguments[0];if(fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.Low)){num=this._threadCounters[threadId];if(fm.global.equals(num,1)){return fm.hashExtensions.remove(this._threadCounters,threadId);}else{return this._threadCounters[threadId]=num-1;}}else{num=this._threadCounters[threadId];return this._threadCounters[threadId]=num-1;}};client.prototype.preRaise=function(){var num,threadId;threadId=arguments[0];num=0;if(fm.hashExtensions.containsKey(this._threadCounters,threadId)){num=this._threadCounters[threadId];}
return this._threadCounters[threadId]=num+1;};client.prototype.processAdvice=function(){var advice;advice=arguments[0];if(advice.getInterval()!==null){this._lastInterval=advice.getInterval();}
if(advice.getReconnect()!==null){return this._lastReconnect=advice.getReconnect();}};client.prototype.processPendingReceives=function(){var _var0,_var1,_var2,_var3,channels,j,k,len,len1,list,message,reconnectAfter,str;channels=arguments[0];reconnectAfter=arguments[1];_var0=channels;for(j=0,len=_var0.length;j<len;j++){str=_var0[j];list=null;_var1=new fm.holder(list);_var2=fm.hashExtensions.tryGetValue(this._pendingReceives,str,_var1);list=_var1.getValue();if(_var2){fm.hashExtensions.remove(this._pendingReceives,str);}
if(!fm.global.equals(list,null)){_var3=list;for(k=0,len1=_var3.length;k<len1;k++){message=_var3[k];reconnectAfter=this.receiveMessage(message,reconnectAfter);}}}
return reconnectAfter;};client.prototype.processQueue=function(){var _var0,activate,index,j,len,requestQueue,requests,results,s,str,str3,synchronous,timeout,url;activate=arguments[0];if(activate){this._queueActivated=true;}
if(this._queueActivated&&!this.inBatch()){requestQueue=this._requestQueue;this._requestQueue={};_var0=fm.hashExtensions.getKeys(requestQueue);results=[];for(j=0,len=_var0.length;j<len;j++){str=_var0[j];index=fm.stringExtensions.indexOf(str,"|");s=fm.stringExtensions.substring(str,0,index);str3=str.substring(index+1);timeout=fm.parseAssistant.parseIntegerValue(s);synchronous=fm.global.equals(fm.stringExtensions.substring(str3,0,1),"1");url=str3.substring(1);requests=fm.arrayExtensions.toArray(requestQueue[str]);results.push(this.sendMany(requests,url,synchronous,timeout));}
return results;}};client.prototype.processRequestUrl=function(){var _var0,_var1,flag,requestUrl,str;requestUrl=arguments[0];if(fm.stringExtensions.isNullOrEmpty(requestUrl)){requestUrl=this.getRequestUrl();}
flag=false;str=null;if(fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)){_var0=new fm.holder(str);_var1=fm.hashExtensions.tryGetValue(fm.websync.client._requestUrlCache,requestUrl,_var0);str=_var0.getValue();flag=_var1;}
if(!flag){str=requestUrl;str=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(str,"token",this.getToken()),"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1");if(!fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)){return str;}
fm.websync.client._requestUrlCache[requestUrl]=str;}
return str;};client.prototype.processServerAction=function(){var onReceive,reconnectAfter,serverAction;serverAction=arguments[0];reconnectAfter=arguments[1];if(fm.global.equals(serverAction.getBayeuxChannel(),"/meta/bind")){this.addBoundRecords(serverAction.getRecords());this.raiseServerBind(serverAction);return reconnectAfter;}
if(fm.global.equals(serverAction.getBayeuxChannel(),"/meta/unbind")){this.removeBoundRecords(serverAction.getRecords());this.raiseServerUnbind(serverAction);return reconnectAfter;}
if(fm.global.equals(serverAction.getBayeuxChannel(),"/meta/subscribe")){this.addSubscribedChannels(serverAction.getTag(),serverAction.getChannels());onReceive=this.raiseServerSubscribe(serverAction);if(fm.global.equals(onReceive,null)){throw new Error(fm.stringExtensions.format("The server subscribed the client to [{0}], but the client did not supply a callback to handle received messages. A callback must be specified in the client's OnServerSubscribe event.",fm.stringExtensions.join(", ",serverAction.getChannels())));}
reconnectAfter=this.addSubscribedOnReceive(serverAction.getTag(),serverAction.getChannels(),onReceive,serverAction.getDynamicProperties(),reconnectAfter);return reconnectAfter;}
if(fm.global.equals(serverAction.getBayeuxChannel(),"/meta/unsubscribe")){this.removeSubscribedChannels(serverAction.getTag(),serverAction.getChannels());this.raiseServerUnsubscribe(serverAction);this.removeSubscribedOnReceive(serverAction.getTag(),serverAction.getChannels());}
return reconnectAfter;};client.prototype.publish=function(){var publishArgs;publishArgs=arguments[0];if(fm.stringExtensions.isNullOrEmpty(publishArgs.getChannel())){throw new Error("channel cannot be null.");}
if(fm.stringExtensions.isNullOrEmpty(publishArgs.getDataJson())){throw new Error("dataJson cannot be null.");}
this.performPublish(publishArgs);return this;};client.prototype.raiseAction=function(){var args,callback,source;callback=arguments[0];args=arguments[1];source=arguments[2];return this.raiseActionManual(callback,args,source,false);};client.prototype.raiseActionManual=function(){var args,callback,error,error1,exception,exception1,exception2,manualThreadManagement,source,threadId;callback=arguments[0];args=arguments[1];source=arguments[2];manualThreadManagement=arguments[3];if(manualThreadManagement){try{return callback(args);}catch(error){exception1=error;exception=exception1;if(!this.raiseUnhandledException(exception)){return fm.asyncException.asyncThrow(exception,source);}}finally{}}else{threadId=this.getThreadId();this.preRaise(threadId);try{return callback(args);}catch(error1){exception2=error1;exception=exception2;if(!this.raiseUnhandledException(exception)){return fm.asyncException.asyncThrow(exception,source);}}finally{this.postRaise(threadId);}}};client.prototype.raiseBindComplete=function(){var args,args2,bindArgs,onBindComplete,responseArgs;bindArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.bindCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),bindArgs));args2.setIsRebind(bindArgs.getIsRebind());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(bindArgs.getDynamicProperties());args=args2;onBindComplete=this._onBindComplete;if(!fm.global.equals(onBindComplete,null)){this.raiseAction(onBindComplete,args,"Client -> OnBindComplete");}
if(!fm.global.equals(bindArgs.getOnComplete(),null)){return this.raiseAction(bindArgs.getOnComplete(),args,"Client -> Bind -> OnComplete");}};client.prototype.raiseBindFailure=function(){var args,args2,bindArgs,onBindFailure,responseArgs,retry;bindArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.bindFailureArgs();args2.__records=fm.websync.client.getRecordsForBind(responseArgs.getResponse(),bindArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),bindArgs));args2.setIsRebind(bindArgs.getIsRebind());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(bindArgs.getDynamicProperties());args=args2;onBindFailure=this._onBindFailure;if(!fm.global.equals(onBindFailure,null)){this.raiseAction(onBindFailure,args,"Client -> OnBindFailure");}
if(!fm.global.equals(bindArgs.getOnFailure(),null)){retry=this.raiseRetriable(bindArgs.getOnFailure(),retry,args,"Client -> Bind -> OnFailure");}
return retry;};client.prototype.raiseBindSuccess=function(){var args,args2,bindArgs,onBindSuccess,responseArgs;bindArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.bindSuccessArgs();args2.__records=fm.websync.client.getRecordsForBind(responseArgs.getResponse(),bindArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),bindArgs));args2.setIsRebind(bindArgs.getIsRebind());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(bindArgs.getDynamicProperties());args=args2;onBindSuccess=this._onBindSuccess;if(!fm.global.equals(onBindSuccess,null)){this.raiseAction(onBindSuccess,args,"Client -> OnBindSuccess");}
if(!fm.global.equals(bindArgs.getOnSuccess(),null)){return this.raiseAction(bindArgs.getOnSuccess(),args,"Client -> Bind -> OnSuccess");}};client.prototype.raiseCompleteEvent=function(){var args,eventMethod,eventName,responseArgs;eventMethod=arguments[0];args=arguments[1];eventName=arguments[2];responseArgs=arguments[3];args.setException(responseArgs.getException());args.setResponse(responseArgs.getResponse());return this.raiseEvent(eventMethod,args,eventName);};client.prototype.raiseConnectComplete=function(){var args,args2,connectArgs,onConnectComplete,responseArgs;connectArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.connectCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),connectArgs));args2.setIsReconnect(connectArgs.getIsReconnect());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(connectArgs.getDynamicProperties());args=args2;onConnectComplete=this._onConnectComplete;if(!fm.global.equals(onConnectComplete,null)){this.raiseAction(onConnectComplete,args,"Client -> OnConnectComplete");}
if(!fm.global.equals(connectArgs.getOnComplete(),null)){return this.raiseAction(connectArgs.getOnComplete(),args,"Client -> Connect -> OnComplete");}};client.prototype.raiseConnectFailure=function(){var args,args2,connectArgs,onConnectFailure,responseArgs,retry;connectArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.connectFailureArgs();args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),connectArgs));args2.setIsReconnect(connectArgs.getIsReconnect());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(connectArgs.getDynamicProperties());args=args2;onConnectFailure=this._onConnectFailure;if(!fm.global.equals(onConnectFailure,null)){this.raiseAction(onConnectFailure,args,"Client -> OnConnectFailure");}
if(!fm.global.equals(connectArgs.getOnFailure(),null)){retry=this.raiseRetriable(connectArgs.getOnFailure(),retry,args,"Client -> Connect -> OnFailure");}
return retry;};client.prototype.raiseConnectSuccess=function(){var args,args2,connectArgs,onConnectSuccess,responseArgs;connectArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.connectSuccessArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),connectArgs));args2.setConnectionType(this._connectionType);args2.setIsReconnect(connectArgs.getIsReconnect());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(connectArgs.getDynamicProperties());args=args2;onConnectSuccess=this._onConnectSuccess;if(!fm.global.equals(onConnectSuccess,null)){this.raiseAction(onConnectSuccess,args,"Client -> OnConnectSuccess");}
if(!fm.global.equals(connectArgs.getOnSuccess(),null)){return this.raiseAction(connectArgs.getOnSuccess(),args,"Client -> Connect -> OnSuccess");}};client.prototype.raiseDisconnectComplete=function(){var args,args2,disconnectArgs,onDisconnectComplete,responseArgs;disconnectArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.disconnectCompleteArgs();args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),disconnectArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(disconnectArgs.getDynamicProperties());args=args2;onDisconnectComplete=this._onDisconnectComplete;if(!fm.global.equals(onDisconnectComplete,null)){this.raiseAction(onDisconnectComplete,args,"Client -> OnDisconnectComplete");}
if(!fm.global.equals(disconnectArgs.getOnComplete(),null)){return this.raiseAction(disconnectArgs.getOnComplete(),args,"Client -> Disconnect -> OnComplete");}};client.prototype.raiseEvent=function(){var args,error,eventMethod,eventName,exception;eventMethod=arguments[0];args=arguments[1];eventName=arguments[2];args.setClient(this);if(!fm.global.equals(eventMethod,null)){try{return eventMethod(this,args);}catch(error){exception=error;if(!this.raiseUnhandledException(exception)){return fm.asyncException.asyncThrow(exception,fm.stringExtensions.format("Client -> {0}",eventName));}}finally{}}};client.prototype.raiseForcedUnbinds=function(){var _var0,_var1,args2,inputArgs,item,j,k,len,len1,list,responseArgs,results,str;inputArgs=arguments[0];responseArgs=arguments[1];list=[];_var0=fm.hashExtensions.getKeys(this._boundRecords);for(j=0,len=_var0.length;j<len;j++){str=_var0[j];item=new fm.websync.unbindArgs([this._boundRecords[str]]);item.setRequestUrl(inputArgs.getRequestUrl());item.setSynchronous(inputArgs.getSynchronous());item.setIsRetry(inputArgs.getIsRetry());item.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),inputArgs));item.setDynamicProperties(inputArgs.getDynamicProperties());fm.arrayExtensions.add(list,item);}
_var1=list;results=[];for(k=0,len1=_var1.length;k<len1;k++){args2=_var1[k];this.raiseUnbindSuccess(args2,responseArgs,true);results.push(this.raiseUnbindComplete(args2,responseArgs,true));}
return results;};client.prototype.raiseForcedUnsubscribes=function(){var _var0,_var1,_var2,args2,inputArgs,item,j,k,l,len,len1,len2,list,responseArgs,results,str,str2;inputArgs=arguments[0];responseArgs=arguments[1];list=[];_var0=fm.hashExtensions.getKeys(this._subscribedChannels);for(j=0,len=_var0.length;j<len;j++){str=_var0[j];_var1=fm.hashExtensions.getKeys(this._subscribedChannels[str]);for(k=0,len1=_var1.length;k<len1;k++){str2=_var1[k];item=new fm.websync.unsubscribeArgs([str2],str);item.setRequestUrl(inputArgs.getRequestUrl());item.setSynchronous(inputArgs.getSynchronous());item.setIsRetry(inputArgs.getIsRetry());item.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),inputArgs));item.setDynamicProperties(inputArgs.getDynamicProperties());fm.arrayExtensions.add(list,item);}}
_var2=list;results=[];for(l=0,len2=_var2.length;l<len2;l++){args2=_var2[l];this.raiseUnsubscribeSuccess(args2,responseArgs,true);results.push(this.raiseUnsubscribeComplete(args2,responseArgs,true));}
return results;};client.prototype.raiseFunction=function(){var args,callback,source;callback=arguments[0];args=arguments[1];source=arguments[2];return this.raiseFunctionManual(callback,args,source,false);};client.prototype.raiseFunctionManual=function(){var args,callback,error,error1,exception,exception1,exception2,local,manualThreadManagement,source,threadId;callback=arguments[0];args=arguments[1];source=arguments[2];manualThreadManagement=arguments[3];if(manualThreadManagement){try{return callback(args);}catch(error){exception1=error;exception=exception1;if(!this.raiseUnhandledException(exception)){fm.asyncException.asyncThrow(exception,source);}
return null;}finally{}}
threadId=this.getThreadId();this.preRaise(threadId);try{local=callback(args);}catch(error1){exception2=error1;exception=exception2;if(!this.raiseUnhandledException(exception)){fm.asyncException.asyncThrow(exception,source);}
local=null;}finally{this.postRaise(threadId);}
return local;};client.prototype.raiseNotifyComplete=function(){var args,args2,notifyArgs,onNotifyComplete,responseArgs;notifyArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.notifyCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),notifyArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(notifyArgs.getDynamicProperties());args=args2;onNotifyComplete=this._onNotifyComplete;if(!fm.global.equals(onNotifyComplete,null)){this.raiseAction(onNotifyComplete,args,"Client -> OnNotifyComplete");}
if(!fm.global.equals(notifyArgs.getOnComplete(),null)){return this.raiseAction(notifyArgs.getOnComplete(),args,"Client -> Notify -> OnComplete");}};client.prototype.raiseNotifyDelivery=function(){var args,args2,onReceive,reconnectAfter,response;onReceive=arguments[0];response=arguments[1];reconnectAfter=arguments[2];args2=new fm.websync.notifyReceiveArgs(response.__dataJson,response.__dataBytes,this._connectionType,reconnectAfter);args2.setExtensions(response.getExtensions());args2.setTimestamp(fm.websync.client.getTimestamp(response));args2.setClient(this);args=args2;if(!fm.global.equals(onReceive,null)){this.raiseActionManual(onReceive,args,"Client -> OnNotify",true);}
return args.getReconnectAfter();};client.prototype.raiseNotifyFailure=function(){var args,args2,notifyArgs,onNotifyFailure,responseArgs,retry;notifyArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.notifyFailureArgs();args2.__dataJson=fm.websync.client.getDataJsonForNotify(responseArgs.getResponse(),notifyArgs);args2.__dataBytes=fm.websync.client.getDataBytesForNotify(responseArgs.getResponse(),notifyArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),notifyArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(notifyArgs.getDynamicProperties());args=args2;onNotifyFailure=this._onNotifyFailure;if(!fm.global.equals(onNotifyFailure,null)){this.raiseAction(onNotifyFailure,args,"Client -> OnNotifyFailure");}
if(!fm.global.equals(notifyArgs.getOnFailure(),null)){retry=this.raiseRetriable(notifyArgs.getOnFailure(),retry,args,"Client -> Notify -> OnFailure");}
return retry;};client.prototype.raiseNotifySuccess=function(){var args,args2,notifyArgs,onNotifySuccess,responseArgs;notifyArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.notifySuccessArgs();args2.__dataJson=fm.websync.client.getDataJsonForNotify(responseArgs.getResponse(),notifyArgs);args2.__dataBytes=fm.websync.client.getDataBytesForNotify(responseArgs.getResponse(),notifyArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),notifyArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(notifyArgs.getDynamicProperties());args=args2;onNotifySuccess=this._onNotifySuccess;if(!fm.global.equals(onNotifySuccess,null)){this.raiseAction(onNotifySuccess,args,"Client -> OnNotifySuccess");}
if(!fm.global.equals(notifyArgs.getOnSuccess(),null)){return this.raiseAction(notifyArgs.getOnSuccess(),args,"Client -> Notify -> OnSuccess");}};client.prototype.raisePublishComplete=function(){var args,args2,onPublishComplete,publishArgs,responseArgs;publishArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.publishCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),publishArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(publishArgs.getDynamicProperties());args=args2;onPublishComplete=this._onPublishComplete;if(!fm.global.equals(onPublishComplete,null)){this.raiseAction(onPublishComplete,args,"Client -> OnPublishComplete");}
if(!fm.global.equals(publishArgs.getOnComplete(),null)){return this.raiseAction(publishArgs.getOnComplete(),args,"Client -> Publish -> OnComplete");}};client.prototype.raisePublishFailure=function(){var args,args2,onPublishFailure,publishArgs,responseArgs,retry;publishArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.publishFailureArgs();args2.__channel=fm.websync.client.getChannelForPublish(responseArgs.getResponse(),publishArgs);args2.__dataJson=fm.websync.client.getDataJsonForPublish(responseArgs.getResponse(),publishArgs);args2.__dataBytes=fm.websync.client.getDataBytesForPublish(responseArgs.getResponse(),publishArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),publishArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(publishArgs.getDynamicProperties());args=args2;onPublishFailure=this._onPublishFailure;if(!fm.global.equals(onPublishFailure,null)){this.raiseAction(onPublishFailure,args,"Client -> OnPublishFailure");}
if(!fm.global.equals(publishArgs.getOnFailure(),null)){retry=this.raiseRetriable(publishArgs.getOnFailure(),retry,args,"Client -> Publish -> OnFailure");}
return retry;};client.prototype.raisePublishSuccess=function(){var args,args2,onPublishSuccess,publishArgs,responseArgs;publishArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.publishSuccessArgs();args2.__channel=fm.websync.client.getChannelForPublish(responseArgs.getResponse(),publishArgs);args2.__dataJson=fm.websync.client.getDataJsonForPublish(responseArgs.getResponse(),publishArgs);args2.__dataBytes=fm.websync.client.getDataBytesForPublish(responseArgs.getResponse(),publishArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),publishArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(publishArgs.getDynamicProperties());args=args2;onPublishSuccess=this._onPublishSuccess;if(!fm.global.equals(onPublishSuccess,null)){this.raiseAction(onPublishSuccess,args,"Client -> OnPublishSuccess");}
if(!fm.global.equals(publishArgs.getOnSuccess(),null)){return this.raiseAction(publishArgs.getOnSuccess(),args,"Client -> Publish -> OnSuccess");}};client.prototype.raiseRequestEvent=function(){var args,eventMethod,eventName;eventMethod=arguments[0];args=arguments[1];eventName=arguments[2];this.raiseEvent(eventMethod,args,eventName);return!args.getCancel();};client.prototype.raiseResponseEvent=function(){var args,eventMethod,eventName,responseArgs;eventMethod=arguments[0];args=arguments[1];eventName=arguments[2];responseArgs=arguments[3];args.setException(responseArgs.getException());args.setResponse(responseArgs.getResponse());return this.raiseEvent(eventMethod,args,eventName);};client.prototype.raiseRetriable=function(){var args,callback,retry,source;callback=arguments[0];retry=arguments[1];args=arguments[2];source=arguments[3];args.setRetry(retry);this.raiseAction(callback,args,source);return args.getRetry();};client.prototype.raiseSendException=function(){var _var0,exception,j,len,p,request,results,state;state=arguments[0];exception=arguments[1];_var0=state.getRequests();results=[];for(j=0,len=_var0.length;j<len;j++){request=_var0[j];p=new fm.websync.clientResponseArgs();p.setDynamicProperties(request.getDynamicProperties());p.setException(exception);results.push(request.getCallback()(p));}
return results;};client.prototype.raiseServerBind=function(){var args,onServerBind,serverAction;serverAction=arguments[0];onServerBind=this._onServerBind;if(!fm.global.equals(onServerBind,null)){args=new fm.websync.serverBindArgs();args.__records=serverAction.getRecords();args.setExtensions(serverAction.getExtensions());args.setTimestamp(serverAction.getTimestamp());args.setClient(this);return this.raiseAction(onServerBind,args,"Client -> OnServerBind");}};client.prototype.raiseServerSubscribe=function(){var args,onServerSubscribe,serverAction;serverAction=arguments[0];onServerSubscribe=this._onServerSubscribe;if(!fm.global.equals(onServerSubscribe,null)){args=new fm.websync.serverSubscribeArgs();args.__channels=serverAction.getChannels();args.setExtensions(serverAction.getExtensions());args.setTimestamp(serverAction.getTimestamp());args.setClient(this);return this.raiseFunction(onServerSubscribe,args,"Client -> OnServerSubscribe");}
return null;};client.prototype.raiseServerUnbind=function(){var args,onServerUnbind,serverAction;serverAction=arguments[0];onServerUnbind=this._onServerUnbind;if(!fm.global.equals(onServerUnbind,null)){args=new fm.websync.serverUnbindArgs();args.__records=serverAction.getRecords();args.setExtensions(serverAction.getExtensions());args.setTimestamp(serverAction.getTimestamp());args.setClient(this);return this.raiseAction(onServerUnbind,args,"Client -> OnServerUnbind");}};client.prototype.raiseServerUnsubscribe=function(){var args,onServerUnsubscribe,serverAction;serverAction=arguments[0];onServerUnsubscribe=this._onServerUnsubscribe;if(!fm.global.equals(onServerUnsubscribe,null)){args=new fm.websync.serverUnsubscribeArgs();args.__channels=serverAction.getChannels();args.setExtensions(serverAction.getExtensions());args.setTimestamp(serverAction.getTimestamp());args.setClient(this);return this.raiseAction(onServerUnsubscribe,args,"Client -> OnServerUnsubscribe");}};client.prototype.raiseServiceComplete=function(){var args,args2,onServiceComplete,responseArgs,serviceArgs;serviceArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.serviceCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),serviceArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(serviceArgs.getDynamicProperties());args=args2;onServiceComplete=this._onServiceComplete;if(!fm.global.equals(onServiceComplete,null)){this.raiseAction(onServiceComplete,args,"Client -> OnServiceComplete");}
if(!fm.global.equals(serviceArgs.getOnComplete(),null)){return this.raiseAction(serviceArgs.getOnComplete(),args,"Client -> Service -> OnComplete");}};client.prototype.raiseServiceFailure=function(){var args,args2,onServiceFailure,responseArgs,retry,serviceArgs;serviceArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.serviceFailureArgs();args2.__channel=fm.websync.client.getChannelForService(responseArgs.getResponse(),serviceArgs);args2.__dataJson=fm.websync.client.getDataJsonForService(responseArgs.getResponse(),serviceArgs);args2.__dataBytes=fm.websync.client.getDataBytesForService(responseArgs.getResponse(),serviceArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),serviceArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(serviceArgs.getDynamicProperties());args=args2;onServiceFailure=this._onServiceFailure;if(!fm.global.equals(onServiceFailure,null)){this.raiseAction(onServiceFailure,args,"Client -> OnServiceFailure");}
if(!fm.global.equals(serviceArgs.getOnFailure(),null)){retry=this.raiseRetriable(serviceArgs.getOnFailure(),retry,args,"Client -> Service -> OnFailure");}
return retry;};client.prototype.raiseServiceSuccess=function(){var args,args2,onServiceSuccess,responseArgs,serviceArgs;serviceArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.serviceSuccessArgs();args2.__channel=fm.websync.client.getChannelForService(responseArgs.getResponse(),serviceArgs);args2.__dataJson=fm.websync.client.getDataJsonForService(responseArgs.getResponse(),serviceArgs);args2.__dataBytes=fm.websync.client.getDataBytesForService(responseArgs.getResponse(),serviceArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),serviceArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(serviceArgs.getDynamicProperties());args=args2;onServiceSuccess=this._onServiceSuccess;if(!fm.global.equals(onServiceSuccess,null)){this.raiseAction(onServiceSuccess,args,"Client -> OnServiceSuccess");}
if(!fm.global.equals(serviceArgs.getOnSuccess(),null)){return this.raiseAction(serviceArgs.getOnSuccess(),args,"Client -> Service -> OnSuccess");}};client.prototype.raiseStateRestored=function(){var args,args2,connectArgs,onStateRestored;connectArgs=arguments[0];args2=new fm.websync.stateRestoredArgs();args2.setExtensions(connectArgs.getExtensions());args2.setClient(this);args2.setDynamicProperties(connectArgs.getDynamicProperties());args=args2;onStateRestored=this._onStateRestored;if(!fm.global.equals(onStateRestored,null)){this.raiseAction(onStateRestored,args,"Client -> OnStateRestored");}
if(!fm.global.equals(connectArgs.getOnStateRestored(),null)){return this.raiseAction(connectArgs.getOnStateRestored(),args,"Client -> Connect -> OnStateRestored");}};client.prototype.raiseStreamFailure=function(){var args,args2,connectArgs,connectArgsOut,onStreamFailure,responseArgs,retry;connectArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];connectArgsOut=arguments[3];args2=new fm.websync.streamFailureArgs();args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),connectArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setConnectArgs(connectArgs);args2.setDynamicProperties(connectArgs.getDynamicProperties());args=args2;onStreamFailure=this._onStreamFailure;if(!fm.global.equals(onStreamFailure,null)){this.raiseAction(onStreamFailure,args,"Client -> OnStreamFailure");}
if(!fm.global.equals(connectArgs.getOnStreamFailure(),null)){retry=this.raiseRetriable(connectArgs.getOnStreamFailure(),retry,args,"Client -> Connect -> OnStreamFailure");}
connectArgsOut.setValue(args.getConnectArgs());return retry;};client.prototype.raiseSubscribeComplete=function(){var args,args2,onSubscribeComplete,responseArgs,subscribeArgs;subscribeArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.subscribeCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),subscribeArgs));args2.setIsResubscribe(subscribeArgs.getIsResubscribe());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(subscribeArgs.getDynamicProperties());args=args2;onSubscribeComplete=this._onSubscribeComplete;if(!fm.global.equals(onSubscribeComplete,null)){this.raiseAction(onSubscribeComplete,args,"Client -> OnSubscribeComplete");}
if(!fm.global.equals(subscribeArgs.getOnComplete(),null)){return this.raiseAction(subscribeArgs.getOnComplete(),args,"Client -> Subscribe -> OnComplete");}};client.prototype.raiseSubscribeDelivery=function(){var args,args2,dynamicProperties,onReceive,reconnectAfter,response;onReceive=arguments[0];dynamicProperties=arguments[1];response=arguments[2];reconnectAfter=arguments[3];args2=new fm.websync.subscribeReceiveArgs(response.getBayeuxChannel(),response.__dataJson,response.__dataBytes,this._connectionType,reconnectAfter);args2.setExtensions(response.getExtensions());args2.setTimestamp(fm.websync.client.getTimestamp(response));args2.setClient(this);args2.setDynamicProperties(dynamicProperties);args=args2;if(!fm.global.equals(onReceive,null)){this.raiseActionManual(onReceive,args,"Client -> Subscribe -> OnReceive",true);}
return args.getReconnectAfter();};client.prototype.raiseSubscribeFailure=function(){var args,args2,onSubscribeFailure,responseArgs,retry,subscribeArgs;subscribeArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.subscribeFailureArgs();args2.__channels=fm.websync.client.getChannelsForSubscribe(responseArgs.getResponse(),subscribeArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),subscribeArgs));args2.setIsResubscribe(subscribeArgs.getIsResubscribe());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(subscribeArgs.getDynamicProperties());args=args2;onSubscribeFailure=this._onSubscribeFailure;if(!fm.global.equals(onSubscribeFailure,null)){this.raiseAction(onSubscribeFailure,args,"Client -> OnSubscribeFailure");}
if(!fm.global.equals(subscribeArgs.getOnFailure(),null)){retry=this.raiseRetriable(subscribeArgs.getOnFailure(),retry,args,"Client -> Subscribe -> OnFailure");}
return retry;};client.prototype.raiseSubscribeSuccess=function(){var args,args2,onSubscribeSuccess,responseArgs,subscribeArgs;subscribeArgs=arguments[0];responseArgs=arguments[1];args2=new fm.websync.subscribeSuccessArgs();args2.__channels=fm.websync.client.getChannelsForSubscribe(responseArgs.getResponse(),subscribeArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),subscribeArgs));args2.setIsResubscribe(subscribeArgs.getIsResubscribe());args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(subscribeArgs.getDynamicProperties());args=args2;onSubscribeSuccess=this._onSubscribeSuccess;if(!fm.global.equals(onSubscribeSuccess,null)){this.raiseAction(onSubscribeSuccess,args,"Client -> OnSubscribeSuccess");}
if(!fm.global.equals(subscribeArgs.getOnSuccess(),null)){return this.raiseAction(subscribeArgs.getOnSuccess(),args,"Client -> Subscribe -> OnSuccess");}};client.prototype.raiseUnbindComplete=function(){var args,args2,forced,onUnbindComplete,responseArgs,unbindArgs;unbindArgs=arguments[0];responseArgs=arguments[1];forced=arguments[2];args2=new fm.websync.unbindCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unbindArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unbindArgs.getDynamicProperties());args2.__forced=forced;args=args2;onUnbindComplete=this._onUnbindComplete;if(!fm.global.equals(onUnbindComplete,null)){this.raiseAction(onUnbindComplete,args,"Client -> OnUnbindComplete");}
if(!fm.global.equals(unbindArgs.getOnComplete(),null)){return this.raiseAction(unbindArgs.getOnComplete(),args,"Client -> Unbind -> OnComplete");}};client.prototype.raiseUnbindFailure=function(){var args,args2,onUnbindFailure,responseArgs,retry,unbindArgs;unbindArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.unbindFailureArgs();args2.__records=fm.websync.client.getRecordsForUnbind(responseArgs.getResponse(),unbindArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unbindArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unbindArgs.getDynamicProperties());args=args2;onUnbindFailure=this._onUnbindFailure;if(!fm.global.equals(onUnbindFailure,null)){this.raiseAction(onUnbindFailure,args,"Client -> OnUnbindFailure");}
if(!fm.global.equals(unbindArgs.getOnFailure(),null)){retry=this.raiseRetriable(unbindArgs.getOnFailure(),retry,args,"Client -> Unbind -> OnFailure");}
return retry;};client.prototype.raiseUnbindSuccess=function(){var args,args2,forced,onUnbindSuccess,responseArgs,unbindArgs;unbindArgs=arguments[0];responseArgs=arguments[1];forced=arguments[2];args2=new fm.websync.unbindSuccessArgs();args2.__records=fm.websync.client.getRecordsForUnbind(responseArgs.getResponse(),unbindArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unbindArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unbindArgs.getDynamicProperties());args2.__forced=forced;args=args2;onUnbindSuccess=this._onUnbindSuccess;if(!fm.global.equals(onUnbindSuccess,null)){this.raiseAction(onUnbindSuccess,args,"Client -> OnUnbindSuccess");}
if(!fm.global.equals(unbindArgs.getOnSuccess(),null)){return this.raiseAction(unbindArgs.getOnSuccess(),args,"Client -> Unbind -> OnSuccess");}};client.prototype.raiseUnsubscribeComplete=function(){var args,args2,forced,onUnsubscribeComplete,responseArgs,unsubscribeArgs;unsubscribeArgs=arguments[0];responseArgs=arguments[1];forced=arguments[2];args2=new fm.websync.unsubscribeCompleteArgs();args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unsubscribeArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unsubscribeArgs.getDynamicProperties());args2.__forced=forced;args=args2;onUnsubscribeComplete=this._onUnsubscribeComplete;if(!fm.global.equals(onUnsubscribeComplete,null)){this.raiseAction(onUnsubscribeComplete,args,"Client -> OnUnsubscribeComplete");}
if(!fm.global.equals(unsubscribeArgs.getOnComplete(),null)){return this.raiseAction(unsubscribeArgs.getOnComplete(),args,"Client -> Unsubscribe -> OnComplete");}};client.prototype.raiseUnsubscribeFailure=function(){var args,args2,onUnsubscribeFailure,responseArgs,retry,unsubscribeArgs;unsubscribeArgs=arguments[0];responseArgs=arguments[1];retry=arguments[2];args2=new fm.websync.unsubscribeFailureArgs();args2.__channels=fm.websync.client.getChannelsForUnsubscribe(responseArgs.getResponse(),unsubscribeArgs);args2.setException(responseArgs.getException());args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unsubscribeArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unsubscribeArgs.getDynamicProperties());args=args2;onUnsubscribeFailure=this._onUnsubscribeFailure;if(!fm.global.equals(onUnsubscribeFailure,null)){this.raiseAction(onUnsubscribeFailure,args,"Client -> OnUnsubscribeFailure");}
if(!fm.global.equals(unsubscribeArgs.getOnFailure(),null)){retry=this.raiseRetriable(unsubscribeArgs.getOnFailure(),retry,args,"Client -> Unsubscribe -> OnFailure");}
return retry;};client.prototype.raiseUnsubscribeSuccess=function(){var args,args2,forced,onUnsubscribeSuccess,responseArgs,unsubscribeArgs;unsubscribeArgs=arguments[0];responseArgs=arguments[1];forced=arguments[2];args2=new fm.websync.unsubscribeSuccessArgs();args2.__channels=fm.websync.client.getChannelsForUnsubscribe(responseArgs.getResponse(),unsubscribeArgs);args2.setExtensions(fm.websync.client.getExtensions(responseArgs.getResponse(),unsubscribeArgs));args2.setTimestamp(fm.websync.client.getTimestamp(responseArgs.getResponse()));args2.setClient(this);args2.setDynamicProperties(unsubscribeArgs.getDynamicProperties());args2.__forced=forced;args=args2;onUnsubscribeSuccess=this._onUnsubscribeSuccess;if(!fm.global.equals(onUnsubscribeSuccess,null)){this.raiseAction(onUnsubscribeSuccess,args,"Client -> OnUnsubscribeSuccess");}
if(!fm.global.equals(unsubscribeArgs.getOnSuccess(),null)){return this.raiseAction(unsubscribeArgs.getOnSuccess(),args,"Client -> Unsubscribe -> OnSuccess");}};client.prototype.receiveMessage=function(){var _var0,_var1,_var2,_var3,_var4,_var5,_var6,_var7,dictionary,dictionary2,dictionary3,i,j,k,l,len,len1,len2,len3,list,list2,list3,m,message,onNotify,onReceive,reconnectAfter,serverAction,str,str2;message=arguments[0];reconnectAfter=arguments[1];if(fm.global.equals(message.getBayeuxChannel(),"/meta/notify")){if(fm.global.equals(message.getTag(),"fm.server")){serverAction=fm.websync.message.fromJson(message.getDataJson());reconnectAfter=this.processServerAction(serverAction,reconnectAfter);}else{onNotify=this._onNotify;if(!fm.global.equals(onNotify,null)){reconnectAfter=this.raiseNotifyDelivery(onNotify,message,reconnectAfter);}}
return reconnectAfter;}
list=[];list2=[];_var0=fm.hashExtensions.getKeys(this._customOnReceives);for(j=0,len=_var0.length;j<len;j++){str=_var0[j];dictionary=this._customOnReceives[str];_var1=fm.hashExtensions.getKeys(dictionary);for(k=0,len1=_var1.length;k<len1;k++){str2=_var1[k];if(fm.global.equals(str2,message.getChannel())){fm.arrayExtensions.add(list,dictionary[str2]);fm.arrayExtensions.add(list2,{});}}}
_var2=fm.hashExtensions.getKeys(this._subscribedOnReceives);for(l=0,len2=_var2.length;l<len2;l++){str=_var2[l];dictionary2=this._subscribedOnReceives[str];_var3=fm.hashExtensions.getKeys(dictionary2);for(m=0,len3=_var3.length;m<len3;m++){str2=_var3[m];if(fm.global.equals(str2,message.getChannel())){fm.arrayExtensions.add(list,dictionary2[str2]);dictionary3=null;_var4=new fm.holder(dictionary3);_var5=fm.hashExtensions.tryGetValue(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(str2,str),_var4);dictionary3=_var4.getValue();if(!_var5){dictionary3={};}
fm.arrayExtensions.add(list2,dictionary3);}}}
if(fm.global.equals(fm.arrayExtensions.getCount(list),0)){list3=null;_var6=new fm.holder(list3);_var7=fm.hashExtensions.tryGetValue(this._pendingReceives,message.getChannel(),_var6);list3=_var6.getValue();if(!_var7){list3=[];this._pendingReceives[message.getChannel()]=list3;}
fm.arrayExtensions.add(list3,message);return reconnectAfter;}
i=0;while(i<fm.arrayExtensions.getCount(list)){try{onReceive=list[i];dictionary3=null;if(i<fm.arrayExtensions.getCount(list2)){dictionary3=list2[i];}
reconnectAfter=this.raiseSubscribeDelivery(onReceive,dictionary3,message,reconnectAfter);}finally{i++;}}
return reconnectAfter;};client.prototype.receiveSink=function(){var e;e=arguments[0];return fm.log.warn("Received message on channel with no receive handler.");};client.prototype.reconnect=function(){var _var0,_var1,connectArgs,connectArgsOut,flag,responseArgs;connectArgs=arguments[0];responseArgs=arguments[1];connectArgsOut=null;_var0=new fm.holder(connectArgsOut);_var1=this.raiseStreamFailure(connectArgs,responseArgs,true,_var0);connectArgsOut=_var0.getValue();flag=_var1;if(fm.global.equals(connectArgsOut,null)){connectArgsOut=connectArgs;}
this.raiseForcedUnsubscribes(connectArgs,responseArgs);this.raiseForcedUnbinds(connectArgs,responseArgs);this.clearBoundRecords();this.clearSubscribedChannels();this.setIsConnected(false);this._queueActivated=false;if(flag){connectArgs.setIsReconnect(true);connectArgs.setLastClientId(this.getClientId());connectArgs.setLastSessionId(this.getSessionId());return this.connect(connectArgs);}};client.prototype.removeBoundRecords=function(){var _var0,j,len,record,records,results;records=arguments[0];_var0=records;results=[];for(j=0,len=_var0.length;j<len;j++){record=_var0[j];results.push(fm.hashExtensions.remove(this._boundRecords,record.getKey()));}
return results;};client.prototype.removeOnBindComplete=function(){var value;value=arguments[0];return this._onBindComplete=fm.delegate.remove(this._onBindComplete,value);};client.prototype.removeOnBindFailure=function(){var value;value=arguments[0];return this._onBindFailure=fm.delegate.remove(this._onBindFailure,value);};client.prototype.removeOnBindSuccess=function(){var value;value=arguments[0];return this._onBindSuccess=fm.delegate.remove(this._onBindSuccess,value);};client.prototype.removeOnConnectComplete=function(){var value;value=arguments[0];return this._onConnectComplete=fm.delegate.remove(this._onConnectComplete,value);};client.prototype.removeOnConnectFailure=function(){var value;value=arguments[0];return this._onConnectFailure=fm.delegate.remove(this._onConnectFailure,value);};client.prototype.removeOnConnectSuccess=function(){var value;value=arguments[0];return this._onConnectSuccess=fm.delegate.remove(this._onConnectSuccess,value);};client.prototype.removeOnDisconnectComplete=function(){var value;value=arguments[0];return this._onDisconnectComplete=fm.delegate.remove(this._onDisconnectComplete,value);};client.prototype.removeOnNotify=function(){var value;value=arguments[0];return this._onNotify=fm.delegate.remove(this._onNotify,value);};client.prototype.removeOnNotifyComplete=function(){var value;value=arguments[0];return this._onNotifyComplete=fm.delegate.remove(this._onNotifyComplete,value);};client.prototype.removeOnNotifyFailure=function(){var value;value=arguments[0];return this._onNotifyFailure=fm.delegate.remove(this._onNotifyFailure,value);};client.prototype.removeOnNotifySuccess=function(){var value;value=arguments[0];return this._onNotifySuccess=fm.delegate.remove(this._onNotifySuccess,value);};client.prototype.removeOnPublishComplete=function(){var value;value=arguments[0];return this._onPublishComplete=fm.delegate.remove(this._onPublishComplete,value);};client.prototype.removeOnPublishFailure=function(){var value;value=arguments[0];return this._onPublishFailure=fm.delegate.remove(this._onPublishFailure,value);};client.prototype.removeOnPublishSuccess=function(){var value;value=arguments[0];return this._onPublishSuccess=fm.delegate.remove(this._onPublishSuccess,value);};client.prototype.removeOnServerBind=function(){var value;value=arguments[0];return this._onServerBind=fm.delegate.remove(this._onServerBind,value);};client.prototype.removeOnServerSubscribe=function(){var value;value=arguments[0];return this._onServerSubscribe=fm.delegate.remove(this._onServerSubscribe,value);};client.prototype.removeOnServerUnbind=function(){var value;value=arguments[0];return this._onServerUnbind=fm.delegate.remove(this._onServerUnbind,value);};client.prototype.removeOnServerUnsubscribe=function(){var value;value=arguments[0];return this._onServerUnsubscribe=fm.delegate.remove(this._onServerUnsubscribe,value);};client.prototype.removeOnServiceComplete=function(){var value;value=arguments[0];return this._onServiceComplete=fm.delegate.remove(this._onServiceComplete,value);};client.prototype.removeOnServiceFailure=function(){var value;value=arguments[0];return this._onServiceFailure=fm.delegate.remove(this._onServiceFailure,value);};client.prototype.removeOnServiceSuccess=function(){var value;value=arguments[0];return this._onServiceSuccess=fm.delegate.remove(this._onServiceSuccess,value);};client.prototype.removeOnStateRestored=function(){var value;value=arguments[0];return this._onStateRestored=fm.delegate.remove(this._onStateRestored,value);};client.prototype.removeOnStreamFailure=function(){var value;value=arguments[0];return this._onStreamFailure=fm.delegate.remove(this._onStreamFailure,value);};client.prototype.removeOnSubscribeComplete=function(){var value;value=arguments[0];return this._onSubscribeComplete=fm.delegate.remove(this._onSubscribeComplete,value);};client.prototype.removeOnSubscribeFailure=function(){var value;value=arguments[0];return this._onSubscribeFailure=fm.delegate.remove(this._onSubscribeFailure,value);};client.prototype.removeOnSubscribeSuccess=function(){var value;value=arguments[0];return this._onSubscribeSuccess=fm.delegate.remove(this._onSubscribeSuccess,value);};client.prototype.removeOnUnbindComplete=function(){var value;value=arguments[0];return this._onUnbindComplete=fm.delegate.remove(this._onUnbindComplete,value);};client.prototype.removeOnUnbindFailure=function(){var value;value=arguments[0];return this._onUnbindFailure=fm.delegate.remove(this._onUnbindFailure,value);};client.prototype.removeOnUnbindSuccess=function(){var value;value=arguments[0];return this._onUnbindSuccess=fm.delegate.remove(this._onUnbindSuccess,value);};client.prototype.removeOnUnsubscribeComplete=function(){var value;value=arguments[0];return this._onUnsubscribeComplete=fm.delegate.remove(this._onUnsubscribeComplete,value);};client.prototype.removeOnUnsubscribeFailure=function(){var value;value=arguments[0];return this._onUnsubscribeFailure=fm.delegate.remove(this._onUnsubscribeFailure,value);};client.prototype.removeOnUnsubscribeSuccess=function(){var value;value=arguments[0];return this._onUnsubscribeSuccess=fm.delegate.remove(this._onUnsubscribeSuccess,value);};client.prototype.removeSubscribedChannels=function(){var _var0,_var1,_var2,channels,dictionary,j,len,str,tag;tag=arguments[0];channels=arguments[1];dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._subscribedChannels,tag,_var0);dictionary=_var0.getValue();if(_var1){_var2=channels;for(j=0,len=_var2.length;j<len;j++){str=_var2[j];fm.hashExtensions.remove(dictionary,str);}
if(fm.global.equals(fm.hashExtensions.getCount(dictionary),0)){return fm.hashExtensions.remove(this._subscribedChannels,tag);}}};client.prototype.removeSubscribedOnReceive=function(){var _var0,_var1,_var2,channels,dictionary,j,len,str,tag;tag=arguments[0];channels=arguments[1];dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,tag,_var0);dictionary=_var0.getValue();if(_var1){_var2=channels;for(j=0,len=_var2.length;j<len;j++){str=_var2[j];fm.hashExtensions.remove(dictionary,str);fm.hashExtensions.remove(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(str,tag));}
if(fm.global.equals(fm.hashExtensions.getCount(dictionary),0)){return fm.hashExtensions.remove(this._subscribedOnReceives,tag);}}};client.prototype.restream=function(){var connectArgs,receivedMessages,reconnectAfter,state;connectArgs=arguments[0];receivedMessages=arguments[1];reconnectAfter=arguments[2];if(reconnectAfter<this._lastInterval){reconnectAfter=this._lastInterval;}
if((fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.Low))&&(reconnectAfter>0)){state=new fm.websync.deferredStreamState();state.setConnectArgs(connectArgs);state.setReceivedMessages(receivedMessages);return fm.deferrer.defer(this.streamDeferred,reconnectAfter,state);}else{return this.stream(connectArgs,receivedMessages);}};client.prototype.retryConnect=function(){var backoffTimeout,connectArgs;connectArgs=arguments[0];backoffTimeout=arguments[1];this._lastBackoffIndex++;this._lastBackoffTimeout=backoffTimeout;connectArgs.setIsRetry(true);return this.connect(connectArgs);};client.prototype.retryConnectDeferred=function(){var s,state;s=arguments[0];state=s;return this.retryConnect(state.getConnectArgs(),state.getBackoffTimeout());};client.prototype.send=function(){var request,synchronous,timeout,url;request=arguments[0];url=arguments[1];synchronous=arguments[2];timeout=arguments[3];return this.sendMany([request],url,synchronous,timeout);};client.prototype.sendCallback=function(){var _var0,_var1,_var2,_var3,_var4,advice,args2,dynamicValue,j,k,len,len1,list,message,message2,p,request,responseArgs,results,serverActions;responseArgs=arguments[0];dynamicValue=responseArgs.getRequestArgs().getDynamicValue(fm.websync.client._stateKey);responseArgs.getRequestArgs().unsetDynamicValue(fm.websync.client._stateKey);if(!fm.global.equals(responseArgs.getException(),null)){return this.raiseSendException(dynamicValue,responseArgs.getException());}else{if((fm.global.equals(responseArgs.getMessages(),null))||(fm.global.equals(responseArgs.getMessages().length,0))){return this.raiseSendException(dynamicValue,new Error("Invalid response received from server."));}else{list=[];_var0=responseArgs.getMessages();for(j=0,len=_var0.length;j<len;j++){message=_var0[j];advice=message.getAdvice();if(!fm.global.equals(advice,null)){this.processAdvice(advice);switch(this._connectionType){case fm.websync.connectionType.WebSocket:if(!fm.global.equals(advice.getWebSocket(),null)){this.processAdvice(advice.getWebSocket());}
break;case fm.websync.connectionType.LongPolling:if(!fm.global.equals(advice.getLongPolling(),null)){this.processAdvice(advice.getLongPolling());}
break;case fm.websync.connectionType.CallbackPolling:if(!fm.global.equals(advice.getCallbackPolling(),null)){this.processAdvice(advice.getCallbackPolling());}
break;}}
if(!dynamicValue.getIsStream()||(fm.global.equals(message.getBayeuxChannel(),"/meta/connect"))){if(fm.stringExtensions.isNullOrEmpty(message.getId())){this.raiseSendException(dynamicValue,new Error(message.getError()));return;}
request=null;_var1=new fm.holder(request);_var2=fm.hashExtensions.tryGetValue(dynamicValue.getRequestMapping(),message.getId(),_var1);request=_var1.getValue();if(!_var2){this.raiseSendException(dynamicValue,new Error(message.getError()));return;}
p=new fm.websync.clientResponseArgs();p.setDynamicProperties(request.getDynamicProperties());p.setResponse(message);p.setException((message.getSuccessful()?null:new Error(message.getError())));request.getCallback()(p);}else{fm.arrayExtensions.add(list,message);}}
if(fm.arrayExtensions.getCount(list)>0){args2=new fm.websync.clientResponseArgs();args2.setDynamicProperties(dynamicValue.getRequests()[0].getDynamicProperties());args2.setResponses(fm.arrayExtensions.toArray(list));dynamicValue.getRequests()[0].getCallback()(args2);}
_var3=responseArgs.getMessages();results=[];for(k=0,len1=_var3.length;k<len1;k++){message=_var3[k];serverActions=message.getServerActions();if(!fm.global.equals(serverActions,null)){_var4=serverActions;results.push((function(){var l,len2,results1;results1=[];for(l=0,len2=_var4.length;l<len2;l++){message2=_var4[l];results1.push(this.processServerAction(message2,this._lastInterval));}
return results1;}).call(this));}else{results.push(void 0);}}
return results;}}};client.prototype.sendMany=function(){var _var0,args3,dictionary,flag,j,len,list,request,requestArgs,requests,responseArgs,state,str,synchronous,timeout,transfer,url;requests=arguments[0];url=arguments[1];synchronous=arguments[2];timeout=arguments[3];flag=false;if(fm.global.equals(requests.length,1)){flag=fm.global.equals(requests[0].getMessage().getBayeuxChannel(),"/meta/connect");}
dictionary={};list=[];_var0=requests;for(j=0,len=_var0.length;j<len;j++){request=_var0[j];if(!(!(!fm.guid.equals(this.getClientId(),fm.guid.empty))||request.getMessage().isConnect())){request.getMessage().setClientId(this.getClientId());request.getMessage().setSessionId(this.getSessionId());}
if(this.getDisableBinary()){request.getMessage().setDisableBinary(this.getDisableBinary());}
this._counter++;request.getMessage().setId(fm.intExtensions.toString(this._counter));fm.arrayExtensions.add(list,request.getMessage());dictionary[request.getMessage().getId()]=request;}
str=this.processRequestUrl(url);url=this.processRequestUrl(url);if(flag){timeout=this.getStreamRequestTimeout();}else{if(fm.global.equals(timeout,0)){timeout=this.getRequestTimeout();}}
transfer=(flag?this._streamRequestTransfer:this._requestTransfer);args3=new fm.websync.messageRequestArgs(this.createHeaders());args3.setMessages(fm.arrayExtensions.toArray(list));args3.setOnRequestCreated(this.internalOnRequestCreated);args3.setOnResponseReceived(this.internalOnResponseReceived);args3.setOnHttpRequestCreated(this.internalOnHttpRequestCreated);args3.setOnHttpResponseReceived(this.internalOnHttpResponseReceived);args3.setSender(this);args3.setTimeout(timeout);args3.setUrl(url);requestArgs=args3;requestArgs.setDynamicValue("frameUrl",str);state=new fm.websync.clientSendState();state.setRequests(requests);state.setRequestMapping(dictionary);state.setIsStream(flag);requestArgs.setDynamicValue(fm.websync.client._stateKey,state);if(synchronous){responseArgs=transfer.send(requestArgs);return this.sendCallback(responseArgs);}else{return transfer.sendAsync(requestArgs,this.sendCallback);}};client.prototype.service=function(){var serviceArgs;serviceArgs=arguments[0];if(fm.stringExtensions.isNullOrEmpty(serviceArgs.getChannel())){throw new Error("channel cannot be null.");}
this.performService(serviceArgs);return this;};client.prototype.setClientId=function(){var value;value=arguments[0];return this._clientId=value;};client.prototype.setCustomOnReceive=function(){var channel,onReceive;channel=arguments[0];onReceive=arguments[1];return this.setCustomOnReceiveWithTag(channel,fm.stringExtensions.empty,onReceive);};client.prototype.setCustomOnReceiveWithTag=function(){var _var0,_var1,channel,dictionary,onReceive,tag;channel=arguments[0];tag=arguments[1];onReceive=arguments[2];if(fm.global.equals(channel,null)){throw new Error("channel cannot be null.");}
if(fm.global.equals(onReceive,null)){throw new Error("onReceive cannot be null.");}
if(fm.global.equals(tag,null)){tag=fm.stringExtensions.empty;}
dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._customOnReceives,tag,_var0);dictionary=_var0.getValue();if(!_var1){dictionary={};this._customOnReceives[tag]=dictionary;}
dictionary[channel]=onReceive;return this.processPendingReceives([channel],this._lastInterval);};client.prototype.setDisableWebSockets=function(){var value;value=arguments[0];return this._disableWebSockets=value;};client.prototype.setInstanceId=function(){var value;value=arguments[0];return this._instanceId=value;};client.prototype.setIsConnected=function(){var value;value=arguments[0];return this._isConnected=value;};client.prototype.setIsConnecting=function(){var value;value=arguments[0];return this._isConnecting=value;};client.prototype.setIsDisconnecting=function(){var value;value=arguments[0];return this._isDisconnecting=value;};client.prototype.setServerTimeout=function(){var value;value=arguments[0];return this._serverTimeout=value;};client.prototype.setSessionId=function(){var value;value=arguments[0];return this._sessionId=value;};client.prototype.setStreamRequestUrl=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){throw new Error("Stream request URL cannot be null.");}
return this.__streamRequestUrl=fm.httpTransfer.replaceWildcards(value);};client.prototype.setSynchronous=function(){var value;value=arguments[0];return this._synchronous=value;};client.prototype.setToken=function(){var value;value=arguments[0];return this._token=value;};client.prototype.startBatch=function(){this._batchCounter++;return this;};client.prototype.stream=function(){var connectArgs,message,receivedMessages,request,request2;connectArgs=arguments[0];receivedMessages=arguments[1];request2=new fm.websync.clientRequest();message=new fm.websync.message("/meta/connect");message.setConnectionType(this._connectionType);message.setAcknowledgement(receivedMessages);request2.setMessage(message);request2.setCallback(this.streamCallback);request=request2;request.setDynamicValue(fm.websync.client._argsKey,connectArgs);return this.send(request,this.getStreamRequestUrl(),false,0);};client.prototype.streamCallback=function(){var _var0,dynamicValue,j,lastInterval,len,message,responseArgs,threadId;responseArgs=arguments[0];dynamicValue=responseArgs.getDynamicValue(fm.websync.client._argsKey);if(((this.getIsConnected()&&!this.getIsConnecting())&&!this.getIsDisconnecting())&&!this._disconnectCalled){if(!fm.global.equals(responseArgs.getException(),null)){if(!fm.global.equals(responseArgs.getResponses(),null)){if((this._lastReconnect!==null)&&(fm.global.equals(this._lastReconnect,fm.websync.reconnect.Retry))){return this.restream(dynamicValue,false,this._lastInterval);}else{return this.reconnect(dynamicValue,responseArgs);}}else{return this.reconnect(dynamicValue,responseArgs);}}else{if((fm.global.equals(responseArgs.getResponses().length,1))&&(fm.global.equals(responseArgs.getResponses()[0].getBayeuxChannel(),"/meta/connect"))){return this.restream(dynamicValue,false,this._lastInterval);}else{lastInterval=this._lastInterval;threadId=this.getThreadId();this.preRaise(threadId);try{_var0=responseArgs.getResponses();for(j=0,len=_var0.length;j<len;j++){message=_var0[j];lastInterval=this.receiveMessage(message,lastInterval);}}finally{this.postRaise(threadId);}
return this.restream(dynamicValue,true,lastInterval);}}}};client.prototype.streamDeferred=function(){var s,state;s=arguments[0];state=s;return this.stream(state.getConnectArgs(),state.getReceivedMessages());};client.prototype.subscribe=function(){var subscribeArgs;subscribeArgs=arguments[0];if((fm.global.equals(subscribeArgs.getChannels(),null))||(fm.global.equals(subscribeArgs.getChannels().length,0))){throw new Error("channels cannot be null.");}
if(fm.global.equals(subscribeArgs.getOnReceive(),null)){subscribeArgs.setOnReceive(this.receiveSink);}
if(fm.global.equals(subscribeArgs.getTag(),null)){subscribeArgs.setTag(fm.stringExtensions.empty);}
this.performSubscribe(subscribeArgs);return this;};client.prototype.tryWebSocket=function(){var error,exception1,webSocketMessageTransfer;try{webSocketMessageTransfer=fm.websync.messageTransferFactory.getWebSocketMessageTransfer(this.processRequestUrl(this.getStreamRequestUrl()));webSocketMessageTransfer.setHandshakeTimeout(this.getRequestTimeout());webSocketMessageTransfer.setStreamTimeout(this.getStreamRequestTimeout());webSocketMessageTransfer.setOnRequestCreated(this.internalOnHttpRequestCreated);webSocketMessageTransfer.setOnResponseReceived(this.internalOnHttpResponseReceived);webSocketMessageTransfer.setOnOpenSuccess(this.webSocketOpenSuccess);webSocketMessageTransfer.setOnOpenFailure(this.webSocketOpenFailure);webSocketMessageTransfer.setOnStreamFailure(this.webSocketStreamFailure);webSocketMessageTransfer.setSender(this);this._connectionType=fm.websync.connectionType.WebSocket;this._streamRequestTransfer=webSocketMessageTransfer;webSocketMessageTransfer.open(this.createHeaders());return true;}catch(error){exception1=error;return false;}finally{}};client.prototype.unbind=function(){var _var0,j,len,record,unbindArgs;unbindArgs=arguments[0];if((fm.global.equals(unbindArgs.getRecords(),null))||(fm.global.equals(unbindArgs.getRecords().length,0))){throw new Error("records cannot be null.");}
_var0=unbindArgs.getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];if(fm.global.equals(record.getKey(),null)){throw new Error("key cannot be null.");}}
this.performUnbind(unbindArgs);return this;};client.prototype.unsetCustomOnReceive=function(){var channel;channel=arguments[0];return this.unsetCustomOnReceiveWithTag(channel,fm.stringExtensions.empty);};client.prototype.unsetCustomOnReceiveWithTag=function(){var _var0,_var1,channel,dictionary,tag;channel=arguments[0];tag=arguments[1];if(fm.global.equals(channel,null)){throw new Error("channel cannot be null.");}
if(fm.global.equals(tag,null)){tag=fm.stringExtensions.empty;}
dictionary=null;_var0=new fm.holder(dictionary);_var1=fm.hashExtensions.tryGetValue(this._customOnReceives,tag,_var0);dictionary=_var0.getValue();if(_var1){if(fm.hashExtensions.remove(dictionary,channel)){if(fm.global.equals(fm.hashExtensions.getCount(dictionary),0)){fm.hashExtensions.remove(this._customOnReceives,tag);}
return true;}
return false;}
return false;};client.prototype.unsubscribe=function(){var unsubscribeArgs;unsubscribeArgs=arguments[0];if((fm.global.equals(unsubscribeArgs.getChannels(),null))||(fm.global.equals(unsubscribeArgs.getChannels().length,0))){throw new Error("channels cannot be null.");}
if(fm.global.equals(unsubscribeArgs.getTag(),null)){unsubscribeArgs.setTag(fm.stringExtensions.empty);}
this.performUnsubscribe(unsubscribeArgs);return this;};client.prototype.webSocketOpenFailure=function(){var e;e=arguments[0];if(this._webSocketOpened){if(!this.tryWebSocket()){return this.doLongPolling();}}else{return this.doLongPolling();}};client.prototype.webSocketOpenSuccess=function(){var e;e=arguments[0];this._webSocketOpened=true;return this.activateStream(this._connectArgs,this._responseArgs);};client.prototype.webSocketStreamFailure=function(){var e,responseArgs;e=arguments[0];responseArgs=new fm.websync.clientResponseArgs();responseArgs.setDynamicProperties(this._responseArgs.getDynamicProperties());responseArgs.setException(new Error(fm.stringExtensions.format("WebSocket stream error. {0}",e.getException().message)));return this.streamCallback(responseArgs);};client._bayeuxVersion="1.0";client._bayeuxMinimumVersion="1.0";client._argsKey="fm.args";client._stateKey="fm.state";client._requestUrlCache={};client._requestUrlCacheLock=new fm.object();return client;})(fm.websync.baseClient);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientSendState=(function(superClass){extend(clientSendState,superClass);clientSendState.prototype._isStream=false;clientSendState.prototype._requestMapping=null;clientSendState.prototype._requests=null;function clientSendState(){this.setRequests=bind(this.setRequests,this);this.setRequestMapping=bind(this.setRequestMapping,this);this.setIsStream=bind(this.setIsStream,this);this.getRequests=bind(this.getRequests,this);this.getRequestMapping=bind(this.getRequestMapping,this);this.getIsStream=bind(this.getIsStream,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientSendState.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientSendState.__super__.constructor.call(this);return instance;}
clientSendState.prototype.getIsStream=function(){return this._isStream;};clientSendState.prototype.getRequestMapping=function(){return this._requestMapping;};clientSendState.prototype.getRequests=function(){return this._requests;};clientSendState.prototype.setIsStream=function(){var value;value=arguments[0];return this._isStream=value;};clientSendState.prototype.setRequestMapping=function(){var value;value=arguments[0];return this._requestMapping=value;};clientSendState.prototype.setRequests=function(){var value;value=arguments[0];return this._requests=value;};return clientSendState;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.clientRequest=(function(superClass){extend(clientRequest,superClass);clientRequest.prototype._callback=null;clientRequest.prototype._message=null;function clientRequest(){this.setMessage=bind(this.setMessage,this);this.setCallback=bind(this.setCallback,this);this.getMessage=bind(this.getMessage,this);this.getCallback=bind(this.getCallback,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=clientRequest.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=clientRequest.__super__.constructor.call(this);return instance;}
clientRequest.prototype.getCallback=function(){return this._callback;};clientRequest.prototype.getMessage=function(){return this._message;};clientRequest.prototype.setCallback=function(){var value;value=arguments[0];return this._callback=value;};clientRequest.prototype.setMessage=function(){var value;value=arguments[0];return this._message=value;};return clientRequest;})(fm.dynamic);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.defaults=(function(superClass){extend(defaults,superClass);defaults.__domainKey=null;defaults.__domainName=null;function defaults(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=defaults.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=defaults.__super__.constructor.call(this);return instance;}
defaults.getDomainKey=function(){return fm.websync.defaults.__domainKey;};defaults.getDomainName=function(){return fm.websync.defaults.__domainName;};defaults.__domainKey=new fm.guid("11111111-1111-1111-1111-111111111111");defaults.__domainName="localhost";return defaults;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publishingClient=(function(superClass){extend(publishingClient,superClass);publishingClient.prototype._boundRecords=null;publishingClient.prototype._clientId=null;function publishingClient(){this.getBoundRecordValue=bind(this.getBoundRecordValue,this);this.toJson=bind(this.toJson,this);this.setClientId=bind(this.setClientId,this);this.setBoundRecords=bind(this.setBoundRecords,this);this.getClientId=bind(this.getClientId,this);this.getBoundRecordValueJson=bind(this.getBoundRecordValueJson,this);this.getBoundRecords=bind(this.getBoundRecords,this);var boundRecords,clientId,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publishingClient.__super__.constructor.call(this);this.setBoundRecords({});fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){clientId=arguments[0];boundRecords=arguments[1];instance=publishingClient.__super__.constructor.call(this);this.setClientId(clientId);this.setBoundRecords(boundRecords);return instance;}
if(arguments.length===0){instance=publishingClient.__super__.constructor.call(this);this.setBoundRecords({});return instance;}}
publishingClient.fromJson=function(){var publishingClientJson;publishingClientJson=arguments[0];return fm.websync.serializer.deserializePublishingClient(publishingClientJson);};publishingClient.toJson=function(){var publishingClient;publishingClient=arguments[0];return fm.websync.serializer.serializePublishingClient(publishingClient);};publishingClient.prototype.getBoundRecords=function(){return this._boundRecords;};publishingClient.prototype.getBoundRecordValueJson=function(){var _var0,_var1,key,record;key=arguments[0];if(fm.global.equals(this.getBoundRecords(),null)){return null;}
record=null;_var0=new fm.holder(record);_var1=fm.hashExtensions.tryGetValue(this.getBoundRecords(),key,_var0);record=_var0.getValue();if(!_var1){return null;}
return record.getValueJson();};publishingClient.prototype.getClientId=function(){return this._clientId;};publishingClient.prototype.setBoundRecords=function(){var value;value=arguments[0];return this._boundRecords=value;};publishingClient.prototype.setClientId=function(){var value;value=arguments[0];return this._clientId=value;};publishingClient.prototype.toJson=function(){return fm.websync.publishingClient.toJson(this);};publishingClient.prototype.getBoundRecordValue=function(){var key;key=arguments[0];return fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments));};return publishingClient;})(fm.serializable);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.extensions=(function(superClass){extend(extensions,superClass);extensions.prototype._extensionJsons=null;function extensions(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);this.toJson=bind(this.toJson,this);this.setValueJson=bind(this.setValueJson,this);this.setExtensionJsons=bind(this.setExtensionJsons,this);this.getValueJson=bind(this.getValueJson,this);this.getNames=bind(this.getNames,this);this.getExtensionJsons=bind(this.getExtensionJsons,this);this.getCount=bind(this.getCount,this);var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=extensions.__super__.constructor.call(this);this.setExtensionJsons({});fm.util.attachProperties(this,arguments[0]);return instance;}
instance=extensions.__super__.constructor.call(this);this.setExtensionJsons({});return instance;}
extensions.fromJson=function(){var extensionsJson;extensionsJson=arguments[0];return fm.websync.serializer.deserializeExtensions(extensionsJson);};extensions.toJson=function(){var extensions;extensions=arguments[0];return fm.websync.serializer.serializeExtensions(extensions);};extensions.prototype.getCount=function(){return fm.hashExtensions.getCount(this.getExtensionJsons());};extensions.prototype.getExtensionJsons=function(){return this._extensionJsons;};extensions.prototype.getNames=function(){var list;list=[];fm.arrayExtensions.addRange(list,fm.hashExtensions.getKeys(this.getExtensionJsons()));return list;};extensions.prototype.getValueJson=function(){var name;name=arguments[0];if(fm.hashExtensions.containsKey(this.getExtensionJsons(),name)){return this.getExtensionJsons()[name];}
return null;};extensions.prototype.setExtensionJsons=function(){var value;value=arguments[0];return this._extensionJsons=value;};extensions.prototype.setValueJson=function(){var name,validate,valueJson;if(arguments.length===3){name=arguments[0];valueJson=arguments[1];validate=arguments[2];if(fm.global.equals(valueJson,null)){if(fm.hashExtensions.containsKey(this.getExtensionJsons(),name)){fm.hashExtensions.remove(this.getExtensionJsons(),name);}}else{if(!(!validate||fm.serializer.isValidJson(valueJson))){throw new Error("The value is not valid JSON.");}
this.getExtensionJsons()[name]=valueJson;}
this.setIsDirty(true);return;}
if(arguments.length===2){name=arguments[0];valueJson=arguments[1];this.setValueJson(name,valueJson,true);}};extensions.prototype.toJson=function(){return fm.websync.extensions.toJson(this);};extensions.prototype.getValue=function(){var name;name=arguments[0];return fm.json.deserialize(this.getValueJson.apply(this,arguments));};extensions.prototype.setValue=function(){var name,value,valueJson;if(arguments.length===3){name=arguments[0];valueJson=arguments[1];value=arguments[2];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);this.setValueJson.apply(this,arguments);return;}
if(arguments.length===2){name=arguments[0];value=arguments[1];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);this.setValueJson.apply(this,arguments);}};return extensions;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.message=(function(superClass){extend(message,superClass);message.prototype.__advice=null;message.prototype.__bayeuxChannel=null;message.prototype.__channels=null;message.prototype.__clientId=null;message.prototype.__connectionType=null;message.prototype.__id=null;message.prototype.__minimumVersion=null;message.prototype.__records=null;message.prototype.__supportedConnectionTypes=null;message.prototype.__version=null;message.prototype._toJsonNoDataLock=null;function message(){this.toJsonNoData=bind(this.toJsonNoData,this);this.toJson=bind(this.toJson,this);this.toBinary=bind(this.toBinary,this);this.setVersion=bind(this.setVersion,this);this.setTag=bind(this.setTag,this);this.setSupportedConnectionTypes=bind(this.setSupportedConnectionTypes,this);this.setSessionId=bind(this.setSessionId,this);this.setServerTimeout=bind(this.setServerTimeout,this);this.setServerActions=bind(this.setServerActions,this);this.setRecords=bind(this.setRecords,this);this.setRecord=bind(this.setRecord,this);this.setPublishingClient=bind(this.setPublishingClient,this);this.setNotifyingClient=bind(this.setNotifyingClient,this);this.setNotifyClientId=bind(this.setNotifyClientId,this);this.setMinimumVersion=bind(this.setMinimumVersion,this);this.setLastSessionId=bind(this.setLastSessionId,this);this.setLastClientId=bind(this.setLastClientId,this);this.setKeys=bind(this.setKeys,this);this.setKey=bind(this.setKey,this);this.setId=bind(this.setId,this);this.setDisableBinary=bind(this.setDisableBinary,this);this.setConnectionType=bind(this.setConnectionType,this);this.setClientId=bind(this.setClientId,this);this.setChannels=bind(this.setChannels,this);this.setChannel=bind(this.setChannel,this);this.setBayeuxChannel=bind(this.setBayeuxChannel,this);this.setAdvice=bind(this.setAdvice,this);this.setAcknowledgement=bind(this.setAcknowledgement,this);this.isUnsubscribingFrom=bind(this.isUnsubscribingFrom,this);this.isUnsubscribe=bind(this.isUnsubscribe,this);this.isUnbindingFrom=bind(this.isUnbindingFrom,this);this.isUnbind=bind(this.isUnbind,this);this.isSubscribingTo=bind(this.isSubscribingTo,this);this.isSubscribe=bind(this.isSubscribe,this);this.isStream=bind(this.isStream,this);this.isService=bind(this.isService,this);this.isPublish=bind(this.isPublish,this);this.isNotify=bind(this.isNotify,this);this.isDisconnect=bind(this.isDisconnect,this);this.isConnect=bind(this.isConnect,this);this.isBindingTo=bind(this.isBindingTo,this);this.isBind=bind(this.isBind,this);this.getVersion=bind(this.getVersion,this);this.getType=bind(this.getType,this);this.getTag=bind(this.getTag,this);this.getSupportedConnectionTypes=bind(this.getSupportedConnectionTypes,this);this.getSessionId=bind(this.getSessionId,this);this.getServerTimeout=bind(this.getServerTimeout,this);this.getServerActions=bind(this.getServerActions,this);this.getRecords=bind(this.getRecords,this);this.getRecord=bind(this.getRecord,this);this.getPublishingClient=bind(this.getPublishingClient,this);this.getNotifyingClient=bind(this.getNotifyingClient,this);this.getNotifyClientId=bind(this.getNotifyClientId,this);this.getMinimumVersion=bind(this.getMinimumVersion,this);this.getLastSessionId=bind(this.getLastSessionId,this);this.getLastClientId=bind(this.getLastClientId,this);this.getKeys=bind(this.getKeys,this);this.getKey=bind(this.getKey,this);this.getId=bind(this.getId,this);this.getDisableBinary=bind(this.getDisableBinary,this);this.getConnectionType=bind(this.getConnectionType,this);this.getClientId=bind(this.getClientId,this);this.getChannels=bind(this.getChannels,this);this.getChannel=bind(this.getChannel,this);this.getBayeuxChannel=bind(this.getBayeuxChannel,this);this.getAdvice=bind(this.getAdvice,this);this.getAcknowledgement=bind(this.getAcknowledgement,this);var bayeuxChannel,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=message.__super__.constructor.call(this);this._toJsonNoDataLock=new fm.object();fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=message.__super__.constructor.call(this);this._toJsonNoDataLock=new fm.object();return instance;}
if(arguments.length===1){bayeuxChannel=arguments[0];instance=message.__super__.constructor.call(this);this._toJsonNoDataLock=new fm.object();this.setValidate(false);this.setBayeuxChannel(bayeuxChannel);this.setValidate(true);return instance;}}
message.bytesToInt=function(){var bytes,index;bytes=arguments[0];index=arguments[1];if(bytes.length<(index+4)){return-1;}
return fm.bitAssistant.toIntegerNetwork(bytes,index);};message.fromBinary=function(){var buffer,buffer2,bytes,count,message,num2,offset;if(arguments.length===1){bytes=arguments[0];return fm.websync.message.fromBinary(bytes,0);}
if(arguments.length===2){bytes=arguments[0];offset=arguments[1];count=fm.websync.message.bytesToInt(bytes,offset);if(count<0){return null;}
offset=offset+4;num2=fm.websync.message.bytesToInt(bytes,offset);if(num2<0){return null;}
offset=offset+4;buffer=fm.bitAssistant.subArray(bytes,offset,count);offset=offset+count;buffer2=fm.bitAssistant.subArray(bytes,offset,num2);offset=offset+num2;message=fm.websync.message.fromJson(fm.encoding.getUtf8().getString(buffer,0,buffer.length));message.setDataBytes(buffer2);return message;}};message.fromBinaryMultiple=function(){var bytes,i,index,message,messageArray,num2,num4;bytes=arguments[0];index=0;num2=fm.websync.message.bytesToInt(bytes,index);if(num2<0){return new Array(0);}
index=index+4;messageArray=new Array(num2);i=0;while(i<num2){try{num4=fm.websync.message.bytesToInt(bytes,index);if(num4<0){return new Array(0);}
index=index+4;message=fm.websync.message.fromBinary(bytes,index);if(fm.global.equals(message,null)){return new Array(0);}
index=index+num4;messageArray[i]=message;}finally{i++;}}
return messageArray;};message.fromJson=function(){var messageJson;messageJson=arguments[0];return fm.websync.serializer.deserializeMessage(messageJson);};message.fromJsonMultiple=function(){var messagesJson;messagesJson=arguments[0];return fm.websync.serializer.deserializeMessageArray(messagesJson);};message.intToBytes=function(){var i;i=arguments[0];return fm.bitAssistant.getIntegerBytesNetwork(i);};message.toBinary=function(){var _var0,_var1,_var2,bytes,dataBytes,dataJson,destination,destinationIndex,message,s;message=arguments[0];dataBytes=null;dataJson=null;_var0=new fm.holder(dataBytes);_var1=new fm.holder(dataJson);_var2=message.toJsonNoData(_var0,_var1);dataBytes=_var0.getValue();dataJson=_var1.getValue();s=_var2;if(fm.global.equals(dataBytes,null)){if(fm.global.equals(dataJson,null)){throw new Error("Message data bytes cannot be null.");}
throw new Error(fm.stringExtensions.format("Message data bytes cannot be null (JSON: {0}).",dataJson));}
if(fm.global.equals(s,null)){throw new Error("Message JSON cannot be null.");}
bytes=fm.encoding.getUtf8().getBytes(s);destination=new Uint8Array((8+bytes.length)+dataBytes.length);destinationIndex=0;fm.bitAssistant.copy(fm.websync.message.intToBytes(bytes.length),0,destination,destinationIndex,4);destinationIndex=destinationIndex+4;fm.bitAssistant.copy(fm.websync.message.intToBytes(dataBytes.length),0,destination,destinationIndex,4);destinationIndex=destinationIndex+4;fm.bitAssistant.copy(bytes,0,destination,destinationIndex,bytes.length);destinationIndex=destinationIndex+bytes.length;fm.bitAssistant.copy(dataBytes,0,destination,destinationIndex,dataBytes.length);destinationIndex=destinationIndex+dataBytes.length;return destination;};message.toBinaryMultiple=function(){var _var0,_var1,buffer,destination,destinationIndex,item,j,k,len,len1,list,message,messages,num;messages=arguments[0];num=4;list=[];_var0=messages;for(j=0,len=_var0.length;j<len;j++){message=_var0[j];item=fm.websync.message.toBinary(message);fm.arrayExtensions.add(list,item);num=num+(4+item.length);}
destination=new Uint8Array(num);destinationIndex=0;fm.bitAssistant.copy(fm.websync.message.intToBytes(fm.arrayExtensions.getCount(list)),0,destination,destinationIndex,4);destinationIndex=destinationIndex+4;_var1=list;for(k=0,len1=_var1.length;k<len1;k++){buffer=_var1[k];fm.bitAssistant.copy(fm.websync.message.intToBytes(buffer.length),0,destination,destinationIndex,4);destinationIndex=destinationIndex+4;fm.bitAssistant.copy(buffer,0,destination,destinationIndex,buffer.length);destinationIndex=destinationIndex+buffer.length;}
return destination;};message.toJson=function(){var message;message=arguments[0];return fm.websync.serializer.serializeMessage(message);};message.toJsonMultiple=function(){var messages;messages=arguments[0];return fm.websync.serializer.serializeMessageArray(messages);};message.prototype.getAcknowledgement=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.ack"));};message.prototype.getAdvice=function(){return this.__advice;};message.prototype.getBayeuxChannel=function(){return this.__bayeuxChannel;};message.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels);};message.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels);};message.prototype.getClientId=function(){return this.__clientId;};message.prototype.getConnectionType=function(){return this.__connectionType;};message.prototype.getDisableBinary=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.dbin"));};message.prototype.getId=function(){return this.__id;};message.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records);};message.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records);};message.prototype.getLastClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lcid"));};message.prototype.getLastSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lsid"));};message.prototype.getMinimumVersion=function(){return this.__minimumVersion;};message.prototype.getNotifyClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"));};message.prototype.getNotifyingClient=function(){return fm.websync.serializer.deserializeNotifyingClient(this.getExtensionValueJson("fm.notifying"));};message.prototype.getPublishingClient=function(){return fm.websync.serializer.deserializePublishingClient(this.getExtensionValueJson("fm.publishing"));};message.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records);};message.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records);};message.prototype.getServerActions=function(){var extensionValueJson,messageArray;extensionValueJson=this.getExtensionValueJson("fm.server");if(!fm.stringExtensions.isNullOrEmpty(extensionValueJson)){messageArray=fm.websync.message.fromJsonMultiple(extensionValueJson);if(!fm.global.equals(messageArray,null)){return messageArray;}}
return null;};message.prototype.getServerTimeout=function(){return fm.serializer.deserializeInteger(this.getExtensionValueJson("fm.timeout"));};message.prototype.getSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.sessionId"));};message.prototype.getSupportedConnectionTypes=function(){return this.__supportedConnectionTypes;};message.prototype.getTag=function(){var ref;return(ref=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))!=null?ref:fm.stringExtensions.empty;};message.prototype.getType=function(){return fm.websync.metaChannels.getMessageType(this.getBayeuxChannel());};message.prototype.getVersion=function(){return this.__version;};message.prototype.isBind=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Bind);};message.prototype.isBindingTo=function(){var _var0,j,key,len,record;key=arguments[0];if(fm.global.equals(this.getType(),fm.websync.messageType.Bind)){if(fm.global.equals(this.getRecords(),null)){return false;}
_var0=this.getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];if(fm.global.equals(record.getKey(),key)){return true;}}}
return false;};message.prototype.isConnect=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Connect);};message.prototype.isDisconnect=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Disconnect);};message.prototype.isNotify=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Notify);};message.prototype.isPublish=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Publish);};message.prototype.isService=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Service);};message.prototype.isStream=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Stream);};message.prototype.isSubscribe=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Subscribe);};message.prototype.isSubscribingTo=function(){var _var0,channel,j,len,str;channel=arguments[0];if(fm.global.equals(this.getType(),fm.websync.messageType.Subscribe)){if(fm.global.equals(this.getChannels(),null)){return false;}
_var0=this.getChannels();for(j=0,len=_var0.length;j<len;j++){str=_var0[j];if(fm.global.equals(str,channel)){return true;}}}
return false;};message.prototype.isUnbind=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Unbind);};message.prototype.isUnbindingFrom=function(){var _var0,j,key,len,record;key=arguments[0];if(fm.global.equals(this.getType(),fm.websync.messageType.Unbind)){if(fm.global.equals(this.getRecords(),null)){return false;}
_var0=this.getRecords();for(j=0,len=_var0.length;j<len;j++){record=_var0[j];if(fm.global.equals(record.getKey(),key)){return true;}}}
return false;};message.prototype.isUnsubscribe=function(){return fm.global.equals(this.getType(),fm.websync.messageType.Unsubscribe);};message.prototype.isUnsubscribingFrom=function(){var _var0,channel,j,len,str;channel=arguments[0];if(fm.global.equals(this.getType(),fm.websync.messageType.Unsubscribe)){if(fm.global.equals(this.getChannels(),null)){return false;}
_var0=this.getChannels();for(j=0,len=_var0.length;j<len;j++){str=_var0[j];if(fm.global.equals(str,channel)){return true;}}}
return false;};message.prototype.setAcknowledgement=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.ack",fm.serializer.serializeBoolean(value),false);return this.setIsDirty(true);};message.prototype.setAdvice=function(){var value;value=arguments[0];this.__advice=value;return this.setIsDirty(true);};message.prototype.setBayeuxChannel=function(){var value;value=arguments[0];this.__bayeuxChannel=value;if(fm.websync.metaChannels.isServiceChannel(value)){this.setChannel(fm.websync.metaChannels.convertChannelFromServiced(value));}else{if(!fm.websync.metaChannels.isMetaChannel(value)){this.setChannel(value);}}
return this.setIsDirty(true);};message.prototype.setChannel=function(){var value;value=arguments[0];this.__channels=fm.websync.extensible.sharedSetChannel(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setChannels=function(){var value;value=arguments[0];this.__channels=fm.websync.extensible.sharedSetChannels(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setClientId=function(){var value;value=arguments[0];this.__clientId=value;return this.setIsDirty(true);};message.prototype.setConnectionType=function(){var value;value=arguments[0];this.__connectionType=value;return this.setIsDirty(true);};message.prototype.setDisableBinary=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.dbin",fm.serializer.serializeBoolean(value),false);return this.setIsDirty(true);};message.prototype.setId=function(){var value;value=arguments[0];this.__id=value;return this.setIsDirty(true);};message.prototype.setKey=function(){var value;value=arguments[0];this.__records=fm.websync.extensible.sharedSetKey(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setKeys=function(){var value;value=arguments[0];this.__records=fm.websync.extensible.sharedSetKeys(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setLastClientId=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.lcid",fm.serializer.serializeGuid(value),false);return this.setIsDirty(true);};message.prototype.setLastSessionId=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.lsid",fm.serializer.serializeGuid(value),false);return this.setIsDirty(true);};message.prototype.setMinimumVersion=function(){var value;value=arguments[0];this.__minimumVersion=value;return this.setIsDirty(true);};message.prototype.setNotifyClientId=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(value),false);return this.setIsDirty(true);};message.prototype.setNotifyingClient=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.notifying",fm.websync.serializer.serializeNotifyingClient(value),false);return this.setIsDirty(true);};message.prototype.setPublishingClient=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.publishing",fm.websync.serializer.serializePublishingClient(value),false);return this.setIsDirty(true);};message.prototype.setRecord=function(){var value;value=arguments[0];this.__records=fm.websync.extensible.sharedSetRecord(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setRecords=function(){var value;value=arguments[0];this.__records=fm.websync.extensible.sharedSetRecords(value,this.getValidate());return this.setIsDirty(true);};message.prototype.setServerActions=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.server",fm.websync.message.toJsonMultiple(value),false);return this.setIsDirty(true);};message.prototype.setServerTimeout=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.timeout",fm.serializer.serializeInteger(value),false);return this.setIsDirty(true);};message.prototype.setSessionId=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.sessionId",fm.serializer.serializeGuid(value),false);return this.setIsDirty(true);};message.prototype.setSupportedConnectionTypes=function(){var value;value=arguments[0];this.__supportedConnectionTypes=value;return this.setIsDirty(true);};message.prototype.setTag=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value!=null?value:fm.stringExtensions.empty),false);return this.setIsDirty(true);};message.prototype.setVersion=function(){var value;value=arguments[0];this.__version=value;return this.setIsDirty(true);};message.prototype.toBinary=function(){return fm.websync.message.toBinary(this);};message.prototype.toJson=function(){return fm.websync.message.toJson(this);};message.prototype.toJsonNoData=function(){var dataBytes,dataJson,str;dataBytes=arguments[0];dataJson=arguments[1];if(this.getIsBinary()){dataBytes.setValue(this.getDataBytes());dataJson.setValue(null);this.setDataBytes(null);str=this.toJson();this.setDataBytes(dataBytes.getValue());return str;}
dataBytes.setValue(null);dataJson.setValue(this.getDataJson());this.setDataJson(null);str=this.toJson();this.setDataJson(dataJson.getValue());return str;};return message;})(fm.websync.baseMessage);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publication=(function(superClass){extend(publication,superClass);publication.prototype.__channel=null;function publication(){this.toJson=bind(this.toJson,this);this.setTag=bind(this.setTag,this);this.setChannel=bind(this.setChannel,this);this.getTag=bind(this.getTag,this);this.getChannel=bind(this.getChannel,this);var channel,dataJson,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publication.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){channel=arguments[0];dataJson=arguments[1];publication.call(this,channel,dataJson,null);return instance;}
if(arguments.length===3){channel=arguments[0];dataJson=arguments[1];tag=arguments[2];instance=publication.__super__.constructor.call(this);this.setChannel(channel);this.setDataJson(dataJson);this.setTag(tag);return instance;}
if(arguments.length===0){instance=publication.__super__.constructor.call(this);return instance;}
if(arguments.length===1){channel=arguments[0];instance=publication.__super__.constructor.call(this);this.setChannel(channel);return instance;}}
publication.fromJson=function(){var publicationJson;publicationJson=arguments[0];return fm.websync.serializer.deserializePublication(publicationJson);};publication.fromJsonMultiple=function(){var publicationsJson;publicationsJson=arguments[0];return fm.websync.serializer.deserializePublicationArray(publicationsJson);};publication.fromMessage=function(){var message,publication;message=arguments[0];if(fm.global.equals(message,null)){return null;}
publication=new fm.websync.publication();publication.setChannel(message.getBayeuxChannel());publication.setSuccessful(message.getSuccessful());publication.setError(message.getError());publication.setTimestamp(message.getTimestamp());publication.setDataJson(message.getDataJson());publication.setExtensions(message.getExtensions());return publication;};publication.fromMessages=function(){var i,messages,publicationArray;messages=arguments[0];if(fm.global.equals(messages,null)){return null;}
publicationArray=new Array(messages.length);i=0;while(i<messages.length){try{publicationArray[i]=fm.websync.publication.fromMessage(messages[i]);}finally{i++;}}
return publicationArray;};publication.toJson=function(){var publication;publication=arguments[0];return fm.websync.serializer.serializePublication(publication);};publication.toJsonMultiple=function(){var publications;publications=arguments[0];return fm.websync.serializer.serializePublicationArray(publications);};publication.toMessage=function(){var message,publication;publication=arguments[0];if(fm.global.equals(publication,null)){return null;}
message=new fm.websync.message();message.setBayeuxChannel(publication.getChannel());message.setSuccessful(publication.getSuccessful());message.setError(publication.getError());message.setTimestamp(publication.getTimestamp());message.setDataJson(publication.getDataJson());message.setExtensions(publication.getExtensions());return message;};publication.toMessages=function(){var i,messageArray,publications;publications=arguments[0];if(fm.global.equals(publications,null)){return null;}
messageArray=new Array(publications.length);i=0;while(i<publications.length){try{messageArray[i]=fm.websync.publication.toMessage(publications[i]);}finally{i++;}}
return messageArray;};publication.prototype.getChannel=function(){return this.__channel;};publication.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"));};publication.prototype.setChannel=function(){var _var0,_var1,error,value;value=arguments[0];if(fm.global.equals(value,null)){this.__channel=value;return this.setIsDirty(true);}else{error=null;_var0=new fm.holder(error);_var1=fm.websync.extensible.validateChannel(value,_var0);error=_var0.getValue();if(!(!this.getValidate()||_var1)){throw new Error(fm.stringExtensions.format("Invalid channel. {0}",error));}
this.__channel=value;return this.setIsDirty(true);}};publication.prototype.setTag=function(){var value;value=arguments[0];this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(value),false);return this.setIsDirty(true);};publication.prototype.toJson=function(){return fm.websync.publication.toJson(this);};return publication;})(fm.websync.baseMessage);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.publisher=(function(superClass){extend(publisher,superClass);publisher._onNotifyRequest=null;publisher._onNotifyResponse=null;publisher._onPublishRequest=null;publisher._onPublishResponse=null;publisher._onServiceRequest=null;publisher._onServiceResponse=null;publisher._requestUrlCache=null;publisher._requestUrlCacheLock=null;function publisher(){this.serviceMany=bind(this.serviceMany,this);this.service=bind(this.service,this);this.send=bind(this.send,this);this.raiseResponseEvent=bind(this.raiseResponseEvent,this);this.raiseRequestEvent=bind(this.raiseRequestEvent,this);this.raiseEvent=bind(this.raiseEvent,this);this.publishMany=bind(this.publishMany,this);this.publish=bind(this.publish,this);this.processRequestUrl=bind(this.processRequestUrl,this);this.performService=bind(this.performService,this);this.performPublish=bind(this.performPublish,this);this.performNotify=bind(this.performNotify,this);this.notifyMany=bind(this.notifyMany,this);this.notify=bind(this.notify,this);var instance,requestUrl;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=publisher.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
requestUrl=arguments[0];instance=publisher.__super__.constructor.call(this);this.setRequestUrl(requestUrl);return instance;}
publisher.addOnNotifyRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onNotifyRequest=fm.delegate.combine(fm.websync.publisher._onNotifyRequest,value);};publisher.addOnNotifyResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onNotifyResponse=fm.delegate.combine(fm.websync.publisher._onNotifyResponse,value);};publisher.addOnPublishRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onPublishRequest=fm.delegate.combine(fm.websync.publisher._onPublishRequest,value);};publisher.addOnPublishResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onPublishResponse=fm.delegate.combine(fm.websync.publisher._onPublishResponse,value);};publisher.addOnServiceRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onServiceRequest=fm.delegate.combine(fm.websync.publisher._onServiceRequest,value);};publisher.addOnServiceResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onServiceResponse=fm.delegate.combine(fm.websync.publisher._onServiceResponse,value);};publisher.removeOnNotifyRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onNotifyRequest=fm.delegate.remove(fm.websync.publisher._onNotifyRequest,value);};publisher.removeOnNotifyResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onNotifyResponse=fm.delegate.remove(fm.websync.publisher._onNotifyResponse,value);};publisher.removeOnPublishRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onPublishRequest=fm.delegate.remove(fm.websync.publisher._onPublishRequest,value);};publisher.removeOnPublishResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onPublishResponse=fm.delegate.remove(fm.websync.publisher._onPublishResponse,value);};publisher.removeOnServiceRequest=function(){var value;value=arguments[0];return fm.websync.publisher._onServiceRequest=fm.delegate.remove(fm.websync.publisher._onServiceRequest,value);};publisher.removeOnServiceResponse=function(){var value;value=arguments[0];return fm.websync.publisher._onServiceResponse=fm.delegate.remove(fm.websync.publisher._onServiceResponse,value);};publisher.prototype.notify=function(){var clientId,dataJson,notification,notificationArray,tag;if(arguments.length===3){clientId=arguments[0];dataJson=arguments[1];tag=arguments[2];return this.notify(new fm.websync.notification(clientId,dataJson,tag));}
if(arguments.length===2){clientId=arguments[0];dataJson=arguments[1];return this.notify(new fm.websync.notification(clientId,dataJson));}
if(arguments.length===1){notification=arguments[0];notificationArray=this.notifyMany([notification]);if((fm.global.equals(notificationArray,null))||(fm.global.equals(notificationArray.length,0))){return null;}
return notificationArray[0];}};publisher.prototype.notifyMany=function(){var notifications;notifications=arguments[0];if((fm.global.equals(notifications,null))||(fm.global.equals(notifications.length,0))){throw new Error("notifications cannot be null/empty.");}
return this.performNotify(notifications);};publisher.prototype.performNotify=function(){var args,args3,notificationArray,requestMessages,requestNotifications,responseArgs;requestNotifications=arguments[0];args3=new fm.websync.publisherNotifyRequestArgs();args3.setRequests(requestNotifications);if(this.raiseRequestEvent(fm.websync.publisher._onNotifyRequest,args3)){requestMessages=fm.websync.notification.toMessages(requestNotifications);responseArgs=this.send(requestMessages,this.getRequestUrl());notificationArray=fm.websync.notification.fromMessages(responseArgs.getResponses());args=new fm.websync.publisherNotifyResponseArgs();args.setRequests(requestNotifications);args.setResponses(notificationArray);this.raiseResponseEvent(fm.websync.publisher._onNotifyResponse,args,responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){throw responseArgs.getException();}
return notificationArray;}
return null;};publisher.prototype.performPublish=function(){var args,args3,publicationArray,requestMessages,requestPublications,responseArgs;requestPublications=arguments[0];args3=new fm.websync.publisherPublishRequestArgs();args3.setRequests(requestPublications);if(this.raiseRequestEvent(fm.websync.publisher._onPublishRequest,args3)){requestMessages=fm.websync.publication.toMessages(requestPublications);responseArgs=this.send(requestMessages,this.getRequestUrl());publicationArray=fm.websync.publication.fromMessages(responseArgs.getResponses());args=new fm.websync.publisherPublishResponseArgs();args.setRequests(requestPublications);args.setResponses(publicationArray);this.raiseResponseEvent(fm.websync.publisher._onPublishResponse,args,responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){throw responseArgs.getException();}
return publicationArray;}
return null;};publisher.prototype.performService=function(){var _var0,args,args3,i,len,message,requestMessages,responseArgs,responses;requestMessages=arguments[0];_var0=requestMessages;for(i=0,len=_var0.length;i<len;i++){message=_var0[i];if(!fm.websync.metaChannels.isServiceChannel(message.getBayeuxChannel())){message.setBayeuxChannel(fm.websync.metaChannels.convertChannelToServiced(message.getBayeuxChannel()));}}
args3=new fm.websync.publisherServiceRequestArgs();args3.setRequests(requestMessages);if(this.raiseRequestEvent(fm.websync.publisher._onServiceRequest,args3)){responseArgs=this.send(requestMessages,this.getRequestUrl());responses=responseArgs.getResponses();args=new fm.websync.publisherServiceResponseArgs();args.setRequests(requestMessages);args.setResponses(responses);this.raiseResponseEvent(fm.websync.publisher._onServiceResponse,args,responseArgs);if(!fm.global.equals(responseArgs.getException(),null)){throw responseArgs.getException();}
return responses;}
return null;};publisher.prototype.processRequestUrl=function(){var _var0,_var1,flag,requestUrl,str;requestUrl=arguments[0];if(fm.stringExtensions.isNullOrEmpty(requestUrl)){requestUrl=this.getRequestUrl();}
flag=false;str=null;if(fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)){_var0=new fm.holder(str);_var1=fm.hashExtensions.tryGetValue(fm.websync.publisher._requestUrlCache,requestUrl,_var0);str=_var0.getValue();flag=_var1;}
if(!flag){str=requestUrl;str=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(str,"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1");if(!fm.global.equals(this.getConcurrencyMode(),fm.websync.concurrencyMode.High)){return str;}
fm.websync.publisher._requestUrlCache[requestUrl]=str;}
return str;};publisher.prototype.publish=function(){var channel,dataJson,publication,publicationArray,tag;if(arguments.length===3){channel=arguments[0];dataJson=arguments[1];tag=arguments[2];return this.publish(new fm.websync.publication(channel,dataJson,tag));}
if(arguments.length===1){publication=arguments[0];publicationArray=this.publishMany([publication]);if((fm.global.equals(publicationArray,null))||(fm.global.equals(publicationArray.length,0))){return null;}
return publicationArray[0];}
if(arguments.length===2){channel=arguments[0];dataJson=arguments[1];return this.publish(new fm.websync.publication(channel,dataJson));}};publisher.prototype.publishMany=function(){var publications;publications=arguments[0];if((fm.global.equals(publications,null))||(fm.global.equals(publications.length,0))){throw new Error("publications cannot be null/empty.");}
return this.performPublish(publications);};publisher.prototype.raiseEvent=function(){var args,eventMethod;eventMethod=arguments[0];args=arguments[1];args.setPublisher(this);if(!fm.global.equals(eventMethod,null)){return eventMethod(this,args);}};publisher.prototype.raiseRequestEvent=function(){var args,eventMethod;eventMethod=arguments[0];args=arguments[1];this.raiseEvent(eventMethod,args);return!args.getCancel();};publisher.prototype.raiseResponseEvent=function(){var args,eventMethod,responseArgs;eventMethod=arguments[0];args=arguments[1];responseArgs=arguments[2];args.setException(responseArgs.getException());return this.raiseEvent(eventMethod,args);};publisher.prototype.send=function(){var _var0,args2,args3,args4,args5,args6,error,exception1,httpMessageTransfer,i,len,message,requestArgs,requestMessages,str,url;requestMessages=arguments[0];url=arguments[1];str=this.processRequestUrl(url);url=this.processRequestUrl(url);_var0=requestMessages;for(i=0,len=_var0.length;i<len;i++){message=_var0[i];if(this.getDisableBinary()){message.setDisableBinary(this.getDisableBinary());}}
args6=new fm.websync.messageRequestArgs(this.createHeaders());args6.setMessages(requestMessages);args6.setOnRequestCreated(this.internalOnRequestCreated);args6.setOnResponseReceived(this.internalOnResponseReceived);args6.setOnHttpRequestCreated(this.internalOnHttpRequestCreated);args6.setOnHttpResponseReceived(this.internalOnHttpResponseReceived);args6.setSender(this);args6.setTimeout(this.getRequestTimeout());args6.setUrl(url);requestArgs=args6;requestArgs.setDynamicValue("frameUrl",str);httpMessageTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer();args2=httpMessageTransfer.send(requestArgs);try{httpMessageTransfer.shutdown();}catch(error){exception1=error;}finally{}
if(!fm.global.equals(args2.getException(),null)){args3=new fm.websync.publisherResponseArgs();args3.setException(args2.getException());return args3;}
if((fm.global.equals(args2.getMessages(),null))||(fm.global.equals(args2.getMessages().length,0))){args4=new fm.websync.publisherResponseArgs();args4.setException(new Error("Invalid response received from server."));return args4;}
args5=new fm.websync.publisherResponseArgs();args5.setResponses(args2.getMessages());return args5;};publisher.prototype.service=function(){var channel,dataJson,message,messageArray,tag;if(arguments.length===2){channel=arguments[0];dataJson=arguments[1];message=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(channel));message.setDataJson(dataJson);return this.service(message);}
if(arguments.length===3){channel=arguments[0];dataJson=arguments[1];tag=arguments[2];message=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(channel));message.setDataJson(dataJson);message.setTag(tag);return this.service(message);}
if(arguments.length===1){message=arguments[0];messageArray=this.serviceMany([message]);if((fm.global.equals(messageArray,null))||(fm.global.equals(messageArray.length,0))){return null;}
return messageArray[0];}};publisher.prototype.serviceMany=function(){var messages;messages=arguments[0];if((fm.global.equals(messages,null))||(fm.global.equals(messages.length,0))){throw new Error("messages cannot be null/empty.");}
return this.performService(messages);};publisher._requestUrlCache={};publisher._requestUrlCacheLock=new fm.object();return publisher;})(fm.websync.baseClient);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.record=(function(superClass){extend(record,superClass);record.prototype.__key=null;record.prototype.__priv=false;record.prototype.__valueJson=null;record.prototype._validate=false;function record(){this.setValue=bind(this.setValue,this);this.getValue=bind(this.getValue,this);this.toString=bind(this.toString,this);this.toJson=bind(this.toJson,this);this.setValueJson=bind(this.setValueJson,this);this.setValidate=bind(this.setValidate,this);this.setPrivate=bind(this.setPrivate,this);this.setKey=bind(this.setKey,this);this.getValueJson=bind(this.getValueJson,this);this.getValidate=bind(this.getValidate,this);this.getPrivate=bind(this.getPrivate,this);this.getKey=bind(this.getKey,this);this.getHashCode=bind(this.getHashCode,this);this.equals=bind(this.equals,this);this.duplicate=bind(this.duplicate,this);var instance,key,priv,valueJson;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=record.__super__.constructor.call(this);this.setValidate(true);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===1){key=arguments[0];record.call(this,key,null);return instance;}
if(arguments.length===0){instance=record.__super__.constructor.call(this);this.setValidate(true);return instance;}
if(arguments.length===3){key=arguments[0];valueJson=arguments[1];priv=arguments[2];record.call(this);this.setKey(key);this.setValueJson(valueJson);this.setPrivate(priv);return instance;}
if(arguments.length===2){key=arguments[0];valueJson=arguments[1];record.call(this,key,valueJson,false);return instance;}}
record.fromJson=function(){var recordJson;recordJson=arguments[0];return fm.websync.serializer.deserializeRecord(recordJson);};record.fromJsonMultiple=function(){var recordsJson;recordsJson=arguments[0];return fm.websync.serializer.deserializeRecordArray(recordsJson);};record.toJson=function(){var record;record=arguments[0];return fm.websync.serializer.serializeRecord(record);};record.toJsonMultiple=function(){var records;records=arguments[0];return fm.websync.serializer.serializeRecordArray(records);};record.prototype.duplicate=function(){return new fm.websync.record(this.getKey(),this.getValueJson(),this.getPrivate());};record.prototype.equals=function(){var obj,record;obj=arguments[0];record=fm.global.tryCast(obj,fm.websync.record);return fm.global.equals(record,this);};record.prototype.getHashCode=function(){var num;num=17;if(!fm.global.equals(this.getKey(),null)){num=(num*23)+this.getKey().hashCode();}
if(!fm.global.equals(this.getValueJson(),null)){num=(num*23)+this.getValueJson().hashCode();}
return(num*23)+this.getPrivate().hashCode();};record.prototype.getKey=function(){return this.__key;};record.prototype.getPrivate=function(){return this.__priv;};record.prototype.getValidate=function(){return this._validate;};record.prototype.getValueJson=function(){return this.__valueJson;};record.prototype.setKey=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){throw new Error("key cannot be null.");}
this.__key=value;return this.setIsDirty(true);};record.prototype.setPrivate=function(){var value;value=arguments[0];this.__priv=value;return this.setIsDirty(true);};record.prototype.setValidate=function(){var value;value=arguments[0];return this._validate=value;};record.prototype.setValueJson=function(){var value;value=arguments[0];if(!((!this.getValidate()||(fm.global.equals(value,null)))||fm.serializer.isValidJson(value))){throw new Error("value is not valid JSON.");}
this.__valueJson=value;return this.setIsDirty(true);};record.prototype.toJson=function(){return fm.websync.record.toJson(this);};record.prototype.toString=function(){return this.toJson();};record.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments));};record.prototype.setValue=function(){var value;value=arguments[0];arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]);return this.setValueJson.apply(this,arguments);};return record;})(fm.dynamic);var extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.serializer=(function(superClass){extend(serializer,superClass);function serializer(){var instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=serializer.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
instance=serializer.__super__.constructor.call(this);return instance;}
serializer.createAdvice=function(){return new fm.websync.advice();};serializer.createBaseAdvice=function(){return new fm.websync.baseAdvice();};serializer.createBoundRecords=function(){return{};};serializer.createExtensions=function(){return new fm.websync.extensions();};serializer.createMessage=function(){return new fm.websync.message();};serializer.createNotification=function(){return new fm.websync.notification();};serializer.createNotifyingClient=function(){return new fm.websync.notifyingClient();};serializer.createPublication=function(){return new fm.websync.publication();};serializer.createPublishingClient=function(){return new fm.websync.publishingClient();};serializer.createRecord=function(){return new fm.websync.record("key");};serializer.createSubscribedClient=function(){return new fm.websync.subscribedClient();};serializer.createSubscription=function(){return new fm.websync.subscription("/");};serializer.deserializeAdvice=function(){var adviceJson;adviceJson=arguments[0];return fm.serializer.deserializeObjectFast(adviceJson,serializer.createAdvice,serializer.deserializeAdviceCallback);};serializer.deserializeAdviceCallback=function(){var advice,name,valueJson;advice=arguments[0];name=arguments[1];valueJson=arguments[2];switch(name){case"websocket":advice.setWebSocket(fm.websync.serializer.deserializeBaseAdvice(valueJson));return;case"long-polling":advice.setLongPolling(fm.websync.serializer.deserializeBaseAdvice(valueJson));return;case"callback-polling":advice.setCallbackPolling(fm.websync.serializer.deserializeBaseAdvice(valueJson));return;}
return fm.websync.serializer.deserializeBaseAdviceCallback(advice,name,valueJson);};serializer.deserializeBaseAdvice=function(){var baseAdviceJson;baseAdviceJson=arguments[0];return fm.serializer.deserializeObjectFast(baseAdviceJson,serializer.createBaseAdvice,serializer.deserializeBaseAdviceCallback);};serializer.deserializeBaseAdviceCallback=function(){var advice,name,str,valueJson;advice=arguments[0];name=arguments[1];valueJson=arguments[2];str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"hosts"))){if(fm.global.equals(str,"interval")){return advice.setInterval(fm.serializer.deserializeInteger(valueJson));}else{if(fm.global.equals(str,"reconnect")){return advice.setReconnect(fm.websync.serializer.deserializeReconnect(valueJson));}}}else{return advice.setHosts(fm.serializer.deserializeStringArray(valueJson));}}};serializer.deserializeBoundRecords=function(){var boundRecordsJson;boundRecordsJson=arguments[0];return fm.serializer.deserializeObject(boundRecordsJson,serializer.createBoundRecords,serializer.deserializeBoundRecordsCallback);};serializer.deserializeBoundRecordsCallback=function(){var boundRecords,name,valueJson;boundRecords=arguments[0];name=arguments[1];valueJson=arguments[2];return boundRecords[name]=new fm.websync.record(name,fm.serializer.deserializeRaw(valueJson));};serializer.deserializeConnectionType=function(){var connectionTypeJson;connectionTypeJson=arguments[0];switch(fm.serializer.deserializeString(connectionTypeJson)){case"long-polling":return fm.websync.connectionType.LongPolling;case"callback-polling":return fm.websync.connectionType.CallbackPolling;case"websocket":return fm.websync.connectionType.WebSocket;case"iframe":return fm.websync.connectionType.IFrame;case"flash":return fm.websync.connectionType.Flash;}
return fm.websync.connectionType.Unknown;};serializer.deserializeConnectionTypeArray=function(){var connectionTypesJson,i,strArray,typeArray;connectionTypesJson=arguments[0];if(((fm.stringExtensions.isNullOrEmpty(connectionTypesJson)||(fm.global.equals(connectionTypesJson,"null")))||((connectionTypesJson.length<2)||(!fm.global.equals(connectionTypesJson.charAt(0),'['))))||(!fm.global.equals(connectionTypesJson.charAt(connectionTypesJson.length-1),']'))){return null;}
connectionTypesJson=fm.stringExtensions.substring(connectionTypesJson,1,connectionTypesJson.length-2);strArray=fm.stringExtensions.split(connectionTypesJson,[',']);typeArray=new Array(strArray.length);i=0;while(i<strArray.length){try{typeArray[i]=fm.websync.serializer.deserializeConnectionType(strArray[i]);}finally{i++;}}
return typeArray;};serializer.deserializeExtensions=function(){var extensionsJson;extensionsJson=arguments[0];return fm.serializer.deserializeObjectFast(extensionsJson,serializer.createExtensions,serializer.deserializeExtensionsCallback);};serializer.deserializeExtensionsCallback=function(){var extensions,name,valueJson;extensions=arguments[0];name=arguments[1];valueJson=arguments[2];return extensions.setValueJson(name,fm.serializer.deserializeRaw(valueJson),false);};serializer.deserializeMessage=function(){var messageJson;messageJson=arguments[0];return fm.serializer.deserializeObjectFast(messageJson,serializer.createMessage,serializer.deserializeMessageCallback);};serializer.deserializeMessageArray=function(){var list,messagesJson;messagesJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(messagesJson,serializer.createMessage,serializer.deserializeMessageCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializeMessageCallback=function(){var message,name,nullable,str,valueJson;message=arguments[0];name=arguments[1];valueJson=arguments[2];message.setValidate(false);switch(name){case"advice":message.setAdvice(fm.websync.serializer.deserializeAdvice(valueJson));break;case"binding":message.setRecords(fm.websync.serializer.deserializeRecordArray(valueJson));break;case"channel":message.setBayeuxChannel(fm.serializer.deserializeString(valueJson));break;case"clientId":message.setClientId(fm.serializer.deserializeGuid(valueJson));break;case"connectionType":message.setConnectionType(fm.websync.serializer.deserializeConnectionType(valueJson));break;case"data":message.setDataJson(fm.serializer.deserializeRaw(valueJson));break;case"error":message.setError(fm.serializer.deserializeString(valueJson));break;case"ext":message.setExtensions(fm.websync.serializer.deserializeExtensions(valueJson));break;case"id":message.setId(fm.serializer.deserializeString(valueJson));break;case"minimumVersion":message.setMinimumVersion(fm.serializer.deserializeString(valueJson));break;case"subscription":if(!fm.stringExtensions.startsWith(valueJson,"[")){str=fm.serializer.deserializeString(valueJson);if(!fm.stringExtensions.isNullOrEmpty(str)){message.setChannels([str]);}
break;}
message.setChannels(fm.serializer.deserializeStringArray(valueJson));break;case"successful":nullable=fm.serializer.deserializeBoolean(valueJson);message.setSuccessful(fm.global.equals(nullable,true));break;case"supportedConnectionTypes":message.setSupportedConnectionTypes(fm.websync.serializer.deserializeConnectionTypeArray(valueJson));break;case"timestamp":message.setTimestamp(fm.websync.serializer.deserializeTimestamp(valueJson));break;case"version":message.setVersion(fm.serializer.deserializeString(valueJson));break;}
return message.setValidate(true);};serializer.deserializeNotification=function(){var notificationJson;notificationJson=arguments[0];return fm.serializer.deserializeObjectFast(notificationJson,serializer.createNotification,serializer.deserializeNotificationCallback);};serializer.deserializeNotificationArray=function(){var list,notificationsJson;notificationsJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(notificationsJson,serializer.createNotification,serializer.deserializeNotificationCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializeNotificationCallback=function(){var name,notification,nullable,str,valueJson;notification=arguments[0];name=arguments[1];valueJson=arguments[2];notification.setValidate(false);str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"data"))){if(fm.global.equals(str,"ext")){notification.setExtensions(fm.websync.serializer.deserializeExtensions(valueJson));}else{if(fm.global.equals(str,"successful")){nullable=fm.serializer.deserializeBoolean(valueJson);notification.setSuccessful(fm.global.equals(nullable,true));}else{if(fm.global.equals(str,"error")){notification.setError(fm.serializer.deserializeString(valueJson));}else{if(fm.global.equals(str,"timestamp")){notification.setTimestamp(fm.websync.serializer.deserializeTimestamp(valueJson));}}}}}else{notification.setDataJson(fm.serializer.deserializeRaw(valueJson));}}
return notification.setValidate(true);};serializer.deserializeNotifyingClient=function(){var notifyingClientJson;notifyingClientJson=arguments[0];return fm.serializer.deserializeObjectFast(notifyingClientJson,serializer.createNotifyingClient,serializer.deserializeNotifyingClientCallback);};serializer.deserializeNotifyingClientCallback=function(){var name,notifyingClient,str,valueJson;notifyingClient=arguments[0];name=arguments[1];valueJson=arguments[2];str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"clientId"))){if(fm.global.equals(str,"boundRecords")){return notifyingClient.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(valueJson));}}else{return notifyingClient.setClientId(fm.serializer.deserializeGuid(valueJson));}}};serializer.deserializePublication=function(){var publicationJson;publicationJson=arguments[0];return fm.serializer.deserializeObjectFast(publicationJson,serializer.createPublication,serializer.deserializePublicationCallback);};serializer.deserializePublicationArray=function(){var list,publicationsJson;publicationsJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(publicationsJson,serializer.createPublication,serializer.deserializePublicationCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializePublicationCallback=function(){var name,nullable,publication,str,valueJson;publication=arguments[0];name=arguments[1];valueJson=arguments[2];publication.setValidate(false);str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"channel"))){if(fm.global.equals(str,"data")){publication.setDataJson(fm.serializer.deserializeRaw(valueJson));}else{if(fm.global.equals(str,"ext")){publication.setExtensions(fm.websync.serializer.deserializeExtensions(valueJson));}else{if(fm.global.equals(str,"successful")){nullable=fm.serializer.deserializeBoolean(valueJson);publication.setSuccessful(fm.global.equals(nullable,true));}else{if(fm.global.equals(str,"error")){publication.setError(fm.serializer.deserializeString(valueJson));}else{if(fm.global.equals(str,"timestamp")){publication.setTimestamp(fm.websync.serializer.deserializeTimestamp(valueJson));}}}}}}else{publication.setChannel(fm.serializer.deserializeString(valueJson));}}
return publication.setValidate(true);};serializer.deserializePublishingClient=function(){var publishingClientJson;publishingClientJson=arguments[0];return fm.serializer.deserializeObjectFast(publishingClientJson,serializer.createPublishingClient,serializer.deserializePublishingClientCallback);};serializer.deserializePublishingClientCallback=function(){var name,publishingClient,str,valueJson;publishingClient=arguments[0];name=arguments[1];valueJson=arguments[2];str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"clientId"))){if(fm.global.equals(str,"boundRecords")){return publishingClient.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(valueJson));}}else{return publishingClient.setClientId(fm.serializer.deserializeGuid(valueJson));}}};serializer.deserializeReconnect=function(){var reconnectJson;reconnectJson=arguments[0];switch(fm.serializer.deserializeString(reconnectJson)){case"retry":return fm.websync.reconnect.Retry;case"handshake":return fm.websync.reconnect.Handshake;case"none":return fm.websync.reconnect.None;}
throw new Error("Unknown reconnect advice.");};serializer.deserializeRecord=function(){var recordJson;recordJson=arguments[0];return fm.serializer.deserializeObjectFast(recordJson,serializer.createRecord,serializer.deserializeRecordCallback);};serializer.deserializeRecordArray=function(){var list,recordsJson;recordsJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(recordsJson,serializer.createRecord,serializer.deserializeRecordCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializeRecordCallback=function(){var name,nullable,record,str,valueJson;record=arguments[0];name=arguments[1];valueJson=arguments[2];record.setValidate(false);str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"key"))){if(fm.global.equals(str,"private")){nullable=fm.serializer.deserializeBoolean(valueJson);record.setPrivate(fm.global.equals(nullable,true));}else{if(fm.global.equals(str,"value")){record.setValueJson(fm.serializer.deserializeRaw(valueJson));}}}else{record.setKey(fm.serializer.deserializeString(valueJson));}}
return record.setValidate(true);};serializer.deserializeSubscribedClient=function(){var subscribedClientJson;subscribedClientJson=arguments[0];return fm.serializer.deserializeObjectFast(subscribedClientJson,serializer.createSubscribedClient,serializer.deserializeSubscribedClientCallback);};serializer.deserializeSubscribedClientArray=function(){var list,subscribedClientsJson;subscribedClientsJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(subscribedClientsJson,serializer.createSubscribedClient,serializer.deserializeSubscribedClientCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializeSubscribedClientCallback=function(){var name,str,subscribedClient,valueJson;subscribedClient=arguments[0];name=arguments[1];valueJson=arguments[2];str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"clientId"))){if(fm.global.equals(str,"boundRecords")){return subscribedClient.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(valueJson));}}else{return subscribedClient.setClientId(fm.serializer.deserializeGuid(valueJson));}}};serializer.deserializeSubscription=function(){var subscriptionJson;subscriptionJson=arguments[0];return fm.serializer.deserializeObjectFast(subscriptionJson,serializer.createSubscription,serializer.deserializeSubscriptionCallback);};serializer.deserializeSubscriptionArray=function(){var list,subscriptionsJson;subscriptionsJson=arguments[0];list=fm.serializer.deserializeObjectArrayFast(subscriptionsJson,serializer.createSubscription,serializer.deserializeSubscriptionCallback);if(fm.global.equals(list,null)){return null;}
return fm.arrayExtensions.toArray(list);};serializer.deserializeSubscriptionCallback=function(){var name,str,subscription,valueJson;subscription=arguments[0];name=arguments[1];valueJson=arguments[2];str=name;if(!fm.global.equals(str,null)){if(!(fm.global.equals(str,"channel"))){if(fm.global.equals(str,"tag")){return subscription.setTag(fm.serializer.deserializeString(valueJson));}}else{return subscription.setChannel(fm.serializer.deserializeString(valueJson));}}};serializer.deserializeTimestamp=function(){var _var0,_var1,_var10,_var11,_var2,_var3,_var4,_var5,_var6,_var7,_var8,_var9,intResult,num2,num3,num4,num5,num6,s,str,str10,str2,str3,str5,str6,str7,str8,strArray,timestampJson,utcNow;timestampJson=arguments[0];str=fm.serializer.deserializeString(timestampJson);utcNow=fm.dateTime.getUtcNow();if(!fm.stringExtensions.isNullOrEmpty(str)){strArray=fm.stringExtensions.split(str,['T']);if(!fm.global.equals(strArray.length,2)){return utcNow;}
str2=strArray[0];str3=strArray[1];strArray=fm.stringExtensions.split(str2,['-']);if(!fm.global.equals(strArray.length,3)){return utcNow;}
s=strArray[0];str5=strArray[1];str6=strArray[2];strArray=fm.stringExtensions.split(str3,[':']);if(!fm.global.equals(strArray.length,3)){return utcNow;}
str7=strArray[0];str8=strArray[1];strArray=fm.stringExtensions.split(strArray[2],['.']);if(!fm.global.equals(strArray.length,2)){return utcNow;}
str10=strArray[0];intResult=0;num2=0;num3=0;num4=0;num5=0;num6=0;_var0=new fm.holder(intResult);_var1=fm.parseAssistant.tryParseIntegerValue(s,_var0);intResult=_var0.getValue();_var2=new fm.holder(num2);_var3=fm.parseAssistant.tryParseIntegerValue(str5,_var2);num2=_var2.getValue();_var4=new fm.holder(num3);_var5=fm.parseAssistant.tryParseIntegerValue(str6,_var4);num3=_var4.getValue();_var6=new fm.holder(num4);_var7=fm.parseAssistant.tryParseIntegerValue(str7,_var6);num4=_var6.getValue();_var8=new fm.holder(num5);_var9=fm.parseAssistant.tryParseIntegerValue(str8,_var8);num5=_var8.getValue();_var10=new fm.holder(num6);_var11=fm.parseAssistant.tryParseIntegerValue(str10,_var10);num6=_var10.getValue();if((((_var1&&_var3)&&(_var5&&_var7))&&_var9)&&_var11){utcNow=new fm.dateTime(intResult,num2,num3,num4,num5,num6);}}
return utcNow;};serializer.serializeAdvice=function(){var advice;advice=arguments[0];return fm.serializer.serializeObjectFast(advice,serializer.serializeAdviceCallback);};serializer.serializeAdviceCallback=function(){var advice,jsonObject;advice=arguments[0];jsonObject=arguments[1];fm.websync.serializer.serializeBaseAdviceCallback(advice,jsonObject);if(!fm.global.equals(advice.getWebSocket(),null)){jsonObject["websocket"]=fm.websync.serializer.serializeBaseAdvice(advice.getWebSocket());}
if(!fm.global.equals(advice.getLongPolling(),null)){jsonObject["long-polling"]=fm.websync.serializer.serializeBaseAdvice(advice.getLongPolling());}
if(!fm.global.equals(advice.getCallbackPolling(),null)){return jsonObject["callback-polling"]=fm.websync.serializer.serializeBaseAdvice(advice.getCallbackPolling());}};serializer.serializeBaseAdvice=function(){var baseAdvice;baseAdvice=arguments[0];return fm.serializer.serializeObjectFast(baseAdvice,serializer.serializeBaseAdviceCallback);};serializer.serializeBaseAdviceCallback=function(){var baseAdvice,jsonObject;baseAdvice=arguments[0];jsonObject=arguments[1];if(!fm.global.equals(baseAdvice.getHosts(),null)){jsonObject["hosts"]=fm.serializer.serializeStringArray(baseAdvice.getHosts());}
if(baseAdvice.getInterval()!==null){jsonObject["interval"]=fm.serializer.serializeInteger(baseAdvice.getInterval());}
if(baseAdvice.getReconnect()!==null){return jsonObject["reconnect"]=fm.websync.serializer.serializeReconnect(baseAdvice.getReconnect());}};serializer.serializeBoundRecords=function(){var boundRecords;boundRecords=arguments[0];return fm.serializer.serializeObject(boundRecords,serializer.serializeBoundRecordsCallback);};serializer.serializeBoundRecordsCallback=function(){var _var0,boundRecords,j,jsonObject,len,results,str;boundRecords=arguments[0];jsonObject=arguments[1];_var0=fm.hashExtensions.getKeys(boundRecords);results=[];for(j=0,len=_var0.length;j<len;j++){str=_var0[j];results.push(jsonObject[str]=fm.serializer.serializeRaw(boundRecords[str].getValueJson()));}
return results;};serializer.serializeConnectionType=function(){var connectionType,str;connectionType=arguments[0];str=null;switch(connectionType){case fm.websync.connectionType.WebSocket:str="websocket";break;case fm.websync.connectionType.LongPolling:str="long-polling";break;case fm.websync.connectionType.CallbackPolling:str="callback-polling";break;case fm.websync.connectionType.IFrame:str="iframe";break;case fm.websync.connectionType.Flash:str="flash";break;}
return fm.serializer.serializeString(str);};serializer.serializeConnectionTypeArray=function(){var connectionTypes,i,strArray;connectionTypes=arguments[0];strArray=new Array(connectionTypes.length);i=0;while(i<connectionTypes.length){try{strArray[i]=fm.websync.serializer.serializeConnectionType(connectionTypes[i]);}finally{i++;}}
return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",strArray),"]");};serializer.serializeExtensions=function(){var extensions;extensions=arguments[0];return fm.serializer.serializeObjectFast(extensions,serializer.serializeExtensionsCallback);};serializer.serializeExtensionsCallback=function(){var _var0,extensions,j,jsonObject,len,results,str;extensions=arguments[0];jsonObject=arguments[1];_var0=extensions.getNames();results=[];for(j=0,len=_var0.length;j<len;j++){str=_var0[j];results.push(jsonObject[str]=fm.serializer.serializeRaw(extensions.getValueJson(str)));}
return results;};serializer.serializeMessage=function(){var message;message=arguments[0];return fm.serializer.serializeObjectFast(message,serializer.serializeMessageCallback);};serializer.serializeMessageArray=function(){var messages;messages=arguments[0];return fm.serializer.serializeObjectArrayFast(messages,serializer.serializeMessageCallback);};serializer.serializeMessageCallback=function(){var jsonObject,message;message=arguments[0];jsonObject=arguments[1];if(message.getClientId()!==null){jsonObject["clientId"]=fm.serializer.serializeGuid(message.getClientId());}
if(message.getTimestamp()!==null){jsonObject["timestamp"]=fm.websync.serializer.serializeTimestamp(message.getTimestamp());}
if(!fm.global.equals(message.getAdvice(),null)){jsonObject["advice"]=fm.websync.serializer.serializeAdvice(message.getAdvice());}
if((!fm.global.equals(message.getRecords(),null))&&((fm.global.equals(message.getType(),fm.websync.messageType.Bind))||(fm.global.equals(message.getType(),fm.websync.messageType.Unbind)))){jsonObject["binding"]=fm.websync.serializer.serializeRecordArray(message.getRecords());}
if(!fm.global.equals(message.getBayeuxChannel(),null)){jsonObject["channel"]=fm.serializer.serializeString(message.getBayeuxChannel());}
if(message.getConnectionType()!==null){jsonObject["connectionType"]=fm.websync.serializer.serializeConnectionType(message.getConnectionType());}
if(!fm.global.equals(message.getDataJson(),null)){jsonObject["data"]=fm.serializer.serializeRaw(message.getDataJson());}
if(!fm.global.equals(message.getError(),null)){jsonObject["error"]=fm.serializer.serializeString(message.getError());}
if(message.getExtensions().getCount()>0){jsonObject["ext"]=fm.websync.serializer.serializeExtensions(message.getExtensions());}
if(!fm.global.equals(message.getId(),null)){jsonObject["id"]=fm.serializer.serializeString(message.getId());}
if(!fm.global.equals(message.getMinimumVersion(),null)){jsonObject["minimumVersion"]=fm.serializer.serializeString(message.getMinimumVersion());}
if((!fm.global.equals(message.getChannels(),null))&&((fm.global.equals(message.getType(),fm.websync.messageType.Subscribe))||(fm.global.equals(message.getType(),fm.websync.messageType.Unsubscribe)))){jsonObject["subscription"]=fm.serializer.serializeStringArray(message.getChannels());}
if(message.getSuccessful()){jsonObject["successful"]=fm.serializer.serializeBoolean(message.getSuccessful());}
if(!fm.global.equals(message.getSupportedConnectionTypes(),null)){jsonObject["supportedConnectionTypes"]=fm.websync.serializer.serializeConnectionTypeArray(message.getSupportedConnectionTypes());}
if(!fm.global.equals(message.getVersion(),null)){return jsonObject["version"]=fm.serializer.serializeString(message.getVersion());}};serializer.serializeNotification=function(){var notification;notification=arguments[0];return fm.serializer.serializeObjectFast(notification,serializer.serializeNotificationCallback);};serializer.serializeNotificationArray=function(){var notifications;notifications=arguments[0];return fm.serializer.serializeObjectArrayFast(notifications,serializer.serializeNotificationCallback);};serializer.serializeNotificationCallback=function(){var jsonObject,notification;notification=arguments[0];jsonObject=arguments[1];if(!fm.global.equals(notification.getError(),null)){jsonObject["error"]=fm.serializer.serializeString(notification.getError());}
if(notification.getSuccessful()){jsonObject["successful"]=fm.serializer.serializeBoolean(notification.getSuccessful());}
if(notification.getTimestamp()!==null){jsonObject["timestamp"]=fm.websync.serializer.serializeTimestamp(notification.getTimestamp());}
if(notification.getExtensions().getCount()>0){jsonObject["ext"]=fm.websync.serializer.serializeExtensions(notification.getExtensions());}
if(!fm.global.equals(notification.getDataJson(),null)){return jsonObject["data"]=fm.serializer.serializeRaw(notification.getDataJson());}};serializer.serializeNotifyingClient=function(){var notifyingClient;notifyingClient=arguments[0];return fm.serializer.serializeObjectFast(notifyingClient,serializer.serializeNotifyingClientCallback);};serializer.serializeNotifyingClientCallback=function(){var jsonObject,notifyingClient;notifyingClient=arguments[0];jsonObject=arguments[1];if(notifyingClient.getClientId()!==null){jsonObject["clientId"]=fm.serializer.serializeGuid(notifyingClient.getClientId());}
if(!fm.global.equals(notifyingClient.getBoundRecords(),null)){return jsonObject["boundRecords"]=fm.websync.serializer.serializeBoundRecords(notifyingClient.getBoundRecords());}};serializer.serializePublication=function(){var publication;publication=arguments[0];return fm.serializer.serializeObjectFast(publication,serializer.serializePublicationCallback);};serializer.serializePublicationArray=function(){var publications;publications=arguments[0];return fm.serializer.serializeObjectArrayFast(publications,serializer.serializePublicationCallback);};serializer.serializePublicationCallback=function(){var jsonObject,publication;publication=arguments[0];jsonObject=arguments[1];if(!fm.global.equals(publication.getChannel(),null)){jsonObject["channel"]=fm.serializer.serializeString(publication.getChannel());}
if(!fm.global.equals(publication.getError(),null)){jsonObject["error"]=fm.serializer.serializeString(publication.getError());}
if(publication.getSuccessful()){jsonObject["successful"]=fm.serializer.serializeBoolean(publication.getSuccessful());}
if(publication.getTimestamp()!==null){jsonObject["timestamp"]=fm.websync.serializer.serializeTimestamp(publication.getTimestamp());}
if(publication.getExtensions().getCount()>0){jsonObject["ext"]=fm.websync.serializer.serializeExtensions(publication.getExtensions());}
if(!fm.global.equals(publication.getDataJson(),null)){return jsonObject["data"]=fm.serializer.serializeRaw(publication.getDataJson());}};serializer.serializePublishingClient=function(){var publishingClient;publishingClient=arguments[0];return fm.serializer.serializeObjectFast(publishingClient,serializer.serializePublishingClientCallback);};serializer.serializePublishingClientCallback=function(){var jsonObject,publishingClient;publishingClient=arguments[0];jsonObject=arguments[1];if(publishingClient.getClientId()!==null){jsonObject["clientId"]=fm.serializer.serializeGuid(publishingClient.getClientId());}
if(!fm.global.equals(publishingClient.getBoundRecords(),null)){return jsonObject["boundRecords"]=fm.websync.serializer.serializeBoundRecords(publishingClient.getBoundRecords());}};serializer.serializeReconnect=function(){var reconnect,str;reconnect=arguments[0];str=null;switch(reconnect){case fm.websync.reconnect.Retry:str="retry";break;case fm.websync.reconnect.Handshake:str="handshake";break;case fm.websync.reconnect.None:str="none";break;}
return fm.serializer.serializeString(str);};serializer.serializeRecord=function(){var record;record=arguments[0];return fm.serializer.serializeObjectFast(record,serializer.serializeRecordCallback);};serializer.serializeRecordArray=function(){var records;records=arguments[0];return fm.serializer.serializeObjectArrayFast(records,serializer.serializeRecordCallback);};serializer.serializeRecordCallback=function(){var jsonObject,record;record=arguments[0];jsonObject=arguments[1];if(!fm.global.equals(record.getKey(),null)){jsonObject["key"]=fm.serializer.serializeString(record.getKey());}
if(record.getPrivate()){jsonObject["private"]=fm.serializer.serializeBoolean(record.getPrivate());}
if(!fm.global.equals(record.getValueJson(),null)){return jsonObject["value"]=fm.serializer.serializeRaw(record.getValueJson());}};serializer.serializeSubscribedClient=function(){var subscribedClient;subscribedClient=arguments[0];return fm.serializer.serializeObjectFast(subscribedClient,serializer.serializeSubscribedClientCallback);};serializer.serializeSubscribedClientArray=function(){var subscribedClients;subscribedClients=arguments[0];return fm.serializer.serializeObjectArrayFast(subscribedClients,serializer.serializeSubscribedClientCallback);};serializer.serializeSubscribedClientCallback=function(){var jsonObject,subscribedClient;subscribedClient=arguments[0];jsonObject=arguments[1];jsonObject["clientId"]=fm.serializer.serializeGuid(subscribedClient.getClientId());if(!fm.global.equals(subscribedClient.getBoundRecords(),null)){return jsonObject["boundRecords"]=fm.websync.serializer.serializeBoundRecords(subscribedClient.getBoundRecords());}};serializer.serializeSubscription=function(){var subscription;subscription=arguments[0];return fm.serializer.serializeObjectFast(subscription,serializer.serializeSubscriptionCallback);};serializer.serializeSubscriptionArray=function(){var subscriptions;subscriptions=arguments[0];return fm.serializer.serializeObjectArrayFast(subscriptions,serializer.serializeSubscriptionCallback);};serializer.serializeSubscriptionCallback=function(){var jsonObject,subscription;subscription=arguments[0];jsonObject=arguments[1];jsonObject["channel"]=fm.serializer.serializeString(subscription.getChannel());if(!fm.global.equals(subscription.getTag(),null)){return jsonObject["tag"]=fm.serializer.serializeString(subscription.getTag());}};serializer.serializeTimestamp=function(){var str,str2,str3,str4,str5,str6,str7,timestamp;timestamp=arguments[0];str=null;if(timestamp!==null){str2=fm.intExtensions.toString(timestamp.getYear());str3=fm.intExtensions.toString(timestamp.getMonth());str4=fm.intExtensions.toString(timestamp.getDay());str5=fm.intExtensions.toString(timestamp.getHour());str6=fm.intExtensions.toString(timestamp.getMinute());str7=fm.intExtensions.toString(timestamp.getSecond());while(str2.length<4){str2=fm.stringExtensions.concat("0",str2);}
while(str3.length<2){str3=fm.stringExtensions.concat("0",str3);}
while(str4.length<2){str4=fm.stringExtensions.concat("0",str4);}
while(str5.length<2){str5=fm.stringExtensions.concat("0",str5);}
while(str6.length<2){str6=fm.stringExtensions.concat("0",str6);}
while(str7.length<2){str7=fm.stringExtensions.concat("0",str7);}
str=fm.stringExtensions.format("{0}-{1}-{2}T{3}:{4}:{5}.00",[str2,str3,str4,str5,str6,str7]);}
return fm.serializer.serializeString(str);};return serializer;})(fm.object);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.webSocketMessageTransfer=(function(superClass){extend(webSocketMessageTransfer,superClass);webSocketMessageTransfer.prototype._callbackKey=null;webSocketMessageTransfer.prototype._url=null;webSocketMessageTransfer.prototype._webSocketTransfer=null;function webSocketMessageTransfer(){this.shutdown=bind(this.shutdown,this);this.setUrl=bind(this.setUrl,this);this.setStreamTimeout=bind(this.setStreamTimeout,this);this.setSender=bind(this.setSender,this);this.setOnStreamFailure=bind(this.setOnStreamFailure,this);this.setOnResponseReceived=bind(this.setOnResponseReceived,this);this.setOnRequestCreated=bind(this.setOnRequestCreated,this);this.setOnOpenSuccess=bind(this.setOnOpenSuccess,this);this.setOnOpenFailure=bind(this.setOnOpenFailure,this);this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this);this.sendMessagesAsyncCallback=bind(this.sendMessagesAsyncCallback,this);this.sendMessagesAsync=bind(this.sendMessagesAsync,this);this.sendMessages=bind(this.sendMessages,this);this.open=bind(this.open,this);this.getUrl=bind(this.getUrl,this);this.getStreamTimeout=bind(this.getStreamTimeout,this);this.getSender=bind(this.getSender,this);this.getOnStreamFailure=bind(this.getOnStreamFailure,this);this.getOnResponseReceived=bind(this.getOnResponseReceived,this);this.getOnRequestCreated=bind(this.getOnRequestCreated,this);this.getOnOpenSuccess=bind(this.getOnOpenSuccess,this);this.getOnOpenFailure=bind(this.getOnOpenFailure,this);this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var instance,url;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=webSocketMessageTransfer.__super__.constructor.call(this);this._callbackKey="fm.websync.webSocketMessageTransfer.callback";fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===0){instance=webSocketMessageTransfer.__super__.constructor.call(this);this._callbackKey="fm.websync.webSocketMessageTransfer.callback";return instance;}
if(arguments.length===1){url=arguments[0];webSocketMessageTransfer.call(this);this.setUrl(url);this._webSocketTransfer=fm.webSocketTransferFactory.getWebSocketTransfer(this.getUrl());return instance;}}
webSocketMessageTransfer.prototype.getHandshakeTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout();};webSocketMessageTransfer.prototype.getOnOpenFailure=function(){return this._webSocketTransfer.getOnOpenFailure();};webSocketMessageTransfer.prototype.getOnOpenSuccess=function(){return this._webSocketTransfer.getOnOpenSuccess();};webSocketMessageTransfer.prototype.getOnRequestCreated=function(){return this._webSocketTransfer.getOnRequestCreated();};webSocketMessageTransfer.prototype.getOnResponseReceived=function(){return this._webSocketTransfer.getOnResponseReceived();};webSocketMessageTransfer.prototype.getOnStreamFailure=function(){return this._webSocketTransfer.getOnStreamFailure();};webSocketMessageTransfer.prototype.getSender=function(){return this._webSocketTransfer.getSender();};webSocketMessageTransfer.prototype.getStreamTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout();};webSocketMessageTransfer.prototype.getUrl=function(){return this._url;};webSocketMessageTransfer.prototype.open=function(){var headers;headers=arguments[0];return this._webSocketTransfer.open(headers);};webSocketMessageTransfer.prototype.sendMessages=function(){var args,httpResponseArgs,requestArgs;requestArgs=arguments[0];args=this.messageRequestArgsToHttpRequestArgs(requestArgs);httpResponseArgs=this._webSocketTransfer.send(args);return this.httpResponseArgsToMessageResponseArgs(httpResponseArgs);};webSocketMessageTransfer.prototype.sendMessagesAsync=function(){var args,callback,requestArgs;requestArgs=arguments[0];callback=arguments[1];args=this.messageRequestArgsToHttpRequestArgs(requestArgs);args.setDynamicValue(this._callbackKey,callback);return this._webSocketTransfer.sendAsync(args,this.sendMessagesAsyncCallback);};webSocketMessageTransfer.prototype.sendMessagesAsyncCallback=function(){var dynamicValue,httpResponseArgs,requestArgs;httpResponseArgs=arguments[0];if(!fm.global.equals(httpResponseArgs,null)){requestArgs=httpResponseArgs.getRequestArgs();if(!fm.global.equals(requestArgs,null)){dynamicValue=requestArgs.getDynamicValue(this._callbackKey);if(!fm.global.equals(dynamicValue,null)){requestArgs.unsetDynamicValue(this._callbackKey);return dynamicValue(this.httpResponseArgsToMessageResponseArgs(httpResponseArgs));}}}};webSocketMessageTransfer.prototype.setHandshakeTimeout=function(){var value;value=arguments[0];return this._webSocketTransfer.setHandshakeTimeout(value);};webSocketMessageTransfer.prototype.setOnOpenFailure=function(){var value;value=arguments[0];return this._webSocketTransfer.setOnOpenFailure(value);};webSocketMessageTransfer.prototype.setOnOpenSuccess=function(){var value;value=arguments[0];return this._webSocketTransfer.setOnOpenSuccess(value);};webSocketMessageTransfer.prototype.setOnRequestCreated=function(){var value;value=arguments[0];return this._webSocketTransfer.setOnRequestCreated(value);};webSocketMessageTransfer.prototype.setOnResponseReceived=function(){var value;value=arguments[0];return this._webSocketTransfer.setOnResponseReceived(value);};webSocketMessageTransfer.prototype.setOnStreamFailure=function(){var value;value=arguments[0];return this._webSocketTransfer.setOnStreamFailure(value);};webSocketMessageTransfer.prototype.setSender=function(){var value;value=arguments[0];return this._webSocketTransfer.setSender(value);};webSocketMessageTransfer.prototype.setStreamTimeout=function(){var value;value=arguments[0];return this._webSocketTransfer.setHandshakeTimeout(value);};webSocketMessageTransfer.prototype.setUrl=function(){var value;value=arguments[0];return this._url=value;};webSocketMessageTransfer.prototype.shutdown=function(){var error,exception1;try{return this._webSocketTransfer.shutdown();}catch(error){exception1=error;}finally{}};return webSocketMessageTransfer;})(fm.websync.messageTransfer);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscription=(function(superClass){extend(subscription,superClass);subscription.prototype.__channel=null;subscription.prototype.__tag=null;function subscription(){this.toJson=bind(this.toJson,this);this.setTag=bind(this.setTag,this);this.setChannel=bind(this.setChannel,this);this.getTag=bind(this.getTag,this);this.getHashCode=bind(this.getHashCode,this);this.getChannel=bind(this.getChannel,this);this.equals=bind(this.equals,this);this.duplicate=bind(this.duplicate,this);var channel,instance,tag;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscription.__super__.constructor.call(this);fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){channel=arguments[0];tag=arguments[1];instance=subscription.__super__.constructor.call(this);this.setChannel(channel);this.setTag(tag);return instance;}
if(arguments.length===1){channel=arguments[0];instance=subscription.__super__.constructor.call(this);this.setChannel(channel);return instance;}}
subscription.fromJson=function(){var subscriptionJson;subscriptionJson=arguments[0];return fm.websync.serializer.deserializeSubscription(subscriptionJson);};subscription.fromJsonMultiple=function(){var subscriptionsJson;subscriptionsJson=arguments[0];return fm.websync.serializer.deserializeSubscriptionArray(subscriptionsJson);};subscription.toJson=function(){var subscription;subscription=arguments[0];return fm.websync.serializer.serializeSubscription(subscription);};subscription.toJsonMultiple=function(){var subscriptions;subscriptions=arguments[0];return fm.websync.serializer.serializeSubscriptionArray(subscriptions);};subscription.prototype.duplicate=function(){return new fm.websync.subscription(this.getChannel(),this.getTag());};subscription.prototype.equals=function(){var obj,subscription;obj=arguments[0];subscription=fm.global.tryCast(obj,fm.websync.subscription);return fm.global.equals(subscription,this);};subscription.prototype.getChannel=function(){return this.__channel;};subscription.prototype.getHashCode=function(){var num;num=17;num=(num*23)+this.getChannel().hashCode();if(!fm.global.equals(this.getTag(),null)){num=(num*23)+this.getTag().hashCode();}
return num;};subscription.prototype.getTag=function(){var ref;return(ref=this.__tag)!=null?ref:fm.stringExtensions.empty;};subscription.prototype.setChannel=function(){var value;value=arguments[0];if(fm.global.equals(value,null)){throw new Error("channel cannot be null.");}
this.__channel=value;return this.setIsDirty(true);};subscription.prototype.setTag=function(){var value;value=arguments[0];this.__tag=value!=null?value:fm.stringExtensions.empty;return this.setIsDirty(true);};subscription.prototype.toJson=function(){return fm.websync.subscription.toJson(this);};return subscription;})(fm.dynamic);var bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;fm.websync.subscribedClient=(function(superClass){extend(subscribedClient,superClass);subscribedClient.prototype._boundRecords=null;subscribedClient.prototype._clientId=null;function subscribedClient(){this.getBoundRecordValue=bind(this.getBoundRecordValue,this);this.toJson=bind(this.toJson,this);this.setClientId=bind(this.setClientId,this);this.setBoundRecords=bind(this.setBoundRecords,this);this.getClientId=bind(this.getClientId,this);this.getBoundRecordValueJson=bind(this.getBoundRecordValueJson,this);this.getBoundRecords=bind(this.getBoundRecords,this);var boundRecords,clientId,instance;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){instance=subscribedClient.__super__.constructor.call(this);this.setBoundRecords({});fm.util.attachProperties(this,arguments[0]);return instance;}
if(arguments.length===2){clientId=arguments[0];boundRecords=arguments[1];instance=subscribedClient.__super__.constructor.call(this);this.setClientId(clientId);this.setBoundRecords(boundRecords);return instance;}
if(arguments.length===0){instance=subscribedClient.__super__.constructor.call(this);this.setBoundRecords({});return instance;}}
subscribedClient.fromJson=function(){var subscribedClientJson;subscribedClientJson=arguments[0];return fm.websync.serializer.deserializeSubscribedClient(subscribedClientJson);};subscribedClient.fromJsonMultiple=function(){var subscribedClientsJson;subscribedClientsJson=arguments[0];return fm.websync.serializer.deserializeSubscribedClientArray(subscribedClientsJson);};subscribedClient.toJson=function(){var subscribedClient;subscribedClient=arguments[0];return fm.websync.serializer.serializeSubscribedClient(subscribedClient);};subscribedClient.toJsonMultiple=function(){var subscribedClients;subscribedClients=arguments[0];return fm.websync.serializer.serializeSubscribedClientArray(subscribedClients);};subscribedClient.prototype.getBoundRecords=function(){return this._boundRecords;};subscribedClient.prototype.getBoundRecordValueJson=function(){var _var0,_var1,key,record;key=arguments[0];if(fm.global.equals(this.getBoundRecords(),null)){return null;}
record=null;_var0=new fm.holder(record);_var1=fm.hashExtensions.tryGetValue(this.getBoundRecords(),key,_var0);record=_var0.getValue();if(!_var1){return null;}
return record.getValueJson();};subscribedClient.prototype.getClientId=function(){return this._clientId;};subscribedClient.prototype.setBoundRecords=function(){var value;value=arguments[0];return this._boundRecords=value;};subscribedClient.prototype.setClientId=function(){var value;value=arguments[0];return this._clientId=value;};subscribedClient.prototype.toJson=function(){return fm.websync.subscribedClient.toJson(this);};subscribedClient.prototype.getBoundRecordValue=function(){var key;key=arguments[0];return fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments));};return subscribedClient;})(fm.serializable);(function(){var _activeClients,client,deleteActiveClient,deleteCookie,deleteCookieClient,insertActiveClient,insertCookie,insertCookieClient,selectActiveClients,selectCookieClient,selectCookies;client=fm.websync.client;client.addOnConnectRequest(function(c,e){var args;args=e.getMethodArgs();if(!args.getIsReconnect()&&!args.getLastClientId()&&!args.getLastSessionId()){client=selectCookieClient();if(client){args.setLastClientId(client.clientId);args.setLastSessionId(client.sessionId);if(client.token){c.setToken(client.token);}
deleteCookieClient(client.clientId);}}});client.addOnConnectEnd(function(c,e){var args;if(!e.getException()){args=e.getMethodArgs();if(args.getLastClientId()){deleteActiveClient(args.getLastClientId());}
insertActiveClient({clientId:c.getClientId(),sessionId:c.getSessionId(),token:c.getToken()});}});client.addOnDisconnectEnd(function(c,e){if(!e.getException()){deleteActiveClient(c.getClientId());}});fm.util.observe(window,'beforeunload',function(){var activeClient,activeClients,j,len;activeClients=selectActiveClients();for(j=0,len=activeClients.length;j<len;j++){activeClient=activeClients[j];insertCookieClient(activeClient);}});_activeClients=[];selectActiveClients=function(){return _activeClients;};insertActiveClient=function(client){_activeClients.push(client);};deleteActiveClient=function(clientId){var activeClient,i,j,len;for(i=j=0,len=_activeClients.length;j<len;i=++j){activeClient=_activeClients[i];if(activeClient.clientId.equals(clientId)){_activeClients.splice(i,1);return;}}};fm.websync._cookiePrefix='fm-websync-';fm.websync.getCookiePrefix=function(){return fm.websync._cookiePrefix;};fm.websync.setCookiePrefix=function(value){return fm.websync._cookiePrefix=value;};selectCookieClient=function(){var cookieClient,cookieName,cookieValue,cookies;cookies=selectCookies();cookieClient=null;for(cookieName in cookies){cookieValue=cookies[cookieName];if(fm.stringExtensions.startsWith(cookieName,fm.websync._cookiePrefix)){cookieValue=fm.json.deserialize(cookieValue);cookieClient={clientId:new fm.guid(cookieValue.clientId),sessionId:new fm.guid(cookieValue.sessionId),token:cookieValue.token};}}
return cookieClient;};insertCookieClient=function(client){var cookieValue;cookieValue={clientId:client.clientId.toString(),sessionId:client.sessionId.toString(),token:client.token};insertCookie(fm.websync._cookiePrefix+client.clientId.toString(),fm.json.serialize(cookieValue),60);};deleteCookieClient=function(clientId){deleteCookie(fm.websync._cookiePrefix+clientId.toString());};selectCookies=function(){var cookie,cookieSplit,cookies,equalsIndex,j,len;cookies={};cookieSplit=document.cookie.split(';');for(j=0,len=cookieSplit.length;j<len;j++){cookie=cookieSplit[j];while(cookie.charAt(0)===' '){cookie=cookie.substring(1,cookie.length);}
equalsIndex=cookie.indexOf('=');if(equalsIndex>=0){cookies[cookie.substring(0,equalsIndex)]=decodeURIComponent(cookie.substring(equalsIndex+1,cookie.length));}}
return cookies;};insertCookie=function(name,value,seconds){var date,expires;expires='';if(seconds){date=new Date();date.setTime(date.getTime()+(seconds*1000));expires='; expires='+date.toGMTString();}
document.cookie=name+'='+encodeURIComponent(value)+expires+'; path=/';};return deleteCookie=function(name){insertCookie(name,'',-1);};})();(function(){var _created,client,fn,j,len,methodName,oldClient,oldConstructor,oldPrototype,prop,publisher,ref;client=fm.websync.client;ref=['connect','disconnect','subscribe','unsubscribe','bind','unbind','publish','notify','service'];fn=function(methodName){var method;method=client.prototype[methodName];return client.prototype[methodName]=function(){var i,k,len1,obj,record,ref1;if(arguments.length===1&&fm.util.isPlainObject(arguments[0])){obj=arguments[0];if(obj.record&&fm.util.isPlainObject(obj.record)){obj.record=new fm.websync.record(obj.record);}
if(obj.records){ref1=obj.records;for(i=k=0,len1=ref1.length;k<len1;i=++k){record=ref1[i];if(fm.util.isPlainObject(obj.records[i])){obj.records[i]=new fm.websync.record(obj.records[i]);}}}
return method.call(this,new fm.websync[methodName+'Args'](obj));}else{return method.apply(this,arguments);}};};for(j=0,len=ref.length;j<len;j++){methodName=ref[j];fn(methodName);}
oldConstructor=client.prototype.constructor;oldPrototype=client.prototype;oldClient=client;_created=false;fm.websync.client.enableMultiple=false;fm.websync.client=function(){var c;if(_created&&!client.enableMultiple){throw Error('To create multiple instances of the JavaScript client, set fm.websync.client.enableMultiple to true.');}else{_created=true;oldConstructor.apply(this,arguments);c=this;fm.util.observe(window,'beforeunload',function(){var autoDisconnect,autoDisconnectConfig;autoDisconnect=c._autoDisconnect;if(autoDisconnect){autoDisconnectConfig=c._autoDisconnectConfig;if(autoDisconnectConfig){c.disconnect(autoDisconnectConfig);}else{c.disconnect();}}});return c;}};fm.websync.client.prototype=oldPrototype;for(prop in oldClient){fm.websync.client[prop]=oldClient[prop];}
client=fm.websync.client;publisher=fm.websync.publisher;if(typeof module!=='undefined'&&module.exports){client.prototype.getDisableBinary=function(){return true;};publisher.prototype.getDisableBinary=function(){return true;};}
client.prototype.setDisableCORS=function(disableCORS){return this._disableCORS=disableCORS;};client.prototype.getDisableCORS=function(){return this._disableCORS||false;};client.prototype.setDisablePostMessage=function(disablePostMessage){return this._disablePostMessage=disablePostMessage;};client.prototype.getDisablePostMessage=function(){return this._disablePostMessage||false;};client.prototype.setDisableJSONP=function(disableJSONP){return this._disableJSONP=disableJSONP;};client.prototype.getDisableJSONP=function(){return this._disableJSONP||false;};client.prototype.setForceJSONP=function(forceJSONP){return this._forceJSONP=forceJSONP;};client.prototype.getForceJSONP=function(){return this._forceJSONP||false;};publisher.prototype.setDisableCORS=function(disableCORS){return this._disableCORS=disableCORS;};publisher.prototype.getDisableCORS=function(){return this._disableCORS||false;};publisher.prototype.setDisablePostMessage=function(disablePostMessage){return this._disablePostMessage=disablePostMessage;};publisher.prototype.getDisablePostMessage=function(){return this._disablePostMessage||false;};publisher.prototype.setDisableJSONP=function(disableJSONP){return this._disableJSONP=disableJSONP;};publisher.prototype.getDisableJSONP=function(){return this._disableJSONP||false;};publisher.prototype.setForceJSONP=function(forceJSONP){return this._forceJSONP=forceJSONP;};publisher.prototype.getForceJSONP=function(){return this._forceJSONP||false;};return client.prototype.setAutoDisconnect=function(autoDisconnectConfig){this._autoDisconnect=true;return this._autoDisconnectConfig=autoDisconnectConfig;};})();return fm.websync;}));