/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*! DOMTokenlist shim | Copyright 2016 Jonathan Wilsson and Bogdan Chadkin. */

/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */

/*!

	    Copyright (c) 2011 Peter van der Spek

	    Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:

	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.

	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.

	 */

/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */

/**
 * FastClick: Set up handling of fast clicks
 *
 * On touch WebKit (eg Android, iPhone) onclick events are usually 
 * delayed by ~300ms to ensure that they are clicks rather than other
 * interactions such as double-tap to zoom.
 *
 * To work around this, add a document listener which converts touches
 * to clicks on a global basis, excluding scrolls and gestures.  The 
 * default click events are then cancelled to prevent double-clicks.
 *
 * This function automatically adapts if no action is required (eg if 
 * touch events are not supported), and also handles functionality such
 * as preventing actions in the page while the section selector
 * is displaying.
 *
 * One alternative is to use ontouchend events for everything, but that
 * prevents non-touch interaction, and
 * requires checks everywhere to ensure that a touch wasn't a 
 * scroll/swipe/etc.
 *
 * ------
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject 
 * to the following conditions:
 * 
 * The below copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS 
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN 
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN 
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
 * SOFTWARE.
 *
 * @licence MIT License (http://www.opensource.org/licenses/mit-license.php)
 * @copyright (c) 2011 Assanka Limited
 * @author Rowan Beentje <rowan@assanka.net>, Matt Caruana Galizia <matt@assanka.net>
 */

/**
 * BxSlider v4.1 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */

/*!
	 * jQuery resize event - v1.1 - 3/14/2010
	 * http://benalman.com/projects/jquery-resize-plugin/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */

// Copyright (c) 2010 "Cowboy" Ben Alman,

// Dual licensed under the MIT and GPL licenses.

// http://benalman.com/about/license/

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

/**
* simplePagination.js v1.5
* A simple jQuery pagination plugin.
* http://flaviusmatis.github.com/simplePagination.js/
*
* Copyright 2012, Flavius Matis
* Released under the MIT license.
* http://flaviusmatis.github.com/license.html
*/

/*
 
 bootpag - jQuery plugin for dynamic pagination

 Copyright (c) 2013 botmonster@7items.com

 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php

 Project home:
   http://botmonster.com/jquery-bootpag/

 Version:  1.0.4

*/

Ndn_Require.define("models/Ndn/Widget/CssInjector",["jquery","underscore","require"],function(e,t,i){var n=["VideoPlayer/Inline","VideoPlayer/Inline590","VideoLauncher/Horizontal","VideoLauncher/VerticalTower"],o=_nw2e.appUrl,r={};return{isCssFileInjected:function(e){return!!r[e]},getCssFilesNeeded:function(e){var i=["NdnEmbed","NdnEmbed2"];return e&&t.contains(n,e)&&i.push("models/Ndn/Widget/"+e+"Model"),i},injectCssFiles:function(t){Ndn_Require.require(["models/Ndn/Widget"],e.proxy(function(i){if(i.isBuilt())for(var n=0;n<t.length;n++){var a=t[n],s=o+"/css/"+a+".css";this.isCssFileInjected(a)||(document.createStyleSheet?document.createStyleSheet(s):e("head").append('<link rel="stylesheet" type="text/css" href="'+s+'" />'),r[a]=!0)}else{for(var n=0;n<t.length;n++){var a=t[n],s=o+"/less/"+a+".less";this.isCssFileInjected(a)||(e("head").append('<link rel="stylesheet/less" type="text/css" href="'+s+'" />'),r[a]=!0)}e("head").append('<script src="'+o+'/js/lib/less.js"></script>')}},this))},injectCss:function(e){this.injectCssFiles(this.getCssFilesNeeded(e))}}}),Ndn_Require.define("models/Ndn/PlayerServices/Cache",["backbone","jquery"],function(e,t){var i,n={},o={};return{cachePlaylistData:function(e,i){if(e.playlistId){var o="undefined"==typeof n[e.playlistId]||!n[e.playlistId].isCompletelyLoaded&&n[e.playlistId].items.length<e.items.length;o&&(e.isCompletelyLoaded=e.items.length<i,n[e.playlistId]=e,t.each(e.items,t.proxy(function(e,t){this.cacheVideoData(t)},this)))}},getPlaylistData:function(e,t){return"undefined"!=typeof n[e]&&(n[e].isCompletelyLoaded||"undefined"==typeof t||n[e].items.length>=t)?n[e]:null},cacheVideoData:function(e){"undefined"==typeof o[e.videoId]&&(o[e.videoId]=e,i=e)},getLastCachedVideoData:function(){return i},getVideoData:function(e){return"undefined"!=typeof o[e]?o[e]:void 0},getCache:function(){return o}}}),Ndn_Require.define("models/Ndn/PlayerServices/Parser/DeliverySettings",["jquery","models/Ndn/Utils/UrlParser"],function(e,t){var i={"boolean":{slider_dfp_allowed:!0,launchModal:!1,analytics_chartbeat:!1,playOnInViewToggle:!1,promo_dfp:!1,promo_flexible:!1,secretMediaTimeoutUI:!1,rmmEarlyContent:!1,easi_flash_slider:!0,videojs:!1,bumper_inview:!0,thumbnails_inview:!1,da_html5_slider_d:!1,da_blacksheep:!1,da_premium:!1,rtk_d:!1,rtk_dfp:!0,rtk_nd:!1,force_html5_ui:!1,float_closeable:!1,single_972k_only:!1,strict_ad_mode:!0},integer:{rmm_cp:0,mma:-1,easiTimeout:20,floatPercent:40,muteInterval:0,pb_default:1,rmm_easi_attempts:2,da_inview_d:15,da_inview_nd:15,da_inline_d:15,da_inline_nd:15,da_slider_d:15,da_slider_nd:15,easi_t_inview_d:15,easi_t_inview_nd:15,easi_t_inline_d:15,easi_t_inline_nd:15,inview_version:1,inview_stp_percent:50,da_spree_d:0,da_spree_nd:0,slider_limit:-1},string:{adobe_analytics:"",da_override_d:"",da_override_nd:"",float_player:"",forceHtmlForSections:"",da_spree_pause:"0",rtk_d_auctionId:"",rtk_nd_auctionId:"",rtk_d_shortcode:"",rtk_nd_shortcode:""}},n={};e.each(i,function(t,i){e.each(i,function(e){n[e]=t})});var o=function(){var i={},o=t.getUrlParam("ndn_deliverySettings")||"",r=t.parseParams(o);return e.each(r,function(e,t){var o=n[e];o&&(i[e]=t)}),i}();return{parseSettings:function(t){var r={},a=this;return e.each(t,function(){var e=this.Name,t=n[e];"undefined"!=typeof t&&(r[e]=a.parseSettingValue(this.Value,t))}),e.each(n,function(e,t){"undefined"==typeof r[e]&&(r[e]=i[t][e])}),e.each(o,function(e,t){var i=n[e];i&&(r[e]=a.parseSettingValue(o[e],i))}),r},parseSettingValue:function(e,t){return"boolean"==t?"true"==e.toLowerCase()||"1"==e.toLowerCase():"integer"==t?parseInt(e):"string"==t?e:void 0}}}),Ndn_Require.define("models/Ndn/PlayerServices/Parser",["underscore","jquery","backbone","models/Ndn/App","models/Ndn/Utils/Helpers","models/Ndn/PlayerServices/Parser/DeliverySettings"],function(e,t,i,n,o,r){var a={parseResponse:function(i,o){var s,l=i.LandingURL&&"http://landing.newsinc.com/shared/video.html"!=i.LandingURL?i.LandingURL:"http://launch.newsinc.com/share.html",d=function(){var e=i.LandingPageAllowed?"studio":"popup";return"studio"==e||n.isEmbeddedByIframe()||t.each(i.DeliverySettings,function(){return"launchModal"==this.Name&&"true"==this.Value||n.getSetting("launchModalEmbeds")?(e="modal",!1):void 0}),e}(),c="studio"==d?l:"http://"+n.getAppDomain()+"/",u=r.parseSettings(i.DeliverySettings),p={playlists:{},associatedPlaylists:[],defaultConfig:{widgetId:i.WidgetID,trackingGroup:i.TrackingGroup,type:"VideoPlayer/Single","float":"default",siteSection:i.SiteSectionName,autoPlay:!i.DisableVideoPlayOnLoad,continuousPlay:i.ContinuousPlay,videoId:"",playlistId:"",adsEnabled:!i.DisableAds,rmmSoundOn:!1,playOnMouseover:!!i.PlayOnMouseover||!1,playOnInView:!1,hideWhenUnavailable:!1},launchToStudio:{enabled:i.LandingPageAllowed,url:i.LandingURL},settings:{behavior:{},deliverySettings:u,launcher:{behavior:d,landingPageUrl:c},share:{enabled:!i.DisableSocialNetworking&&!i.DisableSingleEmbed,mode:{email:!i.DisableSocialNetworking,social:!i.DisableSingleEmbed},directLinkLandingPageUrl:l},dfp:function(){function e(e){var t;return(t=e.match(/_(\d+)$/))?t[1]:void 0}var t,n=!1;return i.Dfp?(i.Dfp.Substituted?(n=!0,t={accountNumber:i.Dfp.Substituted.Account,adOwnershipGroupId:i.Dfp.Substituted.OwnershipGroup,adTrackingGroupId:i.Dfp.Substituted.TrackingGroup},t.adTrackingGroupId!=i.Dfp.Direct.TrackingGroup&&(t.unused={adTrackingGroupId:i.Dfp.Direct.TrackingGroup,adTrackingGroupNumber:e(i.Dfp.Direct.TrackingGroup)||"",reason:i.Dfp.SubstitutedReason||""})):t={accountNumber:i.Dfp.Direct.Account,adOwnershipGroupId:i.Dfp.Direct.OwnershipGroup,adTrackingGroupId:i.Dfp.Direct.TrackingGroup},t.adTrackingGroupNumber=e(t.adTrackingGroupId)||"",t.isSafeViralOverride=n,t.adCampaignId=t.adTrackingGroupNumber,t.defaultAdCampaignId=i.TrackingGroup,t):{}}(),analytics:{},ads:{enabled:!i.DisableAds,lkqd:{supplyIds:function(){return i.Lkqd&&i.Lkqd.LkqdDetails&&Array.isArray(i.Lkqd.LkqdDetails)?e.map(i.Lkqd.LkqdDetails,function(e){return{desktop:e.desktop_sid,nonDesktop:e.mobile_web_sid,wgtValue:e.launcher_type}}):[{desktop:(i.Lkqd||{}).desktop_sid,nonDesktop:(i.Lkqd||{}).mobile_web_sid,wgtValue:1}]}()},server:i.AdServer}},distributor:{name:i.DistributorName},siteSection:i.SiteSectionName},h=this.parsePlaylistsData(i.Playlists,o);return e.each(h,function(e){p.associatedPlaylists.push({id:e.playlistId,label:e.title}),e.items.length&&(s=e.playlistId,p.playlists[s]=e)}),p.defaultConfig.playlistId=s,function(t){e.each(i.Playlists,function(e){if(9999999==e.playlistid&&e.Contents[0]){for(var i=e.Contents[0],n=t.playlists[s].items,o=0;o<n.length;o++){var r=n[o];if(r.videoId==i.ContentID){t.videoIndex=o;break}}"undefined"==typeof t.videoIndex&&(t.videosData=t.videosData||[],t.videosData.push(a.parseVideoData(i)))}if(-1===e.playlistid)for(var o=0;o<e.Contents.length;o++){var i=e.Contents[o];t.videosData=t.videosData||[],t.videosData.push(a.parseVideoData(i))}})}(p),p},parsePlaylistsData:function(t,i){var n=[];return e.each(t,function(t){if(9999999!==t.playlistid){var i={playlistId:t.playlistid,title:t.Title,items:[]},o=e.sortBy(t.Contents,function(e){return e.ContentOrder});e.each(o,function(e){i.items.push(a.parseVideoData(e))}),n.push(i)}}),n},parseVideoData:function(t){for(var i={videoId:t.ContentID,videoTitle:this.stripStringOfHtml(t.Name),description:this.stripStringOfHtml(t.Description),providerVideoId:t.SourceGuid,antiKeywords:t.AKW,publishedOn:t.PubDate,hasDynamicStillImages:!1,mediaContent:[],subtitles:[],provider:{id:t.CPID,trackingGroup:t.ContentPartnerID,name:t.ProducerName,category:t.ProducerCategory,logoUrl:this.getAssetUrl("producerLogo",t.ProducerLogo)},settings:{share:{embedCode:{enabled:!!t.EmbedCodeAccessible}}}},o=[],r=0;r<t.Assets.length;r++){var s=t.Assets[r];if("src"==s.AssetType)o.push(s);else if("stillFrame"==s.AssetType)i.stillImageUrl=this.getAssetUrl("stillFrame",s.AssetLocation),i.stillImageXLUrl=i.stillImageXLUrl||i.stillImageUrl;else if("StillFrameXL"==s.AssetType)i.stillImageXLUrl=this.getAssetUrl("stillFrame",s.AssetLocation);else if("thumbnail"==s.AssetType)i.thumbnailUrl=this.getAssetUrl("thumbnail",s.AssetLocation);else if(e.contains(["closedcaption","smpte-tt","vtt"],s.AssetType)){var l="vtt"==s.AssetType?"text/vtt":"application/ttml+xml";i.subtitles.push({type:l,language:"en-us",url:this.getAssetUrl("subtitle",s.AssetLocation)})}else"kraken"==s.AssetType&&(i.hasDynamicStillImages=!0)}var d=e.sortBy(o,function(e){return e.AssetSortOrder}),c=function(){for(var e,t=0;t<d.length;t++)"video/progressive"==d[t].AssetMimeType&&(e=d[t].AssetLocation);return function(t){return"/"!=t.AssetLocation.charAt(0)?t.AssetLocation:"video/f4m"==t.AssetMimeType&&n.isOnSsl()?a.getAssetUrl("video/progressive",e):a.getAssetUrl(t.AssetMimeType,t.AssetLocation)}}();return i.mediaContent=e.map(d,function(e){return{type:"video/progressive"!=e.AssetMimeType?e.AssetMimeType:"video/mp4",medium:"video",duration:e.Duration,filesize:e.FileSize,url:c(e)}}),i.duration=i.mediaContent[0].duration,i.displayDuration=a.prettifyVideoDuration(i.mediaContent[0].duration),i},stripStringOfHtml:function(e){var t=/(<([^>]+)>)/gi;return e.replace(t,"")},getAssetUrl:function(e,t){return"/"!=t.charAt(0)?t:this.getAssetBaseUrl(e)+t},getAssetBaseUrl:function(e){var t={producerLogo:["http://assets.newsinc.com","https://assets-s.newsinc.com"],stillFrame:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],thumbnail:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],subtitle:["http://content.newsinc.com","https://content-s.newsinc.com"],"video/mp4":["http://content-mp4.newsinc.com","https://content-s.newsinc.com"],"application/x-mpeg":["http://ndn_mp4-vh.akamaihd.net","https://ndn_mp4-vh.akamaihd.net"],"application/x-mpegURL":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/f4m":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/x-flv":["rtmp://cp98516.edgefcs.net","rtmp://cp98516.edgefcs.net"],"video/progressive":["http://ndnmedia-a.akamaihd.net","https://ndnmedia-a.akamaihd.net"]};return"undefined"!=typeof t[e]?t[e][o.isOnSsl()?1:0]:void 0},prettifyVideoDuration:function(e){var t=parseInt(e,10);t=0>t?0:t;var i=Math.floor(t/60),n=i>59?n=Math.floor(i/60):n,o=t%60;return o=10>o?"0"+o:o,n>0&&"undefined"!=n?(i%=60,i=10>i?"0"+i:i,t=n+":"+i+":"+o):t=i+":"+o,t}};return a});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/PlayerServices",["jquery","underscore","require","models/Ndn/PlayerServices/Cache","models/Ndn/PlayerServices/Parser","models/Ndn/Utils/UrlParser","models/Ndn/Utils/Helpers","models/Ndn/App","models/Ndn/Debug","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a,s,l){var d={getBaseUrl:function(e){return"undefined"==typeof e&&(e=r.getUrlVar("ndn_playerServicesEnv")||""),e=e.replace(/[^A-Za-z0-9-_]/g,""),a.getHttpProtocol()+"//"+(e?e+"-":"")+"lps2.newsinc.com"},getEndpointUrl:function(e,t,i,n,o,r,a,l){var d=this.getBaseUrl(),c="&insid="+(s.getPageViewSessionId()||"")+"&uut="+(s.getUniqueUserId()||"")+"&embedIndex="+e+"&ver="+s.getBuild()+"&benv="+s.getEnv()+"&embedOriginUrl="+encodeURIComponent(s.getEmbedOriginUrl());if(a&&l)return d+"/player/show/"+a+"/"+l+"?trackingGroupId="+(i?i:"0")+"&widgetId="+(t?t:"0")+"&playlistId="+(n?n:"0")+c;var u=this.getItemLimit(r);return d+"/player/show/"+(i||"0")+"/"+(t||"0")+"/"+(n||"0")+"/"+(o||"0")+"/3"+(u?"/"+u:"")+"?d="+(new Date).getTime()+c},getPlaylistEndpointUrl:function(t){var i="undefined"==typeof t.environment?r.getUrlVar("ndn_playlistEnv")||"prod":t.environment;return _nw2e.protocol+"//feed-player-service."+i+".ndnops.com/api/player/videos?"+e.param({widget:t.configId,playlist:t.playlistId,trackingGroup:t.trackingGroup,video:t.videoId||0,device:0,limit:t.limit})},getItemLimit:function(e){return e&&40>=e?t.contains([1,3],e)||(e=e>15?40:15):e=null,e},fetch:function(t){var i=t.embedIndex,n=t.trackingGroup,r=t.configId,a=this.getItemLimit(t.playlistItemsLimit),s=t.playlistId,c=t.videoId,u=t.providerId,p=t.providerStoryId,h="undefined"!=typeof t.cacheData?t.cacheData:!0,g=this;return e.Deferred(function(t){e.when(e.ajax({type:"GET",url:g.getEndpointUrl(i,r,n,s,c,a,u,p),contentType:"json",dataType:"jsonp"}),g.fetchPlaylistData({parse:!1,configId:r,playlistId:s,trackingGroup:n,videoId:c,limit:a})).done(function(i,n){if("success"!=i[1]||!i[0]||!n)return t.reject();var r=i[0];l.log("playerServices","(fetch) responseData ==",r,"; playlistResponse ==",n),r.Playlists=n.playlists;var s=o.parseResponse(r,a);l.log("playerServices","(fetch) parsedResponse ==",s,"JSON ==",e.toJSON(s)),h&&d.cachePlaylistAndVideoData(s,a),t.resolve(s)}).fail(function(){t.reject({reason:u||p?"storyVideoUnavailable":""})})}).promise()},fetchPlaylistData:function(t){var i=this;return e.Deferred(function(n){e.ajax({type:"GET",url:i.getPlaylistEndpointUrl({configId:t.configId,playlistId:t.playlistId,trackingGroup:t.trackingGroup,videoId:t.videoId,limit:t.limit}),contentType:"application/json"}).done(function(e){if(l.log("playerServices","fetchPlaylistData, response ==",e),!t.parse)return n.resolve(e);var r=o.parsePlaylistsData(e.playlists,t.limit);i.cachePlaylistAndVideoData({playlists:r}),n.resolve(r)})}).promise()},cachePlaylistAndVideoData:function(t,i){e.each(t.playlists,function(){n.cachePlaylistData(this,i)}),t.videosData&&e.each(t.videosData,function(){n.cacheVideoData(this)})},getPlaylistData:function(t,i,o){l.log("playerServices","Ndn_PlayerServices.getPlaylistData(",arguments,");");var r=i.config,a="undefined"==typeof o?i.settings.behavior.playlistItemsLimit:0;return e.Deferred(e.proxy(function(i){var o=n.getPlaylistData(t,a);o?i.resolve(o):this.fetchPlaylistData({parse:!0,configId:r.widgetId,playlistId:t,trackingGroup:r.trackingGroup,limit:this.getItemLimit(a)}).done(e.proxy(function(){o=n.getPlaylistData(t,a),o?i.resolve(o):i.reject()},this)).fail(i.reject)},this)).promise()},getVideoData:function(t,i){var o=i.getConfig(),r=i.get("embedIndex");return e.Deferred(e.proxy(function(i){var a=n.getVideoData(t);a?i.resolve(a):this.fetch({embedIndex:r,trackingGroup:o.trackingGroup,configId:o.widgetId,playlistId:o.playlistId,playlistItemsLimit:1,videoId:t}).done(e.proxy(function(){a=n.getVideoData(t),a?i.resolve(a):i.reject()},this)).fail(i.reject)},this)).promise()}};return d}),Ndn_Require.define("models/Ndn/VideoFeeder",["underscore","jquery","backbone","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache"],function(e,t,i,n,o){var r=i.Model.extend({defaults:{videoData:null,playlistId:null,videoIndex:null,lastPlaylistId:null,playlistIndex:null,productSettings:null,playlists:null},initialize:function(e){this.set({productSettings:e.productSettings,playlists:e.playlists,playlistIndex:"undefined"!=typeof e.playlistIndex?e.playlistIndex:null,playlistId:"undefined"!=typeof e.playlistId?e.playlistId:null,videoIndex:"undefined"!=typeof e.videoIndex?e.videoIndex:null,videoData:"undefined"!=typeof e.videoData?e.videoData:null})},reset:function(){this.set({playlistIndex:null,playlistId:null,videoIndex:null,videoData:null})},getCurrentVideo:function(){return{playlistIndex:this.get("playlistIndex"),playlistId:this.get("playlistId"),videoIndex:this.get("videoIndex"),videoData:this.get("videoData")}},getPlaylistItemsFromCache:function(e){var t=this.get("playlists"),i=this.getPlaylistIdByIndex(e),n=t[e],r=n[1],a=i?o.getPlaylistData(i,r):t[0];if(i){var a=o.getPlaylistData(i,r);return a?a.items:null}return t[0]},getPlaylistIdByIndex:function(t){var i=this.get("playlists")[t];return i?e.contains(["undefined","object"],typeof i[0])?null:i[0]:!1},setCurrentVideo:function(e){this.set({playlistIndex:e.playlistIndex,playlistId:this.getPlaylistIdByIndex(e.playlistIndex),videoIndex:e.videoIndex,videoData:this.getPlaylistItemsFromCache(e.playlistIndex)[e.videoIndex]})},setNextVideo:function(e){if(!e||!e.playlistIndex&&!e.videoIndex)return this.reset();var t;if(e.videoIndex>0)t={playlistIndex:e.playlistIndex,videoIndex:e.videoIndex-1};else{if(0==e.playlistIndex)return this.reset();var i=this.getPlaylistItemsFromCache(e.playlistIndex-1);t={playlistIndex:e.playlistIndex-1,videoIndex:i.length-1}}this.setCurrentVideo(t)},getNextVideo:function(){var e=this;return this.peekNextVideo().always(function(t){e.set(t),e.trigger("videoFed",t)})},peekNextVideo:function(e){e=e||{};var i,r,a=e.currentVideo||this.getCurrentVideo();null===a.playlistIndex&&null===a.videoIndex?(r=this.getPlaylistItemsFromCache(0),i={playlistIndex:0,playlistId:this.getPlaylistIdByIndex(0),videoIndex:0,videoData:r&&r[0]}):(r=this.getPlaylistItemsFromCache(a.playlistIndex),i=r[a.videoIndex+1]?{playlistIndex:a.playlistIndex,playlistId:a.playlistId,videoIndex:a.videoIndex+1,videoData:r[a.videoIndex+1]}:{playlistIndex:a.playlistIndex+1,videoIndex:0});var s=this;return t.Deferred(function(e){if(i.videoData)return e.resolve(i);var t=s.get("playlists"),r=t[i.playlistIndex];if(!r)return e.reject();var a=r[1]||0,l=s.getPlaylistIdByIndex(i.playlistIndex);n.getPlaylistData(l,s.get("productSettings"),a).done(function(){var t=o.getPlaylistData(l);return i.playlistId=l,i.videoData=t.items[i.videoIndex],i.videoData?e.resolve(i):i.playlistId==lastPlaylistId?e.reject():void 0})}).promise()},peekNextVideos:function(e,i,n){n=n||[];var o=i||new r({productSettings:this.get("productSettings"),playlists:this.get("playlists"),playlistIndex:this.get("playlistIndex"),playlistId:this.get("playlistId"),videoIndex:this.get("videoIndex"),videoData:this.get("videoData")}),a=this;return t.Deferred(function(t){o.getNextVideo().done(function(i){n.push(i),e--,e?a.peekNextVideos(e,o,n).always(function(){t.resolve(n)}):t.resolve(n)}).fail(function(){t.resolve(n)})}).promise()}});return r}),Ndn_Require.define("models/Ndn/Viewer/Step",["jquery","backbone","models/Ndn/Debug"],function(e,t,i){return t.Model.extend({defaults:{viewer:null,stepName:null,currentStep:null,parentStep:null,sessions:null},initialize:function(e){this.set({viewer:e.viewer,stepName:e.stepName,parentStep:e.parentStep,sessions:[]}),"top"==e.stepName&&this.setCurrentStep(this)},start:function(){return i.inMode("steps")&&console.log("step"+this.get("stepName")+": START"),this.get("viewer").getSteps().getCurrentStep().recordStep(this),this},end:function(){return i.inMode("steps")&&console.log("step"+this.get("stepName")+": END"),this.setCurrentStep(this.getParentStep()),this},isRootStep:function(){return null===this.get("parentStep")},getRootStep:function(){return this.isRootStep()?this:this.getParentStep().getRootStep()},getParentStep:function(){return this.get("parentStep")},setParentStep:function(e){this.getParentStep()||this.set("parentStep",e)},setCurrentStep:function(e){this.isRootStep()?this.set("currentStep",e):this.getRootStep().setCurrentStep(e)},concludeAllSteps:function(){for(;!this.getCurrentStep().isRootStep();)this.getCurrentStep().end()},getCurrentStep:function(){return this.getRootStep().get("currentStep")},recordSession:function(e){this.get("sessions").push(e)},recordStep:function(e){e.setParentStep(this),this.get("sessions").push(e),this.setCurrentStep(e)},getData:function(){for(var e=[],t=this.get("sessions"),i=0;i<t.length;i++){var n=t[i];"number"==typeof n?e.push(n):e.push(n.getData())}return[this.get("stepName"),e]}})}),Ndn_Require.define("models/Ndn/Utils/DomElement",["jquery","models/Ndn/Debug"],function(e,t){var i={},n={},o=function(){var e=0;return function(){return"ndnDomElementCondition"+e++}}(),r=function(){var e=0;return function(){return"ndnDomElementConditionHandler"+e++}}();return{getFullHtml:function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},onceMeetsCondition:function(t,n,r,a){"undefined"==typeof r&&(r=o()),"undefined"==typeof a&&(a=500);var s=e(t);return e.Deferred(function(e){if(n(s))return e.resolve();if(s.data(r))i[r][s.data(r)].done(function(){e.resolve()});else{var t=setInterval(function(){n(s)&&(clearInterval(s.data(r)),s.removeData(r),e.resolve(),delete i[r][t])},a);i[r]=i[r]||{},i[r][t]=e,s.data(r,t)}}).promise()},onceMeetsConditionUponWindowEvents:function(t,i,a,s,l){"undefined"==typeof a&&(a=o()),"undefined"==typeof s&&(s="resize scroll"),"undefined"==typeof l&&(l=0);var d,c=e(t),u=null;return e.Deferred(function(t){if(c.data(a))n[a][c.data(a)].deferred.done(t.resolve);else{var o=r();d=function(){n[a][o]&&(e(window).off(s,n[a][o].handler),c.removeData(a),delete n[a][o])};var p=function(){if(i(c)){var n=e.now();!l||u&&n-u>=1e3*l?(d(),t.resolve()):(u=u||n,setTimeout(p,1e3*l))}else u=null};n[a]=n[a]||{};var h=n[a][o]={deferred:t,handler:p};c.data(a,o),e(window).on(s,h.handler),h.handler()}}).fail(d)},isInViewVertically:function(i,n){var o=e(i).offset().top,r=o+e(i).height(),a=r-o,s=e(window).scrollTop(),l=s+(window.innerHeight?window.innerHeight:e(window).height()),d=Math.floor(a*(n/100)),c=Math.max(o,s),u=Math.min(r,l),p=u-c;return t.log("isInView","visibleHeight ==",p," and minimumHeightVisibleToBeginPlayback ==",d),p>=d&&e(i).is(":visible")},onceIsInViewVertically:function(e,t,i){t=t||1e-7,i="undefined"!=typeof i?i:0;var n=this;return this.onceMeetsConditionUponWindowEvents(e,function(){return n.isInViewVertically(e,t)},"ndnOnceIsInViewVertically_"+t+"_"+i,"resize scroll",i)},onceVisible:function(e){return this.onceMeetsCondition(e,function(e){return e.is(":visible")},"isVisible")},onceHasWidthAndHeight:function(e){return this.onceMeetsCondition(e,function(e){return parseInt(e.width())&&parseInt(e.height())},"ndnWidthAndHeightInterval")}}}),function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof Ndn_Require.define&&Ndn_Require.define.amd?Ndn_Require.define("mustache",t):e.Mustache=t}(this,function(){function e(e,t){return A.call(e,t)}function t(t){return!e(g,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return E[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=e||{},this.parent=t,this._cache={}}function a(){this.clearCache()}function s(e,t,i,n){for(var o,r,a,l="",d=0,c=e.length;c>d;++d)switch(o=e[d],r=o[1],o[0]){case"#":if(a=i.lookup(r),"object"==typeof a)if(_(a))for(var u=0,p=a.length;p>u;++u)l+=s(o[4],t,i.push(a[u]),n);else a&&(l+=s(o[4],t,i.push(a),n));else if("function"==typeof a){var h=null==n?null:n.slice(o[3],o[5]);a=a.call(i.view,h,function(e){return t.render(e,i)}),null!=a&&(l+=a)}else a&&(l+=s(o[4],t,i,n));break;case"^":a=i.lookup(r),(!a||_(a)&&0===a.length)&&(l+=s(o[4],t,i,n));break;case">":a=t.getPartial(r),"function"==typeof a&&(l+=a(i));break;case"&":a=i.lookup(r),null!=a&&(l+=a);break;case"name":a=i.lookup(r),null!=a&&(l+=b.escape(a));break;case"text":l+=r}return l}function l(e){for(var t,i=[],n=i,o=[],r=0,a=e.length;a>r;++r)switch(t=e[r],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var s=o.pop();s[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function d(e){for(var t,i,n=[],o=0,r=e.length;r>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function c(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function u(e,n){function r(){if(N&&!I)for(;S.length;)delete C[S.pop()];else S=[];N=!1,I=!1}if(e=e||"",n=n||b.tags,"string"==typeof n&&(n=n.split(h)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var a,s,u,g,A,v=c(n),_=new o(e),E=[],C=[],S=[],N=!1,I=!1;!_.eos();){if(a=_.pos,u=_.scanUntil(v[0]))for(var w=0,T=u.length;T>w;++w)g=u.charAt(w),t(g)?S.push(C.length):I=!0,C.push(["text",g,a,a+1]),a+=1,"\n"==g&&r();if(!_.scan(v[0]))break;if(N=!0,s=_.scan(y)||"name",_.scan(p),"="===s?(u=_.scanUntil(f),_.scan(f),_.scanUntil(v[1])):"{"===s?(u=_.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),_.scan(m),_.scanUntil(v[1]),s="&"):u=_.scanUntil(v[1]),!_.scan(v[1]))throw new Error("Unclosed tag at "+_.pos);if(A=[s,u,a,_.pos],C.push(A),"#"===s||"^"===s)E.push(A);else if("/"===s){if(0===E.length)throw new Error('Unopened section "'+u+'" at '+a);var P=E.pop();if(P[1]!==u)throw new Error('Unclosed section "'+P[1]+'" at '+a)}else if("name"===s||"{"===s||"&"===s)I=!0;else if("="===s){if(n=u.split(h),2!==n.length)throw new Error("Invalid tags at "+a+": "+n.join(", "));v=c(n)}}var P=E.pop();if(P)throw new Error('Unclosed section "'+P[1]+'" at '+_.pos);return C=d(C),l(C)}var p=/\s*/,h=/\s+/,g=/\S/,f=/\s*=/,m=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,A=RegExp.prototype.test,v=Object.prototype.toString,_=Array.isArray||function(e){return"[object Array]"===v.call(e)},E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},r.make=function(e){return e instanceof r?e:new r(e)},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},a.prototype.clearCache=function(){this._cache={},this._partialCache={}},a.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=b.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},a.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},a.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},a.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var a in o)i.compilePartial(a,o[a]);return s(e,i,r.make(n),t)}},a.prototype.render=function(e,t,i){return this.compile(e)(t,i)};var b={};b.name="mustache.js",b.version="0.7.2",b.tags=["{{","}}"],b.Scanner=o,b.Context=r,b.Writer=a,b.parse=u,b.escape=n;var C=new a;return b.clearCache=function(){return C.clearCache()},b.compile=function(e,t){return C.compile(e,t)},b.compilePartial=function(e,t,i){return C.compilePartial(e,t,i)},b.compileTokens=function(e,t){return C.compileTokens(e,t)},b.render=function(e,t,i){return C.render(e,t,i)},b.to_html=function(e,t,i,n){var o=b.render(e,t,i);return"function"!=typeof n?o:void n(o)},b}()),Ndn_Require.define("models/Ndn/Viewer/ViewerModule",["jquery","underscore","backbone","models/Ndn/Enum/ViewerModuleId","models/Ndn/Debug"],function(e,t,i,n,o){return i.Model.extend({defaults:{viewer:null,isActive:null,isReady:null,sessionParams:null,state:null,containerElement:null,preEventListener:null,postEventListener:null,scheduleLog:null,originalScheduleLog:null,currentQuartile:null,moduleSessionIndex:null,isHalted:null,debugInfo:null},initialize:function(t){this.set({viewer:t.viewer,containerElement:t.containerElement,isActive:!1,isReady:!1,state:{},moduleSessionIndex:-1,preEventListener:new i.Model,postEventListener:new i.Model,debugInfo:{jqueryVersion:e.fn.jquery}}),this.maintainVisibility(),this.mantainState(),this.maintainScheduleLog(),this.manageEvents(),this.initializeEventProcessing(),this.surfaceEvents(t.eventsReceiver||this.getViewer())},manageEvents:function(){var e=this,i=this.getPreEventListener(),n=this.getPostEventListener();i.on({"adRequest adLoad adStart":function(){e.trigger("adPlayerStart")},videoStart:function(){e.isAdPlayerEnabled()&&e.trigger("adPlayerEnd")},viewerModuleEnd:function(){e.isContentPlayerEnabled()||e.trigger("adPlayerEnd")}}),i.on({videoStart:function(){e.isContentPlayerEnabled()||e.endSession()}}),n.on({videoEnd:function(){return e.isContentPlayerEnabled()?e.endSession():void 0}}),function(){function o(t){e.set("currentQuartile",t);var i=e.getSessionParams();e.trigger(e.isShowingAdPlayer()?"adQuartile":"videoQuartile",{quartile:t,currentTime:100==t?e.getDuration():e.getCurrentTime(),playerWidth:e.getContainerElement().width(),playerHeight:e.getContainerElement().height(),videoData:i.videoData,cpvNumber:i.cpvNumber})}i.on({"adEnd videoEnd":function(){o(100)}}),n.on({"adStart videoStart":function(){o(0)},"adTimeUpdate videoTimeUpdate":function(){var i=Math.floor(e.getCurrentTime()/e.getDuration()*100);t.contains([25,50,75],i)&&i>e.get("currentQuartile")&&o(i)}})}()},getPreEventListener:function(){return this.get("preEventListener")},getPostEventListener:function(){return this.get("postEventListener")},maintainScheduleLog:function(){var t={adRequest:"adRequests",adEnd:"adsPlayed",videoEnd:"videosCompleted"},i=this;e.each(t,function(e,t){i.on(e,function(){i.incrementScheduleItem(t)})})},maintainVisibility:function(){this.on({viewerModuleStart:function(){this.getContainerElement().show()},viewerModuleEnd:function(){}})},incrementScheduleItem:function(e){var t=this.getScheduleLog(),i={};i[e]=(t[e]||0)+1,this.updateScheduleLog(i)},onBadEvent:function(e){o.inMode("unexpectedEvents")&&console.log("[Ndn_Viewer_ViewerModule UNEXPECTED EVENT] "+e+(this.isActive()?"":" (inactive)"))},onResize:function(){},initializeEventProcessing:function(){var e=this.trigger,i=this,n=this.getViewer(),r=this.getPreEventListener(),a=this.getPostEventListener();this.trigger=function(s,l){var d=i.getModuleSessionIndex();o.inMode("attemptedEvents")&&console.log("[Ndn_Viewer_ViewerModule ATTEMPTED EVENT] "+s);var c=function(e){i.onBadEvent(e)};if(!i.isActive()&&"ready"!=s)return c(s);var u={viewerModuleStart:function(){return i.isSessionActive()},adPlayerStart:function(){return i.isShowingAdPlayer()},adPlayerEnd:function(){return!i.isShowingAdPlayer()},videoStart:function(){return i.isShowingVideo()},adStart:function(){return i.isShowingAd()},adEnd:function(){return!i.isShowingAd()},videoEnd:function(){return!i.isShowingVideo()},videoTimeUpdate:function(){return!i.isShowingVideo()||!i.isPlaying()},adTimeUpdate:function(){return!i.isShowingAd()||!i.isPlaying()},videoPause:function(){return!i.isShowingVideo()||!i.isPlaying()},adPause:function(){return!i.isShowingAd()||!i.isPlaying()},videoResume:function(){return!i.isShowingVideo()||i.isPlaying()},adResume:function(){return!i.isShowingAd()||i.isPlaying()}};return"undefined"!=typeof u[s]&&u[s]()?c(s):(n&&(l=t.extend({viewer:t.extend(n.getViewerEventData(),{moduleSessionIndex:d,sessionLog:i.getScheduleLog()})},l||{})),d==i.getModuleSessionIndex()&&r.trigger(s,l),d==i.getModuleSessionIndex()&&e.apply(i,[s,l]),void(d==i.getModuleSessionIndex()&&a.trigger(s,l)))}},getSessionLog:function(){var i=t.extend({},this.get("originalScheduleLog")),n=this.getScheduleLog(),o={};return e.each(n,function(e,t){var r=i[e]||0,a=n[e];o[e]=a-r}),o},getScheduleLog:function(){return this.get("scheduleLog")||{}},updateScheduleLog:function(e){var i=this.get("scheduleLog");i&&(i=t.extend(i,e),this.set("scheduleLog",i))},toggleAdPlayer:function(e){this.set("adPlayerEnabled",e)},toggleContentPlayer:function(e){this.set("contentPlayerEnabled",e)},isAdPlayerEnabled:function(){return this.get("adPlayerEnabled")},isContentPlayerEnabled:function(){return this.get("contentPlayerEnabled")},applySessionDefaults:function(e,i){var n=t.extend(i,e);t.extend(e,n)},startSession:function(e,i){this.set({isActive:!0,sessionParams:e,scheduleLog:i,originalScheduleLog:t.extend({},i),state:{},moduleSessionIndex:this.getModuleSessionIndex()+1}),this.trigger("viewerModuleStart")},getSessionParams:function(){return this.get("sessionParams")},makeSessionClosure:function(e){var t=this.getViewer(),i=t.getSessionIndex();return function(){return t.getSessionIndex()==i?e.apply(this,arguments):void 0}},isActive:function(){return this.get("isActive")},halt:function(){this.set("isHalted",!0),this.endSession()},endSession:function(){if(this.isActive()){var e=this.getViewer();e&&e.logSession(this.getSessionLog()),
this.trigger("viewerModuleEnd",{halted:this.get("isHalted")})}},toggleReady:function(e){this.set("isReady",e),this.trigger(e?"ready":"unready")},isReady:function(){return this.get("isReady")},onceReady:function(e){this.isReady()?e():this.once("ready",function(){e()})},getContainerElement:function(){return this.get("containerElement")},updateState:function(e){this.set("state",t.extend({},this.getState(),e))},getState:function(){return this.get("state")},isShowingVideo:function(){return this.getState().isShowingVideo},isShowingAd:function(){return this.getState().isShowingAd},isPlaying:function(){return this.getState().isPlaying},isPlayingVideo:function(){return this.isPlaying()&&this.isShowingVideo()},isPlayingAd:function(){return this.isPlaying()&&this.isShowingAd()},isShowingAdPlayer:function(){return this.getState().isShowingAdPlayer},isSessionActive:function(){return this.getState().isSessionActive},mantainState:function(){this.on({viewerModuleStart:function(){this.updateState({isSessionActive:!0})},adPlayerStart:function(){this.updateState({isShowingAdPlayer:!0})},adPlayerEnd:function(){this.updateState({isShowingAdPlayer:!1})},videoStart:function(){this.updateState({isShowingVideo:!0,isShowingAd:!1,isPlaying:!0})},adStart:function(){this.updateState({isShowingVideo:!1,isShowingAd:!0,isPlaying:!0})},adEnd:function(){this.updateState({isShowingAd:!1,isPlaying:!1})},videoEnd:function(){this.updateState({isShowingVideo:!1,isPlaying:!1})},"adPause videoPause":function(){this.updateState({isPlaying:!1})},"adResume videoResume":function(){this.updateState({isPlaying:!0})},"viewerModuleStart viewerModuleEnd":function(){this.updateState({isAdPlayerShowing:!1,isShowingVideo:!1,isShowingAd:!1,isPlaying:!1})},viewerModuleEnd:function(){this.updateState({isActive:!1,isSessionActive:!1})}})},getModuleSessionIndex:function(){return this.get("moduleSessionIndex")},surfaceEvents:function(t){var i=this;if(t){var n=["viewerModuleStart","adPlayerStart","adRequest","adLoad","adStart","adPause","adResume","adTimeUpdate","adTimeout","adEnd","adError","adUnavailable","adCompanion","adPlayerEnd","adMute","adUnmute","adQuartile","debugInfo","error","playerStart","playerInView","thumbnailClickthrough","playerLoad","videoLoad","fullscreenStart","fullscreenEnd","click","volumeUpdate","videoQuartile","videoStartRequest","videoStart","videoPause","videoResume","videoTimeUpdate","videoEnd","viewerModuleEnd"];e.each(n,function(){var e=this+"";i.on(e,function(n){(i.isActive()||"viewerModuleEnd"==e)&&("viewerModuleEnd"==e&&i.set("isActive",!1),t.trigger(e,n))})})}},getViewer:function(){return this.get("viewer")},debug:function(e,i){this.set("debugInfo",t.extend(this.getDebugInfo(),e)),i&&this.trigger("debugInfo",this.getDebugInfo())},getDebugInfo:function(){return this.get("debugInfo")},pause:function(){},play:function(){},getPlaybackMode:function(){},getCurrentTime:function(){},getDuration:function(){}},{viewerModuleId:n.UNKNOWN})}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/display-ad.html",[],function(){return"<!doctype html>\n<html>\n<head></head>\n<body style=\"margin:0;\">\n<script type=\"text/javascript\">\n    rp_account   = '13402';\n    rp_site      = '{{site}}';\n    rp_zonesize  = '{{zonesize}}';\n    rp_adtype    = 'js';\n    rp_smartfile = '[SMART FILE URL]';\n    rp_page = '{{embedOriginUrl}}';\n    rp_kw = '{{kw}}';\n</script>\n<script type=\"text/javascript\" src=\"{{httpProtocol}}//ads.rubiconproject.com/ad/13402.js\"></script>\n</body>\n</html>"}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/DisplayAd",["jquery","mustache","models/Ndn/App","models/Ndn/Viewer/ViewerModule","models/Ndn/Debugger","models/Ndn/Utils/DomElement","models/Ndn/Utils/Helpers","text!templates/ndn/viewer/viewer-module/display-ad.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a,s){var l=(o.inMode("displayAd"),n.extend({defaults:{duration:null},initialize:function(e){n.prototype.initialize.apply(this,arguments),o.inMode("adPlayer")&&this.on("all",function(e){console.log("Ndn_Ads_DisplayAd event: "+e)}),this.createIframe(),this.toggleAdPlayer(!0)},createIframe:function(){var t=300,i=250,n=document.createElement("iframe");n.scrolling="no",n.style.overflow="hidden",n.style.width=t+"px",n.style.height=i+"px",n.style.border="0",n.style.background="transparent none",e(n).attr("allowTransparency","true"),e(n).addClass("ndn_easiPlayer"),n.onload=function(){n.onload=null},this.getContainerElement().get(0).appendChild(n),this.set("iframeElement",n),this.debug({iframeElementHtml:r.getFullHtml(n)})},getDuration:function(){return this.get("duration")},getCurrentTime:function(){return 0},startSession:function(e){n.prototype.startSession.apply(this,arguments);var t=e.duration,i=l.generateCode(e),o=this.get("iframeElement").contentDocument;if(o.open(),o.write(i),o.close(),this.debug({iframeContent:i},!0),this.trigger("adRequest",{receivedData:{},playerInstanceType:6}),this.trigger("adStart",{}),this.set("duration",t),t>0){var r=this;setTimeout(this.makeSessionClosure(function(){r.trigger("adEnd"),r.endSession()}),1e3*t)}}},{generateCode:function(e){var i="undefined"!=typeof e.isHtml5?e.isHtml5:!e.isDesktop,n=function(){return e.isBlacksheep?i?"585612-15":"585610-15":e.isPremium?i?"521826-15":"522378-15":i?"391318-15":"429502-15"}(),o=i?83422:91234;return o=e.site||o,n=e.zonesize||n,t.to_html(s.replace(/\{\{embedOriginUrl\}\}/g,e.embedOriginUrl),{site:o,zonesize:n,kw:e.pltValue+"-"+e.adCampaignId,httpProtocol:a.getHttpProtocol()})}}));return l}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/lkqd-rmm.html",[],function(){return'<html>\n<head>\n<title>LKQD RMM</title>\n</head>\n<body style="margin:0;">\n<div id="informcontainer3"></div>\n<script>\nfunction lkqdComplete() {\n    window.parent.{{closures.onComplete}}();\n}\n</script>\n<script playerformatembed="true" async src="{{httpProtocol}}//ad.lkqd.net/vpaid/inform.js">\n(function() {\n    var config =  {\n        sid: {{supplyId}}, // 128417,\n        experience: "rmm",\n        containerId: "informcontainer3",\n        width: {{playerWidth}},\n        height: {{playerHeight}},\n        volume: 0,\n        support: "{{support}}",\n        vpaidPriority: "html5",\n        videoContentURL: "{{videoUrl}}", // http://informmediap-a.akamaihd.net/delivery/61/bd/61bdb2a4-5e70-4bc8-903b-d8c44e4f7e2c/7be93b60-0c65-485c-a6b2-0da1c900153a_1572k.mp4?t=1496516640\n        wgt: "{{wgtValue}}",\n        plt: "{{pltValue}}",\n        pb: "{{pbValue}}",\n        fp: "{{foldPositionId}}",\n        cp: "{{isContinuousPlay}}",\n        cpvnum: "{{cpvNumber}}",\n        vs: "{{videoSizeId}}",\n        sitesection: "{{siteSection}}",\n        sec: "{{siteSectionSection}}",\n        sub: "{{siteSectionSubSection}}",\n        pt: "{{siteSectionPageType}}",\n        dpid: "{{trackingGroup}}",\n        vt: "{{videoType}}",\n        plid: "{{playlistId}}",\n        assetid: "{{videoAssetId}}",\n        modal: "{{isModal}}",\n        lat: "",\n        akw: "{{antiKeywords}}",\n        ordpid: "{{overriddenTrackingGroup}}",\n        wid: "{{configId}}",\n        cpid: "{{contentProviderId}}",\n        ver: "{{buildNumber}}",\n        exturl: "{{embedOriginUrl}}",\n        pit: "",\n        pvid: "",\n        adserver: "lkqd",\n        distributorName: "{{distributorName}}",\n        providerName: "{{providerName}}",\n        supportMode: "{{strictAdMode}}",\n        videoContentMinMs: 4000,\n        videoContentMaxMs: 6000,\n        displayAdMinMs: 2500,\n        displayAdHTML: "{{displayAdHtml}}"\n    };\n    return config;\n})();\n</script>\n</body>\n</html>'}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/LkqdRmm",["jquery","underscore","mustache","models/Ndn/App","models/Ndn/Debug","models/Ndn/Viewer/ViewerModule","models/Ndn/Viewer/ViewerModule/DisplayAd","models/Ndn/Utils/DomElement","models/Ndn/Utils/Helpers","models/Ndn/Enum/ViewerModuleId","text!templates/ndn/viewer/viewer-module/lkqd-rmm.html"],function(e,t,i,n,o,r,a,s,l,d,c){var u=o.logger("lkqdRmm"),p=r.extend({defaults:{moduleId:"lkqdRmm",iframeElement:null,debugInfo:null},startSession:function(e){r.prototype.startSession.apply(this,arguments),this.prepareSession(e)},prepareSession:function(t){this.toggleReady(!1);var i=this;return e.Deferred(function(e){i.onceReady(e.resolve),i.initializeDom(),i.initializeIframeContent(t),i.trigger("adStart")}).promise()},initializeDom:function(){var t=this.getContainerElement(),i=t.width(),n=t.height(),o=function(){var o=document.createElement("iframe");return o.scrolling="no",o.style.overflow="hidden",o.style.width=i+"px",o.style.height=n+"px",o.style.border="0",e(o).attr("allowTransparency","true"),e(o).addClass("ndn_lkqdPlayer"),t.html("").append(o),o}(),r=this;o.onload=function(){r.toggleReady(!0),o.onload=null},o.onerror=function(){o.onerror=null},this.set("iframeElement",o),this.debug({iframeElementHtml:s.getFullHtml(o)})},initializeIframeContent:function(e){var t=this.get("iframeElement"),i=this.getIframeContent(e),n=t.contentDocument;n.open(),n.write(i),n.close(),this.debug({iframeContent:i},!0)},getIframeContent:function(t){var n=this.getContainerElement(),r=this.getIframeClosures(),a=function(){var i,n=0;return e.each(t.videoData.mediaContent,function(e,t){"video/mp4"==t.type&&(!i||0!==t.filesize&&t.filesize<n)&&(i=t.url,n=t.filesize)}),u("Video URL: ",i,"Video Filesize:",n),i}(),s=t.videoData||{},d=i.to_html(c.replace(/\{\{embedOriginUrl\}\}/g,t.embedOriginUrl).replace(/\{\{displayAdHtml\}\}/g,encodeURIComponent(t.displayAdHtml)).replace(/\{\{videoUrl\}\}/g,a),{distributorName:t.distributorName,providerName:t.providerName,supplyId:t.supplyId||0,playerWidth:n.width(),playerHeight:n.height(),wgtValue:t.wgtValue,pltValue:t.pltValue,pbValue:t.pbValue,foldPositionId:t.foldPositionId,isContinuousPlay:t.isContinuousPlay?1:0,cpvNumber:t.cpvNumber,videoSizeId:t.videoSizeId,siteSection:t.siteSection,siteSectionSection:t.siteSectionSection,siteSectionSubSection:t.siteSectionSubSection,siteSectionPageType:t.siteSectionPageType,trackingGroup:t.trackingGroup,videoType:t.videoType,playlistId:t.playlistId,videoAssetId:t.videoAssetId,isModal:t.isModal?1:0,videoLoadIndex:t.videoLoadIndex,deviceTypeId:t.deviceTypeId,adBlockDetectionId:t.adBlockDetectionId,antiKeywords:s.antiKeywords,overriddenTrackingGroup:t.overriddenTrackingGroup,configId:t.configId,contentProviderId:t.contentProviderId,pageViewSessionId:t.pageViewSessionId,embedIndex:t.embedIndex,buildNumber:t.buildNumber,analyticsTimelineEventIndex:t.analyticsTimelineEventIndex,support:t.allowFlash?"html5flash":"html5",strictAdMode:t.strictAdMode?"strict":"",closures:r,httpProtocol:l.getHttpProtocol()});return o.log("lkqd","iframeContent ==",d),this.debug({iframeContent:d,instructions:function(){var t=["var _nw2e = _nw2e || [];","_nw2e.closures = _nw2e.closures || {};"];return e.each(r,function(e,i){t.push(i+' = function() { console.log("'+e+'", arguments); };')}),t}()}),d},getIframeClosures:function(){function e(e){return n.makeClosureGlobal(t.makeSessionClosure(e))}var t=this;return{onComplete:e(function(e){u("[Ndn_Viewer_ViewerModule_LkqdRmm] onComplete ",e),t.endSession()})}},getDuration:function(){return 0},endSession:function(){r.prototype.endSession.apply(this,arguments)}},{viewerModuleId:d.LKQD_RMM});return p}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/lkqd.html",[],function(){return"<html>\n<head>\n    <title>LKQD</title>\n</head>\n<body style=\"margin:0;\">\n    <div id=\"informcontainer3\"></div>\n    <script>\n        window.config = {{config}};\n        window.config.lkqdContainer = document.getElementById('informcontainer3');\n        \n        function onAdQuartile(quartile) {\n            return function() {\n                window.parent.{{closures.onAdQuartile}}({ quartile: quartile });\n            };\n        }\n\n        // Initialize LKQD events\n        addEventListener('lkqdLoaded', function() {\n            var promoLkqdController = getComms();\n            window._promoLkqdController = promoLkqdController;\n			promoLkqdController.subscribe(window.parent.{{closures.onAdImpression}}, 'AdImpression');\n            promoLkqdController.subscribe(window.parent.{{closures.onAdComplete}}, 'AdComplete');\n            // promoLkqdController.subscribe(onAdQuartile(0), 'AdVideoStart');\n            promoLkqdController.subscribe(onAdQuartile(25), 'AdVideoFirstQuartile');\n            promoLkqdController.subscribe(onAdQuartile(50), 'AdVideoMidpoint');\n            promoLkqdController.subscribe(onAdQuartile(75), 'AdVideoThirdQuartile');\n            // promoLkqdController.subscribe(onAdQuartile(100), 'AdVideoComplete');\n            promoLkqdController.subscribe(window.parent.{{closures.onComplete}}, 'AdStopped');\n            \n            window.parent.{{closures.onAdPlayerLoaded}}();\n\n            if (window._autostart) {\n                startAd();\n            }\n        });\n\n        // Starts ad using LKQD's controller\n        function startAd() {\n            // console.log('[lkqd]', 'startAd()', window.config);\n            \n            var promoLkqdController = window._promoLkqdController;\n\n            // console.log('[lkqd]', 'startAd(), window._promoLkqdController ==', window._promoLkqdController);\n            \n            if (promoLkqdController) {\n                promoLkqdController.startAd();\n            } else {\n                // Controller isn't ready yet. Use the event listener to start ad when the controller is ready.\n                window._autostart = true;\n            }\n        }\n\n        function resizeAd(width, height, mode) {\n            // console.log('[lkqd]', 'resizeAd()', width, height, mode);\n            window._promoLkqdController.resizeAd(width, height, mode);\n        }\n    </script>\n    <script playerformatembed=\"true\" async src=\"{{httpProtocol}}//ad.lkqd.net/vpaid/informpromo.js\"></script>\n</body>\n</html>"}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Lkqd",["jquery","underscore","mustache","models/Ndn/App","models/Ndn/Debug","models/Ndn/Viewer/ViewerModule","models/Ndn/Utils/DomElement","models/Ndn/Utils/Helpers","text!templates/ndn/viewer/viewer-module/lkqd.html"],function(e,t,i,n,o,r,a,s,l){o.inMode("lkqd");return r.extend({defaults:{moduleId:"lkqd",iframeElement:null,debugInfo:null},initialize:function(){r.prototype.initialize.apply(this,arguments);var e,t=this;this.on({viewerModuleStart:function(){var i=t.getSessionParams().playOnInView;e=a.onceIsInViewVertically(t.getContainerElement(),i.percentage,i.delay).done(function(){t.startAd()})},viewerModuleEnd:function(){e.reject()}})},startSession:function(e){r.prototype.startSession.apply(this,arguments),this.prepareSession(e)},prepareSession:function(t){this.toggleReady(!1);var i=this;return e.Deferred(function(e){i.onceReady(e.resolve),i.initializeDom(),i.initializeIframeContent(t)}).promise()},initializeDom:function(){var t=this.getContainerElement(),i=t.width(),n=t.height(),o=function(){var o=document.createElement("iframe");return o.scrolling="no",o.style.overflow="hidden",o.style.width=i+"px",o.style.height=n+"px",o.style.border="0",o.style.position="absolute",o.style.top="0",e(o).attr("allowTransparency","true"),e(o).addClass("ndn_lkqdPlayer"),t.append(o),o}(),r=this;o.onload=function(){r.toggleReady(!0),o.onload=null},o.onerror=function(){o.onerror=null},this.set("iframeElement",o),this.debug({iframeElementHtml:a.getFullHtml(o)})},initializeIframeContent:function(e){var t=this.get("iframeElement"),i=this.getIframeContent(e),n=t.contentDocument;n.open(),"undefined"==typeof n.write&&(n.write=HTMLDocument.prototype.write),n.write(i),n.close(),this.debug({iframeContent:i},!0)},getIframeContent:function(n){var o,r=this.getContainerElement(),a=this.getIframeClosures(),d=t.extend({},n.config,{width:r.width(),height:r.height()});return o=i.to_html(l.replace(/\{\{embedOriginUrl\}\}/g,n.embedOriginUrl).replace(/\{\{config\}\}/g,e.toJSON(d)).replace(/\{\{displayAdHtml\}\}/g,encodeURIComponent(n.displayAdHtml)),{closures:a,httpProtocol:s.getHttpProtocol()}),this.debug({iframeContent:o,instructions:function(){var t=["var _nw2e = _nw2e || [];","_nw2e.closures = _nw2e.closures || {};"];return e.each(a,function(e,i){t.push(i+' = function() { console.log("'+e+'", arguments); };')}),t}()}),o},getIframeClosures:function(){function e(e){return n.makeClosureGlobal(t.makeSessionClosure(e))}var t=this;return{onAdImpression:e(function(e){e=e||{},t.trigger("adLoad",{adTag:e.requestURL,receivedData:e}),t.trigger("adStart",{adTag:e.requestURL,receivedData:e})}),onAdComplete:e(function(e){e=e||{},t.trigger("adEnd",{adTag:e.requestURL,receivedData:e})}),onAdPlayerLoaded:e(function(){t.toggleReady(!0)}),onAdQuartile:e(function(e){t.trigger("adQuartile",{quartile:e.quartile})}),onComplete:e(function(){t.endSession()})}},startAd:function(){var e={};this.trigger("adRequest",{adTag:e.requestURL,receivedData:e});var t=this;this.onceReady(function(){t.get("iframeElement").contentWindow.startAd()})},getDuration:function(){return 0},endSession:function(){r.prototype.endSession.apply(this,arguments)}})}),Ndn_Require.define("lib/secret-media",[],function(){return function(Aa,F,Ba){function Ca(e,t){function i(){}i.prototype=e;var n,o=new i;for(n in t)o[n]=t[n];return t.toString!==Object.prototype.toString&&(o.toString=t.toString),o}function Ia(e){return e instanceof Array?function(){return l.iter(e)}:"function"==typeof e.iterator?G(e,e.iterator):e.iterator}function G(e,t){if(null==t)return null;null==t.__id__&&(t.__id__=Ja++);var i;return null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=function(){return i.method.apply(i.scope,arguments)},i.scope=e,i.method=t,e.hx__closures__[t.__id__]=i),i}F.secretmedia=F.secretmedia||{},F.secretmedia.pptjs=F.secretmedia.pptjs||{},F.secretmedia.asbridge=F.secretmedia.asbridge||{},F.secretmedia.sdk=F.secretmedia.sdk||{};var I=function(){return m.__string_rec(this,"")},X=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};X.__name__=!0,X.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},__class__:X};var q=function(){};q.__name__=!0,q.urlEncode=function(e){return encodeURIComponent(e)},q.startsWith=function(e,t){return e.length>=t.length&&l.substr(e,0,t.length)==t},q.endsWith=function(e,t){var i=t.length,n=e.length;return n>=i&&l.substr(e,n-i,i)==t},q.isSpace=function(e,t){var i=l.cca(e,t);return i>8&&14>i||32==i},q.ltrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,i);)i++;return i>0?l.substr(e,i,t-i):e},q.rtrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,t-i-1);)i++;return i>0?l.substr(e,0,t-i):e},q.trim=function(e){return q.ltrim(q.rtrim(e))},q.replace=function(e,t,i){return e.split(t).join(i)},q.hex=function(e,t){var i="",n=d.unmangle("_229");do i=n.charAt(15&e)+i,e>>>=4;while(e>0);if(null!=t)for(;i.length<t;)i="0"+i;return i},q.fastCodeAt=function(e,t){return e.charCodeAt(t)};var l=function(){};l.__name__=!0,l.cca=function(e,t){var i=e.charCodeAt(t);return i!=i?void 0:i},l.substr=function(e,t,i){return null!=t&&0!=t&&null!=i&&0>i?"":(null==i&&(i=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>i&&(i=e.length+i-t),e.substr(t,i))},l.indexOf=function(e,t,i){var n=e.length;for(0>i&&(i+=n,0>i&&(i=0));n>i;){if(e[i]===t)return i;i++}return-1},l.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var pa=function(){};pa.__name__=!0;var Da=function(){};Da.__name__=!0,Da.exists=function(e,t){for(var i=Ia(e)();i.hasNext();){var n=i.next();if(t(n))return!0}return!1};var la=function(){this.length=0};la.__name__=!0,la.prototype={iterator:function(){return new fa(this.h)},__class__:la};var fa=function(e){this.head=e,this.val=null};fa.__name__=!0,fa.prototype={hasNext:function(){return null!=this.head},next:function(){return this.val=this.head[0],this.head=this.head[1],this.val},__class__:fa};var Fa={__name__:!0,_1:function(e,t){var i=d.unmangle("_1");return e[i](t)},_2:function(e,t,i){var n=d.unmangle("_2");e[n](t,i)}};Math.__name__=!0;var t=function(){};t.__name__=!0,t.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.field=function(e,t){try{return e[t]}catch(i){return i instanceof n&&(i=i.val),null}},t.setField=function(e,t,i){e[t]=i},t.callMethod=function(e,t,i){return t.apply(e,i)};var k=function(){};k.__name__=!0,k.string=function(e){return m.__string_rec(e,"")},k.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=l.cca(e,1)&&88!=l.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},k.random=function(e){return 0>=e?0:Math.floor(Math.random()*e)};var N=function(){};N.__name__=!0;var ga=function(e){this.url=e,this.headers=new la,this.params=new la,this.async=!0};ga.__name__=!0,ga.prototype={setPostData:function(e){return this.postData=e,this},cancel:function(){null!=this.req&&(this.req.abort(),this.req=null)},request:function(e){var t=this;t.responseData=null;var i=this.req=J.createXMLHttpRequest(),o=function(e){if(4==i.readyState){var o;try{o=i.status}catch(r){r instanceof n&&(r=r.val),o=null}if(null!=o&&(e=window.location.protocol.toLowerCase(),new X("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(e)&&(o=null!=i.responseText?200:404)),void 0==o&&(o=null),null!=o&&t.onStatus(o),null!=o&&o>=200&&400>o)t.req=null,t.onData(t.responseData=i.responseText);else if(null==o)t.req=null,t.onError("Failed to connect or resolve host");else switch(o){case 12029:t.req=null,t.onError("Failed to connect to host");break;case 12007:t.req=null,t.onError("Unknown host");break;default:t.req=null,t.responseData=i.responseText,t.onError("Http Error #"+i.status)}}};this.async&&(i.onreadystatechange=o);var r=this.postData;if(null!=r)e=!0;else for(var a=new fa(this.params.h);null!=a.head;){var s;a.val=a.head[0],a.head=a.head[1],s=a.val,r=null==r?"":r+"&",r+=encodeURIComponent(s.param)+"="+encodeURIComponent(s.value)}try{if(e)i.open("POST",this.url,this.async);else if(null!=r){var l=1>=this.url.split("?").length;i.open("GET",this.url+(l?"?":"&")+r,this.async),r=null}else i.open("GET",this.url,this.async)}catch(d){return d instanceof n&&(d=d.val),t.req=null,void this.onError(d.toString())}for(!Da.exists(this.headers,function(e){return"Content-Type"==e.header})&&e&&null==this.postData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e=new fa(this.headers.h);null!=e.head;)e.val=e.head[0],e.head=e.head[1],a=e.val,i.setRequestHeader(a.header,a.value);i.send(r),this.async||o(null)},onData:function(e){},onError:function(e){},onStatus:function(e){},__class__:ga};var qa=function(e,t){this.high=e,this.low=t};qa.__name__=!0,qa.prototype={__class__:qa};var h=function(){};h.__name__=!0,h.trace=function(e,t){m.__trace(e,t)};var ha=function(){};ha.__name__=!0,ha.getString=function(e){for(var t=0,i=ha.content;t<i.length;){var n=i[t];if(++t,n.name==e)return null!=n.str?n.str:A.decode(n.data).toString()}return null};var Y=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};Y.__name__=!0,Y.delay=function(e,t){var i=new Y(t);return i.run=function(){i.stop(),e()},i},Y.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Y};var w=function(e){this.length=e.byteLength,this.b=new ra(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};w.__name__=!0,w.alloc=function(e){return new w(new sa(e))},w.ofString=function(e){for(var t=[],i=0;i<e.length;){var n=q.fastCodeAt(e,i++);n>=55296&&56319>=n&&(n=n-55232<<10|1023&q.fastCodeAt(e,i++)),127>=n?t.push(n):(2047>=n?t.push(192|n>>6):(65535>=n?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|n>>12&63)),t.push(128|n>>6&63)),t.push(128|63&n))}return new w(new ra(t).buffer)},w.prototype={get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},getString:function(e,t){if(0>e||0>t||e+t>this.length)throw new n(B.OutsideBounds);for(var i="",o=this.b,r=String.fromCharCode,a=e,s=e+t;s>a;){var l=o[a++];if(128>l){if(0==l)break;i+=r(l)}else if(224>l)i+=r((63&l)<<6|127&o[a++]);else if(240>l)var d=o[a++],i=i+r((31&l)<<12|(127&d)<<6|127&o[a++]);else var d=o[a++],c=o[a++],l=(15&l)<<18|(127&d)<<12|(127&c)<<6|127&o[a++],i=i+r((l>>10)+55232),i=i+r(1023&l|56320)}return i},toString:function(){return this.getString(0,this.length)},__class__:w};var A=function(){};A.__name__=!0,A.encode=function(e,t){null==t&&(t=!0);var i=new Z(A.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:i+="==";break;case 2:i+="="}return i},A.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(A.BYTES).decodeBytes(w.ofString(e))};var Z=function(e){for(var t=e.length,i=1;t>1<<i;)i++;if(i>8||t!=1<<i)throw new n("BaseCode : base length must be a power of two.");this.base=e,this.nbits=i};Z.__name__=!0,Z.prototype={encodeBytes:function(e){for(var t=this.nbits,i=this.base,n=8*e.length/t|0,o=w.alloc(n+(0==8*e.length%t?0:1)),r=0,a=0,s=(1<<t)-1,l=0,d=0;n>d;){for(;t>a;)a+=8,r<<=8,r|=e.get(l++);a-=t,o.set(d++,i.b[r>>a&s])}return a>0&&o.set(d++,i.b[r<<t-a&s]),o},initTable:function(){for(var e=[],t=0;256>t;){var i=t++;e[i]=-1}for(t=0,i=this.base.length;i>t;){var n=t++;e[this.base.b[n]]=n}this.tbl=e},decodeBytes:function(e){var t=this.nbits;null==this.tbl&&this.initTable();for(var i=this.tbl,o=e.length*t>>3,r=w.alloc(o),a=0,s=0,l=0,d=0;o>d;){for(;8>s;){var s=s+t,a=a<<t,c=i[e.get(l++)];if(-1==c)throw new n("BaseCode : invalid encoded char");a|=c}s-=8,r.set(d++,a>>s&255)}return r},__class__:Z};var K=function(){};K.__name__=!0,K.encode=function(e){var t=new K;return e=t.doEncode(K.str2blks(e)),t.hex(e)},K.str2blks=function(e){for(var t=(e.length+8>>6)+1,i=[],n=16*t,o=0;n>o;){var r=o++;i[r]=0}for(n=0;n<e.length;)i[n>>2]|=l.cca(e,n)<<(8*e.length+n)%4*8,n++;return i[n>>2]|=128<<(8*e.length+n)%4*8,e=8*e.length,t=16*t-2,i[t]=255&e,i[t]|=(e>>>8&255)<<8,i[t]|=(e>>>16&255)<<16,i[t]|=(e>>>24&255)<<24,i},K.prototype={bitOR:function(e,t){return(e>>>1|t>>>1)<<1|1&e|1&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t&1},addme:function(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i},hex:function(e){for(var t="",i=0;i<e.length;){var n=e[i];++i;for(var o=0;4>o;)var r=o++,t=t+("0123456789abcdef".charAt(n>>8*r+4&15)+"0123456789abcdef".charAt(n>>8*r&15))}return t},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,i,n,o,r){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(n,r)),o),i)},ff:function(e,t,i,n,o,r,a){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,n)),e,t,o,r,a)},gg:function(e,t,i,n,o,r,a){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(i,~n)),e,t,o,r,a)},hh:function(e,t,i,n,o,r,a){return this.cmn(this.bitXOR(this.bitXOR(t,i),n),e,t,o,r,a)},ii:function(e,t,i,n,o,r,a){return this.cmn(this.bitXOR(i,this.bitOR(t,~n)),e,t,o,r,a)},doEncode:function(e){for(var t=1732584193,i=-271733879,n=-1732584194,o=271733878,r=0;r<e.length;)var a=t,s=i,l=n,d=o,t=this.ff(t,i,n,o,e[r],7,-680876936),o=this.ff(o,t,i,n,e[r+1],12,-389564586),n=this.ff(n,o,t,i,e[r+2],17,606105819),i=this.ff(i,n,o,t,e[r+3],22,-1044525330),t=this.ff(t,i,n,o,e[r+4],7,-176418897),o=this.ff(o,t,i,n,e[r+5],12,1200080426),n=this.ff(n,o,t,i,e[r+6],17,-1473231341),i=this.ff(i,n,o,t,e[r+7],22,-45705983),t=this.ff(t,i,n,o,e[r+8],7,1770035416),o=this.ff(o,t,i,n,e[r+9],12,-1958414417),n=this.ff(n,o,t,i,e[r+10],17,-42063),i=this.ff(i,n,o,t,e[r+11],22,-1990404162),t=this.ff(t,i,n,o,e[r+12],7,1804603682),o=this.ff(o,t,i,n,e[r+13],12,-40341101),n=this.ff(n,o,t,i,e[r+14],17,-1502002290),i=this.ff(i,n,o,t,e[r+15],22,1236535329),t=this.gg(t,i,n,o,e[r+1],5,-165796510),o=this.gg(o,t,i,n,e[r+6],9,-1069501632),n=this.gg(n,o,t,i,e[r+11],14,643717713),i=this.gg(i,n,o,t,e[r],20,-373897302),t=this.gg(t,i,n,o,e[r+5],5,-701558691),o=this.gg(o,t,i,n,e[r+10],9,38016083),n=this.gg(n,o,t,i,e[r+15],14,-660478335),i=this.gg(i,n,o,t,e[r+4],20,-405537848),t=this.gg(t,i,n,o,e[r+9],5,568446438),o=this.gg(o,t,i,n,e[r+14],9,-1019803690),n=this.gg(n,o,t,i,e[r+3],14,-187363961),i=this.gg(i,n,o,t,e[r+8],20,1163531501),t=this.gg(t,i,n,o,e[r+13],5,-1444681467),o=this.gg(o,t,i,n,e[r+2],9,-51403784),n=this.gg(n,o,t,i,e[r+7],14,1735328473),i=this.gg(i,n,o,t,e[r+12],20,-1926607734),t=this.hh(t,i,n,o,e[r+5],4,-378558),o=this.hh(o,t,i,n,e[r+8],11,-2022574463),n=this.hh(n,o,t,i,e[r+11],16,1839030562),i=this.hh(i,n,o,t,e[r+14],23,-35309556),t=this.hh(t,i,n,o,e[r+1],4,-1530992060),o=this.hh(o,t,i,n,e[r+4],11,1272893353),n=this.hh(n,o,t,i,e[r+7],16,-155497632),i=this.hh(i,n,o,t,e[r+10],23,-1094730640),t=this.hh(t,i,n,o,e[r+13],4,681279174),o=this.hh(o,t,i,n,e[r],11,-358537222),n=this.hh(n,o,t,i,e[r+3],16,-722521979),i=this.hh(i,n,o,t,e[r+6],23,76029189),t=this.hh(t,i,n,o,e[r+9],4,-640364487),o=this.hh(o,t,i,n,e[r+12],11,-421815835),n=this.hh(n,o,t,i,e[r+15],16,530742520),i=this.hh(i,n,o,t,e[r+2],23,-995338651),t=this.ii(t,i,n,o,e[r],6,-198630844),o=this.ii(o,t,i,n,e[r+7],10,1126891415),n=this.ii(n,o,t,i,e[r+14],15,-1416354905),i=this.ii(i,n,o,t,e[r+5],21,-57434055),t=this.ii(t,i,n,o,e[r+12],6,1700485571),o=this.ii(o,t,i,n,e[r+3],10,-1894986606),n=this.ii(n,o,t,i,e[r+10],15,-1051523),i=this.ii(i,n,o,t,e[r+1],21,-2054922799),t=this.ii(t,i,n,o,e[r+8],6,1873313359),o=this.ii(o,t,i,n,e[r+15],10,-30611744),n=this.ii(n,o,t,i,e[r+6],15,-1560198380),i=this.ii(i,n,o,t,e[r+13],21,1309151649),t=this.ii(t,i,n,o,e[r+4],6,-145523070),o=this.ii(o,t,i,n,e[r+11],10,-1120210379),n=this.ii(n,o,t,i,e[r+2],15,718787259),i=this.ii(i,n,o,t,e[r+9],21,-343485551),t=this.addme(t,a),i=this.addme(i,s),n=this.addme(n,l),o=this.addme(o,d),r=r+16;return[t,i,n,o]},__class__:K};var L=function(){this.h={}};L.__name__=!0,L.__interfaces__=[N],L.prototype={set:function(e,t){null!=r[e]?this.setReserved(e,t):this.h[e]=t},get:function(e){return null!=r[e]?this.getReserved(e):this.h[e]},setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},remove:function(e){if(null!=r[e]){if(e="$"+e,null==this.rh||!this.rh.hasOwnProperty(e))return!1;delete this.rh[e]}else{if(!this.h.hasOwnProperty(e))return!1;delete this.h[e]}return!0},keys:function(){var e=this.arrayKeys();return l.iter(e)},arrayKeys:function(){var e,t=[];for(e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:L};var B={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:["Blocked",0]};B.Blocked.toString=I,B.Blocked.__enum__=B,B.Overflow=["Overflow",1],B.Overflow.toString=I,B.Overflow.__enum__=B,B.OutsideBounds=["OutsideBounds",2],B.OutsideBounds.toString=I,B.OutsideBounds.__enum__=B,B.Custom=function(e){return e=["Custom",3,e],e.__enum__=B,e.toString=I,e};var n=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)};n.__name__=!0,n.__super__=Error,n.prototype=Ca(Error.prototype,{__class__:n});var m=function(){};m.__name__=!0,m.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},m.__trace=function(e,t){var i;if(i=null!=t?t.fileName+":"+t.lineNumber+": ":"",i+=m.__string_rec(e,""),null!=t&&null!=t.customParams)for(var n=0,o=t.customParams;n<o.length;){var r=o[n];++n,i+=","+m.__string_rec(r,"")}var a;"undefined"!=typeof document&&null!=(a=document.getElementById("haxe:trace"))?a.innerHTML+=m.__unhtml(i)+"<br/>":"undefined"!=typeof Aa&&null!=Aa.log&&Aa.log(i)},m.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;return null!=t?t:(e=m.__nativeClassName(e),null!=e?m.__resolveNativeClass(e):null)},m.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];i=e[0]+"(",t+="	";for(var o=2,r=e.length;r>o;)var a=o++,i=2!=a?i+(","+m.__string_rec(e[a],t)):i+m.__string_rec(e[a],t);
return i+")"}for(i=e.length,o="[",t+="	",r=0;i>r;)a=r++,o+=(a>0?",":"")+m.__string_rec(e[a],t);return o+"]"}try{o=e.toString}catch(s){return s instanceof n&&(s=s.val),"???"}if(null!=o&&o!=Object.toString&&"function"==typeof o&&(i=e.toString(),"[object Object]"!=i))return i;i=null,o="{\n",t+="	",r=null!=e.hasOwnProperty;for(i in e)r&&!e.hasOwnProperty(i)||"prototype"==i||"__class__"==i||"__super__"==i||"__interfaces__"==i||"__properties__"==i||(2!=o.length&&(o+=", \n"),o+=t+i+" : "+m.__string_rec(e[i],t));return t=t.substring(1),o+("\n"+t+"}");case"function":return"<function>";case"string":return e;default:return String(e)}},m.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,o=i.length;o>n;){var r=n++,r=i[r];if(r==t||m.__interfLoop(r,t))return!0}return m.__interfLoop(e.__super__,t)},m.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Ka:return(0|e)===e;case Ga:return"number"==typeof e;case Ha:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case La:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t||m.__interfLoop(m.getClass(e),t))return!0}else if("object"==typeof t&&m.__isNativeObj(t)&&e instanceof t)return!0;return t==Ma&&null!=e.__name__||t==Na&&null!=e.__ename__?!0:e.__enum__==t}},m.__nativeClassName=function(e){return e=m.__toStr.call(e).slice(8,-1),"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},m.__isNativeObj=function(e){return null!=m.__nativeClassName(e)},m.__resolveNativeClass=function(e){return Ba[e]};var J=function(){};J.__name__=!0,J.getLocalStorage=function(){try{var e=window.localStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.getSessionStorage=function(){try{var e=window.sessionStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new n("Unable to create XMLHttpRequest object.")};var H=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{this.a=[];for(var t=0;e>t;){var i=t++;this.a[i]=0}this.byteLength=e}};H.__name__=!0,H.sliceImpl=function(e,t){var i=new ra(this,e,null==t?null:t-e),n=new sa(i.byteLength);return new ra(n).set(i),n},H.prototype={slice:function(e,t){return new H(this.a.slice(e,t))},__class__:H};var O=function(){};O.__name__=!0,O._new=function(e,t,i){if("number"==typeof e){for(i=[],t=0;e>t;){var o=t++;i[o]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}else if(m.__instanceof(e,H))null==t&&(t=0),null==i&&(i=e.byteLength-t),i=0==t?e.a:e.a.slice(t,t+i),i.byteLength=i.length,i.byteOffset=t,i.buffer=e;else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO "+k.string(e));i=e.slice(),i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}return i.subarray=O._subarray,i.set=O._set,i},O._set=function(e,t){if(m.__instanceof(e.buffer,H)){if(e.byteLength+t>this.byteLength)throw new n("set() outside of range");for(var i=0,o=e.byteLength;o>i;){var r=i++;this[r+t]=e[r]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO");if(e.length+t>this.byteLength)throw new n("set() outside of range");for(i=0,o=e.length;o>i;)r=i++,this[r+t]=e[r]}},O._subarray=function(e,t){var i=O._new(this.slice(e,t));return i.byteOffset=e,i};var x=function(){};x.__name__=!0,x.prototype={__class__:x};var ia=function(e){this.prefix=e};ia.__name__=!0,ia.__interfaces__=[x],ia.prototype={encode:function(e){return q.startsWith(e,this.prefix)||(e=this.prefix+e),e},decode:function(e){return q.startsWith(e,this.prefix)&&(e=l.substr(e,this.prefix.length,null)),e},__class__:ia};var R=function(e,t){null==t&&(t=""),this.obfuscate=new C(e),this.prefixer=new ia(t)};R.__name__=!0,R.__interfaces__=[x],R.fromUrl=function(e,t){null==t&&(t="");var i=new ia(t).decode(e),i=u.getTopLevelDomain(i);return new R(i,t)},R.prototype={encode:function(e){return e=this.obfuscate.encode(e),this.prefixer.encode(e)},decode:function(e){return e=this.prefixer.decode(e),this.obfuscate.decode(e)},__class__:R};var aa=F.secretmedia.sdk.SdkJs=function(e,t,i,n,o){null==o&&(o=""),null==n&&(n=""),null==i&&(i=!1),this.ppt=new ma(e,t,i,n,o)};aa.__name__=!0,aa.main=function(){v.overrideTrace()},aa.prototype={unblock:function(e,t){this.ppt.unblock(e,t)},proxify:function(e){return this.ppt.proxify(e)},__class__:aa},N=F.SMSdk=function(e,t,i,n,o){aa.call(this,e,t,i,n,o)},N.__name__=!0,N.main=function(){},N.__super__=aa,N.prototype=Ca(aa.prototype,{__class__:N});var ba=function(e,t){null==t&&(t=""),this.config=e,this.prefix=t};ba.__name__=!0,ba.fromAppKey=function(e,t){null==t&&(t="");var i=ta.decode(e);return new ba({gitHash:pa.gitHash,publisherId:i[d.unmangle("_62")],sdkVersion:"1.0.0",proxyDomain:i[d.unmangle("_55")]},t)},ba.prototype={getConfigUrl:function(){var e={};d.set("_57",e,this.config.publisherId),d.set("_55",e,this.config.proxyDomain),d.set("_58",e,this.config.sdkVersion),d.set("_59",e,this.config.gitHash);var t=d.unmangle("_60");return d.set("_61",e,t),e=ua.encode(e),this.prefix+e},parseConfig:function(e){return va.decode(e)},getProxy:function(e){return new R(this.config.proxyDomain,this.prefix)},__class__:ba};var S={__ename__:!0,__constructs__:["InvalidAbsoluteUrl","InvalidScheme","InvalidSubDomain"],InvalidAbsoluteUrl:function(e){return e=["InvalidAbsoluteUrl",0,e],e.__enum__=S,e.toString=I,e},InvalidScheme:function(e){return e=["InvalidScheme",1,e],e.__enum__=S,e.toString=I,e},InvalidSubDomain:function(e){return e=["InvalidSubDomain",2,e],e.__enum__=S,e.toString=I,e}},d={__name__:!0,_new:function(e){return e},unmangle:function(e){return d.map[e]},set:function(e,t,i){return t[d.unmangle(e)]=i}},u=function(){};u.__name__=!0,u.isSpecial=function(e){for(var t=0,i=u.SPECIAL_PREFIXES;t<i.length;){var n=i[t];if(++t,0==e.indexOf(n))return!0}return!1},u.makeAbsolute=function(e,t){if(""==e)return t;if(u.isSpecial(e))return e;var i,o=e.indexOf("?");i=o>=0?l.substr(e,o,null):null;var r;r=null!=i?l.substr(e,0,o):e;var o=r.indexOf("//"),a=r.indexOf("/");if(o>0&&o==a)return e;var a=t.indexOf("//"),s=t.indexOf("/");if(0>=a||a!=s)throw new n(S.InvalidAbsoluteUrl(t));if(0==o)return l.substr(t,0,a)+e;var o=l.substr(t,0,a),s=l.substr(t,a+2,null),a=s.indexOf("/"),a=0>a?s:l.substr(s,0,a),s=l.substr(s,a.length+1,null),d=s.indexOf("?"),s=(null!=(d>=0?l.substr(s,d,null):null)?l.substr(s,0,d):s).split("/");for(s.pop(),r=r.split("/"),null!=i&&(d=r.pop(),r.push(d+i)),i=""==r[0]?[]:s.slice(0),s=0;s<r.length;)switch(d=r[s],++s,d){case"..":i.pop();break;case".":break;default:i.push(d)}return""!=i[0]&&i.unshift(""),o+"//"+a+i.join("/")},u.getDomain=function(e){var t=e.indexOf("//");if(0>t||t!=e.indexOf("/"))throw new n(S.InvalidAbsoluteUrl(e));return e=l.substr(e,t+2,null),t=e.indexOf("/"),t>0?l.substr(e,0,t):e},u.getTopLevelDomain=function(e){return u.getDomain(e).split(".").slice(-2).join(".")},u.getExtension=function(e){var t=e.indexOf("?");return t>-1&&(e=l.substr(e,0,t)),e=e.split("."),1<e.length?e.pop():""},u.current=function(){return window.document.location.href};var T=function(){this.nextId=0,this.instances=new L,this.callbacks=new L,v.overrideTrace()};T.__name__=!0,T.prototype={callCallback:function(e,t){try{var i=this.callbacks.get(e);if(null!=i)return h.trace(d.unmangle("_125")+k.string(i.fun)+d.unmangle("_9")+k.string(t),{fileName:"BridgeBase.hx",lineNumber:87,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"}),this.callbacks.remove(e),i.fun.apply(i.scope,t)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_126")+k.string(o)+d.unmangle("_127")+e+d.unmangle("_128")+k.string(t)+")",{fileName:"BridgeBase.hx",lineNumber:93,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"})}return null},createCallback:function(e,t){var i=d.unmangle("_129")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_130")+i,{fileName:"BridgeBase.hx",lineNumber:107,className:"secretmedia.asbridge.BridgeBase",methodName:"createCallback"}),this.callbacks.set(i,{scope:e,fun:t}),i},addInstance:function(e){var t=d.unmangle("_131")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_132")+t,{fileName:"BridgeBase.hx",lineNumber:124,className:"secretmedia.asbridge.BridgeBase",methodName:"addInstance"}),this.instances.set(t,e),t},findInstance:function(e){return this.instances.get(e)},__class__:T};var ca=F.secretmedia.asbridge.BridgeToAs=function(){this.loadedCbk=[],T.call(this),this.bridgeName="_"+Math.floor(1e5*Math.random()),t.setField(window,this.bridgeName,this)};ca.__name__=!0,ca.main=function(){},ca.__super__=T,ca.prototype=Ca(T.prototype,{loadSwf:function(e,t,i){var n=this;if(h.trace(e,{fileName:"BridgeToAs.hx",lineNumber:45,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),null!=this.objectTag)h.trace(d.unmangle("_107"),{fileName:"BridgeToAs.hx",lineNumber:47,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),t();else if(this.loadedCbk.push({success:t,timeout:i}),null==this.flashLoader){this.flashLoader=new wa,t=new L,i=d.unmangle("_108");var o=d.unmangle("_109");null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_110"),o=d.unmangle("_111"),null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_112"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=d.unmangle("_113"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=new L,i.set(T.FLASHVAR_BRIDGE_NAME,this.bridgeName);var a=this.flashLoader.createSwfObject(e,""+this.bridgeName+d.unmangle("_115"),t,t,i),s=Y.delay(function(){for(h.trace(d.unmangle("_116")+2e3,{fileName:"BridgeToAs.hx",lineNumber:66,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),window.document.body.removeChild(a);0<n.loadedCbk.length;)n.loadedCbk.shift().timeout()},2e3);this.onFlashLoaded=function(){for(h.trace(d.unmangle("_117")+k.string(a),{fileName:"BridgeToAs.hx",lineNumber:71,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),n.objectTag=a,s.stop();0<n.loadedCbk.length;)n.loadedCbk.shift().success()},window.document.body.appendChild(a)}},callAsCallback:function(e,t){h.trace(this.bridgeName,{fileName:"BridgeToAs.hx",lineNumber:88,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsCallback",customParams:[e,t]});for(var i=0,n=t.length;n>i;){var o=i++;"string"==typeof t[o]&&(t[o]="'"+k.string(t[o])+"'")}return this.callAsMethod(d.unmangle("_121"),[e,t])},callAsMethod:function(e,i){if(null==i&&(i=[]),null==this.objectTag){var o=window.document.getElementsByTagName(d.unmangle("_72"));this.objectTag=this.findMyFlash(o),null==this.objectTag&&(o=window.document.getElementsByTagName(d.unmangle("_118")),this.objectTag=this.findMyFlash(o))}if(null!=this.objectTag&&null!=t.field(this.objectTag,e)){h.trace(this.objectTag,{fileName:"BridgeToAs.hx",lineNumber:117,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[e,t.field(this.objectTag,e)]});try{return t.callMethod(this.objectTag,t.field(this.objectTag,e),i)}catch(r){r instanceof n&&(r=r.val),h.trace(d.unmangle("_119")+k.string(r),{fileName:"BridgeToAs.hx",lineNumber:123,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod"})}}else h.trace(d.unmangle("_120")+this.bridgeName+")",{fileName:"BridgeToAs.hx",lineNumber:127,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[this.objectTag,e]});return null},findMyFlash:function(e){for(var i=0;i<e.length;){var n=e[i];if(++i,null!=t.field(n,this.bridgeName))return n}return null},__class__:ca});var wa=function(){};wa.__name__=!0,wa.prototype={createSwfObject:function(e,i,n,o,a){for(var s="",l=a.keys();l.hasNext();)var c=l.next(),s=s+(c+"="+q.urlEncode(null!=r[c]?a.getReserved(c):a.h[c])+"&");for(a=d.unmangle("_94"),null!=r[a]?n.setReserved(a,s):n.h[a]=s,a=d.unmangle("_94"),null!=r[a]?o.setReserved(a,s):o.h[a]=s,s=d.unmangle("_61"),a=d.unmangle("_95"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,t.hasField(window,d.unmangle("_96"))?(s=d.unmangle("_97"),a=d.unmangle("_98"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,s=d.unmangle("_27"),null!=r[s]?o.setReserved(s,e):o.h[s]=e):(s=d.unmangle("_99"),null!=r[s]?n.setReserved(s,e):n.h[s]=e),s=e="",a=n.keys();a.hasNext();)l=a.next(),e+=" "+l+d.unmangle("_100")+(null!=r[l]?n.getReserved(l):n.h[l])+'"';for(n=o.keys();n.hasNext();)a=n.next(),s+=" "+a+d.unmangle("_100")+(null!=r[a]?o.getReserved(a):o.h[a])+'"';for(i=d.unmangle("_101")+i+'"'+e+">",n=o.keys();n.hasNext();)e=n.next(),i+=d.unmangle("_102")+e+d.unmangle("_103")+(null!=r[e]?o.getReserved(e):o.h[e])+d.unmangle("_104");return i+=d.unmangle("_105"),o=window.document.createElement(d.unmangle("_106")),o.innerHTML=i,i=o.firstChild,o.removeChild(i),i},__class__:wa};var ta=function(){};ta.__name__=!0,ta.encode=function(e){return e=JSON.stringify(e),A.encode(w.ofString(e))},ta.decode=function(e){return e=A.decode(e).toString(),JSON.parse(e)};var va=function(){};va.__name__=!0,va.decode=function(e){return e=A.decode(e.substring(15)).toString(),JSON.parse(e)},va.encode=function(e){throw new n(d.unmangle("_42"))};var ua=function(){};ua.__name__=!0,ua.encode=function(e){var t=JSON.stringify(e),t=(new D).encode(t);return d.unmangle("_54")+U.string(V.BASE32,30)+"."+e[d.unmangle("_55")]+"/"+t},ua.decode=function(e){var t=e.indexOf("?");for(t>=0&&(e=e.substring(0,t)),e=e.split("/");""==e[0];)e.shift();return e=(new D).decode(e.slice(1).join("/")),JSON.parse(e)};var C=function(e){if(2!=e.split(".").length)throw new n("Invalid proxy domain "+e+" (should be a top level domain, with 1 dot only)");this.proxyDomain=e,this.hosts=new na,this.paths=new D,this.queryStrings=new ja};C.__name__=!0,C.__interfaces__=[x],C.chunkSubdomain=function(e){if(63<=e.length){for(var t=[],i=0;i<e.length;)t.push(l.substr(e,i,60)),i+=60;return t.join(".")}return e},C.prototype={isEncoded:function(e){return e=u.getDomain(e),q.endsWith(e,this.proxyDomain)},encode:function(e){if(u.isSpecial(e)||this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));for(var t=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,t=e.indexOf("/",t),o=e.substring(0,t),t=e.substring(t),r=2*(Math.round(43*Math.random())+6),a=null,s=C.SCHEMES.keys();s.hasNext();){var c=s.next(),p=c+d.unmangle("_245");if(0==e.indexOf(p)){a=k.string(r+C.SCHEMES.get(c)),o=o.substring(p.length);break}}if(null==a)throw new n(S.InvalidScheme(e));return e=this.hosts.encode(a+o),e=C.chunkSubdomain(e),o="",r=d.unmangle("_246"),a=t.indexOf(r),a>0?(s=t.substring(0,a+r.length),o=l.substr(t,a+r.length,null),0<o.length&&(o=l.substr(o,0,1)+this.queryStrings.encode(l.substr(o,1,null))),r=this.paths.encode(s)+r):r=this.paths.encode(t),t=u.getExtension(t),-1<l.indexOf(C.KEEP_EXTENSIONS,t,0)&&(r+="."+t),d.unmangle("_247")+e+"."+this.proxyDomain+"/"+r+o+i},decode:function(e){if(!this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));var o=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,r=e.indexOf("/",o)+1,t=e.substring(0,r-1),t=t.substring(o),t=t.split(".");if(3>t.length)throw new n(S.InvalidSubDomain(e));t.pop(),t.pop();for(var t=t.join(""),t=this.hosts.decode(t),o=k.parseInt(t.substring(0,2)),a="",s=C.SCHEMES.keys();s.hasNext();){var c=s.next();if(o%2==C.SCHEMES.get(c)){a=c;break}}if(""==a)throw new n(S.InvalidScheme(e));return t=a+d.unmangle("_245")+t.substring(2),e=e.substring(r),r="",o=e.indexOf("?"),o>=0&&(r=e.substring(o),r=l.substr(r,0,1)+this.queryStrings.decode(l.substr(r,1,null)),e=e.substring(0,o)),o=e.indexOf("."),o>=0&&(e=e.substring(0,o)),e=this.paths.decode(e),t+e+r+i},__class__:C};var V=function(){};V.__name__=!0;var na=function(e){null==e&&(e=-1),this.keys=new oa(d.unmangle("_230"),d.unmangle("_231")),this.seed=-1==e?(new Date).getHours():e};na.__name__=!0,na.__interfaces__=[x],na.prototype={encode:function(e){var t=V.BASE32.charAt(this.seed%24);return e=new W(this.keys,t).encode(e),t+M.encode(e,!1).toLowerCase()},decode:function(e){var t=l.substr(e,0,1),t=new W(this.keys,t);return e=l.substr(e,1,null).toUpperCase(),t.decode(M.decode(e,!1))},__class__:na};var oa=function(e,t){this.key=e,this.shared=t};oa.__name__=!0,oa.prototype={md5Pair:function(e){return e=K.encode(e+this.shared),{a:da.parseHex(e.charAt(0)),b:da.parseHex(e.charAt(1))+1}},__class__:oa};var D=function(){this.keys=new oa(d.unmangle("_45"),d.unmangle("_46"))};D.__name__=!0,D.__interfaces__=[x],D.prototype={encodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();){var i=t.next(),n=D.replacements.get(i);e=q.replace(e,i,n[k.random(n.length)])}return e},decodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();)for(var i=t.next(),n=0,o=D.replacements.get(i);n<o.length;){var r=o[n];++n,e=q.replace(e,r,i)}return e},encode:function(e){var t=U.string(V.BASE64,8),i=this.keys.md5Pair(t),n=new W(this.keys,t),t=t+U.string(V.BASE64,i.a),t=t+A.encode(n.encode(e),!1),t=t+U.string(V.BASE64,i.b);return this.encodeSpecialChars(t)},decode:function(e){e=this.decodeSpecialChars(e);var t=l.substr(e,0,8),i=this.keys.md5Pair(t),t=new W(this.keys,t),n=8+i.a;return e=l.substr(e,n,e.length-n-i.b),t.decode(A.decode(e,!1)).toString()},__class__:D};var ja=function(){};ja.__name__=!0,ja.__interfaces__=[x],ja.prototype={encode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0,n=e.length;n>i;)var o=i++,r=e.charAt(o),t=0!=o&&0==o%3&&0>e.substring(o-2,o).indexOf("%")&&new X("^[a-zA-Z0-9]$","").match(r)?t+("%"+q.hex(l.cca(r,0),2)):t+r;return t}).join("&amp;")},decode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0;i<e.length;){var n=e.charAt(i);if("%"==n){var o=l.substr(e,i+1,2),o=da.decodeChar(o);null!=o&&new X("^[a-zA-Z0-9]$","").match(o)?(t+=o,i+=2):t+=n}else t+=n;i++}return t}).join("&amp;")},__class__:ja};var W=function(e,t){this.keys=e,this.salt=t};W.__name__=!0,W.prototype={encode:function(e){return e=[this.keys.key,e].join(":"),xa.encode(w.ofString(e),this.salt,this.keys.shared)},decode:function(e){if(e=xa.encode(e,this.salt,this.keys.shared).toString().split(":"),e[0]!=this.keys.key)throw new n(d.unmangle("_56"));return e.slice(1).join(":")},__class__:W};var M=function(){};M.__name__=!0,M.encode=function(e,t){null==t&&(t=!0);var i=new Z(M.BYTES).encodeBytes(e).toString();if(t&&0<i.length%8)for(var n=0,o=8-i.length%8;o>n;)n++,i+="=";return i},M.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(M.BYTES).decodeBytes(w.ofString(e))};var da=function(){};da.__name__=!0,da.parseHex=function(e){return k.parseInt(d.unmangle("_47")+e)},da.encodeChar=function(e){return q.hex(l.cca(e,0),2)},da.decodeChar=function(e){return e=k.parseInt(d.unmangle("_47")+e),null==e?null:String.fromCharCode(e)};var U=function(){};U.__name__=!0,U["char"]=function(e){return e.charAt(k.random(e.length))},U.string=function(e,t){for(var i=[],n=0;t>n;)n++,i.push(e.charAt(k.random(e.length)));return i.join("")},U.pick=function(e){return e[k.random(e.length)]};var xa=function(){};xa.__name__=!0,xa.encode=function(e,t,i){for(var n=Math.floor(e.length/16),n=n+1,o="",r=0;n>r;)var a=r++,o=o+K.encode(t+a+K.encode(i));for(t=w.alloc(e.length),i=0,n=e.length;n>i;)r=i++,t.set(r,e.b[r]^l.cca(o,r));return t};var ya=function(){};ya.__name__=!0,ya.prototype={substitute:function(e,i,n){var o=d.unmangle(i);null==t.field(e,"_"+o)&&t.setField(e,"_"+o,t.field(e,o)),e[o]=function(){return h.trace(d.unmangle("_8")+o+d.unmangle("_9")+arguments[0],{fileName:"Interceptor.hx",lineNumber:32,className:"secretmedia.dom.Interceptor",methodName:"substitute"}),n(this,t.field(e,"_"+o),arguments)}},poll:function(e,t){var i=null,i=function(n){for(n=0;n<e.length;){var o=e[n];++n;for(var o=window.document.getElementsByTagName(o),r=0;r<o.length;){var a=o[r];++r,t(a)}}window.requestAnimationFrame(i)};i()},__class__:ya};var y=function(e,t,i){null==i&&(i=""),this.urls=new R(e,i),e=J.getLocalStorage(),i=null;var o=d.unmangle("_0");if(null!=e&&null!=e.getItem(o)?i=e.getItem(o):null!=t?this.whiteList=t:i=ha.getString(o),null!=i)try{this.whiteList=JSON.parse(i)}catch(r){r instanceof n&&(r=r.val),h.trace("VirtDom:: Error parsing the white list "+i,{fileName:"VirtDom.hx",lineNumber:85,className:"secretmedia.dom.VirtDom",methodName:"new"})}h.trace("VirtDom:: White list is now",{fileName:"VirtDom.hx",lineNumber:88,className:"secretmedia.dom.VirtDom",methodName:"new",customParams:[this.whiteList]})};y.__name__=!0,y.startVirtualDom=function(e,t,i){if(null==i&&(i=""),y.doOnlyOnce(window.document.getElementsByTagName("html")[0])){h.trace(d.unmangle("_5")+e,{fileName:"VirtDom.hx",lineNumber:42,className:"secretmedia.dom.VirtDom",methodName:"startVirtualDom"}),e=new y(e,t,i),t=new ya,i=window;var n;n=i[d.unmangle("_6")][d.unmangle("_7")],t.substitute(n,"_10",G(e,e.appendChildAndInsertBefore)),t.substitute(n,"_33",G(e,e.appendChildAndInsertBefore)),t.substitute(i[d.unmangle("_34")],"_35",G(e,e.createNewElement)),t.substitute(i[d.unmangle("_34")],"_37",G(e,e.postMessage)),t.poll([d.unmangle("_30"),d.unmangle("_25"),d.unmangle("_23"),d.unmangle("_24")],G(e,e.processPolledElement))}},y.callSuper=function(e,t,i){var o=null;try{o=t.apply(e,i)}catch(r){r instanceof n&&(r=r.val),h.trace(d.unmangle("_32"),{fileName:"VirtDom.hx",lineNumber:101,className:"secretmedia.dom.VirtDom",methodName:"callSuper"})}return o},y.doOnlyOnce=function(e){return null==Fa._1(e,d.unmangle("_3"))?(Fa._2(e,d.unmangle("_3"),d.unmangle("_4")),!0):!1},y.prototype={appendChildAndInsertBefore:function(e,t,i){return h.trace(d.unmangle("_11"),{fileName:"VirtDom.hx",lineNumber:115,className:"secretmedia.dom.VirtDom",methodName:"appendChildAndInsertBefore"}),i[0]=this.processElement(i[0]),y.callSuper(e,t,i)},createNewElement:function(e,t,i){return h.trace(d.unmangle("_36"),{fileName:"VirtDom.hx",lineNumber:129,className:"secretmedia.dom.VirtDom",methodName:"createNewElement"}),e=y.callSuper(window.document,t,i),this.processElement(e),e},postMessage:function(e,t,i){return h.trace(d.unmangle("_38"),{fileName:"VirtDom.hx",lineNumber:145,className:"secretmedia.dom.VirtDom",methodName:"postMessage"}),i[1]="*",y.callSuper(e,t,i)},processPolledElement:function(e){this.processElement(e,!0)},processElement:function(e,t){null==t&&(t=!1);try{var i;switch(e.nodeType){case 3:i=null;break;default:i=e.tagName.toUpperCase()}if(i==d.unmangle("_23")){var o=e.src;if(this.changeSrc(e),t&&e.src!=o){var r=e.parentNode;r.removeChild(e);var a=window.document.createElement("script");a.src=o,r.insertBefore(a,r.firstChild),h.trace(d.unmangle("_22")+a.src,{fileName:"VirtDom.hx",lineNumber:182,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}}else if(i==d.unmangle("_24"))this.changeSrc(e);else if(i==d.unmangle("_25")){var s=e.src;if(this.changeSrc(e),t&&e.src!=s){var l=e.parentNode;null!=l&&(l.insertBefore(e,l.firstChild),h.trace(d.unmangle("_22")+e.src,{fileName:"VirtDom.hx",lineNumber:196,className:"secretmedia.dom.VirtDom",methodName:"processElement"}))}}else i==d.unmangle("_30")&&this.processObject(e)}catch(c){c instanceof n&&(c=c.val),h.trace(d.unmangle("_31")+k.string(e),{fileName:"VirtDom.hx",lineNumber:206,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}return e},isInWhiteList:function(e){if(1==this.whiteList[d.unmangle("_19")])return!0;if(null!=this.whiteList[d.unmangle("_20")])for(var t=0,i=this.whiteList[d.unmangle("_20")];t<i.length;){var n=i[t];if(++t,new X(n.url,"i").match(e))return!0}return h.trace(d.unmangle("_21")+e,{fileName:"VirtDom.hx",lineNumber:240,className:"secretmedia.dom.VirtDom",methodName:"isInWhiteList"}),!1},processUrl:function(e){return e=this.urls.encode(u.makeAbsolute(e,window.document.location.href)),h.trace(d.unmangle("_18")+e,{fileName:"VirtDom.hx",lineNumber:246,className:"secretmedia.dom.VirtDom",methodName:"processUrl"}),e},changeSrc:function(e){var t=e[d.unmangle("_12")];switch(t){case"":break;default:y.doOnlyOnce(e)&&this.isInWhiteList(t)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.src,{fileName:"VirtDom.hx",lineNumber:255,className:"secretmedia.dom.VirtDom",methodName:"changeSrc"}),e.src=this.processUrl(e.src))}return e},processObject:function(e){var t=!1,i=e.data;if(""==i)for(var i=e.getElementsByTagName(d.unmangle("_26")),n=0;n<i.length;){var o=i[n];if(++n,o.name==d.unmangle("_27")&&y.doOnlyOnce(o)){this.isInWhiteList(o.value)&&(o.value=this.processUrl(o.value),t=!0,h.trace(d.unmangle("_28")+k.string(e)+" "+o.value,{fileName:"VirtDom.hx",lineNumber:277,className:"secretmedia.dom.VirtDom",methodName:"processObject"}));break}}else""!=i&&y.doOnlyOnce(e)&&this.isInWhiteList(e.data)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.data,{fileName:"VirtDom.hx",lineNumber:285,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),e.data=this.processUrl(e.data),t=!0);return t&&(t=e.getElementsByTagName(d.unmangle("_25")),0<t.length&&(t=t[0],h.trace(d.unmangle("_29")+k.string(e)+" "+k.string(t),{fileName:"VirtDom.hx",lineNumber:295,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),this.changeSrc(t))),e},__class__:y},x=function(){},x.__name__=!0,x.prototype={__class__:x};var v=function(){};v.__name__=!0,v.__interfaces__=[x],v.overrideTrace=function(){var e=new v;return h.trace=G(e,e.trace),e},v.prototype={isDebug:function(){return this.eval(v.isDebugExpr)},trace:function(e,t){this.isDebug()&&this.call(v.traceFunction,Ea.toArray(e,t))},log:function(e,t){this.call(v.traceFunction,[e,t].filter(function(e){return null!=e}))},eval:function(a){return eval(a)},call:function(a,b){return eval("("+a+")").apply(null,[b])},__class__:v};var ka=function(e,t){null==t&&(t=!1),this.document=e,this.alwaysFire=t};ka.__name__=!0,ka.__interfaces__=[x],ka.prototype={log:function(e,i){if(null==i||!t.hasField(i,d.unmangle("_73"))||!t.hasField(i,d.unmangle("_74")))return h.trace(d.unmangle("_75"),{fileName:"FontLogger.hx",lineNumber:42,className:"secretmedia.logger.FontLogger",methodName:"log"});if(this.alwaysFire||1>100*Math.random()){var n=d.unmangle("_76")+e+"-"+k.string(i.clientId)+d.unmangle("_77")+k.string(i.appKey);this.send(n,i)}},trace:function(e,t){},send:function(e,t){var i=this.document.createElement("style");i.textContent=d.unmangle("_78")+e+d.unmangle("_79"),i.type=d.unmangle("_80"),this.document.head.appendChild(i)},__class__:ka};var Ea=function(){};Ea.__name__=!0,Ea.toArray=function(e,t){var i=[e];return null!=t&&(null!=t.customParams&&(i=i.concat(t.customParams)),i.unshift(""+t.fileName+":"+t.lineNumber+" "+t.className+d.unmangle("_86")+t.methodName)),i};var ea=function(e){this.strategy=e};ea.__name__=!0,ea.__interfaces__=[x],ea.send=function(e,t){null==t&&(t={}),null==t.location&&(t.location=window.document.location.href);var i=JSON.stringify(t),n=new ga(e);n.setPostData(i),n.request(!0)},ea.prototype={log:function(e,t){var i=d.unmangle("_63")+e,i=this.strategy.encode(i);ea.send(i,t)},trace:function(e,t){},__class__:ea};var za=function(){this.allowDetectionStateCache=!0,this.alwaysFireFontLogger=!1;var e=J.getLocalStorage();null!=e&&"true"==e.getItem(P.ENABLE_DEBUG)&&(this.alwaysFireFontLogger="true"==e.getItem(P.ALWAYS_FIRE_FONT_LOGGER),this.allowDetectionStateCache="false"!=e.getItem(P.ALLOW_DETECTION_STATE_CACHE))};za.__name__=!0,za.prototype={setDetectionState:function(e){var t=J.getSessionStorage();null!=t&&t.setItem(P.DETECTION_STATE,e)},getDetectionState:function(){if(0==this.allowDetectionStateCache)return null;var e=J.getSessionStorage();return null!=e?e.getItem(P.DETECTION_STATE):null},__class__:za};var P={__name__:!0},p={__name__:!0},Q=function(e){this.pingSwfUrl=e};Q.__name__=!0,Q.detectFlashPlayer=function(){if(null!=window.navigator.plugins&&0<window.navigator.plugins.length&&(t.hasField(window.navigator.plugins,d.unmangle("_154"))||t.hasField(window.navigator.plugins,d.unmangle("_155")))){var e=window.document.createElement(d.unmangle("_118"));t.setField(e,d.unmangle("_61"),d.unmangle("_95")),window.document.body.appendChild(e);var i="Pan"in e;return window.document.body.removeChild(e),i?(h.trace(d.unmangle("_157"),{fileName:"Detector.hx",lineNumber:171,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!0):(h.trace(d.unmangle("_156"),{fileName:"Detector.hx",lineNumber:168,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1)}return h.trace(d.unmangle("_158"),{fileName:"Detector.hx",lineNumber:174,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1},Q.isPptCompatible=function(){try{return null!=J.getSessionStorage()&&("undefined"!=typeof InstallTrigger||!!window.chrome&&!!window.chrome.webstore)}catch(e){return e instanceof n&&(e=e.val),!1}},Q.prototype={testDom:function(e){var t=!1;try{var i=window.document.createElement(d.unmangle("_106"));i.setAttribute(d.unmangle("_133"),e),i.setAttribute(d.unmangle("_134"),e),i.setAttribute(d.unmangle("_135"),d.unmangle("_136")),window.document.body.appendChild(i),t=0==i.offsetWidth||0==i.offsetHeight,window.document.body.removeChild(i)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_137"),{fileName:"Detector.hx",lineNumber:44,className:"secretmedia.pptjs.Detector",methodName:"testDom",customParams:[o]})}return h.trace(d.unmangle("_138")+e+d.unmangle("_139")+(null==t?"null":""+t),{fileName:"Detector.hx",lineNumber:46,className:"secretmedia.pptjs.Detector",methodName:"testDom"}),t},testUrls:function(e,t,i,n){var o=this;if(0<e.length){var r=e.shift();this.ping(r,function(){h.trace(d.unmangle("_144")+r,{fileName:"Detector.hx",lineNumber:58,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),o.pingFlash(r,function(){h.trace(d.unmangle("_148")+r,{fileName:"Detector.hx",lineNumber:60,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),o.testUrls(e,t,i,n)},function(){h.trace(d.unmangle("_149"),{fileName:"Detector.hx",lineNumber:63,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[r]}),i(303)},function(){h.trace(d.unmangle("_150"),{fileName:"Detector.hx",lineNumber:68,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[r]}),n(2)})},function(e){h.trace(d.unmangle("_151")+r,{fileName:"Detector.hx",lineNumber:72,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),i(303)},function(){h.trace(d.unmangle("_152")+r,{fileName:"Detector.hx",lineNumber:77,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),n(1)})}else h.trace(d.unmangle("_153"),{fileName:"Detector.hx",lineNumber:82,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),t()},ping:function(e,t,i,n){var o=new ga(e),r=!1,a=Y.delay(function(){h.trace(d.unmangle("_140"),{fileName:"Detector.hx",lineNumber:97,className:"secretmedia.pptjs.Detector",methodName:"ping"}),r=!0,o.cancel(),n()},2e3);o.onData=function(e){r||(t(),a.stop())},o.onError=function(e){h.trace(d.unmangle("_141")+e,{fileName:"Detector.hx",lineNumber:110,className:"secretmedia.pptjs.Detector",methodName:"ping"}),r||(i(e),a.stop())},o.onStatus=function(e){r||(h.trace(d.unmangle("_142")+e+d.unmangle("_143"),{fileName:"Detector.hx",lineNumber:118,className:"secretmedia.pptjs.Detector",methodName:"ping"}),o.cancel())},o.request()},pingFlash:function(e,t,i,n){var o=this;null==this.bridge&&(this.bridge=new ca),this.bridge.loadSwf(this.pingSwfUrl,function(){var r=o.bridge.createCallback(o.bridge,function(o){switch(h.trace(d.unmangle("_145")+o+d.unmangle("_127")+e+")",{fileName:"Detector.hx",lineNumber:136,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o){case d.unmangle("_122"):t();break;case d.unmangle("_123"):i();break;case d.unmangle("_124"):n()}});h.trace(d.unmangle("_146")+e+")",{fileName:"Detector.hx",lineNumber:143,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o.bridge.callAsMethod(d.unmangle("_147"),[e,r])},function(){n()})},start:function(e,t,i,n){1!=e.enable?(h.trace(d.unmangle("_159"),{fileName:"Detector.hx",lineNumber:204,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(111)):this.testDom(e.divId)?(h.trace(d.unmangle("_160")+e.divId+")",{
fileName:"Detector.hx",lineNumber:210,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(302)):(h.trace(d.unmangle("_161")+e.divId+")",{fileName:"Detector.hx",lineNumber:214,className:"secretmedia.pptjs.Detector",methodName:"start"}),0!=e.testUrls?this.testUrls(e.urls,function(){h.trace(d.unmangle("_162"),{fileName:"Detector.hx",lineNumber:218,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)},function(e){h.trace(d.unmangle("_163"),{fileName:"Detector.hx",lineNumber:222,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(e)},function(e){h.trace(d.unmangle("_164"),{fileName:"Detector.hx",lineNumber:226,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(e)}):(h.trace(d.unmangle("_165"),{fileName:"Detector.hx",lineNumber:231,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)))},__class__:Q};var z={__ename__:!0,__constructs__:["NO_CONFIG_YET","CONSTRUCTOR_PARAM","LOADED"],NO_CONFIG_YET:["NO_CONFIG_YET",0]};z.NO_CONFIG_YET.toString=I,z.NO_CONFIG_YET.__enum__=z,z.CONSTRUCTOR_PARAM=["CONSTRUCTOR_PARAM",1],z.CONSTRUCTOR_PARAM.toString=I,z.CONSTRUCTOR_PARAM.__enum__=z,z.LOADED=["LOADED",2],z.LOADED.toString=I,z.LOADED.__enum__=z;var ma=F.secretmedia.pptjs.Ppt=function(e,t,i,o,r){if(null==r&&(r=""),null==o&&(o=""),null==i&&(i=!1),this.postLogger=this.fontLogger=null,this.initCallbacks=[],this.configProvenance=z.NO_CONFIG_YET,this.state=p.NONE,v.overrideTrace(),this.appKey=e,this.clientId=t,this.adBlockAlreadyDetected=i,this.prefix=r,this.browserStorageConfig=new za,this.fontLogger=new ka(window.document,this.browserStorageConfig.alwaysFireFontLogger),h.trace("hash: "+pa.gitHash+", appKey: "+e,{fileName:"Ppt.hx",lineNumber:184,className:"secretmedia.pptjs.Ppt",methodName:"new"}),Q.isPptCompatible()){try{this.context=ba.fromAppKey(e,r),this.publisherId=this.context.config.publisherId}catch(a){a instanceof n&&(a=a.val),this.state=p.DISABLED,h.trace("could not decrypt app key "+k.string(a),{fileName:"Ppt.hx",lineNumber:219,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(7),{appKey:e,clientId:t})}try{this.proxyDomain=this.context.config.proxyDomain,""!=o?(this.configProvenance=z.CONSTRUCTOR_PARAM,this.onConfigSuccess(o)):(this.configUrl=this.context.getConfigUrl(),this.loadConfig())}catch(a){a instanceof n&&(a=a.val),this.state=p.DISABLED,h.trace("could not make config file URL: "+k.string(a),{fileName:"Ppt.hx",lineNumber:244,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(8),{appKey:e,clientId:t})}}else h.trace("this browser is not supported",{fileName:"Ppt.hx",lineNumber:187,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.state=p.DISABLED,this.fontLogger.log(k.string(105),{appKey:e,clientId:t})};ma.__name__=!0,ma.main=function(){v.overrideTrace(),h.trace(d.unmangle("_188"),{fileName:"Ppt.hx",lineNumber:49,className:"secretmedia.pptjs.Ppt",methodName:"main"})},ma.prototype={callInitCallbacks:function(){h.trace(""+this.initCallbacks.length+d.unmangle("_178"),{fileName:"Ppt.hx",lineNumber:254,className:"secretmedia.pptjs.Ppt",methodName:"callInitCallbacks"});for(var e=0,t=this.initCallbacks;e<t.length;){var i=t[e];++e,i()}this.initCallbacks=[]},loadConfig:function(){this.state=p.INIT_PENDING,this.configProvenance=z.LOADED,h.trace(d.unmangle("_186"),{fileName:"Ppt.hx",lineNumber:268,className:"secretmedia.pptjs.Ppt",methodName:"loadConfig",customParams:[this.configUrl]});var e=new ga(this.configUrl);e.onData=G(this,this.onConfigSuccess),e.onError=G(this,this.onConfigError),e.request()},onConfigTimeout:function(){h.trace(d.unmangle("_185"),{fileName:"Ppt.hx",lineNumber:282,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeout"}),this.state=p.DISABLED,this.callInitCallbacks()},onConfigTimeoutPingFlash:function(){h.trace(d.unmangle("_184"),{fileName:"Ppt.hx",lineNumber:294,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeoutPingFlash"}),this.onConfigTimeout()},onConfigError:function(e){h.trace(d.unmangle("_187"),{fileName:"Ppt.hx",lineNumber:304,className:"secretmedia.pptjs.Ppt",methodName:"onConfigError",customParams:[e]}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,202)},onConfigErrorPingFlash:function(){h.trace(d.unmangle("_181"),{fileName:"Ppt.hx",lineNumber:317,className:"secretmedia.pptjs.Ppt",methodName:"onConfigErrorPingFlash"}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,200)},onConfigSuccess:function(e){h.trace(d.unmangle("_170"),{fileName:"Ppt.hx",lineNumber:331,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"});try{this.config=this.context.parseConfig(e)}catch(t){t instanceof n&&(t=t.val),h.trace(d.unmangle("_171"),{fileName:"Ppt.hx",lineNumber:337,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[t,e]})}null!=this.config.proxyUrl&&""!=this.config.proxyUrl&&(this.proxyDomain=this.config.proxyUrl),h.trace(d.unmangle("_172"),{fileName:"Ppt.hx",lineNumber:343,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[this.config]}),this.postLogger=new ea(this.context.getProxy(this.config)),e=d.unmangle("_173"),e=this.proxify(u.makeAbsolute("//smblock.s3.amazonaws.com/sdk/master/ping.swf",window.location.href)),this.detector=new Q(e),1==this.adBlockAlreadyDetected?(this.state=p.BLOCKED,this.onConfigSuccessPingFlash()):0==this.config.testProxyDomainInFlash||0==Q.detectFlashPlayer()?(h.trace(d.unmangle("_179")+k.string(this.config.testProxyDomainInFlash),{fileName:"Ppt.hx",lineNumber:360,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.onConfigSuccessPingFlash()):(h.trace(d.unmangle("_180")+this.configUrl,{fileName:"Ppt.hx",lineNumber:365,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.detector.pingFlash(this.configUrl,G(this,this.onConfigSuccessPingFlash),G(this,this.onConfigErrorPingFlash),G(this,this.onConfigTimeoutPingFlash)))},onConfigSuccessPingFlash:function(){h.trace(d.unmangle("_177"),{fileName:"Ppt.hx",lineNumber:372,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccessPingFlash"}),this.state==p.INIT_PENDING&&(this.state=p.INIT_DONE),this.callInitCallbacks()},proxify:function(e){h.trace(d.unmangle("_174")+e+" "+k.string(this.config),{fileName:"Ppt.hx",lineNumber:387,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),this.configProvenance==z.NO_CONFIG_YET&&h.trace(d.unmangle("_175"),{fileName:"Ppt.hx",lineNumber:390,className:"secretmedia.pptjs.Ppt",methodName:"proxify"});try{return this.context.getProxy(this.config).encode(e)}catch(t){return t instanceof n&&(t=t.val),h.trace(d.unmangle("_176")+k.string(t),{fileName:"Ppt.hx",lineNumber:397,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),e}},unblock:function(e,t){var i=this;h.trace(d.unmangle("_189")+e+" "+k.string(t),{fileName:"Ppt.hx",lineNumber:410,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var o=function(e,o){try{h.trace(d.unmangle("_190")+e+" "+(null==o?"null":""+o),{fileName:"Ppt.hx",lineNumber:414,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),t(e,o)}catch(r){r instanceof n&&(r=r.val),h.trace(d.unmangle("_191"),{fileName:"Ppt.hx",lineNumber:418,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[r,t]}),null!=i.postLogger?i.postLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId}):i.fontLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId})}};switch(this.state){case d.unmangle("_88"):case d.unmangle("_87"):h.trace(d.unmangle("_192"),{fileName:"Ppt.hx",lineNumber:431,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e]}),this.initCallbacks.push(function(){h.trace(d.unmangle("_193"),{fileName:"Ppt.hx",lineNumber:434,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e,i.state]}),i.unblock(e,t)});break;case d.unmangle("_93"):this.disabled(e,o,null);break;case d.unmangle("_90"):this.notBlocked(e,o,null);break;case d.unmangle("_91"):this.blocked(e,o,null);break;case d.unmangle("_92"):this.ourDomainBlocked(e,null);break;case d.unmangle("_89"):h.trace(d.unmangle("_199"),{fileName:"Ppt.hx",lineNumber:449,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var r=this.browserStorageConfig.getDetectionState();if(null!=r)switch(r){case d.unmangle("_93"):this.state=p.DISABLED,h.trace(d.unmangle("_200"),{fileName:"Ppt.hx",lineNumber:457,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,107);break;case d.unmangle("_90"):this.state=p.NOT_BLOCKED,h.trace(d.unmangle("_201"),{fileName:"Ppt.hx",lineNumber:461,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.notBlocked(e,o,404);break;case d.unmangle("_91"):this.state=p.BLOCKED,h.trace(d.unmangle("_202"),{fileName:"Ppt.hx",lineNumber:465,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.blocked(e,o,307);break;default:this.state=p.DISABLED,h.trace(d.unmangle("_203"),{fileName:"Ppt.hx",lineNumber:469,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,109)}else this.detector.start(this.config,function(t){i.state=p.NOT_BLOCKED,h.trace(d.unmangle("_204")+t+d.unmangle("_205"),{fileName:"Ppt.hx",lineNumber:477,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.NOT_BLOCKED),i.notBlocked(e,o,t)},function(t){h.trace(d.unmangle("_204")+t+d.unmangle("_206"),{fileName:"Ppt.hx",lineNumber:483,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.BLOCKED),i.blocked(e,o,t)},function(t){i.state=p.DISABLED,h.trace(d.unmangle("_204")+t+d.unmangle("_207"),{fileName:"Ppt.hx",lineNumber:490,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.DISABLED),i.disabled(e,o,t)})}},ourDomainBlocked:function(e,t){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:507,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_183"),{fileName:"Ppt.hx",lineNumber:508,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:509,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),null!=t&&(null!=this.postLogger?this.postLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}))},handleError:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:527,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_208")+e,{fileName:"Ppt.hx",lineNumber:528,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:529,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),this.state=p.DISABLED,t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},blocked:function(e,t,i){null!=this.config.vastUrl&&""!=this.config.vastUrl&&(h.trace(d.unmangle("_196")+this.config.vastUrl+")",{fileName:"Ppt.hx",lineNumber:553,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),e=this.config.vastUrl),e=this.proxify(e),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:558,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_197")+e,{fileName:"Ppt.hx",lineNumber:559,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:560,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),this.state=p.BLOCKED,this.config.virtualDom?y.startVirtualDom(this.proxyDomain,this.config.whiteList,this.prefix):h.trace(d.unmangle("_198"),{fileName:"Ppt.hx",lineNumber:568,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),t(e,!0),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},notBlocked:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:589,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_195")+e,{fileName:"Ppt.hx",lineNumber:590,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:591,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},disabled:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:611,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_194")+e,{fileName:"Ppt.hx",lineNumber:612,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:613,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},__class__:ma};var Ja=0;Array.prototype.indexOf&&(l.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)}),String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Ka={__name__:["Int"]},La={__name__:["Dynamic"]},Ga=Number;Ga.__name__=["Float"];var Ha=Boolean;Ha.__ename__=["Bool"];var Ma={__name__:["Class"]},Na={};null==Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=i++;t[o]=e(this[o])}return t}),null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=this[i++];e(o)&&t.push(o)}return t}),ha.content=[{name:"__",data:"eyJfMCI6IndoaXRlTGlzdCIsIl8xIjoiZ2V0QXR0cmlidXRlIiwiXzIiOiJzZXRBdHRyaWJ1dGUiLCJfMyI6ImRhdGEtcGFzc3BhcnRvdXQiLCJfNCI6ImZvcnRib3lhcmQiLCJfNSI6InN0YXJ0VmlydHVhbERvbSAiLCJfNiI6IkhUTUxFbGVtZW50IiwiXzciOiJwcm90b3R5cGUiLCJfOCI6IkNhbGwgdG8gIiwiXzkiOiIgd2l0aCAiLCJfMTAiOiJhcHBlbmRDaGlsZCIsIl8xMSI6IlZpcnREb206OiBhcHBlbmRDaGlsZEFuZEluc2VydEJlZm9yZSIsIl8xMiI6InNyYyIsIl8xMyI6IlZpcnREb206OiBwcm94aWZpZWQgIiwiXzE0IjoiYWJvdXQ6IiwiXzE1IjoibWFpbHRvOiIsIl8xNiI6ImNocm9tZToiLCJfMTciOiJqYXZhc2NyaXB0OiIsIl8xOCI6IlZpcnREb206OiBlbmNvZGVVcmwgcmV0dXJucyAiLCJfMTkiOiJ3aGl0ZUxpc3RBbGwiLCJfMjAiOiJmcm9tanMiLCJfMjEiOiJWaXJ0RG9tOjogV2hpdGUgbGlzdCByZWplY3Q6ICIsIl8yMiI6IlZpcnREb206OiByZWF0dGFjaCAiLCJfMjMiOiJTQ1JJUFQiLCJfMjQiOiJJRlJBTUUiLCJfMjUiOiJFTUJFRCIsIl8yNiI6IlBBUkFNIiwiXzI3IjoibW92aWUiLCJfMjgiOiJWaXJ0RG9tOjogcHJveGlmaWVkIChQQVJBTSB0YWcpICIsIl8yOSI6IlZpcnREb206OiBmb3VuZCBlbWJlZCB0YWcgaW4gb2JqZWN0IHRhZyAiLCJfMzAiOiJPQkpFQ1QiLCJfMzEiOiJWaXJ0RG9tOjogRXJyb3Igd2hpbGUgcHJvY2Vzc2luZyBlbGVtZW50ICIsIl8zMiI6IlZpcnREb206OiBFcnJvciB3aGlsZSBpbnZva2luZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uIiwiXzMzIjoiaW5zZXJ0QmVmb3JlIiwiXzM0Ijoid2luZG93IiwiXzM1IjoiY3JlYXRlRWxlbWVudCIsIl8zNiI6IlZpcnREb206OiBjcmVhdGVFbGVtZW50IiwiXzM3IjoicG9zdE1lc3NhZ2UiLCJfMzgiOiJWaXJ0RG9tOjogcG9zdE1lc3NhZ2UiLCJfMzkiOiJFUmVnOjptYXRjaGVkIiwiXzQwIjoiTm8gc3RyaW5nIG1hdGNoZWQiLCJfNDEiOiIjX19kZWxpbV9fIyIsIl80MiI6Ik5vdCBpbXBsZW1lbnRlZCIsIl80MyI6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLCJfNDQiOiJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3IiwiXzQ1Ijoic2VjcmV0bWVkaWEiLCJfNDYiOiJ0b3RvdG90b3QiLCJfNDciOiIweCIsIl80OCI6InVoQUZ6IiwiXzQ5IjoicE9pZCIsIl81MCI6InhhYXhhIiwiXzUxIjoiZFNWS2N6IiwiXzUyIjoieGFaWnIiLCJfNTMiOiJkc29palYiLCJfNTQiOiIvLyIsIl81NSI6ImNvbmZpZ1VybCIsIl81NiI6IkNhbm5vdCBkZWNvZGUgc3RyaW5nOiBrZXkgaXMgaW52YWxpZCIsIl81NyI6ImlkUHVibGlzaGVyIiwiXzU4Ijoic21TZGtWZXJzaW9uIiwiXzU5IjoiZ2l0SGFzaCIsIl82MCI6ImNvbmZpZyIsIl82MSI6InR5cGUiLCJfNjIiOiJwdWJsaXNoZXJJZCIsIl82MyI6ImxvZzovLyIsIl82NCI6IlJlZmxlY3QuZ2V0UHJvcGVydHkiLCJfNjUiOiJnZXRfIiwiXzY2Ijoic2V0XyIsIl82NyI6IlJlZmxlY3Quc2V0UHJvcGVydHkiLCJfNjgiOiJfX2lkX18iLCJfNjkiOiJoeF9fY2xvc3VyZXNfXyIsIl83MCI6ImZ1bmN0aW9uIiwiXzcxIjoic3RyaW5nIiwiXzcyIjoib2JqZWN0IiwiXzczIjoiY2xpZW50SWQiLCJfNzQiOiJhcHBLZXkiLCJfNzUiOiJNaXNzaW5nIGZpZWxkcyBpbiB0aGUgZGF0YSBvYmplY3QuIE11c3QgaGF2ZSBjbGllbnRJZCBhbmQgYXBwS2V5IiwiXzc2IjoiLy9jYWNoZS5mcmVlZm9udHN0b3JlLmNvbS9hcmlhbC0iLCJfNzciOiIudHRmPyIsIl83OCI6IkBmb250LWZhY2UgeyBmb250LWZhbWlseTogXCJkYWZvbnRcIjsgc3JjOiB1cmwoIiwiXzc5IjoiKTt9IiwiXzgwIjoidGV4dC9jc3MiLCJfODEiOiJzZWNyZXRtZWRpYS5lbmFibGVMb2dzIiwiXzgyIjoiKGZ1bmN0aW9uKCl7XG5cdFx0aWYoIHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgbG9jYXRpb24gPT0gXCJ1bmRlZmluZWRcIiApIHtcbiAgICAgIC8vIG5vZGVqcyBjYXNlXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dmFyIHdpbiA9IHdpbmRvdztcblx0XHR0cnkge1xuXHRcdFx0d2luID0gd2luZG93LnRvcDtcblx0XHR9XG4gICAgY2F0Y2goZSkge31cbiAgICB0cnl7XG4gICAgICByZXR1cm4gd2luLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiIiwiXzgzIjoiXCIpID09PSBcInRydWVcIiB8fFxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCIiLCJfODQiOiJcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgIFtcImxvY2FsaG9zdFwiLCBcIjEyNy4wLjAuMVwiXS5pbmRleE9mKCBsb2NhdGlvbi5ob3N0bmFtZSApID4gLTE7XG4gICAgfVxuICAgIGNhdGNoKGUpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblx0fSkoKSIsIl84NSI6ImZ1bmN0aW9uKCl7XG5cdFx0dmFyIGEgPSBhcmd1bWVudHMsYztcblx0XHR0cnkgeyBjID0gd2luZG93LnRvcC5jb25zb2xlOyB9IGNhdGNoICggZSApIHsgYyA9IGNvbnNvbGU7IH1cbiAgICAgICAgYy5sb2cuYXBwbHkoYywgYVswXSk7XG5cdH0iLCJfODYiOiI6OiIsIl84NyI6Ik5PTkUiLCJfODgiOiJJTklUX1BFTkRJTkciLCJfODkiOiJJTklUX0RPTkUiLCJfOTAiOiJOT1RfQkxPQ0tFRCIsIl85MSI6IkJMT0NLRUQiLCJfOTIiOiJPVVJfRE9NQUlOX0JMT0NLRUQiLCJfOTMiOiJESVNBQkxFRCIsIl85NCI6IkZsYXNoVmFycyIsIl85NSI6ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIiwiXzk2IjoiQWN0aXZlWE9iamVjdCIsIl85NyI6ImNsYXNzaWQiLCJfOTgiOiJjbHNpZDpkMjdjZGI2ZS1hZTZkLTExY2YtOTZiOC00NDQ1NTM1NDAwMDAiLCJfOTkiOiJkYXRhIiwiXzEwMCI6Ij1cIiIsIl8xMDEiOiI8b2JqZWN0IGlkPVwiIiwiXzEwMiI6IjxwYXJhbSBuYW1lPVwiIiwiXzEwMyI6IlwiIHZhbHVlPVwiIiwiXzEwNCI6IlwiIC8+IiwiXzEwNSI6Ijwvb2JqZWN0PiIsIl8xMDYiOiJkaXYiLCJfMTA3IjoiYWxyZWFkeSBsb2FkZWQiLCJfMTA4IjoiYWxsb3dzY3JpcHRhY2Nlc3MiLCJfMTA5IjoiYWx3YXlzIiwiXzExMCI6ImFsbG93bmV0d29ya2luZyIsIl8xMTEiOiJhbGwiLCJfMTEyIjoid2lkdGgiLCJfMTEzIjoiaGVpZ2h0IiwiXzExNCI6ImJyaWRnZU5hbWUiLCJfMTE1IjoiX29iaiIsIl8xMTYiOiJUaW1lb3V0ISAiLCJfMTE3Ijoib25GbGFzaExvYWRlZCBjYWxsZWQgYnkgQVMgIiwiXzExOCI6ImVtYmVkIiwiXzExOSI6IkVycm9yIGluIEFTOiAiLCJfMTIwIjoiY2FsbENhbGxiYWNrIEVycm9yOiBjb3VsZCBub3QgZmluZCB0aGUgRmxhc2ggb2JqZWN0IHRhZyAoaWQ9IiwiXzEyMSI6ImNhbGxDYWxsYmFjayIsIl8xMjIiOiJsb2FkZWQiLCJfMTIzIjoiYmxvY2tlZCIsIl8xMjQiOiJ0aW1lb3V0IiwiXzEyNSI6ImNhbGxpbmcgIiwiXzEyNiI6IkVycm9yIGNhbGxpbmcgY2FsbGJhY2s6ICIsIl8xMjciOiIgKCIsIl8xMjgiOiIsICIsIl8xMjkiOiJjYmtfIiwiXzEzMCI6IkJyaWRnZUJhc2U6OiBjcmVhdGVDYWxsYmFjayAiLCJfMTMxIjoiaW5zdF8iLCJfMTMyIjoiQnJpZGdlQmFzZTo6IGFkZEluc3RhbmNlICIsIl8xMzMiOiJjbGFzcyIsIl8xMzQiOiJpZCIsIl8xMzUiOiJzdHlsZSIsIl8xMzYiOiJ3aWR0aDoxcHg7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAiLCJfMTM3IjoiRXJyb3I6IEphdmFzY3JpcHQgRE9NIHRlc3QgZmFpbGVkIHdpdGggYW4gZXJyb3IgIiwiXzEzOCI6InRlc3REb20gcmV0dXJucyBkaXYgIiwiXzEzOSI6IiBpcyBoaWRkZW46ICIsIl8xNDAiOiJUaW1lb3V0ISIsIl8xNDEiOiJvbkVycm9yICIsIl8xNDIiOiJvblN0YXR1cyAiLCJfMTQzIjoiID0+IGNhbmNlbCByZXF1ZXN0IiwiXzE0NCI6InRlc3QgVVJMcyBpbiBwcm9nZXNzLCB0aGlzIFVSTCBpcyBub3QgYmxvY2tlZCBpbiBKUzogIiwiXzE0NSI6IlBpbmcgaXMgYmFjayB3aXRoICIsIl8xNDYiOiJQaW5nIHN0YXJ0cyAoIiwiXzE0NyI6InBpbmciLCJfMTQ4IjoidGVzdCBVUkxzIGluIHByb2dlc3MsIHRoaXMgVVJMIGlzIG5vdCBibG9ja2VkIGluIEZsYXNoOiAiLCJfMTQ5IjoidGVzdCBVUkxzIGVuZCwgYmxvY2tlZCBpbiBGbGFzaCIsIl8xNTAiOiJ0ZXN0IFVSTHMgZW5kLCB0aW1lb3V0IGluIEZsYXNoISIsIl8xNTEiOiJ0ZXN0IFVSTHMgZW5kLCBibG9ja2VkIGluIEpTOiAiLCJfMTUyIjoidGVzdCBVUkxzIGVuZCwgdGltZW91dCBpbiBKUyEgIiwiXzE1MyI6InRlc3QgVVJMcyBlbmQsIE5PVCBibG9ja2VkICIsIl8xNTQiOiJTaG9ja3dhdmUgRmxhc2giLCJfMTU1IjoiU2hvY2t3YXZlIEZsYXNoIDIuMCIsIl8xNTYiOiJmbGFzaCBpcyBpbnN0YWxsZWQgYnV0IE5PVCBhY3RpdmF0ZWQiLCJfMTU3IjoiZmxhc2ggaXMgaW5zdGFsbGVkIGFuZCBhY3RpdmF0ZWQiLCJfMTU4IjoiZmxhc2ggaXMgTk9UIGluc3RhbGxlZCIsIl8xNTkiOiJEZXRlY3Rpb24gaXMgZGlzYWJsZWQgZnJvbSBjb25maWciLCJfMTYwIjoidGVzdERvbSA9PiBibG9ja2VkICgiLCJfMTYxIjoidGVzdERvbSA9PiBOT1QgYmxvY2tlZCAoIiwiXzE2MiI6InRlc3RVcmxzID0+IG5vdCBibG9ja2VkIiwiXzE2MyI6InRlc3RVcmxzID0+IGJsb2NrZWQiLCJfMTY0IjoidGVzdFVybHMgdGltZW91dCA9PiBkaXNhYmxlZCIsIl8xNjUiOiJ0ZXN0VXJscyBpcyBkaXNhYmxlZCBmcm9tIGNvbmZpZyA9PiBub3QgYmxvY2tlZCIsIl8xNjYiOiJzZWNyZXRtZWRpYS5lbmFibGVEZWJ1ZyIsIl8xNjciOiJzZWNyZXRtZWRpYS5hbHdheXNGaXJlRm9udExvZ2dlciIsIl8xNjgiOiJzZWNyZXRtZWRpYS5hbGxvd0RldGVjdGlvblN0YXRlQ2FjaGUiLCJfMTY5Ijoic2VjcmV0bWVkaWEuZGV0ZWN0aW9uU3RhdGUiLCJfMTcwIjoiYmVnaW4gcGFyc2UgY29uZmlnIGZpbGUiLCJfMTcxIjoiRXJyb3IgcGFyc2luZyBjb25maWcgZmlsZSAiLCJfMTcyIjoiZW5kIHBhcnNlIGNvbmZpZyBmaWxlICIsIl8xNzMiOiIvc2RrL3B1Yi9waW5nLnN3ZiIsIl8xNzQiOiJwcm94eWZ5ICIsIl8xNzUiOiJFcnJvcjogcHJveGlmaWVkIGNhbGxlZCBiZWZvcmUgdGhlIGNvbmZpZyBhbmQgZGV0ZWN0aW9uIGhhdmUgb2NjdXJlZCIsIl8xNzYiOiJFcnJvciAiLCJfMTc3Ijoib25Db25maWdTdWNjZXNzUGluZ0ZsYXNoIiwiXzE3OCI6IiBjYWxsYmFja3MiLCJfMTc5Ijoic2tpcCBmbGFzaCBwaW5nOiAiLCJfMTgwIjoiZmxhc2ggcGluZyBjb25maWcgVVJMICIsIl8xODEiOiJFcnJvciBsb2FkaW5nIGNvbmZpZyBmcm9tIEZsYXNoIiwiXzE4MiI6IioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioiLCJfMTgzIjoiQWRibG9jayBkZXRlY3RlZCBhbmQgb3VyIGRvbWFpbiBibG9ja2VkIiwiXzE4NCI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcgaW4gRmxhc2guIiwiXzE4NSI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcuIERvIG5vdGhpbmcgYW55bW9yZSwganVzdCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgYXMgaWYgdGhlcmUgaXMgbm8gYWQgYmxvY2siLCJfMTg2IjoiYmVnaW4gbG9hZCBjb25maWcgZmlsZSAiLCJfMTg3IjoiRXJyb3IgbG9hZGluZyBjb25maWcgPT4gb3VyIGRvbWFpbiBpcyBibG9ja2VkIiwiXzE4OCI6IlBwdDo6IEJvb3RzdHJhcCIsIl8xODkiOiJ1bmJsb2NrIGNhbGxlZCBieSBob3N0LCAiLCJfMTkwIjoiY2JrIGNhbGxlZCAiLCJfMTkxIjoiRXJyb3Igd2hpbGUgY2FsbGluZyB0aGUgY2FsbGJhY2sgcGFzc2VkIHRvIGNiazogIiwiXzE5MiI6IlVuYmxvY2ssIGluaXQgcGVuZGluZywgZGVsYXkgZXhlY3V0aW9uIiwiXzE5MyI6IlVuYmxvY2sgaXMgYmFjayBhZnRlciBpbml0IiwiXzE5NCI6IlNNIGRpc2FibGVkICIsIl8xOTUiOiJBZGJsb2NrIG5vdCBkZXRlY3RlZCAiLCJfMTk2IjoiY29uZmlnLnZhc3RVcmwgZGV0ZWN0ZWQsIG91ciB2YXN0IHdpbGwgYmUgcHJveGlmaWVkIGluc3RlYWQgb2YgdGhlIHByb3ZpZGVkIG9uZSAoIiwiXzE5NyI6IkFkYmxvY2sgZGV0ZWN0ZWQgIiwiXzE5OCI6IlZpcnR1YWxEb20gaXMgZGlzYWJsZWQ6IGZyb20gY29uZmlnIiwiXzE5OSI6IioqIHN0YXJ0IGRldGVjdG9yIiwiXzIwMCI6IioqIGRldGVjdGlvbiBzdGF0ZSB3YXMgY2FjaGVkOiBkaXNhYmxlZCIsIl8yMDEiOiIqKiBkZXRlY3Rpb24gc3RhdGUgd2FzIGNhY2hlZDogbm90IGJsb2NrZWQiLCJfMjAyIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQ6IGJsb2NrZWQiLCJfMjAzIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQgYnV0IHRoZSBzdGF0ZSBpcyB1bmtub3duLCBub3cgZGlzYWJsZWQiLCJfMjA0IjoiKiogc3RhcnQgaXMgYmFjayAgKCIsIl8yMDUiOiIsIG5vdCBibG9ja2VkKSIsIl8yMDYiOiIsIGJsb2NrZWQpIiwiXzIwNyI6IiwgZGlzYWJsZWQpIiwiXzIwOCI6IkFuIGVycm9yIG9jY3VyZWQsIHZhc3RVcmw9ICIsIl8yMDkiOiJhbHRlcm5hdGVVcmwiLCJfMjEwIjoicHJveHlCYXNlIiwiXzIxMSI6IlRvbyBtYW55IGFyZ3VtZW50cyIsIl8yMTIiOiJObyBzdWNoIGNvbnN0cnVjdG9yICIsIl8yMTMiOiJDb25zdHJ1Y3RvciAiLCJfMjE0IjoiIG5lZWQgcGFyYW1ldGVycyIsIl8yMTUiOiIgZG9lcyBub3QgbmVlZCBwYXJhbWV0ZXJzIiwiXzIxNiI6IiBpcyBub3QgYSB2YWxpZCBlbnVtIGNvbnN0cnVjdG9yIGluZGV4IiwiXzIxNyI6Il9fY2xhc3NfXyIsIl8yMTgiOiJfX3Byb3BlcnRpZXNfXyIsIl8yMTkiOiJfX25hbWVfXyIsIl8yMjAiOiJfX2ludGVyZmFjZXNfXyIsIl8yMjEiOiJfX3N1cGVyX18iLCJfMjIyIjoiX19tZXRhX18iLCJfMjIzIjoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoyMzQ1NjciLCJfMjI0IjoiJmFtcDsiLCJfMjI1IjoiJmx0OyIsIl8yMjYiOiImZ3Q7IiwiXzIyNyI6IiZxdW90OyIsIl8yMjgiOiImIzAzOTsiLCJfMjI5IjoiMDEyMzQ1Njc4OUFCQ0RFRiIsIl8yMzAiOiJzbSIsIl8yMzEiOiJ0byIsIl8yMzIiOiJodHRwcyIsIl8yMzMiOiJodHRwIiwiXzIzNCI6ImxvZyIsIl8yMzUiOiJtcDQiLCJfMjM2IjoibXAzIiwiXzIzNyI6ImZsdiIsIl8yMzgiOiJtcGVnIiwiXzIzOSI6IndtdiIsIl8yNDAiOiJ3ZWJtIiwiXzI0MSI6IjNncCIsIl8yNDIiOiJmNHYiLCJfMjQzIjoiZjRtIiwiXzI0NCI6InVrbiIsIl8yNDUiOiI6Ly8iLCJfMjQ2IjoiLnN3ZiIsIl8yNDciOiJodHRwOi8vIn0"}];var r={},sa=Ba.ArrayBuffer||H;null==sa.prototype.slice&&(sa.prototype.slice=H.sliceImpl);var ra=Ba.Uint8Array||O._new;pa.gitHash=q.trim("fb603bc\n"),A.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A.BYTES=w.ofString(A.CHARS),new qa(0,0),m.__toStr={}.toString,O.BYTES_PER_ELEMENT=1,ba.VERSION="1.0.0",d.map=JSON.parse(ha.getString("__")),u.DOUBLE_SLASH="//",u.SPECIAL_PREFIXES=[d.unmangle("_14"),d.unmangle("_15"),d.unmangle("_16"),d.unmangle("_17")],d.unmangle("_122"),d.unmangle("_123"),d.unmangle("_124"),T.FLASHVAR_BRIDGE_NAME=d.unmangle("_114"),ca.TIMEOUT_DELAY_MS=2e3,C.SCHEMES=function(e){e=new L;var t=d.unmangle("_232");return null!=r[t]?e.setReserved(t,1):e.h[t]=1,t=d.unmangle("_233"),null!=r[t]?e.setReserved(t,0):e.h[t]=0,t=d.unmangle("_234"),null!=r[t]?e.setReserved(t,2):e.h[t]=2,e}(this),C.KEEP_EXTENSIONS=[d.unmangle("_235"),d.unmangle("_236"),d.unmangle("_237"),d.unmangle("_238"),d.unmangle("_239"),d.unmangle("_240"),d.unmangle("_241"),d.unmangle("_242"),d.unmangle("_243"),d.unmangle("_244")],V.BASE64=d.unmangle("_43"),V.BASE32=d.unmangle("_44"),D.SALT_LENGTH=8,D.SEPARATOR=":",D.replacements=function(e){e=new L;var t=[d.unmangle("_48"),d.unmangle("_49"),d.unmangle("_50")];return null!=r["+"]?e.setReserved("+",t):e.h["+"]=t,t=[d.unmangle("_51"),d.unmangle("_52"),d.unmangle("_53")],null!=r["/"]?e.setReserved("/",t):e.h["/"]=t,e}(this),ja.AMP="&amp;",W.SEPARATOR=":",M.CHARS=d.unmangle("_223"),M.BYTES=w.ofString(M.CHARS),v.KEY_ENABLE_LOGS=d.unmangle("_81"),v.isDebugExpr=d.unmangle("_82")+v.KEY_ENABLE_LOGS+d.unmangle("_83")+v.KEY_ENABLE_LOGS+d.unmangle("_84"),v.traceFunction=d.unmangle("_85"),ka.PERCENT_SENT=1,P.ENABLE_DEBUG=d.unmangle("_166"),P.ALWAYS_FIRE_FONT_LOGGER=d.unmangle("_167"),P.DETECTION_STATE=d.unmangle("_169"),P.ALLOW_DETECTION_STATE_CACHE=d.unmangle("_168"),p.NONE=d.unmangle("_87"),p.INIT_PENDING=d.unmangle("_88"),p.INIT_DONE=d.unmangle("_89"),p.NOT_BLOCKED=d.unmangle("_90"),p.BLOCKED=d.unmangle("_91"),p.OUR_DOMAIN_BLOCKED=d.unmangle("_92"),p.DISABLED=d.unmangle("_93"),Q.TIMEOUT_DELAY_MS=2e3,N.main()}("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),SMSdk}),Ndn_Require.define("models/Ndn/AdBlockDetector",["jquery","underscore","backbone","lib/secret-media","models/Ndn/EventHub"],function(e,t,i,n,o){var r,a,s="eyJjb25maWdVcmwiOiJjemFyaXR6YWxhdWdoYWJseS5jb20iLCJwdWJsaXNoZXJJZCI6Ijk3In0=",l=null;return{reset:function(){l=null,a&&a.reject()},getDetectionProcess:function(){return a||(a=this.detectAdBlock()),a.promise()},detectAdBlock:function(){var t=this;return e.Deferred(function(e){t.getSdk().unblock("",function(i,n){e&&"rejected"!=e.state()&&(l=n,o.trigger("adBlockDetectionComplete",{adBlockDetectionId:t.getCachedScenarioId()}),e.resolve())})})},isDetectionComplete:function(){return null!==l},hasAdBlocker:function(t){var i=this;return e.Deferred(e.proxy(function(e){function n(){e.resolve(i.getCachedScenarioId())}return!t||i.isDetectionComplete()?n():void i.getDetectionProcess().done(n)},this)).promise()},proxify:function(e){return this.getSdk().proxify(e)},getSdk:function(){return r||(r=new n(s,"")),r},getCachedScenarioId:function(){return null===l?2:l===!0?1:0}}}),Ndn_Require.define("models/Ndn/TemplateSet",["underscore","backbone","mustache"],function(e,t,i){return t.Model.extend({defaults:{rendered:[],templates:{}},initialize:function(e){this.set("templates",e)},getTemplate:function(t,n){var o=this.get("templates")[t][0],r=this.get("templates")[t][1];return"undefined"==typeof n?("undefined"==typeof this.get("rendered")[t]&&(this.get("rendered")[t]=i.to_html(o,r)),this.get("rendered")[t]):i.to_html(o,e.extend({},r,n))}})}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		auto_replay='false' branding_preload='none' core_player_name='ndn-player'\n		dvr_enabled='0' fullscreen_enabled='true' hds_live_low_latency='true'\n		mbr_start_index='2' netsession_install_prompt_frequency_secs='-1'\n		show_feature_bar='false' use_last_known_bitrate='false'\n		use_netsession_client='false' volume='75'>\n	</player>\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets_small.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		branding_preload='none' core_player_name='ndn-player' dvr_enabled='0'\n		hds_live_low_latency='true' mbr_start_index='2'\n		netsession_install_prompt_frequency_secs='-1' show_feature_bar='false'\n		use_last_known_bitrate='false' use_netsession_client='false'>\n	</player>\n	<!-- \n	<view skin='{{akamaiJsLibFolderUrl}}/ndn.assets.small.swf'>\n		<element id='adOptions'>\n			<element id='adChoices' target='http://assets.newsinc.com/info/adchoices.html' />\n			<element id='adCountdown' />\n            <element id=\"adCount\" />\n		</element>\n		<element id='captionDisplay' style='bottom: 0px; opacity:1;' />\n		<element id='controls' scrubPosition='top' backgroundAlpha='.8' height='40' itemMargin='12' autoHideDelay='1' transitionTime='0.5'>\n			<element id='playPauseBtn' />\n			<element id='scrubBar' collapsedHeight='4' style='background: linear-gradient(90deg, #232323 #232323); height: 4px;' />\n			<element id='progressBar' style='background: linear-gradient(90deg, #0099CC #0099CC);' />\n			<element id='loadedBar' style='background: linear-gradient(90deg, #666666 #666666);' />\n			<element id='streamTimeIndicator' position='left'>\n				<element id='streamTime' />\n				<element id='streamDuration' color='#666666' />\n			</element>\n			<element id='shareBtn' />\n			<element id='facebookBtn' />\n			<element id='twitterBtn' />\n			<element id='volumeBar' backgroundColor='#111111' trackColor='#C1C1C3' color='#0099CC' position='relative' width='25' />\n			<element id='volumeBtn' />\n			<element id='fullscreenBtn' />\n			<element id='posterBackground' color='#000000' alpha='1' />\n		</element>\n		<element id=\"loadingView\" radius=\"0\" />\n	</view>\n	-->\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("lib/amp.premier/config/skin/templates",["models/Ndn/TemplateSet","models/Ndn/App","text!lib/amp.premier/config/skin/ndn_assets.xml","text!lib/amp.premier/config/skin/ndn_assets_small.xml"],function(e,t,i,n){var o={akamaiJsLibFolderUrl:t.getAppUrl()+"/js/lib/amp.premier",akamaiResourcesFolderUrl:t.getAppUrl()+"/resources"};return new e({ndn_assets:[i,o],ndn_assets_small:[n,o]})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Amp/Config",["underscore","jquery","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Utils/Helpers","models/Ndn/AdBlockDetector","models/Ndn/Analytics","models/Ndn/Debug","lib/amp.premier/config/skin/templates"],function(e,t,i,n,o,r,a,s,l){return{generateDefaultConfig:function(t){t.akamaiJsLibFolderUrl=t.akamaiJsLibFolderUrl||i.getAppUrl()+"/js/lib/amp.premier",t.akamaiResourcesFolderUrl=t.akamaiResourcesFolderUrl||i.getAppUrl()+"/resources",t.aaspUrl="http:"==window.location.protocol?"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.4/osmf2.0/AkamaiAdvancedStreamingPlugin.swf":t.akamaiResourcesFolderUrl+"/plugins/AkamaiAdvancedStreamingPlugin.swf";var n={resources:[],domain:"newsinc.com",target:"_top",params:{},paths:{player:t.akamaiJsLibFolderUrl+"/",resources:t.akamaiResourcesFolderUrl+"/"},fullscreen:{"native":!0},controls:{autoHide:5,mode:"auto"},captioning:{enabled:!0},info:{enabled:!1},share:{enabled:!0,facebook:!0,twitter:!0},autoplay:!1,autoplayPolicy:"muted",feed:{},volumepanel:{},volume:.75,rules:{PDL:{regexp:"Android 4"}},playoverlay:{enabled:!1},language:"en",locales:{en:{MSG_NEXT_VIDEO:t.adOverlayText,MSG_SECONDS:"seconds",MSG_TIME_SEPARATOR:" / ",MSG_BUFFERING_TEXT:"buffering"}},debug:s.inMode("ampDebug")};return n=e.extend(n,this.getFlashConfig(t)),t.comscoreEnabled&&(n=e.extend(n,this.getComscoreConfig(t))),n=e.extend(n,this.getImaConfig(t))},getFlashConfig:function(e){return{flash:{swf:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer.swf",debug:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-debug.swf",vars:{locale_setting:"en",ad_server_timeout:30,ad_media_server_timeout:30,context_menu_mode:"short",overlay_ad_delay:3,volume:1,auto_replay:!1,fullscreen_enabled:!0,share_enabled:!0,auto_play:!1,hinting_rules:"%7B%22flashTablets%22%3A%7B%22label%22%3A%22Android%202%20%26%203%20or%20Kindle%20Fire%201%22%2C%22regexp%22%3A%22Android%20%5B23%5D%7CSilk/1%22%7D%2C%22html5Phones%22%3A%7B%22label%22%3A%22iPhone%22%2C%22regexp%22%3A%22iPhone%22%7D%2C%22html5Tablets%22%3A%7B%22label%22%3A%22HTML5%20Tablets%22%2C%22regexp%22%3A%22iPad%7CAndroid%204%7CSilk/2%22%7D%2C%22desktop%22%3A%7B%22label%22%3A%22Desktop%22%2C%22regexp%22%3A%22%5E%28%28%3F%21iPad%7CiPhone%7CAndroid%7CBlackBerry%7CPlayBook%7CSilk%29.%29*%24%22%7D%2C%22android_4_gets_m3u8%22%3A%7B%22regexp%22%3A%22Android%204%22%7D%7D",
externalTarget:"_top",domain:"newsinc.com",embedDomain:"newsinc.com",show_play_button_overlay:!1,auto_play_list:!1,core_ads_enabled:!0,suppress_events:"mediaPlayerDataFeedUpdated",hds_enable_ssl_transfer:!0,next_video_timer:-1},params:{wmode:n.isIe()||n.isFirefox()||n.isSafari()&&n.isWindows()?"transparent":"direct"},xml:l.getTemplate("ndn_assets",e),view:{attributes:{skin:e.akamaiJsLibFolderUrl+"/ndn.assets.swf"},elements:{captionDisplay:{attributes:{initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 26%; height:13%; windowColor:0xffffff; windowOpacity:0; font:Arial; fontColor:0xffffff; fontOpacity:1; fontBGColor:0x000000; fontBGOpacity:0.6; edgeType:none; edgeColor:0x00ff00; edgeOpacity:1; scroll:none; fontSize:12;"}},controls:{attributes:{scrubPosition:"top",backgroundAlpha:".8",height:"51",autoHideDelay:"1",transitionTime:"0.50"},elements:{playPauseBtn:{},scrubBar:{attributes:{collapsedHeight:"5",style:"background: linear-gradient(90deg, #232323 #232323); height: 9px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #0099CC #0099CC);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #666666 #666666);"}},streamTimeIndicator:{attributes:{position:"left"},elements:{streamTime:{},streamDuration:{attributes:{color:"#666666"}}}},captionBtn:{},shareBtn:{},facebookBtn:{},twitterBtn:{},volumeBar:{attributes:{backgroundColor:"#111111",trackColor:"#C1C1C3",color:"#0099CC",position:"relative",width:"25"}},volumeBtn:{},fullscreenBtn:{},posterBackground:{attributes:{color:"#000000",alpha:"1"}}}},loadingView:{attributes:{radius:"0"}},adOptions:{elements:{adChoices:{attributes:{target:"http://assets.newsinc.com/info/adchoices.html"}},adCountdown:{},adCount:{}}}}}}}},getComscoreConfig:function(e){return{comscore:{url:i.isOnSsl()?"https://sb.scorecardresearch.com/b":"http://b.scorecardresearch.com/b",data:{c1:"1",c2:"11112732",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c5:"",c6:"#{comscore.siteSection}",c10:"#{comscore.providerCategory}"},events:{ads:[{type:"started",data:{c4:"#{comscore.providerName} 09",c5:"09"}}],video:[{type:"started",data:{c4:"#{comscore.providerName} #{comscore.c5}",c5:"#{comscore.c5}"}}]}},comscorestreamsense:{enabled:!0,resources:[{type:"text/javascript",src:e.akamaiResourcesFolderUrl+"/js/streamsense.4.1412.05.min.js"}],data:{clientId:"11112732",publisherSecret:"c3798e9f708f2d61a9cf8232b0503d5a",metadata:{ads:{ns_st_ci:"#{comscore.videoAssetId}",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c6:"#{comscore.siteSection}",ca2:"null",ca4:"null",ca6:"null"},video:{ns_st_ci:"#{comscore.videoAssetId}",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c6:"#{comscore.siteSection}",ca2:"#{comscore.ca2}",ca3:"#{comscore.ca3}",ca6:"null"}}}}}},getImaConfig:function(e){return{ima:{enabled:!0,version:3,resources:function(){var t=[{type:"text/javascript",src:o.getHttpProtocol()+"//s0.2mdn.net/instream/html5/ima3.js",debug:"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"}];return 1===e.adBlockDetectionId&&(t.push({id:"GoogleIMAPlugin",src:r.proxify(e.akamaiResourcesFolderUrl+"/plugins/GoogleIMAPlugin.swf"),blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"}),t.push({id:"IMAOverlayAdPlugin",src:r.proxify(e.akamaiResourcesFolderUrl+"/plugins/IMAOverlayAdPlugin.swf"),blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"})),t}(),vpaidAllowed:!0,vpaidMode:"insecure",companion:{width:"300",height:"250"},adTagUrl:"#{dfp.adTagUrl}",ppid:"#{dfp.ppid}",disableCompanionAds:!0}}},generatePlayerConfig:function(t){var i={};return i=e.extend(i,this.generateDefaultConfig(t),{contextmenu:!1}),t.comscoreEnabled===!1&&(i=e.extend(i,{comscore:{enabled:!1},comscorestreamsense:{enabled:!1}})),i}}}),Ndn_Require.define("models/Ndn/Enum/Bumper",[],function(){return{bumperVideoStartPosition:5,bumperVideoDuration:6.25}}),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function i(e,t,i){this.name=e,this.body=t,this.type=i}function n(){}function o(){}function r(){this.subCommands=[],this.initializeMacroCommand()}function a(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function d(e){if(null!=d.instanceMap[e])throw Error(d.MULTITON_MSG);this.multitonKey=e,d.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function p(e,t,i){for(var n,o,e=e.split("."),i=i||h.global,r=0,a=e.length;a>r;r++)n=i,o=e[r],i=null==i[o]?i[o]={}:i[o];return null==t?i:n[o]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,i.prototype.getName=function(){return this.name},i.prototype.setBody=function(e){this.body=e},i.prototype.getBody=function(){return this.body},i.prototype.setType=function(e){this.type=e},i.prototype.getType=function(){return this.type},i.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},i.prototype.name=null,i.prototype.type=null,i.prototype.body=null,n.prototype.sendNotification=function(e,t,i){var n=this.getFacade();n&&n.sendNotification(e,t,i)},n.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},n.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(n.MULTITON_MSG);return l.getInstance(this.multitonKey)},n.prototype.multitonKey=null,n.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",o.prototype=new n,o.prototype.constructor=o,o.prototype.execute=function(){},r.prototype=new n,r.prototype.constructor=r,r.prototype.subCommands=null,r.prototype.initializeMacroCommand=function(){},r.prototype.addSubCommand=function(e){this.subCommands.push(e)},r.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},a.NAME="Mediator",a.prototype=new n,a.prototype.constructor=a,a.prototype.getMediatorName=function(){return this.mediatorName},a.prototype.setViewComponent=function(e){this.viewComponent=e},a.prototype.getViewComponent=function(){return this.viewComponent},a.prototype.listNotificationInterests=function(){return[]},a.prototype.handleNotification=function(){},a.prototype.onRegister=function(){},a.prototype.onRemove=function(){},a.prototype.mediatorName=null,a.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new n,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=u.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=d.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,n){this.notifyObservers(new i(e,t,n))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),d.removeView(e),u.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",d.prototype.initializeView=function(){},d.getInstance=function(e){return null==e?null:(null==d.instanceMap[e]&&(d.instanceMap[e]=new d(e)),d.instanceMap[e])},d.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},d.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,i=this.observerMap[e.getName()],n=[],o=0;o<i.length;o++)t=i[o],n.push(t);for(o=0;o<n.length;o++)t=n[o],t.notifyObserver(e)}},d.prototype.removeObserver=function(e,t){for(var i=this.observerMap[e],n=0;n<i.length;n++)if(1==i[n].compareNotifyContext(t)){i.splice(n,1);break}0==i.length&&delete this.observerMap[e]},d.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var i=e.listNotificationInterests();if(0<i.length)for(var n=new t(e.handleNotification,e),o=0;o<i.length;o++)this.registerObserver(i[o],n);e.onRegister()}},d.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},d.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=0;n<i.length;n++)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}return t},d.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},d.removeView=function(e){delete d.instanceMap[e]},d.prototype.mediatorMap=null,d.prototype.observerMap=null,d.instanceMap=[],d.prototype.multitonKey=null,d.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",u.prototype.initializeController=function(){this.view=d.getInstance(this.multitonKey)},u.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},u.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},u.prototype.registerCommand=function(e,i){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=i},u.prototype.hasCommand=function(e){return null!=this.commandMap[e]},u.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},u.removeController=function(e){delete this.instanceMap[e]},u.prototype.view=null,u.prototype.commandMap=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="controller key for this Multiton key already constructed";var h={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var i=new Function;return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},decorate:function(e,t){for(var i in t)e[i]=t[i];return e}};e.puremvc={View:d,Model:c,Controller:u,SimpleCommand:o,MacroCommand:r,Facade:l,Mediator:a,Observer:t,Notification:i,Notifier:n,Proxy:s,define:function(e,t,i){e||(e={});var n=e.name,o=e.parent,r="function"==typeof o,a=e.scope||null;if("parent"in e&&!r)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function")}else e=r?function(){o.apply(this,arguments)}:new Function;if(r&&h.extend(e,o),t&&(r=e.prototype,h.decorate(r,t),r.constructor=e),i&&h.decorate(e,i),n){if("string"!=typeof n)throw new TypeError("Class name must be primitive string");p(n,e,a)}return e},declare:p}}}(this);try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),!0!==ce.defaultPrevented)throw Error("Could not prevent default")}catch(e){var CustomEvent=function(e,t){var i,n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent"),i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n=i.preventDefault,i.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},i};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}!function(e){var t=e.babelHelpers={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.jsx=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,i,n,o){var r=t&&t.defaultProps,a=arguments.length-3;if(i||0===a||(i={}),i&&r)for(var s in r)void 0===i[s]&&(i[s]=r[s]);else i||(i=r||{});if(1===a)i.children=o;else if(a>1){for(var l=Array(a),d=0;a>d;d++)l[d]=arguments[d+3];i.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:i,_owner:null}}}(),t.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},t.asyncGenerator=function(){function e(e){this.value=e}function t(e){function t(e,t){return new Promise(function(n,a){var s={key:e,arg:t,resolve:n,reject:a,next:null};r?r=r.next=s:(o=r=s,i(e,t))})}function i(t,o){try{var r=e[t](o),a=r.value;a instanceof s?Promise.resolve(a.value).then(function(e){i("next",e)},function(e){i("throw",e)}):n(r.done?"return":"normal",r.value)}catch(s){n("throw",s)}}function n(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?i(o.key,o.arg):r=null}var o,r;this._invoke=t,"function"!=typeof e["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype["throw"]=function(e){return this._invoke("throw",e)},t.prototype["return"]=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),t.asyncGeneratorDelegate=function(e,t){function i(i,n){return o=!0,n=new Promise(function(t){t(e[i](n))}),{done:!1,value:t(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):i("next",e)},"function"==typeof e["throw"]&&(n["throw"]=function(e){if(o)throw o=!1,e;return i("throw",e)}),"function"==typeof e["return"]&&(n["return"]=function(e){return i("return",e)}),n},t.asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){function n(e,o){try{var r=t[e](o),a=r.value}catch(s){return void i(s)}return r.done?void s(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),t.defineEnumerableProperties=function(e,t){for(var i in t){var n=t[i];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i,n)}return e},t.defaults=function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var o=i[n],r=Object.getOwnPropertyDescriptor(t,o);r&&r.configurable&&void 0===e[o]&&Object.defineProperty(e,o,r)}return e},t.defineProperty=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},t["extends"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.get=function i(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:i(r,t,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t["instanceof"]=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},t.interopRequireDefault=function(e){return e&&e.__esModule?e:{"default":e}},t.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t},t.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},t.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},t.objectWithoutProperties=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},t.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},t.selfGlobal="undefined"==typeof e?self:e,t.set=function n(e,t,i,o){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);null!==a&&n(a,t,i,o)}else if("value"in r&&r.writable)r.value=i;else{var s=r.set;void 0!==s&&s.call(o,i)}return i},t.slicedToArray=function(){function e(e,t){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var i,n=[],o=e[Symbol.iterator]();!(i=o.next()).done&&(n.push(i.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},t.temporalRef=function(e,t,i){if(e===i)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},t.temporalUndefined={},t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},t.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}}("undefined"==typeof global?self:global),"undefined"!=typeof window&&function(e){"use strict";if(e.DOMTokenList){var t=document.createElement("a").classList,i=DOMTokenList.prototype,n=i.add,o=i.remove,r=i.toggle;t.add("c1","c2");var a=function(e){return function(){var t,i=arguments;for(t=0;t<i.length;t+=1)e.call(this,i[t])}};t.contains("c2")||(i.add=a(n),i.remove=a(o)),t.toggle("c1",!0)||(i.toggle=function(e,t){return void 0===t?r.call(this,e):((t?n:o).call(this,e),!!t)})}}(window),"undefined"!=typeof window&&function(e){"use strict";var t=[],i=function(e,i){var n;if(t.indexOf)return t.indexOf.call(e,i);for(n=0;n<e.length;n++)if(e[n]===i)return n;return-1},n=function(e){var t=/[\u0009\u000A\u000C\u000D\u0020]/;if(""===e||t.test(e))throw new Error("Token must not be empty or contain whitespace.")},o=function(e,t){var i,n=this,o=[];if(e&&t&&(n.element=e,n.prop=t,e[t]))for(o=e[t].replace(/^\s+|\s+$/g,"").split(/\s+/),i=0;i<o.length;i++)n[i]=o[i];n.length=o.length};o.prototype={add:function(){var e,i=this,o=arguments;for(e=0;e<o.length;e++)n(o[e]),i.contains(o[e])||t.push.call(i,o[e]);i.element&&(i.element[i.prop]=i)},contains:function(e){return n(e),-1!==i(this,e)},item:function(e){return this[e]||null},remove:function(){var e,o,r=arguments,a=this;for(o=0;o<r.length;o++)n(r[o]),e=i(a,r[o]),-1!==e&&t.splice.call(a,e,1);a.element&&(a.element[a.prop]=a)},toggle:function(e,t){var i=this;return i.contains(e)?t?!0:(i.remove(e),!1):t===!1?!1:(i.add(e),!0)},toString:function(){return t.join.call(this," ")}},e.DOMTokenList=o}(window),"undefined"!=typeof window&&function(){"use strict";"classList"in document.createElement("a")||Object.defineProperty(Element.prototype,"classList",{get:function(){return new DOMTokenList(this,"className")}})}(),"undefined"!=typeof window&&function(){"use strict";if(!("relList"in document.createElement("a"))){var e,t=[HTMLAnchorElement,HTMLAreaElement,HTMLLinkElement],i=function(){return new DOMTokenList(this,"rel")};for(e=0;e<t.length;e++)Object.defineProperty(t[e].prototype,"relList",{get:i})}}(),"undefined"!=typeof window&&function(){"use strict";if("undefined"!=typeof SVGElement){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");"classList"in e&&!window.QUnit||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return"string"==typeof this.className?new DOMTokenList(this,"className"):"string"==typeof this.className.baseVal?new DOMTokenList(this.className,"baseVal"):void 0}})}}(),"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),"function"!=typeof Object.entries&&(Object.entries=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var i=arguments[t];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=0;n>o;){if(e.call(t,i[o],o,i))return o;o++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var o=0|t;for(o=Math.max(o>=0?o:n-Math.abs(o),0);n>o;){var r=i[o],a=e;if(r===a||"number"==typeof r&&"number"==typeof a&&isNaN(r)&&isNaN(a))return!0;o++}return!1}}),!function(e,t,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof Ndn_Require.define&&Ndn_Require.define.amd?Ndn_Require.define(t,i):e[t]=i()}(this,"bowser",function(){function e(e){function t(t){var i=e.match(t);return i&&i.length>1&&i[1]||""}function i(t){var i=e.match(t);return i&&i.length>1&&i[2]||""}function n(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var o,r=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),l=!s&&/android/i.test(e),d=/nexus\s*[0-6]\s*/i.test(e),c=!d&&/nexus\s*[0-9]+/i.test(e),u=/CrOS/.test(e),p=/silk/i.test(e),h=/sailfish/i.test(e),g=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),A=!r&&!p&&/macintosh/i.test(e),v=!l&&!h&&!g&&!f&&/linux/i.test(e),_=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),E=t(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(e)&&!/tablet pc/i.test(e),C=!b&&/[^-]mobi/i.test(e),S=/xbox/i.test(e);/opera/i.test(e)?o={name:"Opera",opera:a,version:E||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?o={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||E}:/SamsungBrowser/i.test(e)?o={name:"Samsung Internet for Android",samsungBrowser:a,version:E||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?o={name:"Opera Coast",coast:a,version:E||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?o={name:"Yandex Browser",yandexbrowser:a,version:E||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?o={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?o={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?o={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?o={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?o={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?o={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(o={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},_?(o.msedge=a,o.version=_):(o.msie=a,o.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?o={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?o={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?o={name:"Microsoft Edge",msedge:a,version:_}:/vivaldi/i.test(e)?o={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||E}:h?o={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?o={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(o={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(o.firefoxos=a,o.osname="Firefox OS")):p?o={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?o={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?o={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?o={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:E||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(o={name:"WebOS",osname:"WebOS",webos:a,version:E||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(o.touchpad=a)):/bada/i.test(e)?o={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:g?o={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||E}:/qupzilla/i.test(e)?o={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||E}:/chromium/i.test(e)?o={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||E}:/chrome|crios|crmo/i.test(e)?o={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?o={name:"Android",version:E}:/safari|applewebkit/i.test(e)?(o={name:"Safari",safari:a},E&&(o.version=E)):r?(o={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},E&&(o.version=E)):o=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||E}:{name:t(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(o.name=o.name||"Blink",o.blink=a):(o.name=o.name||"Webkit",o.webkit=a),!o.version&&E&&(o.version=E)):!o.opera&&/gecko\//i.test(e)&&(o.name=o.name||"Gecko",o.gecko=a,o.version=o.version||t(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||!l&&!o.silk?!o.windowsphone&&r?(o[r]=a,o.ios=a,o.osname="iOS"):A?(o.mac=a,o.osname="macOS"):S?(o.xbox=a,o.osname="Xbox"):y?(o.windows=a,o.osname="Windows"):v&&(o.linux=a,o.osname="Linux"):(o.android=a,o.osname="Android");var N="";o.windows?N=n(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?N=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?(N=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),N=N.replace(/[_\s]/g,".")):r?(N=t(/os (\d+([_\s]\d+)*) like mac os x/i),N=N.replace(/[_\s]/g,".")):l?N=t(/android[ \/-](\d+(\.\d+)*)/i):o.webos?N=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?N=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?N=t(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(N=t(/tizen[\/\s](\d+(\.\d+)*)/i)),N&&(o.osversion=N);var I=!o.windows&&N.split(".")[0];return b||c||"ipad"==r||l&&(3==I||I>=4&&!C)||o.silk?o.tablet=a:(C||"iphone"==r||"ipod"==r||l||d||o.blackberry||o.webos||o.bada)&&(o.mobile=a),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=a:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=a:o.x=a,o}function t(e){return e.split(".").length}function i(e,t){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i++)n.push(t(e[i]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),o=i(e,function(e){var o=n-t(e);return e+=new Array(o+1).join(".0"),i(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(o[0][n]>o[1][n])return 1;if(o[0][n]!==o[1][n])return-1;
if(0===n)return 0}}function o(t,i,o){var r=s;"string"==typeof i&&(o=i,i=void 0),void 0===i&&(i=!1),o&&(r=e(o));var a=""+r.version;for(var l in t)if(t.hasOwnProperty(l)&&r[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return n([a,t[l]])<0}return i}function r(e,t,i){return!o(e,t,i)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in s)return!0}return!1},s.isUnsupportedBrowser=o,s.compareVersions=n,s.check=r,s._detect=e,s.detect=e,s}),!function(e,t){e.ES6Promise||(e.ES6Promise=t(),e.ES6Promise.polyfill())}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function i(e){q=e}function n(e){W=e}function o(){return function(){return process.nextTick(d)}}function r(){return"undefined"!=typeof Y?function(){Y(d)}:l()}function a(){var e=0,t=new Q(d),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;z>e;e+=2){var t=$[e],i=$[e+1];t(i),$[e]=void 0,$[e+1]=void 0}z=0}function c(){try{var e=require,t=e("vertx");return Y=t.runOnLoop||t.runOnContext,r()}catch(i){return l()}}function u(e,t){var i=arguments,n=this,o=new this.constructor(h);void 0===o[te]&&x(o);var r=n._state;return r?!function(){var e=i[r-1];W(function(){return P(r,o,e,n._result)})}():N(n,o,e,t),o}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(h);return E(i,e),i}function h(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return re.error=t,re}}function y(e,t,i,n){try{e.call(t,i,n)}catch(o){return o}}function A(e,t,i){W(function(e){var n=!1,o=y(i,t,function(i){n||(n=!0,t!==i?E(e,i):C(e,i))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,S(e,o))},e)}function v(e,t){t._state===ne?C(e,t._result):t._state===oe?S(e,t._result):N(t,void 0,function(t){return E(e,t)},function(t){return S(e,t)})}function _(e,i,n){i.constructor===e.constructor&&n===u&&i.constructor.resolve===p?v(e,i):n===re?S(e,re.error):void 0===n?C(e,i):t(n)?A(e,i,n):C(e,i)}function E(t,i){t===i?S(t,g()):e(i)?_(t,i,m(i)):C(t,i)}function b(e){e._onerror&&e._onerror(e._result),I(e)}function C(e,t){e._state===ie&&(e._result=t,e._state=ne,0!==e._subscribers.length&&W(I,e))}function S(e,t){e._state===ie&&(e._state=oe,e._result=t,W(b,e))}function N(e,t,i,n){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ne]=i,o[r+oe]=n,0===r&&e._state&&W(I,e)}function I(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,o=void 0,r=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+i],n?P(i,n,o,r):o(r);e._subscribers.length=0}}function w(){this.error=null}function T(e,t){try{return e(t)}catch(i){return ae.error=i,ae}}function P(e,i,n,o){var r=t(n),a=void 0,s=void 0,l=void 0,d=void 0;if(r){if(a=T(n,o),a===ae?(d=!0,s=a.error,a=null):l=!0,i===a)return void S(i,f())}else a=o,l=!0;i._state!==ie||(r&&l?E(i,a):d?S(i,s):e===ne?C(i,a):e===oe&&S(i,a))}function M(e,t){try{t(function(t){E(e,t)},function(t){S(e,t)})}catch(i){S(e,i)}}function D(){return se++}function x(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function k(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[te]||x(this.promise),j(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):S(this.promise,L())}function L(){return new Error("Array Methods must be provided an Array")}function R(e){return new k(this,e).promise}function O(e){var t=this;return new t(j(e)?function(i,n){for(var o=e.length,r=0;o>r;r++)t.resolve(e[r]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function V(e){var t=this,i=new t(h);return S(i,e),i}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[te]=D(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&G(),this instanceof H?M(this,e):B())}function U(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}e.Promise=H}var F=void 0;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var j=F,z=0,Y=void 0,q=void 0,W=function(e,t){$[z]=e,$[z+1]=t,z+=2,2===z&&(q?q(d):ee())},Z="undefined"!=typeof window?window:void 0,X=Z||{},Q=X.MutationObserver||X.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),ee=void 0;ee=J?o():Q?a():K?s():void 0===Z&&"function"==typeof require?c():l();var te=Math.random().toString(36).substring(16),ie=void 0,ne=1,oe=2,re=new w,ae=new w,se=0;return k.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===ie&&e>i;i++)this._eachEntry(t[i],i)},k.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===p){var o=m(e);if(o===u&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===H){var r=new i(h);_(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},k.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===ie&&(this._remaining--,e===oe?S(n,i):this._result[t]=i),0===this._remaining&&C(n,this._result)},k.prototype._willSettleAt=function(e,t){var i=this;N(e,void 0,function(e){return i._settledAt(ne,t,e)},function(e){return i._settledAt(oe,t,e)})},H.all=R,H.race=O,H.resolve=p,H.reject=V,H._setScheduler=i,H._setAsap=n,H._asap=W,H.prototype={constructor:H,then:u,"catch":function(e){return this.then(null,e)}},H.polyfill=U,H.Promise=H,H}),function(){function e(){var e,t,i,n=this;t=null,this.getSDK=function(){return t},this.setSDK=function(i){var n,o;t=i,e();for(n in t)o=t[n],window[n]=o;return t},this.saveSDK=function(e,t){var n,o,r;if(null!=t&&null!=e&&""!==e){if(null==t.main)for(n in t)if(o=t[n],(null!=o?o.VERSION:void 0)===e){t.main=o;break}return null==(r=t.version)&&(t.version=e),i.push(t),this[e]=t,t}},i=[],this.getVersions=function(){return i.slice()},this.getVersion=function(e){return this[e]},this.setVersion=function(e){return t=this.getVersion(e),null==t?null:(this.setSDK(t),t)},this.revert=function(){return this.setSDK(i[0])},this.noConflict=function(){var e;return e=this.getSDK(),this.revert(),e},this.create=function(){var e;return e=function(e,t){return this.prototype=e.prototype,e.apply(this,t)},function(i){return new e(t.main,arguments)}}(),(e=function(){var e,i,o,r,a;if(null!=(r=window.com)&&null!=(a=r.akamai)?a.amp:void 0)for(e in window)if(o=window[e],(o===window.AMP||o===window.AMPremier)&&null!=(null!=o?o.VERSION:void 0)&&""!==o.VERSION&&o.VERSION!==(null!=t?t.version:void 0)&&null==n[o.VERSION]){i={},i.main=o,i.com=window.com,window.AMP&&(i.AMP=window.AMP),window.AMPPremier&&(i.AMPremier=window.AMPPremier),window.Utils&&(i.Utils=window.Utils),window.QueryString&&(i.QueryString=window.QueryString),window.QueryParams&&(i.QueryParams=window.QueryParams),n.saveSDK(o.VERSION,i);break}})()}function t(e){return{}.hasOwnProperty(e)}function i(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e}function n(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}function o(e,t){return function(){return e.apply(t,arguments)}}function r(){}function a(e){this.enabled=e,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){})}function s(e,t){this.type=e,null!=t&&(this.detail=this.data=t)}function l(e){this._target=null!=e?e:this,this._listenerMap={}}function d(){}function c(){}function u(e,t){var i=this;this.delay=e,this.repeatCount=null!=t?t:0,u.__super__.constructor.call(this),this._running=!1,this._currentCount=0,this._timeout=null,this._startTime=null,this._currentTime=0,this.tick=this.tick.bind(this),this.next=setTimeout.bind(null,this.tick,this.delay),Object.defineProperties(this,{currentCount:{get:function(){return i._currentCount},enumerable:!0,configurable:!1},running:{get:function(){return i._running},enumerable:!0,configurable:!1},time:{get:function(){return i._currentTime+(Date.now()-i._startTime)},enumerable:!0,configurable:!1}})}function p(){}function h(){h.__super__.constructor.call(this)}function g(e,t,i,n){this.url=e,this.interval=null!=t?t:1e4,this.type=null!=i?i:null,this.headers=null!=n?n:null,g.__super__.constructor.call(this)}function f(e,t){this.element=e,this.timeout=t,f.__super__.constructor.call(this),this.resetHandler=this.reset.bind(this)}function m(){}function y(){this.item=[],this.metadata={}}function A(){this.metadata={}}function v(e){var t,i,n,o;null==e&&(e={}),null==akamai.amp.AMP.plugins.controls&&(n={plugins:{react:{resources:[{src:"${paths.plugins}react/libs/react.min.js",debug:"${paths.plugins}react/libs/react.js",type:"text/javascript"},{src:"${paths.plugins}react/React.min.css",debug:"${paths.plugins}react/React.css",type:"text/css"},{src:"${paths.plugins}react/React.min.js",debug:"${paths.plugins}react/React.js",type:"text/javascript"}],autoHide:3}}},e=r.override(n,e)),t=r.override(v.defaults,e),/amp\-debug\=true/.test(location.search.toLowerCase())===!0&&(t.debug=!0),"object"==typeof c.amp&&(t=r.override(t,c.amp)),t.mode=r.getPlaybackMode(t.mode),9===r.getIEVersion()&&(t.plugins.react=null,t.flash.view=r.override(t.flash.view,v.flashView)),t.version=xt.getVersion();for(i in t)o=t[i],this[i]=o}function _(e,t){this.config=e,_.__super__.constructor.call(this,t)}function E(e){this.viewComponent=e,this.performance={init:Date.now()},E.__super__.constructor.call(this,this.getModuleName()+"-"+r.createUID()),this.dispatcher=new l(this),this.transformer=new He,this.logger=a.instance,this.moduleMap={}}function b(e){this.data=null!=e?e:{},b.__super__.constructor.call(this),Object.defineProperties(this,{kind:{get:this.getKind,enumerable:!0,configurable:!1},label:{get:this.getLabel,enumerable:!0,configurable:!1},language:{get:this.getLanguage,enumerable:!0,configurable:!1},id:{get:this.getId,enumerable:!0,configurable:!1},enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1}})}function C(e){this.list=null!=e?e:[],C.__super__.constructor.call(this),this.dispatcher=new l(this),this.handlers={change:this.changeHandler.bind(this)}}function S(e){var t,i,n,o;e.className=jo.PREFIX+"player",i=bt.create("install-flash",e),o=bt.create(null,i,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed."),t=bt.create(null,i,"a"),t.href="http://www.adobe.com/go/getflashplayer",n=bt.create(null,t,"img"),n.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",n.alt="Get Adobe Flash player"}function N(){this.map={}}function I(){}function w(e,t,i){this.key=e,this.token=t,this.expiration=i}function T(){T.__super__.constructor.call(this)}function P(){P.__super__.constructor.call(this)}function M(){M.__super__.constructor.call(this)}function D(){D.__super__.constructor.call(this)}function x(){x.__super__.constructor.call(this)}function k(){k.__super__.constructor.call(this)}function L(){L.__super__.constructor.call(this)}function R(){R.__super__.constructor.call(this)}function O(){O.__super__.constructor.call(this)}function V(){V.__super__.constructor.call(this)}function G(){G.__super__.constructor.call(this)}function B(){B.__super__.constructor.call(this)}function H(){H.__super__.constructor.call(this)}function U(){U.__super__.constructor.call(this)}function F(){F.__super__.constructor.call(this)}function j(){j.__super__.constructor.call(this)}function z(){z.__super__.constructor.call(this)}function Y(){Y.__super__.constructor.call(this)}function q(){q.__super__.constructor.call(this)}function W(){W.__super__.constructor.call(this)}function Z(){Z.__super__.constructor.call(this)}function X(){X.__super__.constructor.call(this)}function Q(){Q.__super__.constructor.call(this)}function J(){J.__super__.constructor.call(this)}function K(){K.__super__.constructor.call(this)}function $(){$.__super__.constructor.call(this)}function ee(){ee.__super__.constructor.call(this)}function te(){te.__super__.constructor.call(this)}function ie(){ie.__super__.constructor.call(this)}function ne(){ne.__super__.constructor.call(this)}function oe(){oe.__super__.constructor.call(this)}function re(){re.__super__.constructor.call(this)}function ae(){ae.__super__.constructor.call(this)}function se(){se.__super__.constructor.call(this)}function le(){le.__super__.constructor.call(this)}function de(){de.__super__.constructor.call(this)}function ce(){ce.__super__.constructor.call(this)}function ue(){ue.__super__.constructor.call(this)}function pe(e){null==this.cssPrefix&&(this.cssPrefix=jo.PREFIX),pe.__super__.constructor.call(this,this.mediatorName,e)}function he(e){he.__super__.constructor.call(this,e)}function ge(e,t,i,n){this.componentName=null!=e?e:this.componentName,this.componentType=null!=t?t:this.componentType,this.parent=i,this.element=n,null==this.mediatorName&&(this.mediatorName=this.createMediatorName()),ge.__super__.constructor.call(this,this.viewComponent)}function fe(){fe.__super__.constructor.call(this,null,null,null,null)}function me(){me.__super__.constructor.call(this)}function ye(){ye.__super__.constructor.call(this)}function Ae(){Ae.__super__.constructor.call(this)}function ve(){ve.__super__.constructor.call(this)}function _e(){_e.__super__.constructor.call(this)}function Ee(){Ee.__super__.constructor.call(this,null,{}),this.data.audioTracks=new C,this.data.videoTracks=new C,this.data.textTracks=new C}function be(e){be.__super__.constructor.call(this,e),this.ads=new l,this.ads.enabled=!1,this.ads.getEnabled=function(){return!1},this.ads.inprogress=!1,this.ads.getInProgress=function(){return!1}}function Ce(e){Ce.__super__.constructor.call(this,e)}function Se(){Se.__super__.constructor.call(this,Se.NAME),this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!0,seeking:!1,loading:!1,waiting:!1,keyErrored:!1},"desktop"===r.getDevice()&&(this.initialized=!0),this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this),stalled:this.onstalled.bind(this)},this.resume={event:-1===r.getIEVersion()||11===r.getIEVersion()?"loadedmetadata":"canplaythrough",listener:this.resumestart.bind(this)},this.textTrackHandlers={addtrack:this.onaddtrack.bind(this)},this.onneedkey=this.onneedkey.bind(this)}function Ne(){Ne.__super__.constructor.call(this)}function Ie(){Ie.__super__.constructor.call(this)}function we(){we.__super__.constructor.call(this)}function Te(e,t){this.player=e,this.config=t,Te.__super__.constructor.call(this,this.constructor.NAME),this.proxy=new Et(this.config),this.player.registerProxy(this.proxy)}function Pe(e,t){this.mediatorName=""+this.componentType+"-mediator",Pe.__super__.constructor.call(this,e,null,null,t)}function Me(){Me.__super__.constructor.call(this)}function De(){De.__super__.constructor.call(this)}function xe(e,t){this.componentName=e,this.layers=[],xe.__super__.constructor.call(this,null,null,null,t)}function ke(e){ke.__super__.constructor.call(this,this.type,e)}function Le(){Le.__super__.constructor.call(this)}function Re(){Re.__super__.constructor.call(this)}function Oe(e,t){this.supportedTypes=null!=e?e:this.supportedTypes,this.config=t,Oe.__super__.constructor.call(this),this.temporalTypes=["vod","live","ondemand"]}function Ve(e){this.player=e,Ve.__super__.constructor.call(this)}function Ge(e){var t=this;this.flashObjectID+=Date.now(),this.plugins={},this._displayState=Ro.NORMAL,this.debug=/debug\=true/.test(location.search),Ge.__super__.constructor.call(this,e),this.addEventListener("mediachange",function(e){var i,n,o,r,a,s,l;if(a=e.detail.track,n=t.getMediaElement(),o=n.textTracks=[],null!=a)for(s=0,l=a.length;l>s;s++)r=a[s],i={kind:r.kind,label:r.label,language:r.srclang,_mode:r.mode},Object.defineProperty(i,"mode",{get:function(){return this._mode},set:function(e){var t;this._mode=e,t="showing"===e,t&&n.setTrackByLanguage(this.language),n.setPlayerProperty("captionDisplay",{visible:t})},enumerable:!0,configurable:!1}),o.push(i)})}function Be(e){this.module=e,Be.__super__.constructor.call(this,e.getModuleName(),this)}function He(e){this._target=null!=e?e:this,this._transformMap={}}function Ue(){}function Fe(){Fe.__super__.constructor.call(this)}function je(){}function ze(e){ze.__super__.constructor.call(this,e),this.value={}}function Ye(e,t,i){var a;this.target=e,this.type=t,this.handler=i,this.trigger=o(this.trigger,this),Ye.instances.push(this),this.types=[],a=this.type,n.call(Ye.EVENTS,a)>=0?r.isTouchDevice()?(this.types.push(Ye.TOUCH_EVENTS[this.type]),this.type===Ye.TOUCH_EVENTS[1]&&this.types.push(Ye.TOUCH_EVENTS[4])):this.types.push(Ye.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type),this.bind()}function qe(e){this.defaults=v.defaults,qe.__super__.constructor.call(this,e)}function We(){We.__super__.constructor.call(this,this.NAME),this.namespace=We.NAMESPACE,this.defaults={volume:1,captions:{visible:!1,fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"}}}function Ze(){Ze.__super__.constructor.call(this)}function Xe(){Xe.__super__.constructor.call(this)}function Qe(){}function Je(e){Je.__super__.constructor.call(this,e)}function Ke(){Ke.__super__.constructor.call(this)}function $e(){$e.__super__.constructor.call(this),null==this.contextName&&(this.contextName=this.constructor.NAME)}function et(e,t){this.defaultPlaybackCore=e,this.getPlaybackOrder=t,et.__super__.constructor.call(this),this.playbackCoreMap=[],null==this.getPlaybackOrder&&(this.getPlaybackOrder=function(e){return/Edge|Android/.test(navigator.userAgent)?["audio","hls","dash","dvr","default"]:void 0})}function tt(e){this.data={metadata:{}},tt.__super__.constructor.call(this),this.transform=this.transform.bind(this)}function it(){it.__super__.constructor.call(this,this.constructor.NAME,{}),this.setupHDN1(),Object.defineProperties(this,{authorized:{get:this.getAuthorized,enumerable:!0,configurable:!1}})}function nt(){nt.__super__.constructor.call(this,this.constructor.NAME,{}),this.data={},this.contextMap={},this.configurationMap={}}function ot(){ot.__super__.constructor.call(this),this.device=r.getDevice(),this.time={}}function rt(){rt.__super__.constructor.call(this)}function at(){at.__super__.constructor.call(this)}function st(e){st.__super__.constructor.call(this,e)}function lt(){lt.__super__.constructor.call(this)}function dt(){dt.__super__.constructor.call(this)}function ct(){ct.__super__.constructor.call(this)}function ut(){ut.__super__.constructor.call(this)}function pt(){pt.__super__.constructor.call(this)}function ht(){ht.__super__.constructor.call(this)}function gt(){gt.__super__.constructor.call(this)}function ft(){ft.__super__.constructor.call(this)}function mt(){mt.__super__.constructor.call(this)}function yt(){yt.__super__.constructor.call(this)}function At(){At.__super__.constructor.call(this)}function vt(){this.plugins=[],this.registered=0,vt.__super__.constructor.call(this,this.constructor.NAME,{})}function _t(e){this.element=e}function Et(e){var t,i;if(Et.__super__.constructor.call(this),this.data={language:navigator.language||navigator.browserLanguage,locales:v.defaults.locales},null!=e&&(null!=e.language&&(this.data.language=e.language),null!=e.locales))for(i in e.locales)if(null!=this.data.locales[i])for(t in e.locales[i])this.data.locales[i][t]=e.locales[i][t];else this.data.locales[i]=e.locales[i]}function bt(){}function Ct(){Ct.__super__.constructor.call(this)}function St(e,t,i){St.__super__.constructor.call(this,e,t,i)}function Nt(){}function It(){return It.__super__.constructor.apply(this,arguments)}function wt(e,t,i){this.startTime=e,this.endTime=t,this.id=i}function Tt(){}function Pt(){}function Mt(){}function Dt(){var e,t=this;this.captions=[],this.head=document.getElementsByTagName("head")[0],e=window.com||{},e.akamai=e.akamai||{},e.akamai.amp=e.akamai.amp||{},e.akamai.amp.plugins=e.akamai.amp.plugins||{},e.akamai.amp.plugins.subply=e.akamai.amp.plugins.subply||{},e.akamai.amp.plugins.subply.response=function(e){t.parse(e),t.poll()},null==window.com&&(window.com=e),Dt.__super__.constructor.call(this,this.constructor.NAME)}function xt(){}function kt(){kt.__super__.constructor.call(this)}function Lt(){Lt.__super__.constructor.call(this)}function Rt(){Rt.__super__.constructor.call(this)}function Ot(){Ot.__super__.constructor.call(this)}function Vt(){Vt.__super__.constructor.call(this)}function Gt(){Gt.__super__.constructor.call(this)}function Bt(){Bt.__super__.constructor.call(this)}function Ht(e,t){this.player=e,this.config=t,Ht.__super__.constructor.call(this),this.dispatcher=new l(this),this.createDefaults()}function Ut(e,t){var i=this;Ut.__super__.constructor.call(this,{kind:e.kind,label:e.label||this.srclang||this.kind,language:e.srclang}),this.src=e.src,this.type=e.type,this.cues=e.cues||[],this.styles=e.styles||{},this.activeCues=[],this.isLive=/live-subply/.test(this.type),null==this.src||""===this.src||this.isLive?setTimeout(t,1):r.request(this.src).then(function(e){try{CaptionParsers[i.type].parse(i,e.response)}catch(n){return void a.instance.error("Could not parse caption track: "+i.src)}"function"==typeof t&&t()})["catch"](function(e){a.instance.error("Could not load caption track: "+i.src)})}function Ft(e){this.activeCaptions=[],this.providers={},this.tracks=[],this.rendererMap=[],this.track={},Ft.__super__.constructor.call(this,e)}function jt(e,t,i,n){jt.__super__.constructor.call(this,e,t,i,n)}function zt(e){zt.__super__.constructor.call(this,e)}function Yt(e){Yt.__super__.constructor.call(this,null,null,e,null)}function qt(){}function Wt(){Wt.__super__.constructor.call(this)}function Zt(e){Zt.__super__.constructor.call(this,e)}function Xt(e,t){Xt.__super__.constructor.call(this,e,t),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1}})}function Qt(){Qt.__super__.constructor.call(this)}function Jt(){Jt.__super__.constructor.call(this,this.NAME)}function Kt(){Kt.__super__.constructor.call(this)}function $t(e,t){$t.__super__.constructor.call(this,e,t)}function ei(){ei.__super__.constructor.call(this)}function ti(){ti.__super__.constructor.call(this)}function ii(){ii.__super__.constructor.call(this)}function ni(){ni.__super__.constructor.call(this)}function oi(){oi.__super__.constructor.call(this)}function ri(){ri.__super__.constructor.call(this)}function ai(){ai.__super__.constructor.call(this)}function si(){si.__super__.constructor.call(this)}function li(){li.__super__.constructor.call(this)}function di(e){di.__super__.constructor.call(this,e),this.keypress=this.keypress.bind(this)}function ci(){ci.__super__.constructor.call(this)}function ui(){ui.__super__.constructor.call(this)}function pi(){pi.__super__.constructor.call(this)}function hi(){hi.__super__.constructor.call(this)}function gi(){gi.__super__.constructor.call(this)}function fi(){fi.__super__.constructor.call(this)}function mi(e,t,i,n,o){this.labelText=e,this.onclick=null!=o?o:this.onclick,mi.__super__.constructor.call(this,n,null,t,i)}function yi(e){yi.__super__.constructor.call(this,null,null,e)}function Ai(e){Ai.__super__.constructor.call(this,null,e)}function vi(e,t){this.direction=null!=t?t:this.direction,vi.__super__.constructor.call(this,null,null,e)}function _i(e){_i.__super__.constructor.call(this,null,null,e)}function Ei(e){Ei.__super__.constructor.call(this,null,e)}function bi(){bi.__super__.constructor.call(this)}function Ci(e){Ci.__super__.constructor.call(this,null,null,null,e,onclick)}function Si(e){Si.__super__.constructor.call(this,e,null,null,null)}function Ni(e){Ni.__super__.constructor.call(this,e)}function Ii(e){this.list={font:null,language:null,edge:null,size:null,scroll:null},this.picker={color:null,background:null,edge:null,window:null},this.toggle={ON:null,OFF:null,disabled:!1},this.captioningObject={"default":{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null},Ii.__super__.constructor.call(this,null,null,e,null)}function wi(){wi.__super__.constructor.call(this)}function Ti(e){Ti.__super__.constructor.call(this,e)}function Pi(e,t){Pi.__super__.constructor.call(this,e,t)}function Mi(){Mi.__super__.constructor.call(this),this.controls={}}function Di(){Di.__super__.constructor.call(this)}function xi(e){this.panels=[],this.closeHandler=this.mouseupHandler.bind(this),xi.__super__.constructor.call(this,null,null,e)}function ki(e){ki.__super__.constructor.call(this,e,"horizontal")}function Li(e){Li.__super__.constructor.call(this,null,e)}function Ri(){Ri.__super__.constructor.call(this)}function Oi(e){this.overlays=null!=e?e:!0,Oi.__super__.constructor.call(this)}function Vi(){Vi.__super__.constructor.call(this),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1},settings:{get:this.getSettings,enumerable:!0,configurable:!1}})}function Gi(e){Gi.__super__.constructor.call(this,e)}function Bi(){Bi.__super__.constructor.call(this)}function Hi(){Hi.__super__.constructor.call(this)}function Ui(){Ui.__super__.constructor.call(this)}function Fi(){Fi.__super__.constructor.call(this)}function ji(){ji.__super__.constructor.call(this)}function zi(){zi.__super__.constructor.call(this)}function Yi(){Yi.__super__.constructor.call(this)}function qi(){qi.__super__.constructor.call(this)}function Wi(){Wi.__super__.constructor.call(this)}function Zi(){Zi.__super__.constructor.call(this)}function Xi(){Xi.__super__.constructor.call(this)}function Qi(){Qi.__super__.constructor.call(this)}function Ji(){Ji.__super__.constructor.call(this)}function Ki(e,t){Ki.__super__.constructor.call(this,e,t)}function $i(){$i.__super__.constructor.call(this)}function en(e){en.__super__.constructor.call(this,e),this.helper=new Nt}function tn(){tn.__super__.constructor.call(this)}function nn(){nn.__super__.constructor.call(this)}function on(){on.__super__.constructor.call(this)}function rn(){rn.__super__.constructor.call(this)}function an(e,t){null==t&&(t={}),an.__super__.constructor.call(this,e,t),null!=t.url&&(this.url=t.url),null!=t.data&&(this.data=t.data),this.player.load=function(){}}function sn(){sn.__super__.constructor.call(this)}function ln(e,t){null==t&&(t={}),ln.__super__.constructor.call(this,e,t)}function dn(){dn.__super__.constructor.call(this)}function cn(e){cn.__super__.constructor.call(this,e)}function un(){un.__super__.constructor.call(this);try{Object.defineProperties(this,{url:{get:this.getURL,set:this.setURL,enumerable:!0,configurable:!1},data:{get:this.getData,set:this.setData,enumerable:!0,configurable:!1}})}catch(e){console.error(e)}}function pn(e,t){null==t&&(t={}),pn.__super__.constructor.call(this,e,t)}function hn(){hn.__super__.constructor.call(this)}function gn(e){gn.__super__.constructor.call(this,e)}function fn(){fn.__super__.constructor.call(this)}function mn(){mn.__super__.constructor.call(this)}function yn(e){yn.__super__.constructor.call(this,e)}function An(){return An.__super__.constructor.apply(this,arguments)}function vn(){vn.__super__.constructor.call(this)}function _n(){_n.__super__.constructor.call(this)}function En(){En.__super__.constructor.call(this)}function bn(){return bn.__super__.constructor.apply(this,arguments)}function Cn(e){Cn.__super__.constructor.call(this,e)}function Sn(){Sn.__super__.constructor.call(this)}function Nn(){Nn.__super__.constructor.call(this)}function In(){In.__super__.constructor.call(this)}function wn(){wn.__super__.constructor.call(this)}function Tn(){Tn.__super__.constructor.call(this)}function Pn(){Pn.__super__.constructor.call(this)}function Mn(){Mn.__super__.constructor.call(this)}function Dn(){Dn.__super__.constructor.call(this)}function xn(){xn.__super__.constructor.call(this)}function kn(){kn.__super__.constructor.call(this)}function Ln(){Ln.__super__.constructor.call(this)}function Rn(){Rn.__super__.constructor.call(this)}function On(){On.__super__.constructor.call(this);
}function Vn(){Vn.__super__.constructor.call(this)}function Gn(){Gn.__super__.constructor.call(this)}function Bn(){Bn.__super__.constructor.call(this)}function Hn(e,t,i,n,o,r,a,s,l,d,c,u){this.id=e,this.title=t,this.duration=i,this.position=n,this.type=o,this.partner=r,this.advertiser=a,this.companions=s,this.request=l,this.metadata=d,this.totalAds=c,this.time=u}function Un(e,t,i,n){var o,r;if(this.request=e,this.partner=t,this.config=i,null!=n)for(o in n)r=n[o],this[o]=r}function Fn(){Fn.__super__.constructor.call(this)}function jn(){jn.__super__.constructor.call(this)}function zn(){zn.__super__.constructor.call(this)}function Yn(){Yn.__super__.constructor.call(this)}function qn(){qn.__super__.constructor.call(this)}function Wn(){Wn.__super__.constructor.call(this)}function Zn(){Zn.__super__.constructor.call(this)}function Xn(e){Xn.__super__.constructor.call(this,e),this.pods=[]}function Qn(){Qn.__super__.constructor.call(this)}function Jn(e){Jn.__super__.constructor.call(this,e)}function Kn(e){Kn.__super__.constructor.call(this,e),this.intervals=[],this.loadedmetadata=this.onLoadedMetadata.bind(this),this.adVO=this.createDefaultAdVO()}function $n(){$n.__super__.constructor.call(this)}function eo(){eo.__super__.constructor.call(this)}function to(){to.__super__.constructor.call(this)}function io(){io.__super__.constructor.call(this)}function no(){no.__super__.constructor.call(this)}function oo(){oo.__super__.constructor.call(this)}function ro(e){ro.__super__.constructor.call(this,e)}function ao(e,t){ao.__super__.constructor.call(this,e,t),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:this.getInProgress,enumerable:!0,configurable:!1},started:{get:this.getStarted,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},companions:{get:this.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:this.getCurrentAd,enumerable:!0,configurable:!1}})}function so(){return so.__super__.constructor.apply(this,arguments)}function lo(){lo.__super__.constructor.call(this),Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:this.getInProgress,enumerable:!0,configurable:!1},started:{get:this.getStarted,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},companions:{get:this.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:this.getCurrentAd,enumerable:!0,configurable:!1}})}function co(){return co.__super__.constructor.apply(this,arguments)}function uo(){uo.__super__.constructor.call(this)}function po(e){po.__super__.constructor.call(this,e)}function ho(){ho.__super__.constructor.call(this)}function go(e,t){go.__super__.constructor.call(this,e,t),r.flashTypes.push(r.mimeTypes.m3u8)}function fo(e,t){this.plugin=t,fo.__super__.constructor.call(this,e.types,e),this.temporalTypes=["vod","live","dvr"]}function mo(){mo.__super__.constructor.call(this)}function yo(e){yo.__super__.constructor.call(this,e)}function Ao(e){Ao.__super__.constructor.call(this,e)}function vo(e,t){this.plugin=t,vo.__super__.constructor.call(this,e.types,e),this.buffer=e.buffer,this.temporalTypes=["vod","live","dvr"]}function _o(){_o.__super__.constructor.call(this)}function Eo(){Eo.__super__.constructor.call(this)}function bo(e){bo.__super__.constructor.call(this,e)}function Co(){Co.__super__.constructor.call(this),Object.defineProperties(this,{instance:{get:this.getInstance,enumerable:!0,configurable:!1}})}function So(){So.__super__.constructor.call(this),Object.defineProperties(this,{instance:{get:this.getInstance,enumerable:!0,configurable:!1}})}var No,Io,wo;if(null==(wo=window.AKAMAI_MEDIA_PLAYER)&&(window.AKAMAI_MEDIA_PLAYER=new e),Io="AMP Premier - NDN v2.102.4",null==window.AKAMAI_MEDIA_PLAYER[Io]){No=window.AKAMAI_MEDIA_PLAYER[Io]={},r.blankImage=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC"},r.blankVideo=function(){return"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAA4dtZGF03gIATGF2YzU4LjE4LjEwMAADTEUBRwAAAq4GBf//qtxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNTIgcjI4NTQgZTlhNTkwMyAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTcgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz00IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MyBiX3B5cmFtaWQ9MiBiX2FkYXB0PTEgYl9iaWFzPTAgZGlyZWN0PTEgd2VpZ2h0Yj0xIG9wZW5fZ29wPTAgd2VpZ2h0cD0yIGtleWludD0yNTAga2V5aW50X21pbj0yNSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmNfbG9va2FoZWFkPTQwIHJjPWNyZiBtYnRyZWU9MSBjcmY9NTEuMCBxY29tcD0wLjYwIHFwbWluPTAgcXBtYXg9NjkgcXBzdGVwPTQgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAABdliIQB/yQNzkAAAAMDTQ2noyNKAABWQQEiIoSv2+3FjX75AOABMCKMrVQJfY/6gsHAAT4ijGAn3wZK/MluATYijK4zz4Ha8HrAOAEyIpBANwP8JoGVwAE2IohANYpwhu4BPiKEr6/8LDb7tQHAAToikEA3sHi/fq4BOCKMr6545Etn+0AOATIijK4qUO37X1ywcAE0IpBANADQdFm4AUIiiEA3wEFl48ABMiKQQDYDWuQV+AAABWdtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAFFQABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAACLHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAIgAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAA+OOOAIwAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAACIAAAAAAAEAAAAAAaRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAHUwAAAD6VXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFPbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABD3N0YmwAAACrc3RzZAAAAAAAAAABAAAAm2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAA8ACMAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAz/4QAcZ2QADKzZQ8T+//ABwAGxAAADA+kAAOpgDxQplgEABmjr4GUsiwAAABBwYXNwAAAAHAAAABsAAAAYc3R0cwAAAAAAAAABAAAAAQAAA+kAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAACzQAAAAEAAAAUc3RjbwAAAAAAAAABAAAARgAAAmV0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABRUAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAS4AAAEAAABAAAAAAHdbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAArEQAAOAAVxwAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAABiG1pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABTHN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAArEQAAAAAANmVzZHMAAAAAA4CAgCUAAgAEgICAF0AVAAAAAAAERwAABEcFgICABRUIVuUABoCAgAECAAAAGHN0dHMAAAAAAAAAAQAAAA4AAAQAAAAAKHN0c2MAAAAAAAAAAgAAAAEAAAABAAAAAQAAAAIAAAANAAAAAQAAAExzdHN6AAAAAAAAAAAAAAAOAAAAFgAAAA0AAAANAAAADAAAAA0AAAAMAAAACgAAAA0AAAALAAAADQAAAA0AAAALAAAACwAAAAsAAAAYc3RjbwAAAAAAAAACAAAAMAAAAxMAAAAac2dwZAEAAAByb2xsAAAAAgAAAAH//wAAABxzYmdwAAAAAHJvbGwAAAABAAAADgAAAAEAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjU4LjEyLjEwMA=="},r.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"},r.flashTypes=[r.mimeTypes.mp4,r.mimeTypes.flv,r.mimeTypes.f4m,r.mimeTypes.smil,r.mimeTypes.smilxml],r.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}},r.getPlaybackMode=function(e){var t,i,n,o;null==e&&(e=(null!=(o=c["amp-mode"])?o.toLowerCase():void 0)||To.HTML_AUTO),i=!1;for(t in To)if(n=To[t],n===e){i=!0;break}return i||(e=To.AUTO),e===To.HTML_AUTO&&(e=this.isHTMLFirst()?To.HTML:To.AUTO),e!==To.AUTO?(e!==To.FLASH||this.hasFlash()&&"undefined"!=typeof Ge||(e=this.supportsHTML5Video()?To.HTML:To.NONE),e):(this.hasFlash()||(e=this.supportsHTML5Video()?To.HTML:To.NONE),e===To.AUTO&&(e=this.isHTML5()?To.HTML:To.FLASH),e)},r.getIEVersion=function(){var e,t,i;return t=-1,i=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"===navigator.appName?e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/[0-9\.]+$/.test(i)&&(e=/Edge\/([0-9\.]+)/),null!=(null!=e?e.exec(i):void 0)&&(t=parseFloat(RegExp.$1)),t},r.getFFVersion=function(){var e,t;return e=-1,t=navigator.userAgent,/Firefox\/([0-9\.]+)$/.exec(t)&&(e=parseFloat(RegExp.$1)),e},r.getSafariVersion=function(){var e,t;return e=-1,t=navigator.userAgent,/Safari\/[0-9\.]+$/.test(t)&&null!=/Version\/([0-9]+\.[0-9]+)/.exec(t)&&(e=parseFloat(RegExp.$1)),e},r.isChrome=function(){return/Chrom(e|ium)/.test(navigator.userAgent)},r.getChromeVersion=function(){var e,t;return e=-1,t=navigator.userAgent,/Chrome( Mobile)?\/([0-9\.]+)/.test(t)&&(e=parseFloat(t.match(/Chrome( Mobile)?\/([0-9\.]+)/)[2].split(".").slice(0,2).join("."))),e},r.isHTMLFirst=function(){return null!=window.MediaSource},r.mergeRules=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(r.rules[t]=i);return n},r.checkRules=function(e){var t,i,n,o,a;if(null!=e&&e.length>0)for(o=0,a=e.length;a>o;o++)if(t=e[o],(n=r.rules[t])&&(i=new RegExp(n.regexp),i.test(navigator.userAgent)))return!0;return!1},r.selectSource=function(e,t){var i,n,o,a,s;for(n=0,a=e.length;a>n;n++)if(i=e[n],r.checkRules(i.rules))return i;for(o=0,s=e.length;s>o;o++)if(i=e[o],""!==t(i.type||r.getMimeType(i.src)))return i;return null},r.getSourceByType=function(e,t){var i,n,o,a;for(n=null!=e.source?e.source.slice():[],null==e.type&&(e.type=r.getMimeType(e.src)),n.push(e),o=0,a=n.length;a>o;o++)if(i=n[o],i.type===t)return i;return null},r.getMimeType=function(e){return this.mimeTypes[r.getFileExtension(e)]},r.selectTrack=function(e,t){var i,n,o,r;for(o=0,r=e.length;r>o;o++)if(i=e[o],i.kind===t){n=i;break}return n},r.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)},r.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)},r.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)},r.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)},r.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)},r.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)},r.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)},r.supportsHTML5Video=function(){var e;return e=document.createElement("video"),null!=e.canPlayType},r.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()},r.isIOS=function(){var e,t;return e=/iP(hone|od|ad)/i,t=e.test(navigator.platform)||e.test(navigator.userAgent)},r.getIOSversion=function(){var e;return this.isIOS()?(e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]):void 0},r.hasFlash=function(){var e;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}return e},r.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()},r.getDevice=function(){var e;return e="desktop",this.isIPhone()?e="iphone":this.isIPad()?e="ipad":/Android/.test(navigator.userAgent)?e="android":this.isKindleFireHD()?e="kindlefirehd":this.isKindleFire()&&(e="kindlefire"),e},r.xmlToJson=function(e){var t,i,n,o,r,a,s,l,d,c,u,p;if(a={},9===e.nodeType&&(e=e.firstChild),1===e.nodeType){if(e.attributes.length>0)for(a["@attributes"]={},u=e.attributes,o=s=0,d=u.length;d>s;o=++s)t=u[o],a["@attributes"][t.nodeName]=t.nodeValue}else(3===e.nodeType||4===e.nodeType)&&(a=e.nodeValue);if(e.hasChildNodes())for(p=e.childNodes,o=l=0,c=p.length;c>l;o=++l)i=p[o],(3!==i.nodeType||/\S/.test(i.nodeValue))&&(r=i.nodeName.replace(/:/,"-"),n=this.xmlToJson(i),null==n["@attributes"]&&null!=n["#text"]&&(n=n["#text"]),null==a[r]?a[r]=n:(a[r]instanceof Array||(a[r]=[a[r]]),a[r].push(n)));return a},r.getXHR=function(){return new h},r.getUTC=function(){return this.request("//time.akamai.com").then(function(e){return 1e3*parseInt(e.responseText)})},r.request=function(e){return null==e&&(e={}),new Promise(function(t,i){var n,o,r,a;if("string"==typeof e&&(e={url:e}),null==e.method&&(e.method="GET"),r=new XMLHttpRequest,r.open(e.method,e.url),r.onload=function(){return t(r)},r.onerror=function(e){return i(e)},r.withCredentials=e.withCredentials,null!=e.responseType)try{r.responseType=e.responseType}catch(s){}if(null!=e.headers){a=e.headers;for(n in a)o=a[n],null!=n&&null!=o&&r.setRequestHeader(n,o)}return r.send(e.data||e.body)})},r.requestText=function(e){return null==e&&(e={}),this.request(e).then(function(e){return e.responseText})},r.requestJson=function(e){return null==e&&(e={}),this.requestText(e).then(function(e){return JSON.parse(e)})},r.loadScript=function(e,t){return new Promise(function(i,n){var o,r;o=t||document.getElementsByTagName("head")[0],r=document.createElement("script"),r.type="text/javascript",r.addEventListener?(r.onload=function(){i(r)},r.onerror=function(e){n(e)}):r.readyState&&(r.onreadystatechange=function(e){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=null,i(r))}),r.src=e,o.appendChild(r)})},r.loadStyleSheet=function(e){var t,i;return t=document.getElementsByTagName("head")[0],i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e,t.appendChild(i)},r.getFileExtension=function(e){return null==e&&(e=""),e.replace(/\?.*/,"").replace(/\#.*/,"").split(".").pop()},r.getResponseHeader=function(e,t,i){var n;return null==i&&(i={}),n=r.getXHR(),null!=i.onerror&&(n.onerror=i.onerror),n.open("HEAD",e,!1),n.send(),n.getResponseHeader(t)},r.getResponseHeaders=function(e,t,i){var n,o,a,s,l;if(null==i&&(i={}),a=r.getXHR(),null!=i.onerror&&(a.onerror=i.onerror),a.open("HEAD",e,!1),a.send(),o={},null==t)return a.getAllResponseHeaders();for(s=0,l=t.length;l>s;s++)n=t[s],o[n]=a.getResponseHeader(n);return o},r.isTouch=null,r.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(e){this.isTouch=!1}return this.isTouch},r.clamp=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},r.beacon=function(e,t){var i;return null==t&&(t="beaconId"),i=document.getElementById(t),null==i&&(i=document.createElement("img"),i.setAttribute("id",t),i.setAttribute("height",0),i.setAttribute("width",0),document.body.appendChild(i),i.style.display="none"),i.setAttribute("src",e),i},r.getElementOffset=function(e,t){var i,n,o,r,a,s;for(null==t&&(t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),n=0,a=0,s=e.offsetWidth,i=e.offsetHeight;e&&e!==t;)"BODY"===e.tagName?(o=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop,n+=e.offsetLeft-o+e.clientLeft,a+=e.offsetTop-r+e.clientTop):(n+=e.offsetLeft-e.scrollLeft+e.clientLeft,a+=e.offsetTop-e.scrollTop+e.clientTop),e=e.offsetParent;return{left:n,top:a,width:s,height:i}},r.override=function(e,t,i){var n,o;if(null==i&&(i=!0),null==e)return t;if(null==t)return e;i===!0&&(e=r.clone(e),t=r.clone(t));for(n in t)o=t[n],"object"==typeof e[n]&&"object"==typeof o&&null!=o?(null==e[n]&&(e[n]=o instanceof Array?[]:{}),e[n]=r.override(e[n],o,!1)):e[n]=o;return e},r.diff=function(e,t){var i,n,o,r,a;if(null==t)return null;if(null==e&&null!=t)return t;i={};for(o in t)if(a=t[o],(r=e[o])!==a)if(null==r)i[o]=a;else switch(typeof a){case"string":case"number":case"boolean":case"function":i[o]=a;break;case"object":a instanceof Array?r.length!==a.length&&(i[o]=a):(n=this.diff(r,a),null!=n&&(i[o]=n))}return 0===Object.keys(i).length?null:i},r.clone=function(e,t){var i,n,o,r,a,s,l,d;if(null==t&&(t=!0),null==e)return e;if("object"!=typeof e)i=e;else{i=e instanceof Array?[]:{};for(r in e)if(s=e[r],"object"==typeof s&&null!==s&&t===!0)if(s instanceof Array)for(i[r]=[],l=0,d=s.length;d>l;l++)n=s[l],i[r].push(this.clone(n));else{i[r]={};for(o in s)a=s[o],i[r][o]=this.clone(a)}else i[r]=s}return i},r.formatTimecode=function(e,t){var i;return e=parseInt(e),isNaN(e)?"00:00":(i=r.formatZeroFill(e%60),e=parseInt(e/60),i=r.formatZeroFill(e%60)+":"+i,e=parseInt(e/60),e>0&&(i=r.formatZeroFill(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i)},r.formatZeroFill=function(e){var t;return t=e.toString(),10>e&&(t="0"+t),t},r.flattenTimecode=function(e,t){var i,n,o,r;if(null==t&&(t=30),null==e||""===e)return NaN;for(o=e.split(":"),i=0,4===o.length?i=parseInt(o.pop())/t:3===o.length&&(o[2]=o[2].replace(",","."),-1!==o[2].indexOf(".")&&(n=o[2].split(".")),(null!=n?n.length:void 0)>1&&(o[2]=n[0],i=parseInt(n[1])/1e3)),r=parseInt(o.pop());o.length>0;)r+=Math.pow(60,o.length)*parseInt(o.shift());return r+i},r.cacheBust=function(e,t,i){var n;return null==t&&(t="cacheBust"),null==i&&(i=Date.now()),n=-1===e.indexOf("?")?"?":"&",e+n+t+"="+i},r.formatStyleName=function(e){return e.replace(/([A-Z])/,"-$1").toLowerCase()},r.trim=function(e){var t;return t=e.replace(/^\s*(.*)/,"$1"),t.replace(/(.*)\s*$/,"$1")},r.getFeed=function(e){return this.request(e).then(function(e){return"document"===e.responseType||/^</.test(e.responseText)?r.xmlToJson(e.responseXML):JSON.parse(e.responseText)})},r.getSource=function(e,t,i){var n,o;o=r.getPlaybackMode(),n=function(e){var i,n,a,s;n=new Nt,e=n.createFeed(e),(null!=e&&null!=(s=e.item)?s.length:void 0)>0&&(i=function(e){return"flash"===o&&-1!==r.flashTypes.indexOf(e)||"html"===o&&-1===r.flashTypes.indexOf(e)?"maybe":""},a=r.selectSource(e.item[0].source,i)),"function"==typeof t&&t(a)},r.getFeed(e).then(n)["catch"](i)},r.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(e){}},r.clientX=0,r.clientY=0,r.pageX=0,r.pageY=0,r.mouseTracker=function(e){r.clientX=e.clientX,r.clientY=e.clientY,r.pageX=e.pageX,r.pageY=e.pageY},r.isMouseOverElement=function(e){var t;if(t=!1,null==e)return t;try{t=e.contains(document.elementFromPoint(r.clientX,r.clientY))}catch(i){t=!1}return t},r.trackMouse(),r.getActualSize=function(e,t){var i,n,o;return null==t&&(t=!0),o=e.offsetWidth,i=e.offsetHeight,t===!0&&(n=getComputedStyle(e),o+=parseInt(n.marginLeft)+parseInt(n.marginRight),i+=parseInt(n.marginTop)+parseInt(n.marginBottom)),{width:o,height:i}},r.isVolumeSettable=function(){var e,t;return t=navigator.userAgent.toLowerCase(),e=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(t),null!=e?"android"===e[0]&&/Firefox/.test(t)?!0:!1:!0},r.createFlashObject=function(e,t){var i,n,o,a,s,l,d,c,u;if(null!=e){if(s={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},r.override(s,e.params,!1),null!=e.vars){d=[],c=e.vars;for(a in c)l=c[a],d.push(""+a+"="+l);s.flashvars=d.join("&")}n=(null!=(u=e.attributes)?u.id:void 0)||this.createUID(),i={id:n,name:n,width:"100%",height:"100%",type:"application/x-shockwave-flash"},r.override(i,e.attributes,!1),-1!==this.getIEVersion()&&"direct"===s.wmode&&(s.wmode="transparent"),o="<object ";for(a in i)l=i[a],o+=""+a+'="'+l+'" ';o+=">\n";for(a in s)l=s[a],o+='<param name="'+a+'" value="'+l+'" />\n';o+="</object>",t.innerHTML=o}},r.createUID=function(e,t){var i,n,o,r,a;for(null==e&&(e=16),null==t&&(t=32),n=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},o="",i=r=0,a=e-1;a>=0?a>=r:r>=a;i=a>=0?++r:--r)o+=n(0,t-1).toString(t).toUpperCase();return this.uids[o]===!0?this.createUID(e,t):(this.uids[o]=!0,o)},r.uids={},r.chain=function(e,t){var i,n,o,r;for(i=Promise.resolve(t),o=0,r=e.length;r>o;o++)n=e[o],i=i.then(n);return i},r.transform=function(e,t){var i,n,o,r;return null==t||0===t.length?Promise.resolve(e):(t=t.map(function(e){return"function"==typeof e.transform?e.transform:e}),n=0,o=t.length-1,r=function(e){return n++,i(e)},(i=function(e){var i;if(i=t[n],"function"!=typeof i)throw new Error("Transform must be a valid function");return Promise.resolve(i(e,r)).then(function(e){return o>n?r(e):e})})(e))},r.arrayBufferToString=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},r.parseJWT=function(e){var t;return t=e.split("."),{header:JSON.parse(atob(t[0])),payload:JSON.parse(atob(t[1])),signature:t[2]}},r.getFullScreenApi=function(e,t){var i;return i={},null!=e.webkitRequestFullScreen?(i.enter=e.webkitRequestFullScreen.bind(e),i.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement",i.error="webkitfullscreenerror"):null!=e.requestFullscreen?(i.enter=e.requestFullscreen.bind(e),i.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),i.event="onfullscreenchange",i.element="fullscreenElement",i.error="fullscreenerror"):null!=e.mozRequestFullScreen?(i.enter=e.mozRequestFullScreen.bind(e),i.exit=document.mozCancelFullScreen.bind(document),i.event="onmozfullscreenchange",i.element="mozFullscreenElement",i.error="mozfullscreenerror"):null!=e.msRequestFullscreen?(i.enter=e.msRequestFullscreen.bind(e),i.exit=document.msExitFullscreen.bind(document),i.event="MSFullscreenChange",i.element="msFullscreenElement",i.error="MSFullscreenError"):null!=t.webkitEnterFullscreen&&(i.enter=t.webkitEnterFullscreen.bind(t),i.exit=t.webkitExitFullscreen.bind(t),i.event=null,i.error=null),i},r.stringToArray=function(e){var t,i,n,o,r;for(i=new ArrayBuffer(2*e.length),t=new Uint16Array(i),n=o=0,r=e.length-1;r>=0?r>=o:o>=r;n=r>=0?++o:--o)t[n]=e.charCodeAt(n);return t},r.arrayToString=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},r.base64DecodeUint8Array=function(e){var t,i,n,o,r,a;for(n=window.atob(e),o=n.length,t=new Uint8Array(new ArrayBuffer(o)),i=r=0,a=o-1;a>=0?a>=r:r>=a;i=a>=0?++r:--r)t[i]=n.charCodeAt(i);return t},r.base64EncodeUint8Array=function(e){for(var t,i,n,o,r,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",c=0;c<e.length;)t=e[c++],i=c<e.length?e[c++]:Number.NaN,n=c<e.length?e[c++]:Number.NaN,o=t>>2,r=(3&t)<<4|i>>4,a=(15&i)<<2|n>>6,s=63&n,isNaN(i)?a=s=64:isNaN(n)&&(s=64),d+=l.charAt(o)+l.charAt(r)+l.charAt(a)+l.charAt(s);return d},r.getKeySystem=function(){var e;return e=navigator.userAgent,/Edge/.test(e)||/Trident/.test(e)?"com.microsoft.playready":/Chrome/.test(e)||/Firefox/.test(e)?"com.widevine.alpha":"com.apple.fps.1_0"},r.isAutoplaySupported=function(){var e;return e=!0,this.isIOS()&&(-1!==this.getSafariVersion()?e=this.getIOSversion()[0]>=10:this.isChrome()&&(e=this.getChromeVersion()>=53)),this.isChrome()&&this.isAndroid()&&(e=this.getChromeVersion()>=53),e},r.fieldIsUnique=function(e,t,i){var n,o,r,a,s;for(o=!0,n=a=0,s=e.length;s>a;n=++a)if(r=e[n],null!==r&&void 0!==r&&null!==r[t]&&void 0!==r[t]&&r[t].toString().toLowerCase()===i.toString().toLowerCase()){o=!1;break}return o},r.toCamelCase=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},r.toHyphenated=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})},r.createElement=function(e,t,i,n){var o,r,a,s;if(null==n&&(n="div"),"string"==typeof n&&(n=document.createElement(n)),o=n.classList,null!=e)for("string"==typeof e&&(e=[e]),a=0,s=e.length;s>a;a++)r=e[a],o.add(r);return null!=i&&(n.textContent=i),null!=t&&t.appendChild(n),n},a.prototype.log=function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(e){}},a.prototype.trace=function(){try{console.trace.apply(console,arguments)}catch(e){}},a.prototype.debug=function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},a.prototype.info=function(){try{console.info.apply(console,arguments)}catch(e){}},a.prototype.warn=function(){try{console.warn.apply(console,arguments)}catch(e){}},a.prototype.error=function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},a.prototype.fatal=function(){try{console.fatal.apply(console,arguments)}catch(e){}},s.prototype.type=null,s.prototype.target=null,s.prototype.detail=null,l.prototype.addEventListener=function(e,t,i){null!=t&&null!=e&&(null==this._listenerMap[e]&&(this._listenerMap[e]=[]),-1===this._listenerMap[e].indexOf(t)&&this._listenerMap[e].push(t))},l.prototype.once=function(e,t){t.once=!0,this.addEventListener(e,t)},l.prototype.dispatchEvent=function(e){var t,i,n,o,r,a;if(n=this._listenerMap[e.type],i=this._target["on"+e.type],e.target=this._target,null!=i&&i.apply(this._target,[e]),null!=n)for(a=n.slice(),t=o=0,r=a.length;r>o;t=++o)i=a[t],i.apply(this._target,[e]),i.once===!0&&n.splice(t,1)},l.prototype.dispatch=function(e,t){this.dispatchEvent(new s(e,t))},l.prototype.removeEventListener=function(e,t,i){var n,o;if(null!=t&&null!=e&&(o=this._listenerMap[e],null!=o&&(n=null!=o?o.indexOf(t):void 0,-1!==n)))return o.splice(n,1)},d.createTextContent=function(e,t){var i;return i=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t)},d.updateTextContent=function(e,t){var i;return i=d.createTextContent(e.ownerDocument,t),e.removeChild(e.childNodes[0]),e.appendChild(i),e},d.serialize=function(e){var t;if(null!=e){if("string"==typeof e)return e;try{return t=new XMLSerializer,t.serializeToString(e)}catch(i){try{return t=document.implementation.createLSSerializer(),xmlSerializer.writeToString(e)}catch(n){try{return e.xml}catch(o){}}}}},d.parse=function(e){var t,i;return window.DOMParser?(t=new DOMParser,i=t.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)),i},c.construct=function(){var e,t,i;i=this.decode(window.location.search),c.typed={};for(e in i)t=i[e],c[e]=t,c.typed[e]=this.parse(t);return!0},c.encode=function(e,t){var i,n,o,r;o=[];for(n in e)r=e[n],null!=r&&(i=t?t+"["+n+"]":n,o.push("object"==typeof r?this.encode(r,i):i+"="+encodeURIComponent(r)));return o.join("&")},c.decode=function(e){var t,i=this;return null!=e&&(t={},e=e.replace(/^[^?]*\?/,""),e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,o,r){var a,s,l;return a=decodeURIComponent(n),l=decodeURIComponent(r),/~/.test(l)&&(l=i.decodeObject(l)),/\[/.test(a)?(s=a.match(/[^\[]+/)[0],a=a.match(/\[([A-Za-z]+)\]/)[1],null==t[s]&&(t[s]={}),void(t[s][a]=l)):void(t[a]=l)})),t},c.decodeObject=function(e){var t,i=this;return null!=e&&(t={},e.replace(/([^:~]+)(:([^~]*))?/g,function(e,n,o,r){t[decodeURIComponent(n)]=i.parse(decodeURIComponent(r))})),t},c.parse=function(e){var t;if("object"==typeof e)return e;if("undefined"===e)return!0;if(t=e.toLowerCase(),"true"===t||"false"===t)return"true"===t;if("null"===t)return null;if(t=parseFloat(e),!isNaN(t))return t;try{return t=JSON.parse(e)}catch(i){return e}},c.constructed=c.construct(),i(u,l),u.prototype.reset=function(){this.stop(),this._currentCount=0,this._currentTime=0,this._startTime=null},u.prototype.start=function(){var e;this._running!==!0&&(e=this.delay-(this._currentTime-this.delay*this._currentCount),this._running=!0,this._timeout=setTimeout(this.tick,e))},u.prototype.stop=function(){this._running!==!1&&(clearTimeout(this._timeout),this._currentTime+=Date.now()-this._startTime,this._timeout=null,this._running=!1)},u.prototype.tick=function(){var e;clearTimeout(this._timeout),e=0!==this.repeatCount&&this._currentCount>=this.repeatCount,this._currentCount++,this._currentTime+=this.delay,this._startTime=Date.now(),e===!1&&(this._timeout=this.next()),this.dispatchEvent(new s("timer",this)),e===!0&&(this.stop(),this.dispatchEvent(new s("complete",this)))},p.setCookie=function(e,t,i,n,o){var r;return t=escape(t),null!=i&&(r=new Date,r.setDate(r.getDate()+i),t+="; expires="+r.toUTCString()),null!=o&&(t+="; domain="+o),null!=n&&(t+="; path="+n),document.cookie=e+"="+t},p.getCookie=function(e){var t,i,n,o,r,a,s;for(i=document.cookie.split(";"),a=0,s=i.length;s>a;a++)if(t=i[a],n=t.indexOf("="),o=t.substr(0,n).replace(/^\s+|\s+$/g,""),r=unescape(t.substr(n+1)),o===e)return r},p.deleteCookie=function(e){return this.setCookie(e,"",-1)},i(h,l),h.prototype.xhr=null,h.prototype.headers=null,h.prototype.response=null,h.prototype.responseXML=null,h.prototype.responseText=null,h.prototype.responseType=null,h.prototype.withCredentials=!1,h.prototype.readyState=0,h.prototype.status=null,h.prototype.open=function(e,t){var i,n,o=this;try{n=new XMLHttpRequest}catch(r){n=new window.ActiveXObject("Microsoft.XMLHTTP")}if(h.isCORS(t))if(Object.prototype.hasOwnProperty.call(n,"withCredentials"))try{n.withCredentials=this.withCredentials}catch(r){a.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",r)}else"undefined"!=typeof XDomainRequest&&(i=!0,n=new XDomainRequest);if(null!=n){i&&(n.onprogress=function(){},n.ontimeout=function(){},n.onerror=function(){},n.onload=function(e){"function"==typeof n.onreadystatechange&&(n.readyState=4,n.status=200,n.contentType.match(/\/xml/)&&(n.responseXML=new ActiveXObject("Microsoft.XMLDOM"),n.responseXML.async=!1,n.responseXML.loadXML(n.responseText)),n.onreadystatechange.call(n,e,!1))}),n.onreadystatechange=function(e){var t,i;if(o.readyState=n.readyState,o.dispatchEvent(new s("readystatechange",n)),4===n.readyState)if(o.status=n.status,199<(t=o.status)&&400>t||0===o.status){if(null==n.responseText&&(n.responseText=n.text),o.responseText=n.responseText,null!=n.responseXML&&(null!=(i=n.responseXML.childNodes)?i.length:void 0)>0)o.response=o.responseXML=n.responseXML,o.responseType="document";else try{o.response=JSON.parse(n.responseText),o.responseType="json"}catch(r){o.response=n.responseText,o.responseType="text"}o.dispatchEvent(new s("load",o))}else 0!==o.status&&o.dispatchEvent(new s("error",o))};try{"undefined"!=typeof n.onerror&&(n.onerror=function(e){o.dispatchEvent(new s("error",o))})}catch(r){}n.open(e,t)}this.xhr=n},h.prototype.send=function(e){var t,i,n,o=this;if(null!=this.headers){n=this.headers;for(t in n)i=n[t],null!=t&&null!=i&&this.xhr.setRequestHeader(t,i)}setTimeout(function(){o.xhr.send(e)},0)},h.prototype.setRequestHeader=function(e,t){null!=e&&null!=t&&(null==this.headers&&(this.headers={}),
this.headers[e]=t)},h.prototype.setRequestHeaders=function(e){return this.headers=e,e},h.prototype.getResponseHeader=function(e){var t;return null!=(t=this.xhr)&&"function"==typeof t.getResponseHeader?t.getResponseHeader(e):void 0},h.prototype.getAllResponseHeaders=function(){var e;return null!=(e=this.xhr)&&"function"==typeof e.getAllResponseHeaders?e.getAllResponseHeaders():void 0},h.isCORS=function(e){var t,i,n,o;return i=document.createElement("a"),i.href=e,t=""!==i.hostname?i.hostname:location.hostname,n="0"!==i.port?i.port:location.port,o=":"!==i.protocol?i.protocol:location.protocol,location.protocol!==o||location.hostname!==t||location.port!==n&&!(""===location.port&&"80"===n)},i(g,l),g.prototype.timeout=null,g.prototype.interval=null,g.prototype.url=null,g.prototype.lastModified=null,g.prototype.contentLenght=null,g.prototype.data=null,g.prototype.text=null,g.prototype.type=null,g.prototype.headers=null,g.prototype.useHeadRequest=!0,g.prototype.xhr=null,g.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()},g.prototype.poll=function(){var e,t=this;e=r.getXHR(),this.useHeadRequest?(e.onload=function(i){var n,o;return 304===e.status?void t.invoke():(o=e.getResponseHeader("Last-Modified"),n=e.getResponseHeader("Content-Length"),void(null==o&&null==n||null!=o&&o!==t.lastModified||null!=n&&n!==t.contentLength?(t.lastModified=o,t.contentLength=n,t.updateData()):t.invoke()))},e.onerror=function(e){t.error(e)},e.open("HEAD",r.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&e.setRequestHeader("If-Modified-Since",this.lastModified),e.send()):this.updateData()},g.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)},g.prototype.updateData=function(){var e,t=this;return e=r.getXHR(),e.open("GET",r.cacheBust(this.url),!0),e.onload=function(i){var n;n=e.responseText,t.setText(n),t.invoke()},e.onerror=function(e){t.error(e)},this.applyHeaders(),e.send()},g.prototype.setText=function(e){var t;if(e!==this.text){if(this.text=e,t=this.text,this.type===r.mimeTypes.json)try{t=this.xhr.response}catch(i){t=this.text}this.setData(t)}return e},g.prototype.setData=function(e){return e!==this.data&&(this.data=e,this.dispatchEvent(new s("datachange",this.data))),e},g.prototype.error=function(e){a.error(event),this.stop()},g.prototype.invoke=function(){var e=this;this.stop(),this.timeout=setTimeout(function(){e.poll()},this.interval)},g.prototype.stop=function(){clearTimeout(this.timeout)},i(f,l),f.prototype.events=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],f.prototype.resetHandler=null,f.prototype.element=null,f.prototype.timeout=null,f.prototype.active=!0,f.prototype.timeoutId=null,f.prototype.applyListeners=function(e){var t,i,n,o;for(null==e&&(e="add"),o=this.events,i=0,n=o.length;n>i;i++)t=o[i],this.element[""+e+"EventListener"](t,this.resetHandler)},f.prototype.start=function(e){null!=e&&(this.timeout=e),this.stop(),this.applyListeners("add"),this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)},f.prototype.stop=function(){this.applyListeners("remove"),clearTimeout(this.timeoutId)},f.prototype.reset=function(){this.setActive(!0),this.start()},f.prototype.setActive=function(e){return e!==this.active?(this.active=e,this.dispatchEvent(new s("activechange",{active:this.active})),e):void 0},f.prototype.getActive=function(){return this.active},m.getID3=function(e){var t,i,n;return n=10,i=this.getFrameData(e.subarray(n)),t=this.decodeFrame(i)},m.getFrameData=function(e){var t,i,n;return n=String.fromCharCode(e[0],e[1],e[2],e[3]),i=this.readSize(e,4),t=10,{type:n,size:i,data:e.subarray(t,t+i)}},m.readSize=function(e,t){var i;return i=0,i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3]},m.decodeFrame=function(e){return"PRIV"===e.type?this.decodePrivFrame(e):"T"===e.type[0]?this.decodeTextFrame(e):"W"===e.type[0]?this.decodeURLFrame(e):this.decodeTextFrame(e)},m.decodePrivFrame=function(e){var t,i;if(!(e.size<2))return t=this.utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1)),{key:e.type,info:t,data:i.buffer}},m.decodeTextFrame=function(e){var t,i,n,o;if(!(e.size<2))return"TXXX"===e.type?(i=1,t=this.utf8ArrayToStr(e.data.subarray(i)),i+=t.length+1,o=this.utf8ArrayToStr(e.data.subarray(i)),{key:e.type,info:t,data:o}):(n=this.utf8ArrayToStr(e.data.subarray(1)),{key:e.type,info:n,data:n})},m.decodeURLFrame=function(e){var t,i,n,o;if("WXXX"===e.type){if(e.size<2)return;return i=1,t=this.utf8ArrayToStr(e.data.subarray(i)),i+=t.length+1,o=this.utf8ArrayToStr(e.data.subarray(i)),{key:e.type,info:t,data:o}}return n=this.utf8ArrayToStr(e.data),{key:e.type,info:n,data:n}},m.utf8ArrayToStr=function(e,t){var i,n,o,r,a,s;for(null==t&&(t=!1),a=e.length,s="",r=0;a>r;){if(i=e[r++],0===i&&t)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:n=e[r++],s+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=e[r++],o=e[r++],s+=String.fromCharCode((15&i)<<12|(63&n)<<6|(63&o)<<0)}}return s},y.prototype.title=null,y.prototype.link=null,y.prototype.description=null,y.prototype.category=null,y.prototype.pubDate=null,y.prototype.language=null,y.prototype.ttl=null,y.prototype.item=null,y.prototype.metadata=null,A.prototype.src=null,A.prototype.debug=null,A.prototype.type=null,A.prototype.metadata=null;var To={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none",HTML_AUTO:"html-auto"},Po={NONE:"none",UNKNOWN:"unknown",DEFAULT:"default",ALLOWED:"allowed",MUTED:"muted",MUTED_INLINE:"mutedinline",BLOCKED:"blocked"};AutoplayThreshold=function(){function e(){}return e.name="AutoplayThreshold",e.url=function(){return r.blankVideo()},e.supported=function(){var e,t,i,n,o,r,a,s;return a=!0,s=navigator.userAgent,o=/iP(hone|od|ad)/i.test(s),r=/Safari\/[0-9\.]+$/.test(s),i=/Android/.test(s),n=/Chrom(e|ium)/.test(s),t=function(){var e;return e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]},e=function(){var e,t;return t=-1,e=/Chrome( Mobile)?\/([0-9\.]+)/,e.test(s)&&(t=parseFloat(s.match(e)[2].split(".").slice(0,2).join("."))),t},n&&(o||i)?a=e()>=53:r&&o&&(a=t()[0]>=10),a},e.detect=function(e,t){return null==e&&(e=this.url()),null==t&&(t=this.supported),new Promise(function(i,n){var o,r,a,s,l,d;try{if(!t())return i(Po.BLOCKED);o=function(e){try{d.removeEventListener("error",t),d.pause()}catch(t){}i(e)},r=function(){o(Po.DEFAULT)},s=function(){return d.muted=!0,d.play().then(function(){return o(Po.MUTED)})["catch"](a)},a=function(){return d.playsInline=!0,d.play().then(function(){return o(Po.MUTED_INLINE)})["catch"](function(){return o(Po.BLOCKED)})},d=document.createElement("video"),d.addEventListener("error",r),d.volume=.01,d.src=e,l=d.play(),"function"!=typeof(null!=l?l.then:void 0)?o(Po.ALLOWED):l.then(function(){return o(Po.ALLOWED)})["catch"](s)}catch(c){r()}})},e.init=function(e){var t;return null==e&&(e=Po.DEFAULT),t=!0,(e===Po.ALLOWED||e===Po.BLOCKED)&&(this.threshold=e,t=!1),this.value(t)},e.value=function(e){var t=this;return null==e&&(e=!1),e===!0&&(this.threshold=null,this.detecting=null),null!=this.threshold?Promise.resolve(this.threshold):(null==this.detecting&&(this.detecting=this.detect().then(function(e){return t.threshold=e,t.detecting=null,e})),this.detecting)},e.threshold=Po.UNKNOWN,e}(),v.create=function(e){return new v(e)},v.defaults={paths:{base:"../",root:"../",player:"../amp.premier/",plugins:"../akamai/amp/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.premier.css",type:"text/css",async:!0}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},attributes:{},settings:{},autoplay:!1,autoplayPolicy:Po.DEFAULT,loop:!1,playsinline:null,withCredentials:!1,muted:null,target:"_blank",domain:"akamai.com",fullscreen:{},contextmenu:{},captioning:{},controls:{},playoverlay:{},hls:{resources:[{type:"text/javascript",src:"#{paths.resources}js/hls.min.js",debug:"#{paths.resources}js/hls.js"}],quality:{startLevel:-1},data:{enableWorker:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v2.6.8/dash.all.min.js",debug:"//cdn.dashjs.org/v2.6.8/dash.all.debug.js"}],buffer:1},flash:{swf:"#{paths.player}AkamaiPremierPlayer.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf",expressInstallSWF:"#{paths.player}playerProductInstall.swf","static":{enabled:!1,swf:"#{paths.player}AkamaiPremierPlayer-static.swf",debug:"#{paths.player}AkamaiPremierPlayer-static-debug.swf"},vars:{core_player_name:"amp.premier",mbr_starting_index:2,use_last_known_bitrate:!1,use_netsession_client:!1,netsession_install_prompt_frequency_secs:-1,ad_server_timeout:20,ad_control_enabled:!0,dvr_enabled:1,branding_preload:"none",hds_live_low_latency:!0,fullscreen_enabled:!0,show_feature_bar:!1,suppress_events:"mediaPlayerViewInitialized",hds_fragment_retry_data_gap_threshold:20},view:{attributes:{skin:"#{paths.player}amp.chromeless.assets.swf"},elements:{controls:{},adOptions:{attributes:{style:"backgroundColor: 'rgba(0, 0, 0, 0)'"},elements:{adChoices:null,adCountdown:null,adCount:null}},endSlate:{attributes:{enabled:!1,hideElements:"brandingLogo|viewAll"}},loadingView:{attributes:{enabled:!1,style:"backgroundColor: 'rgba(0, 0, 0, 0)'; color: 'rgba(0, 0, 0, 0)'",radius:0}}}}},locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PLAY:"Play",MSG_REWIND:"Rewind",MSG_PLAYBACK_RATE:"Playback Rate",MSG_FULLSCREEN:"Fullscreen",MSG_ENTER_FULLSCREEN:"Enter Fullscreen",MSG_EXIT_FULLSCREEN:"Exit Fullscreen",MSG_MUTE:"Mute",MSG_UNMUTE:"Unmute",MSG_JUMP_BACK:"Jump Back",MSG_JUMP_AHEAD:"Jump Ahead",MSG_VOLUME:"Volume",MSG_REPLAY:"Replay",MSG_SETTINGS:"Settings",MSG_SHARE:"Share",MSG_CLOSED_CAPTIONING:"Closed Captioning",MSG_SLIDER:"Slider",MSG_SEEK:"Seek",MSG_OF:"of",MSG_AD:"Ad",MSG_PREVIEW:"Preview",MSG_CURRENT:"Current",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_ERROR:"Error",MSG_ERROR_ABORTED:"Media Aborted",MSG_ERROR_DECODE:"Decode Error",MSG_ERROR_NETWORK:"Network Error",MSG_ERROR_SRC:"Source not supported",MSG_ERROR_DEFAULT:"An error has occurred",MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CC_PREVIEW_TEXT:"Lorem ipsum dolor sit amet..",MSG_EN:"English",MSG_ENG:"English",MSG_ES:"Spanish",MSG_SPA:"Spanish",MSG_DE:"German",MSG_DEU:"German",MSG_GER:"German",MSG_FR:"French",MSG_FRE:"French",MSG_FRA:"French",MSG_IT:"Italian",MSG_ITA:"Italian",MSG_RU:"Russian",MSG_RUS:"Russian",MSG_ZH:"Chinese",MSG_ZHO:"Chinese",MSG_CHI:"Chinese",MSG_JA:"Japanese",MSG_JPN:"Japanese",MSG_KO:"Korean",MSG_KOR:"Korean",MSG_CHROMECAST_MESSAGE:"Video playing on ${device}",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended",MSG_VIEWER_ID:"Viewer ID: ",MSG_SIGN_IN:"Sign In",MSG_PREVIEW_INFO:"Free Preview",MSG_PREVIEW_EXPIRES:"Expires in",MSG_UNKNOWN:"Unknown"},es:"#{paths.player}es.json",fr:"#{paths.player}fr.json"}},v.flashView={attributes:{skin:"#{paths.player}premier.assets.swf"},elements:{infoOverlay:{attributes:{style:"top: 0px;"}},adOptions:{attributes:{style:"backgroundColor: 'rgba(0, 0, 0, 1)'"},elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}},adCountdown:{},adCount:{}}},endSlate:{attributes:{enabled:!0,hideElements:"brandingLogo|viewAll"}},replayView:{},bufferingView:{},controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:{},playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}},i(_,puremvc.Proxy),_.NAME="ModuleProxy",_.prototype.defaults=null,_.prototype.config=null,_.prototype.initializeNotifier=function(e){_.__super__.initializeNotifier.call(this,e),this.createData()},_.prototype.createData=function(){this.setData(this.config)},_.prototype.getDefaults=function(){return this.defaults||{}},_.prototype.setData=function(e){var t,i,n,o,r;null==e&&(e={}),n={},r=this.getDefaults();for(i in r)t=r[i],o=i in e?e[i]:t,n[i]=o;return _.__super__.setData.call(this,n),e},_.prototype.destroy=function(){},i(E,puremvc.Facade),E.prototype.logger=null,E.prototype.config=null,E.prototype.moduleName=null,E.prototype.moduleMap=null,E.prototype.viewComponent=null,E.prototype.dispatcher=null,E.prototype.oninitialized=null,E.prototype.onerror=null,E.prototype.parentModule=null,E.prototype.performance=null,E.prototype.transformer=null,E.prototype.initialize=function(e,t){this.config=e,this.parentModule=t,this.loadModuleResources().then(this.resourcesLoaded.bind(this))["catch"](this.resourcesError.bind(this))},E.prototype.loadModuleResources=function(e){return null==e&&(e=this.config.resources),!(null!=e?e.length:void 0)>0?Promise.resolve():xt.addResources(this.evaluatePaths(e))},E.prototype.evaluatePaths=function(e){var t,i,n;if(null!=e)return t=this.config.paths||(null!=(i=this.parentModule)&&null!=(n=i.config)?n.paths:void 0),null!=t&&(e=Ue.evaluateBindings(e,{paths:t})),e},E.prototype.resourcesError=function(e){"function"==typeof this.onerror&&this.onerror(this)},E.prototype.resourcesLoaded=function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)},E.prototype.createFramework=function(){this.createModel(),this.createController(),this.createView()},E.prototype.createModel=function(){this.registerProxy(new _(this.config))},E.prototype.createView=function(){},E.prototype.createController=function(){this.registerCommand(Lo.DISPATCH_EVENT,Fe)},E.prototype.getModuleName=function(){return this.moduleName},E.prototype.getConfig=function(){return this.config},E.prototype.hasModule=function(e){return null!=this.moduleMap[e]},E.prototype.getModules=function(){var e,t,i,n;t={},n=this.moduleMap;for(e in n)i=n[e],t[e]=i.module;return t},E.prototype.registerModule=function(e){var t,i;i=e.getModuleName(),null!=e&&null==this.moduleMap[i]&&(t=new Be(e),this.moduleMap[i]=t,this.registerMediator(t),e.onRegister())},E.prototype.retrieveModule=function(e){return this.moduleMap[e].module},E.prototype.removeModule=function(e){var t,i;return t=this.moduleMap[e],null!=t?(delete this.moduleMap[e],this.removeMediator(e),i=t.module,i.onRemove.call(i),i):void 0},E.prototype.listNotificationInterests=function(){return[]},E.prototype.listNotificationPublications=function(){return[]},E.prototype.getViewComponent=function(){return this.viewComponent},E.prototype.setViewComponent=function(e){return this.viewComponent=e,e},E.prototype.onRegister=function(){},E.prototype.onRemove=function(){},E.prototype.destroy=function(){var e,t,i,n;if(null!=this.getModules()){i=this.getModules();for(e in i)t=i[e],this.removeModule(e),t.destroy()}null!=(n=this.retrieveProxy(_.NAME))&&"function"==typeof n.destroy&&n.destroy(),puremvc.Facade.removeCore(this.multitonKey),null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");for(e in this){try{this[e]=null}catch(o){}delete this[e]}},E.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},E.prototype.once=function(e,t){this.dispatcher.once(e,t)},E.prototype.logEvent=function(e){var t;/(timeupdate|progress|fragmentloaded|fragmentloadstart|timeremaining|adtimeremaining)/.test(e.type)!==!0&&(t=this.getModuleName().toUpperCase(),e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},E.prototype.dispatchEvent=function(e){this.logEvent(e),this.dispatcher.dispatchEvent(e)},E.prototype.dispatch=function(e,t){this.dispatchEvent(new s(e,t))},E.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},E.prototype.addTransform=function(e,t){return this.transformer.addTransform(e,t)},E.prototype.sortTransforms=function(e,t){return this.transformer.sortTransforms(e,t)},E.prototype.transform=function(e,t){return this.transformer.transform(e,t)},E.prototype.removeTransform=function(e,t){return this.transformer.removeTransform(e,t)},i(b,l),b.prototype.getKind=function(){return this.data.kind},b.prototype.getLabel=function(){return this.data.label},b.prototype.getLanguage=function(){return this.data.language},b.prototype.getId=function(){return this.data.id},b.prototype.setEnabled=function(e){e!==this.data.enabled&&(this.data.enabled=e,this.changeEnabled(e),this.dispatchEvent("change"))},b.prototype.changeEnabled=function(e){},b.prototype.getEnabled=function(){return this.data.enabled},b.prototype.flatten=function(){return{kind:this.getKind(),label:this.getLabel(),language:this.getLanguage(),id:this.getId(),enabled:this.getEnabled()}},i(C,Array),C.prototype.onchange=null,C.prototype.changeHandler=function(e){this.dispatchEvent(e)},C.prototype.addEventListener=function(e,t,i){this.dispatcher.addEventListener(e,t,i)},C.prototype.dispatchEvent=function(e){this.dispatcher.dispatchEvent(e)},C.prototype.removeEventListener=function(e,t,i){return this.dispatcher.removeEventListener(e,t,i)},C.prototype.add=function(e,t){null==t&&(t=!0),this.push(e),e.addEventListener("change",this.handlers.change),t===!0&&this.dispatchEvent({type:"addtrack"})},C.prototype.remove=function(e,t){var i;return null==t&&(t=!0),i=this.indexOf(e),-1!==i?(this.splice(i,1),e.removeEventListener("change",this.handlers.change),t===!0&&this.dispatchEvent({type:"removetrack"}),e):void 0},C.prototype.clear=function(){var e,t,i;if(0!==this.length){for(t=0,i=this.length;i>t;t++)e=this[t],this.remove(this[this.length-1],!1);this.dispatchEvent({type:"removetrack"})}},C.prototype.getTrackById=function(e){var t,i,n;for(i=0,n=this.length;n>i;i++)if(t=this[i],t.id===e)return t},S.prototype.initialize=function(){},S.prototype.getModules=function(){return[]},N.prototype.map=null,N.prototype.add=function(e,t){this.map[e]=t},N.prototype.item=function(e){return this.map[e]},N.prototype.remove=function(e){var t;return t=this.map[e],null!=t&&(this.map[e]=null,delete this.map[e]),t},I.prototype.url=null,I.prototype.method=null,I.prototype.withCredentials=null,I.prototype.headers=null,I.prototype.data=null,w.prototype.key=null,w.prototype.token=null,w.prototype.expiration=null,i(T,N),T.prototype.js=function(e,t){return r.loadScript(e,document.body)},T.prototype.css=function(e,t){return new Promise(function(i,n){try{r.loadStyleSheet(e)}catch(o){n()}i(t)})},T.prototype.json=function(e,t){return r.requestJson(t.src).then(function(e){return t.data=e,t})},T.prototype.require=function(e){var t;return t=this.item(e),null==t?"string"==typeof e?this.add({src:e}):null!=e.src?this.add(e):Promise.resolve(e):"function"==typeof t?(N.prototype.add.call(this,e,null),Promise.resolve().then(function(){return t()})):"function"==typeof t.then?t:Promise.resolve(t)},T.prototype.add=function(e){var t,i,n,o,s,l=this;return e.enabled===!1?Promise.resolve():(o=a.instance.enabled&&null!=e.debug?e.debug:e.src,t=e.id||o,e.defer===!0?(e.defer=!1,T.__super__.add.call(this,t,this.add.bind(this,e)),Promise.resolve()):(i=this.item(t),null!=i?"function"==typeof i.then?i:Promise.resolve(i):(s=e.type||r.getMimeType(o),s===r.mimeTypes.js||/javascript/.test(s)?n=this.js(o,e):s===r.mimeTypes.css?n=this.css(o,e):s===r.mimeTypes.json||/json/.test(s)?n=this.json(o,e):s!==r.mimeTypes.swf&&(n=r.request(o)),null==n?Promise.resolve():(n=n.then(function(e){return N.prototype.add.call(l,t,e),e}),T.__super__.add.call(this,t,n),n))))},T.prototype.addResources=function(e){var t,i,n,o,a,s;if(!(null!=e?e.length:void 0)>0)return Promise.resolve();for(n=[],t=[],a=0,s=e.length;s>a;a++)o=e[a],o instanceof Array?n.push(this.addResources.bind(this,o)):o.async===!0?t.push(this.add(o)):n.push(this.add.bind(this,o));return i=t.length>0?Promise.all(t):Promise.resolve(),i.then(function(){return r.chain(n)})},i(P,puremvc.SimpleCommand),P.prototype.execute=function(e){var t=this;AutoplayThreshold.value().then(function(e){return t.sendNotification(Lo.READY,t.facade.config)})},i(M,puremvc.SimpleCommand),M.prototype.applicationState=null,M.prototype.media=null,M.prototype.player=null,M.prototype.playback=null,M.prototype.config=null,M.prototype.logger=null,M.prototype.bindings=null,M.prototype.params=null,M.prototype.playerCore=null,M.prototype.security=null,M.prototype.tracks=null,M.prototype.initializeNotifier=function(e){var t;M.__super__.initializeNotifier.call(this,e),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.mediaProxy,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.tracks=this.player.tracks,this.playback=(null!=(t=this.player.playerCore)?t.getActivePlaybackCore():void 0)||this.player.playback},i(D,M),D.prototype.execute=function(e){var t;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case Vo.ENDED:t=Lo.REPLAY;break;case Vo.PAUSED:case Vo.READY:t=Lo.PLAY;break;case Vo.PLAYING:t=Lo.PAUSE}this.applicationState.getWaiting()&&this.facade.getMediaElement().paused===!0&&(t=Lo.PLAY),this.sendNotification(t,!0)}},i(x,M),x.prototype.execute=function(e){var t;t=this.applicationState.getDisplayState()===Ro.FULL_SCREEN?Ro.NORMAL:Ro.FULL_SCREEN,this.sendNotification(Lo.CHANGE_DISPLAY_STATE,t)},i(k,M),k.prototype.dispatchEvent=function(e,t){var i;"string"!=typeof e&&(t=null!=e.getBody()?e.getBody():{},e=e.getName()),i=new s(e.toLowerCase(),t),this.sendNotification(Lo.DISPATCH_EVENT,i)},k.prototype.dispatchEventAfterCommand=function(e,t){var i=this;return new Promise(function(n,o){var r;return r=function(){try{i.dispatchEvent(e,t),n()}catch(r){i.facade.logger.error(r),o(r)}},setTimeout(r,0)})},k.prototype.execute=function(e){this.dispatchEvent(e)},i(L,k),L.prototype.execute=function(e){this.applicationState.getIsUserActive()!==!0&&(0===this.facade.getMediaElement().currentTime&&this.media.started===!1&&this.applicationState.getSeeking()===!1&&(this.media.started=!0,this.sendNotification(Lo.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()===Vo.PLAYING?L.__super__.execute.call(this,e):this.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PLAYING))};var Mo={EXTERNAL:"external"},Do={AUTO:"auto",PERSISTENT:"persistent",NONE:"none"};i(R,k),R.prototype.execute=function(e){this.playback.pause(),this.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),R.__super__.execute.call(this,e)},i(O,M),O.prototype.execute=function(e){this.config.setAutoplay(e.getBody())},i(V,M),V.prototype.execute=function(e){this.config.setLoop(e.getBody())},i(G,M),G.prototype.execute=function(e){var t;t=r.clamp(e.getBody(),0,1),this.playback.getVolume()!==t&&this.playback.setVolume(t)},i(B,M),B.prototype.execute=function(e){var t,i,n,o,r,a,s,l,d,c,u,p=this;r=e.getBody(),a=this.facade.getMediaElement(),this.sendNotification(Lo.MEDIA_CHANGE,r),"amp"===this.applicationState.getPlaybackTarget()&&(i=this.facade.getAutoplay()&&this.applicationState.getLocked()===!1,this.applicationState.attemptAutoplay!==!1&&(this.applicationState.attemptAutoplay=!1,c=this.facade.autoplayThreshold,d=this.facade.autoplayPolicy,l=this.config.getPlaysInline(),s=this.config.getMuted(),n=c===Po.BLOCKED||d===Po.BLOCKED,t=c===Po.ALLOWED||d===Po.ALLOWED,n?this.sendNotification(Lo.AUTOPLAY_BLOCKED,{threshold:c,policy:d}):i&&!t&&d!==Po.NONE&&(i=d!==Po.DEFAULT&&!(c===Po.MUTED_INLINE&&d!==Po.MUTED_INLINE),i===!0?(null==l&&(l=d===Po.MUTED_INLINE&&c===Po.MUTED_INLINE),null==s&&(s=!(d!==Po.MUTED&&d!==Po.MUTED_INLINE||c!==Po.MUTED&&c!==Po.MUTED_INLINE))):this.sendNotification(Lo.AUTOPLAY_BLOCKED,{threshold:c,policy:d}))),null!=l&&(a.playsInline=l),null!=s&&this.playback.setMuted(s),i&&s&&(o=this.facade.getContainer(),u=function(){p.facade.setMuted(!1),o.removeEventListener("click",u)},o.addEventListener("click",u)),i&&setTimeout(this.sendNotification.bind(this,Lo.PLAY,!0),0))},i(H,M),H.prototype.execute=function(e){var t,i=this;t=e.getBody(),this.facade.transform(Ho.SEEK,t).then(function(e){var t;0===e&&i.media.getType()===r.mimeTypes.m3u8&&(e=.25),e!==i.playback.getCurrentTime()&&(i.playback.getStarted()===!0&&i.sendNotification(Lo.WAITING),i.sendNotification(Lo.DISPLAY_TIME,{currentTime:e,duration:i.playback.getDuration()}),i.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),t=i.facade.getMediaElement(),i.playback.setCurrentTime(e),i.playback.getStarted()!==!0&&i.sendNotification(Lo.TIME_CHANGE,e))})},i(U,k),U.prototype.execute=function(e){return this.applicationState.getSeeking()===!0?void this.applicationState.setSeekRequested(!0):(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),this.applicationState.setSeeking(!0),void U.__super__.execute.call(this,e))},i(F,k),F.prototype.execute=function(e){var t=this;return this.applicationState.getIsUserActive()===!0?void setTimeout(this.sendNotification.bind(this,e.getName(),e.getBody()),100):void setTimeout(function(){var i;t.applicationState.setSeeking(!1),t.dispatchEvent(e),t.applicationState.setSeekRequested(!1),t.sendNotification(Fo.SEEKED,e.getBody()),t.applicationState.getPlayState()!==Vo.READY&&("full-screen"===t.applicationState.displayState&&"ipad"===t.applicationState.device&&t.facade.retrieveProxy(Se.NAME).getPaused()!==t.facade.getMediaElement().paused&&(i=t.facade.getMediaElement().paused===!0?Vo.PAUSED:Vo.PLAYING),null!=i&&"undefined"!==i&&t.sendNotification(Lo.CHANGE_PLAY_STATE,i))},1)},i(j,M),j.prototype.execute=function(e){var t;return"function"==typeof this.playback.replay?void this.playback.replay():(t=this.media.getData(),t.metadata=Object.assign({},t.metadata,{config:{autoplay:!0}}),void this.sendNotification(Lo.SET_MEDIA,t))},i(z,M),z.prototype.execute=function(e){this.applicationState.getEnded()||(this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,Lo.ENDED)))},i(Y,k),Y.prototype.execute=function(e){this.applicationState.getEnded()||(this.applicationState.setEnded(!0),Y.__super__.execute.call(this,e),this.config.getLoop()===!0?this.sendNotification(Lo.REPLAY):this.applicationState.getHasPostContent()===!1&&this.sendNotification(Lo.MEDIA_SEQUENCE_ENDED))},i(q,M),q.prototype.execute=function(e){this.sendNotification(Lo.PLAY_REQUEST),this.sendNotification(Lo.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()}),this.sendNotification(Lo.STARTED,e.getBody())},i(W,M),W.prototype.execute=function(e){this.applicationState.setIsUserActive(e.getBody())},i(Z,k),Z.prototype.execute=function(e){this.applicationState.getWaiting()||(this.applicationState.setWaiting(!0),Z.__super__.execute.call(this,e))},i(X,M),X.prototype.execute=function(e){this.playback.setMuted(e.getBody())},i(Q,k),Q.prototype.execute=function(e){null==this.security.getSession()&&(this.security.setSession(r.createUID()),this.sendNotification(Lo.MEDIA_VALIDATED,this.media.getData()),Q.__super__.execute.call(this,e))},i(J,M),J.prototype.execute=function(e){this.playback.initialized=!0},i(K,M),K.prototype.execute=function(e){this.playerCore.registerPlaybackCore(e.getBody())},i($,M),$.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(Lo.CHANGE_CONTENT,{from:this.media.getData(),to:t}),this.media.updateData(t),this.sendNotification(Lo.UPDATE_DATA_BINDINGS),this.sendNotification(Lo.CHANGE_CONTENT,this.media.getData())},i(ee,k),ee.prototype.execute=function(e){this.sendNotification(Lo.DISPLAY_TIME,{currentTime:this.applicationState.getCurrentTime(),duration:this.applicationState.getDuration()}),ee.__super__.execute.call(this,e)},i(te,M),te.prototype.execute=function(e){this.playback.setMuted(!this.playback.getMuted())},i(ie,k),ie.prototype.execute=function(e){this.media.started!==!0&&(this.media.started=!0,ie.__super__.execute.call(this,e),this.sendNotification(Lo.WAITING),this.sendNotification(Lo.MEDIA_SEQUENCE_STARTED))},i(ne,M),ne.prototype.execute=function(e){var t,i,n,o,r;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,r=i.length;r>o;o++)t=i[o],n.addEventListener(t,this.playback.handlers[t])},i(oe,M),oe.prototype.execute=function(e){var t,i,n,o,r;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,r=i.length;r>o;o++)t=i[o],n.removeEventListener(t,this.playback.handlers[t])},i(re,k),re.prototype.execute=function(e){this.applicationState.setVolume(e.getBody()),re.__super__.execute.call(this,e)},i(ae,M),ae.prototype.execute=function(e){this.applicationState.setHasPostContent(e.getBody())},i(se,k),se.prototype.execute=function(e){this.config.getLoop()===!0?(se.__super__.execute.call(this,e),this.sendNotification(Lo.REPLAY)):(this.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.ENDED),this.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),se.__super__.execute.call(this,e))},i(le,M),le.prototype.execute=function(e){var t,i;t=e.getBody(),i=t?Lo.ADD_APPLICATION_STATE:Lo.REMOVE_APPLICATION_STATE,this.sendNotification(i,"locked"),this.applicationState.setLocked(t)},i(de,M),de.prototype.execute=function(e){var t;"function"==typeof(t=this.playback).goLive&&t.goLive()},i(ce,M),ce.prototype.execute=function(e){var t,i=this;t=e.getBody(),null!=t.currentTime&&this.facade.transform(Ho.TIME,t.currentTime).then(function(e){return i.applicationState.setCurrentTime(e)}),null!=t.duration&&this.facade.transform(Ho.TIME,t.duration).then(function(e){return i.applicationState.setDuration(e)})},i(ue,k),ue.prototype.execute=function(e){var t,i,n,o;n=e.getName(),t=e.getBody(),i={startTime:t.startTime,endTime:t.endTime,type:t.type,track:t.track,value:{key:t.value.key,data:t.value.data,info:t.value.info}},o=i.value;try{null==o.info&&("string"==typeof o.data?o.info=o.data:o.data instanceof ArrayBuffer&&(o.info=r.arrayBufferToString(o.data)))}catch(a){this.facade.logger.log("[AMP ERROR]: Could not parse timed metadata")}e.body=i,ue.__super__.execute.call(this,e)},i(pe,puremvc.Mediator),pe.prototype.config=null,pe.prototype.cssPrefix=null,pe.prototype.classList=null,pe.prototype.initializeNotifier=function(e){var t;pe.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,
this.config=t.retrieveProxy(_.NAME),this.classList=this.classList=new _t(this.viewComponent)},i(he,pe),he.prototype.localizationManager=null,he.prototype.initializeNotifier=function(e){var t;he.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,this.localizationManager=t.retrieveProxy(Et.NAME)},i(ge,he),ge.prototype.componentName=null,ge.prototype.componentType=null,ge.prototype.parent=null,ge.prototype.element=null,ge.prototype.classList=null,ge.prototype.state=null,ge.prototype.disabled=!1,ge.prototype.onRegister=function(){this.viewComponent=this.createViewComponent(this.parent,this.element),this.classList=this.viewComponent._classList,bt.bindEvents(this.viewComponent,this)},ge.prototype.createViewComponent=function(e,t){var i;return i=this.getTypeList(),bt.create(i,e,t)},ge.prototype.createMediatorName=function(){var e;return e=this.getTypeList(),e.push("mediator"),e.push(r.createUID()),e.join("-")},ge.prototype.getTypeList=function(){var e;return e=[],null!=this.componentName&&e.push(this.componentName),null!=this.componentType&&(e=e.concat(this.componentType)),e},ge.prototype.create=function(e,t,i,n){return null==t&&(t=this),t===!1&&(t=null),bt.create(e,t,i,n)},ge.prototype.createText=function(e,t,i,n){return null==i&&(i=this),bt.create(e,i,n,t)},ge.prototype.setState=function(e){return e!==this.state?(null!=this.state&&this.classList.remove(this.state),this.state=e,null!=this.state&&this.classList.add(this.state),e):void 0},ge.prototype.getState=function(){return this.state},ge.prototype.setDisabled=function(e){return e!==this.disabled?(this.disabled=e,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),e):void 0},ge.prototype.getDisabled=function(){return this.disabled};var xo={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"};i(fe,ge),fe.prototype.componentType="overlay",fe.prototype.onRegister=function(){fe.__super__.onRegister.call(this),this.registerOverlay()},fe.prototype.onRemove=function(){fe.__super__.onRemove.call(this),this.removeOverlay()},fe.prototype.registerOverlay=function(){this.sendNotification(Lo.ADD_OVERLAY,this.viewComponent)},fe.prototype.removeOverlay=function(){this.sendNotification(Lo.REMOVE_OVERLAY,this.viewComponent)},i(me,fe),me.prototype.componentName="ads",me.prototype._hidden=!0,me.prototype._container=null,me.prototype.onRegister=function(){me.__super__.onRegister.call(this),this.setContainer(this.viewComponent),this.sendNotification(xo.AD_CONTAINER_CREATED,this.viewComponent)},me.prototype.listNotificationInterests=function(){return[xo.BREAK_START,xo.BREAK_END]},me.prototype.getHidden=function(){return this._hidden},me.prototype.setHidden=function(e){var t;return this._hidden=e,null!=(t=this.container)?t.hidden=e:void 0},me.prototype.getContainer=function(){return this._container},me.prototype.setContainer=function(e){var t;return this._container=e,null!=(t=this.container)?t.hidden=this._hidden:void 0},me.prototype.handleNotification=function(e){switch(e.getName()){case xo.BREAK_START:this.setHidden(!1);break;case xo.BREAK_END:this.setHidden(!0)}},i(ye,M),ye.prototype.execute=function(e){var t;t=this.config.getControls().mode!==Do.PERSISTENT?e.getBody():Bo.ACTIVE,this.applicationState.setActiveState(t)},i(Ae,k),Ae.interval=null,Ae.prototype.execute=function(e){var t,i,n,o,a=this;if(n=e.getBody(),n!==this.applicationState.getDisplayState()){if(this.applicationState.setDisplayState(n),this.config.getFullscreen().mode===Mo.EXTERNAL)return void this.sendNotifications(n);t=this.facade.getMediaElement(),o=this.facade.getViewComponent(),i=r.getFullScreenApi(o,t),n===Ro.FULL_SCREEN?(null!=i.event?null!=o.mozRequestFullScreen?document[i.event]=function(e){return document.mozFullScreen?void 0:a.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL)}:o[i.event]=function(e){return null==document[i.element]?a.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL):void 0}:(clearInterval(Ae.interval),Ae.interval=setInterval(function(){t.webkitDisplayingFullscreen!==!0&&(a.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL),clearInterval(Ae.interval))},100)),null!=i.error&&document.addEventListener(i.error,this.facade.logger.error.bind(this.facade.logger)),i.enter()):n===Ro.NORMAL&&(null!=i&&"function"==typeof i.exit&&i.exit(),t[i.event]=null,clearInterval(Ae.interval)),this.sendNotifications(n)}},Ae.prototype.sendNotifications=function(e){setTimeout(this.sendNotification.bind(this,Lo.FULL_SCREEN_CHANGE,e),100),this.dispatchEvent("fullscreenchange",e===Ro.FULL_SCREEN)},i(ve,k),ve.prototype.execute=function(e){var t;this.applicationState.getLocked()!==!0&&(t=e.getBody(),t&&this.playback.initialized!==!0&&this.sendNotification(Lo.INITIALIZED),this.playback.initialized===!0&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(Lo.START),this.playback.play(),ve.__super__.execute.call(this,e)))},i(_e,M),_e.prototype.execute=function(e){var t;t=this.applicationState.getActiveState()===Bo.ACTIVE?Bo.INACTIVE:Bo.ACTIVE,this.sendNotification(Lo.CHANGE_ACTIVE_STATE,t)};var ko={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackClose",MEDIA_SEQUENCE_ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",BUFFERING_CHANGE:"mediaPlayerBufferingChanged",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",FEED_UPDATED:"mediaPlayerDataFeedUpdated",FEED_LOADED:"mediaPlayerFeedLoaded",TIMED_METADATA:"mediaPlayerSendCuePoint",MEDIA_PLAYER_ID3_UPDATED:"mediaPlayerID3Updated"};i(Ee,puremvc.Proxy),Ee.NAME="TracksProxy",Ee.prototype.clear=function(){this.data.audioTracks.clear(),this.data.videoTracks.clear(),this.data.textTracks.clear()},Ee.prototype.getAudioTracks=function(){return this.data.audioTracks},Ee.prototype.getVideoTracks=function(){return this.data.videoTracks},Ee.prototype.getTextTracks=function(){return this.data.textTracks},i(be,E),be.prototype.moduleName="amp",be.prototype.playerType=null,be.prototype.hidden=!1,be.prototype.l10n=null,be.prototype.appState=null,be.prototype.mediaProxy=null,be.prototype.bindings=null,be.prototype.configuration=null,be.prototype.params=null,be.prototype.security=null,be.prototype.createModel=function(){this.appState=new ot,this.registerProxy(this.appState),this.bindings=new nt,this.registerProxy(this.bindings),this.security=new it,this.registerProxy(this.security),this.mediaProxy=new tt(this.config),this.registerProxy(this.mediaProxy),this.params=new Je(this.config.params),this.registerProxy(this.params),this.configuration=new qe(this.config),this.registerProxy(this.configuration)},be.prototype.resourcesLoaded=function(){be.__super__.resourcesLoaded.call(this),Object.defineProperties(this,{src:{get:this.getSrc,set:this.setSrc,enumerable:!0,configurable:!1},media:{get:this.getMedia,set:this.setMedia,enumerable:!0,configurable:!1},currentTime:{get:this.getCurrentTime,set:this.setCurrentTime,enumerable:!0,configurable:!1},autoplay:{get:this.getAutoplay,set:this.setAutoplay,enumerable:!0,configurable:!1},duration:{get:this.getDuration,enumerable:!0,configurable:!1},playState:{get:this.getPlayState,enumerable:!0,configurable:!1},seeking:{get:this.getSeeking,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},ended:{get:this.getEnded,enumerable:!0,configurable:!1},volume:{get:this.getVolume,set:this.setVolume,enumerable:!0,configurable:!1},muted:{get:this.getMuted,set:this.setMuted,enumerable:!0,configurable:!1},mediaElement:{get:this.getMediaElement,enumerable:!0,configurable:!1},textTracks:{get:function(){return this.getMediaElement().textTracks},enumerable:!0,configurable:!1},audioTracks:{get:this.getAudioTracks,enumerable:!0,configurable:!1},container:{get:this.getContainer,enumerable:!0,configurable:!1},adContainer:{get:this.getAdContainer,set:this.setAdContainer,enumerable:!0,configurable:!1},loop:{get:this.getLoop,set:this.setLoop,enumerable:!0,configurable:!1},displayState:{get:this.getDisplayState,set:this.setDisplayState,enumerable:!0,configurable:!1},playbackRate:{get:this.getPlaybackRate,set:this.setPlaybackRate,enumerable:!0,configurable:!1},language:{get:this.getLanguage,set:this.setLanguage,enumerable:!0,configurable:!1},localization:{get:function(){return this.retrieveProxy(Et.NAME)},enumerable:!0,configurable:!1},version:{get:this.getVersion,enumerable:!0,configurable:!1},error:{get:this.getError,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},waiting:{get:this.getWaiting,set:this.setWaiting,enumerable:!0,configurable:!1},busy:{get:this.getBusy,set:this.setBusy,enumerable:!0,configurable:!1},cues:{get:this.getCues,set:this.setCues,enumerable:!0,configurable:!1},quality:{get:this.getQuality,set:this.setQuality,enumerable:!0,configurable:!1},qualityMode:{get:this.getQualityMode,set:this.setQualityMode,enumerable:!0,configurable:!1},qualityLevels:{get:this.getQualityLevels,enumerable:!0,configurable:!1},debug:{get:this.getDebug,enumerable:!0,configurable:!1},settings:{get:this.getSettings,enumerable:!0,configurable:!1},mode:{get:this.getMode,enumerable:!0,configurable:!1},buffering:{get:this.getBuffering,enumerable:!0,configurable:!1},width:{get:this.getWidth,enumerable:!0,configurable:!1},height:{get:this.getHeight,enumerable:!0,configurable:!1},videoWidth:{get:this.getVideoWidth,enumerable:!0,configurable:!1},videoHeight:{get:this.getVideoHeight,enumerable:!0,configurable:!1},defaultMediaTransform:{get:this.mediaProxy.transform,enumerable:!0,configurable:!1},absoluteCurrentTime:{get:this.getAbsoluteCurrentTime,set:this.setAbsoluteCurrentTime,enumerable:!0,configurable:!1},absoluteDuration:{get:this.getAbsoluteDuration,enumerable:!0,configurable:!1},playbackTarget:{get:this.getPlaybackTarget,set:this.setPlaybackTarget,enumerable:!0,configurable:!1},autoplayPolicy:{get:function(){return this.retrieveProxy(qe.NAME).getAutoplayPolicy()},enumerable:!0,configurable:!1},autoplayThreshold:{get:function(){return AutoplayThreshold.threshold},enumerable:!0,configurable:!1}})},be.prototype.createView=function(){this._settings=new We,this.registerMediator(this._settings)},be.prototype.createController=function(){be.__super__.createController.call(this),this.registerCommand(Lo.CHANGE_SETTINGS,Ze),this.registerCommand(Lo.SETTINGS_CHANGE,k),this.registerCommand(Lo.CUES_CHANGE,k),this.registerCommand(Lo.DESTROY,k)},be.prototype.setViewComponent=function(e){return e.amp=this,be.__super__.setViewComponent.call(this,e)},be.prototype.getPlayerType=function(){return this.playerType},be.prototype.getVersion=function(){return xt.getVersion()},be.prototype.getDebug=function(){return this.config.debug},be.prototype.getMode=function(){return this.config.mode},be.prototype.createPlugins=function(){this.sendNotification(Uo.REGISTER_PLUGINS,this.config)},be.prototype.createMediaElement=function(){return null},be.prototype.createFramework=function(){be.__super__.createFramework.call(this),this.setMediaElement(this.createMediaElement()),this.createPlugins()},be.prototype.getLanguage=function(){return this.retrieveProxy(Et.NAME).getLanguage()},be.prototype.setLanguage=function(e){return this.retrieveProxy(Et.NAME).setLanguage(e),e},be.prototype.getLocalizedString=function(e,t){try{return this.retrieveProxy(Et.NAME).getString(e,t)}catch(i){return e}},be.prototype.getMediaElement=function(){return this.appState.getMediaElement()},be.prototype.setMediaElement=function(e){return this.appState.setMediaElement(e),null==e.once&&(e.once=function(e,t){var i,n;n=r.createUID(),i=function(e,t,i,n){this.removeEventListener(t,this[e]),delete this[e],i(n)},this[n]=i.bind(this,n,e,t),this.addEventListener(e,this[n])},e.once=e.once.bind(e)),e.amp=this,e},be.prototype.getContainer=function(){return this.getViewComponent()},be.prototype.getAdContainer=function(){},be.prototype.setAdContainer=function(e){},be.prototype.getAudioTracks=function(){},be.prototype.evaluateBindings=function(e,t){return Ue.evaluateBindings(e,r.override(this.bindings.data,t))},be.prototype.canPlayType=function(e){},be.prototype.load=function(){},be.prototype.play=function(){},be.prototype.replay=function(){},be.prototype.pause=function(){},be.prototype.end=function(){},be.prototype.setParams=function(e){},be.prototype.getParams=function(){},be.prototype.setAutoplay=function(e){},be.prototype.getAutoplay=function(){},be.prototype.setLoop=function(e){},be.prototype.getLoop=function(){},be.prototype.setMuted=function(e){},be.prototype.getMuted=function(){},be.prototype.mute=function(){return this.setMuted(!0)},be.prototype.unmute=function(){return this.setMuted(!1)},be.prototype.setMedia=function(e){},be.prototype.getMedia=function(){},be.prototype.setCurrentTime=function(e){},be.prototype.getCurrentTime=function(){},be.prototype.setAbsoluteCurrentTime=function(e){return this.setCurrentTime(e)},be.prototype.getAbsoluteCurrentTime=function(){return this.getCurrentTime()},be.prototype.getCurrentTimeUTC=function(){},be.prototype.getDuration=function(){},be.prototype.getAbsoluteDuration=function(){return this.getDuration()},be.prototype.setSrc=function(e){},be.prototype.getSrc=function(){},be.prototype.setSource=function(e){},be.prototype.getSource=function(){},be.prototype.setVolume=function(e){},be.prototype.getVolume=function(){},be.prototype.getSeeking=function(){},be.prototype.getPaused=function(){},be.prototype.getEnded=function(){},be.prototype.getBuffering=function(){return this.appState.getBuffering()},be.prototype.setDisplayState=function(e){},be.prototype.getDisplayState=function(){},be.prototype.getWaiting=function(){return this.appState.getWaiting()},be.prototype.setWaiting=function(e){return this.appState.setWaiting(e)},be.prototype.getBusy=function(){return this.appState.getBusy()},be.prototype.setBusy=function(e){return this.appState.setBusy(e)},be.prototype.getError=function(){},be.prototype.enterFullScreen=function(){},be.prototype.exitFullScreen=function(){},be.prototype.setHidden=function(e){var t;e!==this.appState.getHidden()&&(this.appState.setHidden(e),t=this.viewComponent.style,e===!0?(this.hiddenData={width:t.width,height:t.height,paused:this.getPaused()},t.width=t.height="0px",this.hiddenData.paused===!1&&this.pause()):(t.width=this.hiddenData.width,t.height=this.hiddenData.height,this.hiddenData.paused===!1&&this.play(),this.hiddenData=null))},be.prototype.getHidden=function(){return this.appState.getHidden()},be.prototype.getWidth=function(){var e;return null!=(e=this.getViewComponent())?e.offsetWidth:void 0},be.prototype.getHeight=function(){var e;return null!=(e=this.getViewComponent())?e.offsetWidth:void 0},be.prototype.getVideoWidth=function(){var e;return null!=(e=this.getMediaElement())?e.videoWidth:void 0},be.prototype.getVideoHeight=function(){var e;return null!=(e=this.getMediaElement())?e.videoHeight:void 0},be.prototype.recordContentChange=function(e){},be.prototype.setPlaybackRate=function(){},be.prototype.getPlaybackRate=function(){},be.prototype.setCues=function(e){return this.mediaProxy.setCues(e),e},be.prototype.getCues=function(){return this.mediaProxy.getCues()},be.prototype.setQuality=function(e){},be.prototype.getQuality=function(){},be.prototype.getQualityLevels=function(){},be.prototype.getQualityMode=function(){},be.prototype.setQualityMode=function(e){},be.prototype.getPlaystate=function(){},be.prototype.getPlaybackTarget=function(){return this.appState.getPlaybackTarget()},be.prototype.setPlaybackTarget=function(e){this.appState.setPlaybackTarget(e)},be.prototype.getMediaTransforms=function(){return this.mediaProxy.getTransforms()},be.prototype.authorize=function(e){this.security.authorize(e)},be.prototype.goLive=function(){},be.prototype.appendChild=function(e){this.mediator.addLayer(e)},be.prototype.removeChild=function(e){this.mediator.removeLayer(e)},be.prototype.getSettings=function(){var e;return(null!=(e=this._settings)?e.getSettings():void 0)||{change:function(){}}},be.prototype.destroy=function(){this.sendNotification(Lo.DESTROY),be.__super__.destroy.call(this)},i(Ce,be),Ce.prototype.playerType="html",Ce.prototype.playerCore=null,Ce.prototype.tracks=null,Ce.prototype.mediator=null,Ce.prototype.createMediaElement=function(){var e,t,i;return e=("function"==typeof(i=this.getViewComponent()).querySelector?i.querySelector("video"):void 0)||"video",this.mediator=new Pe("html5",e),this.sendNotification(Lo.PLAYBACK_CORE_CHANGE,this.mediator),t=this.mediator.getViewComponent(),null==t.dataset&&(t.dataset={}),t},Ce.prototype.createModel=function(){var e;Ce.__super__.createModel.call(this),this.registerProxy(new Et(this.config)),e=new Oe,this.registerProxy(e),this.playerCore=new et(e,this.config.getPlaybackOrder),this.registerProxy(this.playerCore),this.tracks=new Ee,this.registerProxy(this.tracks),this.appState.setRenderMode(Go.HTML),this.bindings.initialize(),this.fps=r.override(Qe,this.config.fps)},Ce.prototype.createView=function(){Ce.__super__.createView.call(this),this.mediator=new xe("html5",this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new vt),this.registerMediator(new De),this.registerMediator(new At),this.adMediator=new me,this.registerMediator(this.adMediator)},Ce.prototype.createController=function(){Ce.__super__.createController.call(this),this.registerCommand(Uo.PLUGINS_INITIALIZED,P),this.registerCommand(Lo.PLAY,ve),this.registerCommand(Lo.PLAYING,L),this.registerCommand(Lo.PAUSE,R),this.registerCommand(Lo.CHANGE_PLAY_STATE,dt),this.registerCommand(Lo.TOGGLE_FULL_SCREEN,x),this.registerCommand(Lo.CHANGE_DISPLAY_STATE,Ae),this.registerCommand(Lo.TOGGLE_ACTIVE,_e),this.registerCommand(Lo.CHANGE_ACTIVE_STATE,ye),this.registerCommand(Lo.SET_MEDIA,ut),this.registerCommand(Lo.CHANGE_MEDIA,ct),this.registerCommand(Lo.MEDIA_VALIDATED,B),this.registerCommand(Lo.MEDIA_CHANGE,pt),this.registerCommand(Lo.UPDATE_DATA_BINDINGS,mt),this.registerCommand(Lo.START,q),this.registerCommand(Lo.TIME_CHANGE,ce),this.registerCommand(Lo.SEEK,H),this.registerCommand(Lo.SEEKING,U),this.registerCommand(Lo.SEEKED,F),this.registerCommand(Lo.CHANGE_VOLUME,G),this.registerCommand(Lo.CHANGE_MUTED,X),this.registerCommand(Lo.CHANGE_AUTOPLAY,O),this.registerCommand(Lo.CHANGE_LOOP,V),this.registerCommand(Lo.END,z),this.registerCommand(Lo.ENDED,Y),this.registerCommand(Lo.REPLAY,j),this.registerCommand(Lo.ERROR,gt),this.registerCommand(Lo.READY,ft),this.registerCommand(Lo.WAITING,Z),this.registerCommand(Lo.CHANGE_DURATION,ht),this.registerCommand(Lo.CHANGE_PARAMS,yt),this.registerCommand(Lo.IS_USER_ACTIVE,W),this.registerCommand(Oo.AUTHORIZED,Q),this.registerCommand(Lo.INITIALIZED,J),this.registerCommand(Lo.REGISTER_PLAYBACK_CORE,K),this.registerCommand(Fo.TOGGLE_PLAY_PAUSE,D),this.registerCommand(Fo.SEEK,H),this.registerCommand(Lo.PLAYBACK_TARGET_CHANGE,Le),this.registerCommand(Lo.RECORD_CONTENT_CHANGE,$),this.registerCommand(Lo.TIME_UPDATE,ee),this.registerCommand(Lo.TOGGLE_MUTED,te),this.registerCommand(Lo.VOLUME_CHANGE,re),this.registerCommand(Lo.PLAY_REQUEST,ie),this.registerCommand(Lo.HAS_POST_CONTENT,ae),this.registerCommand(Lo.LOCK,le),this.registerCommand(Fo.GO_LIVE,de),this.registerCommand(Lo.BUFFERING_CHANGE,we),this.registerCommand(Lo.TIMED_METADATA,ue),this.registerCommand(Lo.PLAY_STATE_CHANGE,k),this.registerCommand(Lo.PROGRESS,k),this.registerCommand(Lo.CAN_PLAY,k),this.registerCommand(Lo.CAN_PLAY_THROUGH,k),this.registerCommand(Lo.LOAD_START,k),this.registerCommand(Lo.STARTED,k),this.registerCommand(Lo.LOADED_METADATA,k),this.registerCommand(Lo.DURATION_CHANGE,k),this.registerCommand(Lo.MEDIUM_CHANGE,k),this.registerCommand(Lo.TEMPORAL_TYPE_CHANGE,k),this.registerCommand(Lo.LANGUAGE_CHANGE,k),this.registerCommand(Lo.PLAYBACK_TARGET_AVAILABILITY_CHANGE,k),this.registerCommand(Oo.AUTHORIZE,k),this.registerCommand(Oo.AUTHORIZATION_FAILED,k),this.registerCommand(Oo.AUTHENTICATION_FAILED,k),this.registerCommand(Oo.AUTHORIZATION_EXPIRED,k),this.registerCommand(Lo.FAIL_OVER_ATTEMPT,k),this.registerCommand(Lo.IS_LIVE,k),this.registerCommand(Lo.PAUSED,k),this.registerCommand(Lo.STALLED,k),this.registerCommand(Lo.QUALITY_CHANGE,k),this.registerCommand(Lo.QUALITY_SWITCHED,k),this.registerCommand(Lo.QUALITY_CHANGING,k),this.registerCommand(Lo.QUALITY_LEVELS_LOADED,k),this.registerCommand(Lo.MUTE_CHANGE,k),this.registerCommand(Lo.RESUME,k),this.registerCommand(Lo.FRAGMENT_LOAD_START,k),this.registerCommand(Lo.FRAGMENT_LOADED,k),this.registerCommand(Lo.AUTOPLAY_BLOCKED,k),this.registerCommand(Lo.AUDIO_TRACK_SWITCH,k),this.registerCommand(Lo.MEDIA_SEQUENCE_STARTED,k),this.registerCommand(Lo.MEDIA_SEQUENCE_ENDED,se),this.registerCommand(Lo.ENABLE_VIDEO_EVENTS,ne),this.registerCommand(Lo.DISABLE_VIDEO_EVENTS,oe)},Ce.prototype.setMediaElement=function(e){var t;return t=this.getMediaElement(),null!=t&&t.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged),e.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged),Ce.__super__.setMediaElement.call(this,e),e},Ce.prototype.presentationModeChanged=function(e){"inline"===e.target.webkitPresentationMode&&(e.target.controls=!1)},Ce.prototype.recordContentChange=function(e){this.sendNotification(Lo.RECORD_CONTENT_CHANGE,e)},Ce.prototype.canPlayType=function(e){return this.retrieveProxy(Se.NAME).canPlayType(e)},Ce.prototype.getAudioTracks=function(){return this.retrieveProxy(Ee.NAME).getAudioTracks()},Ce.prototype.load=function(){this.sendNotification(Lo.LOAD)},Ce.prototype.play=function(){this.sendNotification(Lo.PLAY,!0)},Ce.prototype.replay=function(){this.sendNotification(Lo.REPLAY)},Ce.prototype.pause=function(){this.sendNotification(Lo.PAUSE)},Ce.prototype.end=function(){this.sendNotification(Lo.END)},Ce.prototype.setParams=function(e){return this.sendNotification(Lo.CHANGE_PARAMS,e),e},Ce.prototype.getParams=function(){return this.params.getData()},Ce.prototype.setAutoplay=function(e){return this.sendNotification(Lo.CHANGE_AUTOPLAY,e),e},Ce.prototype.getAutoplay=function(){return this.configuration.getAutoplay()},Ce.prototype.setLoop=function(e){return this.sendNotification(Lo.CHANGE_LOOP,e),e},Ce.prototype.getLoop=function(){return this.configuration.getLoop()},Ce.prototype.setMuted=function(e){return this.sendNotification(Lo.CHANGE_MUTED,e),e},Ce.prototype.getMuted=function(){return this.retrieveProxy(Se.NAME).getMuted()},Ce.prototype.setMedia=function(e){return this.sendNotification(Lo.SET_MEDIA,e),e},Ce.prototype.getMedia=function(){return this.mediaProxy.getData()},Ce.prototype.setCurrentTime=function(e){return this.sendNotification(Lo.SEEK,e),e},Ce.prototype.getCurrentTime=function(){return this.appState.getCurrentTime()},Ce.prototype.setAbsoluteCurrentTime=function(e){return this.sendNotification(Lo.SEEK,e),e},Ce.prototype.getAbsoluteCurrentTime=function(){return this.retrieveProxy(Se.NAME).getCurrentTime()},Ce.prototype.getDuration=function(){return this.appState.getDuration()},Ce.prototype.getAbsoluteDuration=function(){return this.mediaProxy.getDuration()},Ce.prototype.setSrc=function(e){return this.sendNotification(Lo.SET_MEDIA,{src:e}),e},Ce.prototype.getSrc=function(){return this.mediaProxy.getSrc()},Ce.prototype.setSource=function(e){return this.sendNotification(Lo.SET_MEDIA,{source:e}),e},Ce.prototype.getSource=function(){return this.mediaProxy.getSource()},Ce.prototype.setVolume=function(e){return this.sendNotification(Lo.CHANGE_VOLUME,e),e},Ce.prototype.getVolume=function(){return this.retrieveProxy(Se.NAME).getVolume()},Ce.prototype.getSeeking=function(){return this.retrieveProxy(Se.NAME).getSeeking()},Ce.prototype.getPaused=function(){return this.retrieveProxy(Se.NAME).getPaused()},Ce.prototype.getEnded=function(){return this.appState.getEnded()},Ce.prototype.getError=function(){return this.getMediaElement().error},Ce.prototype.setDisplayState=function(e){this.sendNotification(Lo.CHANGE_DISPLAY_STATE,e)},Ce.prototype.getDisplayState=function(e){return this.appState.getDisplayState()},Ce.prototype.enterFullScreen=function(){this.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.FULL_SCREEN)},Ce.prototype.exitFullScreen=function(){this.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL)},Ce.prototype.setPlaybackRate=function(e){var t;(null!=(t=this.ads)?t.inProgress:void 0)!==!0&&e!==this.getMediaElement().playbackRate&&(this.appState.setPlaybackRate(e),this.getMediaElement().playbackRate=e,this.dispatchEvent(new s(Events.PLAYBACK_RATE_CHANGE,e)))},Ce.prototype.getPlaybackRate=function(){return this.getMediaElement().playbackRate},Ce.prototype.getQualityLevels=function(){return this.retrieveProxy(Se.NAME).getQualityLevels()},Ce.prototype.setQuality=function(e){return this.retrieveProxy(Se.NAME).setQuality(e)},Ce.prototype.getQuality=function(){return this.retrieveProxy(Se.NAME).getQuality()},Ce.prototype.getQualityMode=function(){return this.retrieveProxy(Se.NAME).getQualityMode()},Ce.prototype.setQualityMode=function(e){return this.retrieveProxy(Se.NAME).setQualityMode(e)},Ce.prototype.getPlayState=function(){return this.appState.getPlayState()},Ce.prototype.goLive=function(){return this.retrieveProxy(Se.NAME).goLive()},Ce.prototype.getAdContainer=function(){return this.adMediator.getContainer()},Ce.prototype.setAdContainer=function(e){this.adMediator.setContainer(e)},Ce.prototype.destroy=function(){var e,t;null!=(e=this.retrieveProxy(et.NAME))&&null!=(t=e.activePlaybackCore)&&"function"==typeof t.destroy&&t.destroy(),Ce.__super__.destroy.call(this)},i(Se,puremvc.Proxy),Se.NAME="PlaybackProxy",Se.prototype.data=null,Se.prototype.initialized=!1,Se.prototype.enabled=null,Se.prototype.handlers=null,Se.prototype.resume=null,Se.prototype.playWhenLoaded=!1,Se.prototype.metadataloaded=!1,Se.prototype.activeCuesIndex=0,Se.prototype.id3CueType=null,Se.prototype.getEnabled=function(){return this.enabled},Se.prototype.setEnabled=function(e){return e!==this.enabled?(this.enabled=e,this.enabled===!0?this.load():this.applyHandlers(!1),e):void 0},Se.prototype.applyHandlers=function(e){var t,i,n,o,r;null==e&&(e=!0),o=this.getMediaElement(),t=e?"addEventListener":"removeEventListener",r=this.handlers;for(n in r)i=r[n],o[t](n,i)},Se.prototype.resumestart=function(e){var t,i=this;t=this.getMediaElement(),this.handlers.durationchange(e),this.data.currentTime>0&&this.data.ended!==!0?setTimeout(function(){i.seek(i.data.currentTime).then(i.resumecomplete.bind(i))},50):this.resumecomplete()},Se.prototype.resumecomplete=function(){this.data.loading=!1,this.applyHandlers(!0),this.playWhenLoaded===!0&&setTimeout(this.play.bind(this),1)},Se.prototype.onaddtrack=function(e){var t,i=this;t=e.track,"metadata"===t.kind&&(t.mode="hidden",t.addEventListener("cuechange",function(e){var t,n,o,r,a;for(a=e.target.activeCues,o=0,r=a.length;r>o;o++)t=a[o],n!==t&&(i.sendNotification(Lo.TIMED_METADATA,t),n=t)}))},Se.prototype.ontimeupdate=function(e){var t,i;t=e.target.currentTime,(null!=(i=this.facade.ads)?i.inProgress:void 0)!==!0&&(this.data.currentTime=t,this.sendNotification(Lo.TIME_CHANGE,{currentTime:t}))},Se.prototype.ondurationchange=function(e){var t;t=e.target.duration,t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,/Android [4-7]/.test(navigator.userAgent)&&-1!==this.getMediaElement().src.indexOf(".m3u8")&&t===1/0||this.sendNotification(Lo.CHANGE_DURATION,t))},Se.prototype.onplay=function(e){this.data.paused=!1},Se.prototype.onplaying=function(e){this.data.paused=!1,this.data.seeking=!1,this.data.waiting=!1,this.sendNotification(Lo.PLAYING)},Se.prototype.onpause=function(e){this.getMediaElement().ended!==!0&&this.facade.playState!==Vo.READY&&(this.data.waiting!==!0||"hls"!==this.playbackCoreName)&&(this.data.paused=!0,e.target.readyState>0&&(this.sendNotification(Lo.PAUSED),this.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PAUSED)))},Se.prototype.onloadeddata=function(e){this.sendNotification(Lo.LOADED_DATA)},Se.prototype.onwaiting=function(e){var t;this.data.waiting=!0,this.sendNotification(Lo.WAITING),t=this.getMediaElement(),t.seeking===!1&&2===t.readyState&&2===t.networkState&&(t.once("playing",this.sendNotification.bind(this,Lo.BUFFERING_CHANGE,!1)),this.sendNotification(Lo.BUFFERING_CHANGE,!0))},Se.prototype.onstalled=function(e){this.sendNotification(Lo.STALLED)},Se.prototype.onseeking=function(e){var t;this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate),t=e.target.currentTime,this.sendNotification(Lo.TIME_CHANGE,{currentTime:t}),this.data.seeking=!0,this.sendNotification(Lo.SEEKING)},Se.prototype.onseeked=function(e){this.data.seeking=!1,this.sendNotification(Lo.SEEKED,e.target.currentTime),this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)},Se.prototype.onended=function(e){this.data.ended=!0,this.sendNotification(Lo.ENDED)},Se.prototype.onprogress=function(e){var t,i;try{i=this.getMediaElement(),t=i.buffered,this.sendNotification(Lo.PROGRESS,t.end(t.length-1)/i.duration)}catch(n){}},Se.prototype.onerror=function(e){this.sendNotification(Lo.ERROR,this.getMediaElement().error)},Se.prototype.onloadstart=function(e){this.sendNotification(Lo.LOAD_START)},Se.prototype.oncanplay=function(e){this.sendNotification(Lo.CAN_PLAY)},Se.prototype.oncanplaythrough=function(e){this.createTracks(),this.sendNotification(Lo.CAN_PLAY_THROUGH),this.sendNotification(Lo.PROGRESS,this.getDuration())},Se.prototype.onloadedmetadata=function(e){this.metadataloaded=!0,this.sendNotification(Lo.ENABLE_FULL_SCREEN),this.sendNotification(Lo.LOADED_METADATA)},Se.prototype.applyTextTrackHandlers=function(e){var t,i;t=e===!0?"addEventListener":"removeEventListener",null!=(i=this.getMediaElement().textTracks)&&i[t]("addtrack",this.textTrackHandlers.addtrack)},Se.prototype.createTracks=function(){var e,t,i,n,o,a,s,l,d;if(e=this.getMediaElement().audioTracks,s=this.facade.retrieveProxy(Ee.NAME).getAudioTracks(),t=function(e,t){return this.facade.tracks.getAudioTracks().forEach(function(e){return e.data.enabled=!1}),t===!0?this.facade.tracks.getAudioTracks()[e.id].data.enabled=!0:void 0;
},null!=e)for(i=e.length||0,n=l=0,d=e.length;d>l;n=++l)o=e[n],r.fieldIsUnique(s,"id",o.id)!==!1&&(a=new b(o),a.changeEnabled=t.bind(this,a),s.add(a,n+1===i))},Se.prototype.reset=function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1,this.applyTextTrackHandlers(!1)},Se.prototype.getStarted=function(){return this.data.started},Se.prototype.getMediaElement=function(){return this.facade.getMediaElement()},Se.prototype.canPlayMedium=function(e){return"video"===e},Se.prototype.canPlayTemporalType=function(e){return"dvr"!==e},Se.prototype.canPlayType=function(e){var t;return t=document.createElement("video").canPlayType(e)||"",(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&e===r.mimeTypes.m3u8&&(t="maybe"),"probably"===t&&/video\/f4m|x-flv/.test(e)&&/UCBrowser/.test(navigator.userAgent)&&(t=""),t},Se.prototype.getPaused=function(){return this.data.paused},Se.prototype.getSeeking=function(){return this.data.seeking},Se.prototype.getCurrentTime=function(){return this.data.currentTime},Se.prototype.setCurrentTime=function(e){return e!==this.data.currentTime?(this.data.currentTime=e,this.getStarted()&&this.seek(e),e):void 0},Se.prototype.seek=function(e){var t=this;return null==e&&(e=this.data.currentTime),new Promise(function(i,n){var o,r,a,s;try{s=t.getMediaElement(),r=function(){setTimeout(i,10,e)},s.once("seeked",r),s.currentTime=e,a=navigator.userAgent,/Android.*Chrome/.test(a)&&(o=setInterval(function(){Math.round(s.currentTime)===Math.round(e)&&(clearInterval(o),s.dispatchEvent(new CustomEvent("seeked")))},10))}catch(l){n(l)}})},Se.prototype.goLive=function(){var e,t;e=this.getMediaElement(),t=e.duration===1/0?e.seekable.end(0):e.duration,e.currentTime=t},Se.prototype.getVolume=function(){var e;return e=this.getMediaElement(),e.muted===!0?0:e.volume},Se.prototype.setVolume=function(e){return this.getMuted()&&e>0?this.setMuted(!1,!1):this.getMuted()||0!==e||this.setMuted(!0,!1),this.sendNotification(Lo.VOLUME_CHANGE,this.getMediaElement().volume=e),e},Se.prototype.getMuted=function(){return this.data.muted},Se.prototype.setMuted=function(e,t){var i;return null==t&&(t=!0),this.data.muted!==e?(this.data.muted=e,this.data.muted===!0?(this.data.volume=this.getVolume(),i=0):i=this.data.volume,this.getMediaElement().muted=e,t===!0&&(this.sendNotification(Lo.CHANGE_VOLUME,i),this.sendNotification(Lo.VOLUME_CHANGE,i)),this.sendNotification(Lo.MUTE_CHANGE,this.data.muted),e):void 0},Se.prototype.getDuration=function(){return this.data.duration},Se.prototype.play=function(){var e,t=this;if(this.data.started!==!0){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,this.metadataloaded===!1)return}else if(this.data.loading===!0)return void(this.playWhenLoaded=!0);this.getPaused()&&this.sendNotification(Lo.RESUME),e=this.getMediaElement().play(),null!=(null!=e?e["catch"]:void 0)&&e["catch"](function(e){return AutoplayThreshold.value(!0).then(function(e){return t.sendNotification(Lo.AUTOPLAY_BLOCKED,{threshold:e,policy:t.facade.autoplayPolicy})})})},Se.prototype.pause=function(){this.data.paused=!0,this.getMediaElement().pause()},Se.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()},Se.prototype.load=function(){var e;this.sendNotification(Lo.WAITING),this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1,e=this.getMediaElement(),e.once(this.resume.event,this.resume.listener),e.addEventListener("loadedmetadata",this.handlers.loadedmetadata),e.addEventListener("durationchange",this.handlers.durationchange),e.addEventListener("canplaythrough",this.handlers.canplaythrough),e.addEventListener("webkitneedkey",this.onneedkey),e.addEventListener("error",this.handlers.error),this.applyTextTrackHandlers(!0),this.applySrc()},Se.prototype.applySrc=function(){var e,t,i,n;i=this.getSrc(),(null==i||""===i)&&this.sendNotification(Lo.ERROR,"The value of src is not supported: "+value),e=this.getMediaElement(),e.src=i,t=e.muted,t===!0&&(this.data.muted=!0),r.isIPad()&&(null!=(n=r.getIOSversion())?n[0]:void 0)<8?setTimeout(e.load.bind(e),100):e.load()},Se.prototype.setQuality=function(e){},Se.prototype.getQuality=function(){},Se.prototype.getQualityLevels=function(){return[]},Se.prototype.getQualityMode=function(){},Se.prototype.setQualityMode=function(e){},Se.prototype.destroy=function(){var e,t,i,n,o;e=this.getMediaElement(),n=this.handlers;for(t in n)i=n[t],e.removeEventListener(t,i);e.removeEventListener(this.resume.event,this.resume.listener),e.removeEventListener("webkitneedkey",this.onneedkey),null!=(o=e.textTracks)&&o.removeEventListener("addtrack",this.textTrackHandlers.addtrack)},Se.prototype.onneedkey=function(e){var t,i,n,o,a,s,l,d,c,u=this;if(d=e.target,a=r.getKeySystem(),s=this.facade.mediaProxy.getKeys()[a],n=this.facade.fps,i=null!=(null!=(c=this.facade.config.fps)?c.allowKeyErrorRetries:void 0)&&this.facade.config.fps.allowKeyErrorRetries===!1,null!=s&&"com.apple.fps.1_0"===a){if(this.keyErrored&&i)return void this.getMediaElement().removeEventListener("webkitneedkey",this.onneedkey);o=e.initData,t=n.extractContentId(o,s),l=n.extractServerUrl(o,s),n.requestCertificate(s).then(function(e){return n.concatInitDataIdAndCertificate(o,t,e)}).then(function(e){var i;if(!WebKitMediaKeys.isTypeSupported(a,"video/mp4"))throw"Key System not supported";if(null==d.webkitKeys&&d.webkitSetMediaKeys(new WebKitMediaKeys(a)),null==d.webkitKeys)throw"Could not create MediaKeys";if(i=d.webkitKeys.createSession("video/mp4",e),null==i)throw"Could not create key session";i.addEventListener("webkitkeymessage",function(e){n.requestLicense(e.message,t,l,s).then(function(e){i.update(e)})["catch"](function(e){i.close(),u.keyErrored=!0,u.facade.logger.error("[AMP DRM] A key request error was encountered.",e)})}),i.addEventListener("webkitkeyadded",function(e){u.facade.logger.log("[AMP DRM] Decryption key was added to session.")}),i.addEventListener("webkitkeyerror",function(e){u.sendNotification(Lo.ERROR,{message:"A decryption key error was encountered for key system "+a,detail:e}),i.close(),u.keyErrored=!0,u.facade.logger.log("[AMP DRM] A decryption key error was encountered.",e)})})["catch"](function(e){u.facade.logger.error(e)})}},i(Ne,puremvc.SimpleCommand),Ne.prototype.execute=function(e){setTimeout(this.facade.pluginsinitialized.bind(this.facade),0)},i(Ie,M),Ie.prototype.execute=function(e){this.player.started=!0,this.sendNotification(Lo.STARTED,e.getBody()),this.sendNotification(Lo.PLAY,e.getBody())},i(we,k),we.prototype.execute=function(e){var t;t=e.getBody(),this.applicationState.getBuffering()!==t&&(this.applicationState.setBuffering(t),we.__super__.execute.call(this,e))},i(Te,puremvc.Mediator),Te.prototype.player=null,Te.prototype.config=null,Te.prototype.proxy=null,Te.NAME="LocalizationWrapper",Te.prototype.getString=function(e,t){return this.proxy.getString(e,t)},Te.prototype.listNotificationInterests=function(){return[ko.CREATE_FLASH_VARS,ko.CREATE_XML]},Te.prototype.handleNotification=function(e){var t,i,n,o,r,a,s,l,c,u,p,h,g,f,m;switch(Te.__super__.handleNotification.call(this,e),u=e.getName(),i=e.getBody(),u){case ko.CREATE_FLASH_VARS:r=i.flashvars,n=i.config,r.locale_setting=this.proxy.getLocaleId();break;case ko.CREATE_XML:f=i.xml,t=f.firstChild,c=f.getElementsByTagName("locales")[0],null==c&&(c=f.createElement("locales"),t.appendChild(c)),m=this.proxy.getLocales();for(s in m){l=m[s],o=f.createElement("locale"),o.setAttribute("id",s),c.appendChild(o);for(a in l)g=l[a],p=f.createElement("property"),p.setAttribute("key",a),h=d.createTextContent(f,g),p.appendChild(h),o.appendChild(p)}}},i(Pe,ge),Pe.prototype.componentType="media-element",Pe.prototype.created=!1,Pe.prototype.onRegister=function(){this.created!==!0&&(this.created=!0,Pe.__super__.onRegister.call(this))},i(Me,ge),Me.prototype.componentType="layer",Me.prototype.onRegister=function(){Me.__super__.onRegister.call(this),this.registerLayer()},Me.prototype.onRemove=function(){Me.__super__.onRemove.call(this),this.removeLayer()},Me.prototype.registerLayer=function(){this.sendNotification(Lo.ADD_LAYER,this.viewComponent)},Me.prototype.removeLayer=function(){this.sendNotification(Lo.REMOVE_LAYER,this.viewComponent)},i(De,Me),De.prototype.componentName="video",De.prototype.listNotificationInterests=function(){return[Lo.PLAYBACK_CORE_CHANGE]},De.prototype.mediator=null,De.prototype.mediaElement=null,De.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case Lo.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName()),i=null!=(null!=t?t.getViewComponent:void 0),i?(this.facade.registerMediator(t),this.mediator=t,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=t),null!=this.mediaElement&&(this.facade.setMediaElement(this.mediaElement),this.viewComponent.appendChild(this.mediaElement))}},i(xe,ge),xe.prototype.componentType="player",xe.prototype.core=null,xe.prototype.medium=null,xe.prototype.layers=null,xe.prototype.ready=!1,xe.prototype.onRegister=function(){var e;xe.__super__.onRegister.call(this),e=r.getDevice(),null!=e&&this.classList.add(e),r.isTouchDevice()&&this.classList.add("touch")},xe.prototype.listNotificationInterests=function(){return[Lo.DISPLAY_STATE_CHANGE,Lo.ACTIVE_STATE_CHANGE,Lo.PLAY_STATE_CHANGE,Lo.ADD_APPLICATION_STATE,Lo.REMOVE_APPLICATION_STATE,Lo.MEDIUM_CHANGE,Lo.DURATION_CHANGE,Lo.TEMPORAL_TYPE_CHANGE,Lo.IS_LIVE,Lo.ADD_LAYER,Lo.REMOVE_LAYER,Lo.READY]},xe.prototype.handleNotification=function(e){var t,i,n,o,r,a;switch(i=e.getName(),t=e.getBody(),i){case Lo.ACTIVE_STATE_CHANGE:case Lo.PLAY_STATE_CHANGE:case Lo.DISPLAY_STATE_CHANGE:case Lo.MEDIUM_CHANGE:r=t,a=r.value,n=r.previous,null!=n&&this.classList.contains(n)&&this.classList.remove(n),null!=a&&this.classList.add(a);break;case Lo.ADD_APPLICATION_STATE:o=t,this.classList.add(o);break;case Lo.REMOVE_APPLICATION_STATE:o=t,this.classList.remove(o);break;case Lo.TEMPORAL_TYPE_CHANGE:t.previous&&this.sendNotification(Lo.REMOVE_APPLICATION_STATE,t.previous),t.value&&this.sendNotification(Lo.ADD_APPLICATION_STATE,t.value);break;case Lo.IS_LIVE:t===!0?this.sendNotification(Lo.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"is-live");break;case Lo.DURATION_CHANGE:t>3600?this.sendNotification(Lo.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"long-form");break;case Lo.ADD_LAYER:this.addLayer(t);break;case Lo.REMOVE_LAYER:this.removeLayer(t);break;case Lo.READY:this.initialize(),this.viewCreated()}},xe.prototype.initialize=function(){var e,t,i,n;for(this.ready=!0,n=this.layers,t=0,i=n.length;i>t;t++)e=n[t],this.viewComponent.contains(e)||this.viewComponent.appendChild(e)},xe.prototype.viewCreated=function(){this.sendNotification(Lo.VIEW_CREATED)},xe.prototype.addLayer=function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)},xe.prototype.removeLayer=function(e){var t;this.viewComponent.contains(e)&&this.viewComponent.removeChild(e),t=this.layers.indexOf(e),t>=0&&this.layers.splice(t,1)},i(ke,xe),ke.NAME="FlashPlayerMediator",ke.prototype.type="flash",ke.prototype.listNotificationInterests=function(){return ke.__super__.listNotificationInterests.call(this).concat([Uo.PLUGINS_INITIALIZED])},ke.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Lo.READY:return void this.viewCreated();case Uo.PLUGINS_INITIALIZED:return void this.initialize()}ke.__super__.handleNotification.call(this,e)},i(Le,k),Le.prototype.execute=function(e){var t,i;i=e.getBody().value,t="amp"===i?Lo.REMOVE_APPLICATION_STATE:Lo.ADD_APPLICATION_STATE,this.sendNotification(t,"remote-playback"),Le.__super__.execute.call(this,e)},i(Re,k),Re.prototype.execute=function(e){var t;Re.__super__.execute.call(this,e),t=r.clone(this.media.getData()),t.src=this.media.getSrc(),this.facade.getMediaElement().authenticationComplete({media:t})},i(Oe,Se),Oe.prototype.temporalTypes=null,Oe.prototype.supportedTypes=null,Oe.prototype.playbackCoreName="default",Oe.prototype.config=null,Oe.prototype.onRegister=function(){this.mediaProxy=this.facade.retrieveProxy(tt.NAME)},Oe.prototype.getUseMAE=function(){var e;return e=this.config.mae,null!=e&&e.enabled!==!1},Oe.prototype.getPlaybackCoreName=function(){return this.playbackCoreName},Oe.prototype.getSupportedTypes=function(){return this.supportedTypes||[]},Oe.prototype.setSupportedTypes=function(e){return this.supportedTypes=e,e},Oe.prototype.getTemporalTypes=function(){return this.temporalTypes||[]},Oe.prototype.setTemporalTypes=function(e){return this.temporalTypes=e,e},Oe.prototype.canPlayTemporalType=function(e){return-1!==this.getTemporalTypes().indexOf(e)},Oe.prototype.canPlayType=function(e){return null!=this.supportedTypes?-1!==this.getSupportedTypes().indexOf(e)?"maybe":"":Oe.__super__.canPlayType.call(this,e)},i(Ve,Oe),Ve.NAME=Se.NAME,Ve.prototype.player=null,Ve.prototype.initialized=!0,Ve.prototype.playbackCoreName="flash",Ve.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"],Ve.prototype.getPaused=function(){return this.player.getPaused()},Ve.prototype.getEnded=function(){return this.player.getEnded()},Ve.prototype.getSeeking=function(){return this.player.getSeeking()},Ve.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},Ve.prototype.setCurrentTime=function(e){return this.player.setCurrentTime(e),e},Ve.prototype.getSrc=function(){return this.player.getSrc()},Ve.prototype.setSrc=function(e){return this.player.setSrc(e),e},Ve.prototype.getVolume=function(){return this.player.getVolume()},Ve.prototype.setVolume=function(e){return this.player.setVolume(e),e},Ve.prototype.getMuted=function(){return this.player.getMuted()},Ve.prototype.setMuted=function(e){return this.player.setMuted(e),e},Ve.prototype.getDuration=function(e){return this.player.getDuration()},Ve.prototype.play=function(){this.player.play()},Ve.prototype.pause=function(){this.player.pause()},Ve.prototype.load=function(){this.player.load()},i(Ge,be),Ge.prototype.initialize=function(e,t){var i,n;this.config=e,this.parentModule=t,this.createDefaults(),this.logEvents=(null!=(i=this.config.flash)?i.logEvents:void 0)===!0||"true"===(null!=(n=c["amp-flash-log"])?n.toLowerCase():void 0),Ge.__super__.initialize.call(this,this.config,this.parentModule)},Ge.prototype.loadModuleResources=function(e){var t=this;return Ge.__super__.loadModuleResources.call(this,e).then(function(){var e,i,n,o,a;i=t.config.locales,n=[],o=function(e,t){i[e]=t.data};for(e in i)a=i[e],"string"==typeof a&&n.push(xt.addResource({src:t.evaluatePaths(a),type:r.mimeTypes.json}).then(o.bind(t,e))["catch"](function(e){return Promise.resolve()}));return Promise.all(n)})},Ge.prototype.pluginsinitialized=function(){var e,t,i,n,o,a,s,l,d;i=this.config.flash||{},a=(null!=(d=i["static"])?d.enabled:void 0)===!0?i["static"]:i,o=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf",s=i.version||"10.1",t=this.evaluatePaths(i.expressInstallSWF)||"playerProductInstall.swf",n=this.createParams(i),e=this.createAttributes(i),this.flashvars=this.createFlashVars(i),null==this.flashvars.settings_url&&(l=this.createXML(this.config),null!=l&&(this.flashvars.settings_xml=l)),e.data=this.evaluatePaths(o),this.createdHandler(r.createFlashObject({params:n,attributes:e,vars:this.flashvars},this.getMediaElement().parentNode))},Ge.prototype.playerType="flash",Ge.prototype.flashObjectID="flashObject",Ge.prototype.loaded=!1,Ge.prototype.flashvars=null,Ge.prototype._paused=!1,Ge.prototype._ended=!1,Ge.prototype._muted=!1,Ge.prototype.plugins=null,Ge.prototype.debug=!1,Ge.prototype.started=!1,Ge.prototype._displayState=null,Ge.prototype.logEvents=!1,Ge.prototype._loop=!1,Ge.prototype.playback=null,Ge.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"//sslplayers-vh.akamaihd.net/flash/plugins/osmf/advanced-streaming-plugin/v3.10/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}],Ge.prototype.flashView=null,Ge.prototype.createModel=function(){Ge.__super__.createModel.call(this),this.playback=new Ve(this),this.registerProxy(this.playback),this.appState.setRenderMode(Go.FLASH),this.bindings.initialize()},Ge.prototype.createView=function(){Ge.__super__.createView.call(this),this.mediator=new ke(this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new De),this.registerMediator(new At),this.registerMediator(new Te(this,this.config))},Ge.prototype.createController=function(){var e,t=this;Ge.__super__.createController.call(this),null!=(null!=(e=this.config.plugins)?e.react:void 0)&&(this.registerCommand(Lo.CHANGE_DISPLAY_STATE,Ae),this.getDisplayState=function(){return t.appState.getDisplayState()},this.setDisplayState=function(e){return t.sendNotification(Lo.CHANGE_DISPLAY_STATE,e)}),this.registerCommand(Uo.PLUGINS_INITIALIZED,Ne),this.registerCommand(Oo.AUTHORIZE,k),this.registerCommand(Oo.AUTHORIZED,Re),this.registerCommand(Lo.CHANGE_PLAY_STATE,dt),this.registerCommand(Lo.PLAY_STATE_CHANGE,k),this.registerCommand(Lo.START,Ie),this.registerCommand(Lo.STARTED,k),this.registerCommand(Lo.PLAY,k),this.registerCommand(Lo.PLAY_REQUEST,k),this.registerCommand(ko.FLASH_CREATED,k),this.registerCommand(Lo.PLAYBACK_TARGET_CHANGE,Le),this.registerCommand(Lo.UPDATE_DATA_BINDINGS,mt),this.registerCommand(Lo.BUFFERING_CHANGE,we),this.registerCommand(ko.CREATE_XML,k),this.registerCommand(ko.CREATE_FLASH_VARS,k)},Ge.prototype.createMediaElement=function(){var e,t;return e=new Pe("flash","div"),this.sendNotification(Lo.PLAYBACK_CORE_CHANGE,e),t=e.getViewComponent(),t.id=t.name=this.flashObjectID,t},Ge.prototype.createDefaults=function(){var e,t,i,n,o,a,s,l;if(!(!(null!=(a=this.flashPlugins)?a.length:void 0)>0)){for(t=this.config.resources||[],null!=(null!=(s=this.config.flash)?s.resources:void 0)&&(t=t.concat(this.config.flash.resources)),i=r.mimeTypes.swf,l=this.flashPlugins,n=0,o=l.length;o>n;n++)e=l[n],null!=e&&0===t.filter(function(t){return t.id===e.id}).length&&(null==e.type&&(e.type=i),t.push(e));this.config.resources=t}},Ge.prototype.createParams=function(e){var t;return t={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},null!=e.params&&(null!=e.params.allowFullScreen&&(t.allowFullScreen=e.params.allowFullScreen),null!=e.params.allowScriptAccess&&(t.allowScriptAccess=e.params.allowScriptAccess),null!=e.params.wmode&&(t.wmode=e.params.wmode),null!=e.params.bgColor&&(t.bgColor=e.params.bgColor)),"direct"===t.wmode&&/MSIE/.test(navigator.userAgent)&&(t.wmode="transparent"),t},Ge.prototype.getModules=function(){return this.plugins},Ge.prototype.createPlugins=function(){var e,t,i,n,o,a,s,l,d,c,u=this;d=this.getPlayerType(),c=xt.plugins;for(n in c)if(l=c[n],n in this.config&&null!=this.config[n]&&this.config[n].enabled!==!1)if(e=l[d],null!=e)try{o=this[n]=this.plugins[n]=new e(this,this.config[n]),this.registerMediator(this.plugins[n]),t="function"==typeof o.getFeatureName?o.getFeatureName():void 0,null!=t&&(this[t]=o),null!=o.flashView&&(this.flashView=r.override(this.flashView,o.flashView)),this.logger.debug("[AMP] Plugin registered: "+n)}catch(p){this.logger.error("[AMP] Plugin could not be created: "+n+". "+p);continue}else this.logger.debug("[AMP] Plugin could not be found: "+n);a=this.config.plugins||{},s=[];for(n in a)i=a[n],null!=i&&i.enabled!==!1&&(o=function(t,i,n){return u.loadResources(i.resources).then(function(){if(e=xt.plugins[n][d],null==e)throw new Error("[AMP] Plugin could not be found: "+n);return e(t,i,n).then(function(e){return u.logger.debug("[AMP] Plugin registered: "+n),{key:n,value:e}})})["catch"](function(e){return u.logger.error("[AMP] Plugin could not be created: "+n+". "+e)})},s.push(o.bind(null,this,i,n)));s=s.map(function(e){return e()}),Promise.all(s).then(function(e){var t,i,n;for(null!=u.config.flash.view&&(u.flashView=r.override(u.flashView,u.config.flash.view)),i=0,n=e.length;n>i;i++)t=e[i],null!=t&&(u[t.key]=t.value,u.plugins[t.key]=t.value);return u.sendNotification(Uo.PLUGINS_INITIALIZED,u.plugins)})["catch"](function(e){return u.logger.error(e)})},Ge.prototype.createAttributes=function(e){var t;return t={id:this.flashObjectID,name:this.flashObjectID},null!=e.attributes&&(null!=e.attributes.id&&(t.id=e.attributes.id),null!=e.attributes.name&&(t.name=e.attributes.name)),t},Ge.prototype.createFlashJSON=function(e,t){var i,n;return null==e&&(e=this.config),e=JSON.stringify(e),e=this.evaluatePaths(e),e=JSON.parse(e),n=function(e,t,n){switch(typeof n){case"string":e[t]=escape(n);break;case"object":i(n)}},i=function(e){var t,i,o,r;if(e instanceof Array)for(t=o=0,r=e.length;r>o;t=++o)i=e[t],n(e,t,i);else if("object"==typeof e)for(t in e)i=e[t],n(e,t,i)},i(e),encodeURIComponent(JSON.stringify(e,null,t))},Ge.prototype.createFlashVars=function(e){var t,i,n,o,a,s,l,d,c,u,p;if(t={},o=Object.assign({},this.config,this.config.plugins),delete o.plugins,o.flash=null,delete o.flash,o.locales=null,delete o.locales,o.params=null,delete o.params,o.rules=null,delete o.rules,t.settings_json=this.createFlashJSON(o),null!=this.config.autoplay&&(t.auto_play=this.config.autoplay),null!=this.config.rules&&r.mergeRules(this.config.rules),t.hinting_rules=escape(JSON.stringify(r.rules)),null!=this.config.volume&&(t.volume=r.clamp(this.config.volume,0,1)),null!=this.config.target&&(t.external_target=this.config.target),null!=this.config.name&&(t.core_player_name=this.config.name),null!=this.config.domain&&(t.embed_domain=t.domain=this.config.domain),this._loop=t.auto_replay=this.config.loop===!0,null!=this.config.fullscreen&&(t.fullscreen_enabled=this.config.fullscreen.enabled!==!1&&this.config.fullscreen.mode!==Mo.EXTERNAL),null!=this.config.titlebar&&(t.titlebar_enabled=this.config.titlebar.enabled!==!1),null!=this.config.params&&(t.params=escape(JSON.stringify(this.config.params))),null!=this.config.version&&(t.context_menu_label=this.config.version),null!=(null!=(a=this.config.controls)?a.displaySceneMarkers:void 0)&&(t.displaySceneMarkers=this.config.controls.displaySceneMarkers),null!=this.config.media&&(this.mediaProxy.setData(this.config.media),null!=this.config.media.src&&(this.setSrc(this.config.media.src),t.video_url=escape(this.config.media.src)),null!=this.config.media.source&&this.config.media.source.length>0&&(this.setSource(this.config.media.source),t.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),t.medium=this.config.media.medium),null!=this.config.media.title&&(t.title=encodeURIComponent(this.config.media.title)),null!=this.config.media.poster&&(t.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(t.temporalType=this.config.media.temporalType)),"audio"===this.getMedium()&&(t.controls=!0,t.auto_hide=-1),null!=(null!=(s=this.config.ima)&&null!=(l=s.overlay)?l.delay:void 0)&&(t.overlay_ad_delay=this.config.ima.overlay.delay),null!=this.config.ticker&&this.config.ticker.enabled!==!1&&(null!=this.config.ticker.url&&(t.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(t.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(t.ticker_speed=this.config.ticker.speed)),t.show_play_button_overlay=!1,t.auto_play_list=!1,t.next_video_timer=0,null==t.context_menu_mode&&(t.context_menu_mode=this.debug===!0?"long":"short"),null!=(null!=(d=this.config.flash)&&null!=(c=d.view)&&null!=(u=c.elements)&&null!=(p=u.loadingView)?p.attributes:void 0)){i="";for(n in this.config.flash.view.elements.loadingView.attributes)i+=n+":"+this.config.flash.view.elements.loadingView.attributes[n]+" ";t.loadingView=i}return this.sendNotification(ko.CREATE_FLASH_VARS,{flashvars:t,config:this.config}),t=r.override(t,e.vars)},Ge.prototype.createXML=function(e){var t,i,n,o,a,s,l,c,u,p,h,g,f,m,y,A,v,_,E,b,C,S,N,I;if(null==(null!=e&&null!=(S=e.flash)?S.xml:void 0)&&(null==e.flash&&(e.flash={}),e.flash.xml="<application></application>"),v=d.parse(e.flash.xml),v.childNodes.length>1&&v.removeChild(v.firstChild),this.sendNotification(ko.CREATE_XML,{config:e,xml:v}),u=function(e){var t,i,n,a,s,l,d,c;if(a=e.resources,i=[],a instanceof Array&&(null!=a?a.length:void 0)>0)for(l=0,d=a.length;d>l;l++)n=a[l],n.type===m&&(n=r.clone(n),o===!0?null!=n.main&&""!==n.main?(n.src=n.main,n.type="static"):n.type="dynamic":null!=n.src&&""!==n.src?n.type="dynamic":(n.src=n.main,n.type="static"),delete n.main,i.push(n));for(t in e)s=e[t],"flash"!==t&&null!=(a=null!=s?s.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(u(s)));c=e.plugins;for(t in c)s=c[t],null!=(a=null!=s?s.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(u(s)));return i},m=r.mimeTypes.swf,g=u(this.config),o=(null!=(N=e.flash["static"])?N.enabled:void 0)===!0,(null!=g?g.length:void 0)>0)for(c=v.getElementsByTagName("plugins"),c.length<1?(c=v.createElement("plugins"),v.firstChild.appendChild(c)):c=c[0],_=0,b=g.length;b>_;_++)if(h=g[_],h.enabled!==!1){l=v.createElement("plugin");for(a in h)y=h[a],"loaded"!==a&&("src"!==a?l.setAttribute(a,""+y):("id"===a&&"AkamaiAdvancedStreamingPlugin"===y&&this.debug===!0&&(y=y.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),l.appendChild(d.createTextContent(v,y))));c.appendChild(l)}if(p=function(e,t){var i,n,o,r,a,s;if(null!=e.attributes){r=e.attributes;for(n in r)o=r[n],t.setAttribute(n,""+o)}if(null!=e.elements){a=e.elements;for(n in a)o=a[n],null!=o&&(i=v.createElement("element"),i.setAttribute("id",n),"state"!==i.id&&(p(o,i),t.appendChild(i)))}if(null!=e.state){if(i=v.createElement("state"),e.state.attributes){s=e.state.attributes;for(n in s)o=s[n],null!=o&&i.setAttribute(n,""+o)}t.appendChild(i)}return t},A=v.getElementsByTagName("view")[0],null==A&&(A=v.createElement("view"),v.firstChild.appendChild(A)),p(this.flashView,A),s=null!=(I=this.config.fullscreen)?I.mode:void 0,null!=s)for(n=v.getElementsByTagName("element"),E=0,C=n.length;C>E;E++)i=n[E],"fullscreenBtn"===i.getAttribute("id")&&i.setAttribute("action","external");return f=d.serialize(v),t=f.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||f,t=t.replace(/[\n\r\t]/g,""),t=this.evaluatePaths(t),encodeURIComponent(t)},Ge.prototype.createdHandler=function(e){var t,i,n=this;t=this.getMediaElement().id,i=document.getElementById(t),this.setMediaElement(i),i.className=jo.PREFIX+Pe.prototype.componentType,i.eventHandler=function(e,t){return n.eventHandler(e,t)},this.sendNotification(ko.FLASH_CREATED),null!=this.getMedium()&&this.setMedium(this.getMedium())},Ge.prototype.eventHandler=function(e,t){var i,n,o,r,a,l,d,c,u,p,h,g=this;this.logEvents&&!this.excludedFlashEvents.test(e)&&this.logger.log("[AMP FLASH EVENT] "+e,t);try{switch(e){case ko.INITIALIZED:l=a="ready";break;case ko.RESET:null==t&&(a="ready"),this.started=!1;break;case ko.LOADING:l="loadstart";break;case ko.PLAYER_ERROR:l=a="error";break;case ko.MEDIA_ERROR:l=a="error";break;case ko.FEED_LOADED:t=JSON.parse(t),o=new Nt,r=null!=(c=o.createFeed(t))&&null!=(u=c.item)?u[0]:void 0,null!=r&&this.mediaProxy.setData(r);break;case ko.FEED_UPDATED:l="mediachange",t=this.getMedia(),d=!0;break;case ko.ERROR_STREAM_NOT_FOUND:l=a="error";break;case ko.CAPABILITY_CHANGE:n=t.type,"canPlayChange"===n&&t.enabled===!0?(l="canplay",this.loaded=!0):"canSeekChange"===n&&t.enabled===!0?l="canplaythrough":"temporalChange"===n&&t.enabled===!0&&(l="loadedmetadata",this.started||this.sendNotification(Lo.START,t));break;case ko.PLAYING:this.started||this.sendNotification(Lo.START,t),l=a="playing",this._ended=!1,this._paused=!1,this.appState.getSeeking()===!0&&(this.appState.setSeeking(!1),this.sendNotification(Lo.SEEKED),this.sendNotification(Lo.DISPATCH_EVENT,new s("seeked")));break;case ko.ELEMENT_EVENT:"fullscreenBtn"===t.element&&"click"===t.type&&(null!=(p=this.config)&&null!=(h=p.fullscreen)?h.mode:void 0)===Mo.EXTERNAL&&(a=this.getDisplayState()===Ro.FULL_SCREEN?Ro.NORMAL:Ro.FULL_SCREEN,this.setDisplayState(a));break;case ko.PLAY_REQUEST:this.sendNotification(Lo.PLAY_REQUEST),this.setPlayState("playing"),l=Lo.MEDIA_SEQUENCE_STARTED,this.loaded=!0,this._ended=!1;break;case ko.PLAY:"paused"!==this.getPlayState()&&this.started&&this.sendNotification(Lo.PLAY,t);break;case ko.ENDED:l=Lo.ENDED;break;case ko.MEDIA_SEQUENCE_ENDED:l=Lo.MEDIA_SEQUENCE_ENDED,a=Lo.ENDED,this._ended=!0;break;case ko.PAUSED:l="pause",a="paused",this._paused=!0;break;case ko.BUFFERING:"ended"!==this.className&&(l=a="waiting");break;case ko.BUFFERING_CHANGE:return void this.sendNotification(Lo.BUFFERING_CHANGE,t);case ko.DURATION_CHANGE:isNaN(t.time)||(0===t.time&&this.sendNotification(Lo.MEDIA_SEQUENCE_ABORTED),l="durationchange",t=t.time,setTimeout(function(){g.setCues(g.getCues().slice())},0));break;case ko.VOLUME_CHANGE:l="volumechange",t=t.volume;break;case ko.TIME_UPDATE:l="timeupdate",t=t.currentTime;break;case ko.SEEKING_CHANGE:if(this.appState.getSeeking()===!1&&t.seeking===!1)return;l=t.seeking?"seeking":"seeked",this.appState.setSeeking(t.seeking),t.seeking&&(a="seeking");break;case ko.FULLSCREEN_CHANGE:l="fullscreenchange",t="fullScreen"===t.displayState,this.applyDisplayState(t?Ro.FULL_SCREEN:Ro.NORMAL);break;case ko.FAIL_OVER_ATTEMPT:l="failoverattempt",t=t;break;case ko.ERROR:e=null;break;case ko.AUTHORIZE:l=Oo.AUTHORIZE;break;case ko.TIMED_METADATA:l=Lo.TIMED_METADATA,t={startTime:t.time,endTime:t.time,data:t};break;case ko.MEDIA_PLAYER_ID3_UPDATED:l=Lo.TIMED_METADATA,t={startTime:t.time,endTime:t.time,data:window.atob(t)}}null!=e&&e!==l&&(n=new s(e,t),n.dispatcher="FLASH",this.sendNotification(Lo.DISPATCH_EVENT,n),this.sendNotification(e,t)),null!=l&&("error"===l&&(i=t.error||t,this.logError("Flash Error",i)),this.sendNotification(l,t),this.sendNotification(Lo.DISPATCH_EVENT,new s(l,t))),null!=d&&this.sendNotification(Lo.UPDATE_DATA_BINDINGS),null!=a&&this.setPlayState(a)}catch(i){this.logError("Event Error: "+e,i)}},Ge.prototype.logError=function(e,t){this.logger.error("[AMP FLASH ERROR]",e,t)},Ge.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/,Ge.prototype.logFlashEvents=!1,Ge.prototype.logEvent=function(e){"FLASH"===e.dispatcher&&this.logFlashEvents===!1||this.excludedFlashEvents.test(e.type)===!0||Ge.__super__.logEvent.call(this,e)},Ge.prototype.setPlayState=function(e){return this.sendNotification(Lo.CHANGE_PLAY_STATE,e),e},Ge.prototype.getPlayState=function(){return this.appState.getPlayState()},Ge.prototype.setMedia=function(e){var t=this;return null!=this.getPlayState()&&this.setPlayState("ready"),e=this.mediaProxy.transform(e),this.transform(Ho.MEDIA,e).then(function(i){return e=i,t.mediaProxy.setData(e),null!=e.src&&t.setSrc(e.src),null!=e.source&&e.source.length>0&&t.setSource(e.source),t.sendNotification(Lo.MEDIA_CHANGE,e),t.load(t.mediaProxy.getData())})["catch"](function(e){return t.sendNotification(Lo.ERROR,e)}),e},Ge.prototype.getMedia=function(){return this.mediaProxy.getData()},Ge.prototype.load=function(){var e,t,i,n;if(i=this.mediaProxy.getData(),this.security.setMedia(i),this.security.getAuthorized()){this.loaded=!0,e=r.clone(i),null==e.autoplay&&(e.autoplay=this.config.autoplay);
for(t in e)n=e[t],void 0===n&&delete e[t];this.getMediaElement().loadURL(this.mediaProxy.getSrc(),e)}else this.sendNotification(Oo.AUTHORIZE,{media:i})},Ge.prototype.play=function(){this.loaded||this.load(),this.getMediaElement().unpause()},Ge.prototype.setMuted=function(e){this._muted=e;try{e===!0?this.getMediaElement().mute():this.getMediaElement().unmute()}catch(t){this.logError("Flash muted error",t)}return e},Ge.prototype.getMuted=function(){return this._muted},Ge.prototype.getLoop=function(){return this._loop},Ge.prototype.getSrc=function(e){return this.getMediaElement().getURL()},Ge.prototype.setSrc=function(e){return this.mediaProxy.setSrc(e),this.loaded=!1,this.setMedium(r.getMimeType(e)),e},Ge.prototype.setAutoplay=function(e){return this.getMediaElement().setPlayerProperty("autoplay",e),e},Ge.prototype.getAutoplay=function(){return this.getMediaElement().getPlayerProperty("autoplay")},Ge.prototype.getMedium=function(){return this.mediaProxy.getData().medium},Ge.prototype.setMedium=function(e){var t,i;return t=this.mediaProxy.getData(),e!==t.medium?(null!=t.medium&&(i="medium-"+t.medium),t.medium=/audio/.test(e)?"audio":"video",this.sendNotification(Lo.MEDIUM_CHANGE,{value:"medium-"+t.medium,previous:i}),e):void 0},Ge.prototype.setSource=function(e){var t,i,n=this;if(!(null==e||e.length<1)){if(i=this.mediaProxy.getData(),i.source=e,this.loaded=!1,t=r.selectSource(e,function(e){return n.canPlayType(e)}),null==(null!=t?t.src:void 0)||""===t.src)throw new Error("No valid source could be found");return this.setSrc(t.src),"undefined"!=typeof type&&null!==type&&this.setMedium(type),e}},Ge.prototype.getSource=function(){return this.mediaProxy.getData().source},Ge.prototype.getSeeking=function(){return this.appState.getSeeking()},Ge.prototype.getPaused=function(){return this._paused},Ge.prototype.getEnded=function(){return this._ended},Ge.prototype.getFlashXML=function(){var e,t;t=decodeURIComponent(this.flashvars.settings_xml),e=d.parse(t);try{e.toString=function(){return t}}catch(i){}return e},Ge.prototype.getFlashVars=function(){return this.flashvars},Ge.prototype.getFlashJSON=function(){return JSON.parse(decodeURIComponent(this.flashvars.settings_json))},Ge.prototype.canPlayType=function(e){return n.call(r.flashTypes,e)>=0?"maybe":""},Ge.prototype.replay=function(){this.getMediaElement().replay()},Ge.prototype.pause=function(){this.getMediaElement().pause()},Ge.prototype.end=function(){this.getMediaElement().stopPlayer()},Ge.prototype.getCurrentTime=function(){var e;return"function"==typeof(e=this.getMediaElement()).getCurrentTime?e.getCurrentTime():void 0},Ge.prototype.setCurrentTime=function(e){return this.getMediaElement().jumpToTime(e),e},Ge.prototype.getParams=function(){return this.getMediaElement().getParams()},Ge.prototype.setParams=function(e){return this.getMediaElement().setParams(e),e},Ge.prototype.getVolume=function(){var e;return(null!=(e=this.getMediaElement())&&"function"==typeof e.getVolume?e.getVolume():void 0)||0},Ge.prototype.setVolume=function(e,t){return this.getMediaElement().setVolume(e,t||""),e},Ge.prototype.getDuration=function(){var e;return"function"==typeof(e=this.getMediaElement()).getDuration?e.getDuration():void 0},Ge.prototype.getDisplayState=function(){return this._displayState},Ge.prototype.setDisplayState=function(e){var t;if(e!==this._displayState&&(this.applyDisplayState(e),(null!=(t=this.config.fullscreen)?t.mode:void 0)!==Mo.EXTERNAL))return this._displayState===Ro.FULL_SCREEN?this.getMediaElement().enterFullScreen():this.getMediaElement().exitFullScreen(),e},Ge.prototype.applyDisplayState=function(e){var t;e!==this._displayState&&(t={value:e,previous:this._displayState},this._displayState=e,this.sendNotification(Lo.DISPLAY_STATE_CHANGE,t),this.sendNotification(Lo.DISPATCH_EVENT,new s("fullscreenchange",this._displayState===Ro.FULL_SCREEN)))},Ge.prototype.enterFullScreen=function(){this.setDisplayState(Ro.FULL_SCREEN)},Ge.prototype.exitFullScreen=function(){this.setDisplayState(Ro.NORMAL)},Ge.prototype.recordContentChange=function(e){this.getMediaElement().recordContentChange(e)},Ge.prototype.setQuality=function(e){return this.getMediaElement().setQuality(e)},Ge.prototype.getQuality=function(){var e;try{e=this.getMediaElement().getQuality()}catch(t){}return e},Ge.prototype.getQualityLevels=function(){var e,t;try{e=("function"==typeof(t=this.getMediaElement()).getQualityLevels?t.getQualityLevels():void 0)||[]}catch(i){e=[]}return e},i(Be,puremvc.Mediator),Be.prototype.module=null,Be.prototype.mediator=null,Be.prototype.initializeNotifier=function(e){var t,i=this;Be.__super__.initializeNotifier.call(this,e),t=this.module.listNotificationPublications(),null!=t&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return t},this.mediator.handleNotification=function(e){i.facade.sendNotification(e.getName(),e.getBody(),e.getType())})},Be.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)},Be.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMediator(this.mediator)},Be.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()},Be.prototype.handleNotification=function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())},Events={LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",BUFFERING_CHANGE:"bufferingchange",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABILITY_CHANGE:"playbacktargetavailabilitychange",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",PLAYBACK_RATE_CHANGE:"playbackratechange",SETTINGS_CHANGE:"settingschange",QUALITY_CHANGE:"qualitychange",QUALITY_CHANGING:"qualitychanging",QUALITY_SWITCHED:"qualityswitched",QUALITY_MODE_CHANGE:"qualitymodechange",QUALITY_LEVELS_LOADED:"qualitylevelsloaded",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",AUTOPLAY_BLOCKED:"autoplayblocked",LANGUAGE_CHANGE:"languagechange",TIMED_METADATA:"timedmetadata",CUES_CHANGE:"cueschange",VIEW_CREATED:"viewcreated",MUTE_CHANGE:"mutechange",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",BUSY:"busy",DESTROY:"destroy"},He.prototype.addTransform=function(e,t){var i;null!=t&&null!=e&&(null==(i=this._transformMap)[e]&&(i[e]=[]),-1===this._transformMap[e].indexOf(t)&&(this._transformMap[e].push(t),this.sortTransforms(e)))},He.prototype.sortTransforms=function(e,t){return null==t&&(t=function(e,t){var i,n;return i=e.priority||0,n=t.priority||0,n-i}),this._transformMap[e].sort(t)},He.prototype.transform=function(e,t){var i;return i=this._transformMap[e],null==i?Promise.resolve(t):r.transform(t,i)},He.prototype.removeTransform=function(e,t){var i,n;if(null!=t&&null!=e&&(n=this._transformMap[e],null!=n&&(i=n.indexOf(t),-1!==i)))return n.splice(i,1)},Ue.SINGLE=/^\s*[#\$]{([^\$#{}]+)}\s*$/,Ue.TOKEN=/[#\$]{([^\$#}]*)}/g,Ue.eval=function(e,t){var i=this;if(null==e)return e;if(this.SINGLE.test(e))try{return this.exec(e.replace(this.SINGLE,"$1"),t)}catch(n){return e}return e.replace(this.TOKEN,function(e,n,o,r){try{return i.exec(n,t)}catch(a){return e}})},Ue.exec=function(e,t){return new Function("with (this) { return "+e+" }").bind(t)()},Ue.evaluateBindings=function(e,t,i){var n,o=this;if(null==i&&(i=!0),null!=e){if("object"==typeof e){if(i=i===!0?JSON.parse(JSON.stringify(e)):e,e instanceof Array)return i.map(function(e){return o.evaluateBindings(e,t,!1)});e={};for(n in i)e[n]=this.evaluateBindings(i[n],t,!1);return e}return"string"==typeof e?this.eval(e,t):e}},i(Fe,puremvc.SimpleCommand),Fe.prototype.execute=function(e){var t;t=e.getBody(),t.player=this.facade.player||this.facade,this.facade.dispatchEvent(t)};var Lo={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",CHANGE_SETTINGS:"changesettings",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",CHANGE_TIME:"changetime",TIME_CHANGE:"timechange",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",AUTOPLAY_CHANGE:"autoplaychange",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",AUDIO_TRACK_SWITCH:"audiotrackswitch",init:function(){var e,t;for(e in Events)t=Events[e],"values"!==e&&"init"!==e&&(this[e]=t)}};Lo.init(),je.track=function(e,t){var i,n,o;return n="//amp.akamaized.net/amp.gif",i={os:"undefined"!=typeof bowser&&bowser.osname||"",osver:"undefined"!=typeof bowser&&bowser.osversion||"",browser:"undefined"!=typeof bowser&&bowser.name||"",browserver:"undefined"!=typeof bowser&&bowser.version||"",prod:xt.VERSION.replace(/^AMP/,"").replace(/\sv?[0-9\.]+$/,""),prodver:null!=(o=xt.VERSION.match(/[0-9\.]+/))?o[0]:void 0,platform:"web",url:location.href,event:e,data:t},r.request(""+n+"?"+c.encode(i))["catch"](function(e){return a.instance.log(e)})};var Ro={NORMAL:"normal",FULL_SCREEN:"full-screen"};i(ze,_),ze.NAME=_.NAME,ze.prototype.bindings=null,ze.prototype.configurationName=null,ze.prototype.contextName=null,ze.prototype.contextData=null,ze.prototype.value=null,ze.prototype.getConfigurationName=function(){return this.configurationName},ze.prototype.getConfigurationData=function(){return this.value||{}},ze.prototype.getContextName=function(){return this.contextName},ze.prototype.getContextData=function(){return this.contextData},ze.prototype.onRegister=function(){var e;e=this.facade.player||this.facade,null==this.getConfigurationName()&&(this.configurationName=this.facade.moduleName),this.bindings=e.retrieveProxy(nt.NAME),this.bindings.registerConfiguration(this),null!=this.getContextName()&&(this.bindings.registerContext(this),this.value=Ue.evaluateBindings(this.data,this.bindings.getData()))},ze.prototype.setData=function(e){var t,i,n;null==e&&(e={}),this.data={},n=this.getDefaults();for(t in n)i=n[t],this.data[t]=t in e?e[t]:i;return this.data},ze.prototype.getValue=function(e){return this.bindings.update(),this.value[e]=Ue.evaluateBindings(this.data[e],this.bindings.getData()),this.value[e]},ze.prototype.compile=function(e,t){return null==t&&(t=!1),null==e&&(e=this.bindings.getData()),null!=this.contextName&&null!=this.contextData&&(e=r.clone(e),e[this.contextName]=this.contextData),this.value=Ue.evaluateBindings(this.data,this.bindings.getData()),this.value};var Oo={AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",AUTHENTICATION_FAILED:"authenticationfailed",AUTHENTICATE:"authenticate",AUTHENTICATED:"authenticated",AUTHORIZATION_EXPIRED:"authorizationexpired"};Ye.PRESS=0,Ye.RELEASE=1,Ye.MOVE=2,Ye.CLICK=3,Ye.CONTEXTMENU=4,Ye.HOVER=5,Ye.HOVEROUT=6,Ye.EVENTS=[Ye.PRESS,Ye.RELEASE,Ye.MOVE,Ye.CLICK,Ye.CONTEXTMENU,Ye.HOVER,Ye.HOVEROUT],Ye.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu","mouseover","mouseout"],Ye.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"],Ye.instances=[],Ye.create=function(e,t,i){return new Ye(e,t,i)},Ye.bind=function(e,t){var i,n,o,r,a;for(a=Ye.instances,i=o=0,r=a.length;r>o;i=++o)n=a[i],n.target===e&&(null==t||n.type===t)&&n.bind()},Ye.unbind=function(e,t){var i,n,o,r,a;for(a=Ye.instances,i=o=0,r=a.length;r>o;i=++o)n=a[i],n.target===e&&(null==t||n.type===t)&&n.unbind()},Ye.clear=function(e,t){var i,n,o,r,a;for(a=Ye.instances,i=o=0,r=a.length;r>o;i=++o)n=a[i],(null!=n?n.target:void 0)===e&&(null==t||n.type===t)&&(n.clear(),Ye.instances.splice(i,1))},Ye.prototype.types=null,Ye.prototype.bind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.addEventListener?this.target.addEventListener(e,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+e,this.trigger)},Ye.prototype.unbind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.removeEventListener?this.target.removeEventListener(e,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+e,this.trigger)},Ye.prototype.clear=function(){this.unbind(),this.target=null,this.handler=null,this.type=null,this.types=null},Ye.prototype.trigger=function(e){this.handler(e)},i(qe,_),qe.NAME=_.NAME,qe.prototype.getMetadataOverrides=function(e){var t,i;return(null!=(t=this.facade.getMedia())&&null!=(i=t.metadata)?i.config:void 0)||e||{}},qe.prototype.getValueOf=function(e){return this.getMetadataOverrides(this.data)[e]},qe.prototype.getContextName=function(){return"paths"},qe.prototype.getContextData=function(){return this.getPaths()},qe.prototype.onRegister=function(){this.facade.retrieveProxy(nt.NAME).registerContext(this)},qe.prototype.setData=function(e){return null!=e.rules&&r.mergeRules(e.rules),qe.__super__.setData.call(this,e),e},qe.prototype.getPlaysInline=function(){return this.data.playsinline},qe.prototype.getMuted=function(){return this.getValueOf("muted")},qe.prototype.setMuted=function(e){return this.data.muted=e,e},qe.prototype.getWithCredentials=function(){return this.getValueOf("withCredentials")},qe.prototype.setWithCredentials=function(e){return this.data.withCredentials=e,e},qe.prototype.getAutoplay=function(){return this.getValueOf("autoplay")},qe.prototype.setAutoplay=function(e){return this.data.autoplay=e,e},qe.prototype.getAutoplayPolicy=function(){return this.getValueOf("autoplayPolicy")},qe.prototype.setAutoplayPolicy=function(e){return this.data.autoplayPolicy=e,e},qe.prototype.getLoop=function(){return this.getValueOf("loop")},qe.prototype.setLoop=function(e){return this.data.loop=e,e},qe.prototype.getSettings=function(){return this.data.settings},qe.prototype.setSettings=function(e){return this.data.settings=e,e},qe.prototype.getDomain=function(){return this.data.domain},qe.prototype.setDomain=function(e){return this.data.domain=e,e},qe.prototype.getTarget=function(){return this.data.target},qe.prototype.setTarget=function(e){return this.data.target=e,e},qe.prototype.getName=function(){return this.data.name},qe.prototype.setName=function(e){return this.data.name=e,e},qe.prototype.getPaths=function(){return this.data.paths},qe.prototype.setPaths=function(e){return this.data.paths=e,e},qe.prototype.getVersion=function(){return this.data.version},qe.prototype.getControls=function(){return this.getValueOf("controls")},qe.prototype.setControls=function(e){return this.data.controls=e,e},qe.prototype.getFullscreen=function(){return this.data.fullscreen||{}},qe.prototype.setFullscreen=function(e){return this.data.fullscreen=e,e},i(We,puremvc.Mediator),We.NAME="SettingsMediator",We.NAMESPACE="akamai_amp",We.GET=function(){var e;e=localStorage.getItem(We.NAMESPACE);try{e=JSON.parse(e)}catch(t){e={}}return e||{}},We.prototype.onRegister=function(){var e,t,i;e=this.facade.retrieveProxy(_.NAME).getSettings()||{},null!=e.namespace&&(this.namespace=e.namespace),this.settings=r.override(e.defaults,this.defaults);try{t=localStorage.getItem(this.namespace),null!=t&&(i=r.override(JSON.parse(t),e),delete i.defaults)}catch(n){}this.save(i)},We.prototype.listNotificationInterests=function(){return[Lo.READY,Lo.VOLUME_CHANGE,Lo.CHANGE_AUTOPLAY]},We.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case Lo.READY:n=this.settings.volume,null!=n&&this.sendNotification(Lo.CHANGE_VOLUME,n),n=this.settings.autoplay,null!=n&&this.sendNotification(Lo.CHANGE_AUTOPLAY,n);break;case Lo.CHANGE_AUTOPLAY:if(this.settings.autoplay===t)return;this.change({autoplay:t});break;case Lo.VOLUME_CHANGE:if(this.settings.volume===t)return;this.change({volume:t})}},We.prototype.change=function(e){var t,i,n,o,a;if(!(null==e||"object"!=typeof e||e instanceof Array)&&(i=r.diff(this.settings,e),null!=i)){if(t=i.captions,null!=t){if(n=t.edgeColor||"","none"===n&&(t.edgeColor="rgba(0,0,0,0)"),o=t.edgeType,null!=o){switch(o.toLowerCase()){case"none":o="text-shadow: 0px 0px 0px";break;case"depressed":o="text-shadow: 0px 1px 0px";break;case"left drop shadow":o="text-shadow: -3px 3px 2px";break;case"raised":o="text-shadow: 0px 1px 1px";break;case"right drop shadow":o="text-shadow: 3px 3px 2px";break;case"uniform":o="text-shadow: 0px 0px 4px"}t.edgeType=o}null!=t.fontSize&&(t.size=t.fontSize,delete t.fontSize),a=t.fontFamily,null!=a&&(null==this.fontFamily&&(this.fontFamily={"Monospaced Serif":"Courier New, Courier, Nimbus Mono L, Cutive Mono, monospace","Proportional Serif":"Times New Roman, Times, Georgia, Cambria, PT Serif Caption, serif","Monospaced Sans-Serif":"Deja Vu Sans Mono, Lucida Console, Monaco, Consolas, PT Mono, monospace","Proportional Sans-Serif":"Roboto, Arial Unicode Ms, Arial, Helvetica, Verdana, PT Sans Caption, sans-serif",Casual:"Comic Sans MS, Impact, Handlee, fantasy",Cursive:"Monotype Corsiva, URW Chancery L, Apple Chancery, Dancing Script, cursive","Small Capitals":"Arial Unicode Ms, Arial, Helvetica, Verdana, Marcellus SC, sans-serif; font-variant: small-caps"}),"object"==typeof a?this.fontFamily=r.override(this.fontFamily,a):"string"==typeof a&&-1!==Object.keys(this.fontFamily).indexOf(a)&&(t.fontFamily=this.fontFamily[a]))}this.save(i),this.sendNotification(Lo.SETTINGS_CHANGE,i)}},We.prototype.getSettings=function(){return Object.freeze(Object.assign({defaults:Object.assign({},this.defaults),change:this.change.bind(this)},this.settings))},We.prototype.save=function(e){this.settings=r.override(this.settings,e);try{localStorage.setItem(this.namespace,JSON.stringify(this.settings))}catch(t){}},i(Ze,M),Ze.prototype.execute=function(e){var t;null!=(t=this.facade.retrieveMediator(We.NAME))&&t.change(e.getBody())},i(Xe,Oe),Xe.prototype.playbackCoreName="audio",Xe.prototype.onRegister=function(){var e;e=new Pe("html5","audio"),this.sendNotification(Lo.PLAYBACK_CORE_CHANGE,e)},Xe.prototype.onRemove=function(){this.facade.createMediaElement()},Xe.prototype.canPlayMedium=function(e){return"audio"===e},Xe.prototype.canPlayType=function(e){return/audio/.test(e)?"maybe":/mpegURL/.test(e)&&(r.isIOS()||-1!==r.getSafariVersion())?"maybe":""},Qe.extractContentId=function(e,t){var i;return i=document.createElement("a"),i.href=r.arrayToString(e),i.hostname},Qe.extractServerUrl=function(e,t){return t.serverURL||t.serverUrl},Qe.requestCertificate=function(e){var t;return t={url:e.cert,responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}},r.request(t).then(function(e){return new Uint8Array(e.response)})},Qe.concatInitDataIdAndCertificate=function(e,t,i){var n,o,a,s,l,d;return"string"==typeof t&&(t=r.stringToArray(t)),d=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),a=new DataView(n),l=new Uint8Array(n,d,e.byteLength),l.set(e),d+=e.byteLength,a.setUint32(d,t.byteLength,!0),d+=4,s=new Uint16Array(n,d,t.length),s.set(t),d+=s.byteLength,a.setUint32(d,i.byteLength,!0),d+=4,o=new Uint8Array(n,d,i.byteLength),o.set(i),new Uint8Array(n,0,n.byteLength)},Qe.requestLicense=function(e,t,i,n){var o,a,s,l;if(a={url:i,method:"POST",responseType:"text",headers:{"Content-type":"application/x-www-form-urlencoded"},data:"spc="+r.base64EncodeUint8Array(e)+"&assetId="+encodeURIComponent(t)},null!=n.httpRequestHeaders){l=n.httpRequestHeaders;for(o in l)s=l[o],a.headers[o]=s}return"boolean"==typeof n.withCredentials&&(a.withCredentials=n.withCredentials),r.request(a).then(function(e){var t;return t=e.responseText.trim(),"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),r.base64DecodeUint8Array(t)})["catch"](function(e){throw"The license request failed."})},i(Je,ze),Je.NAME="ParamsProxy",Je.prototype.defaults={},Je.prototype.configurationName="params",Je.prototype.setData=function(e){var t,i;this.data={};for(t in e)i=e[t],this.data[t]=e[t];return this.data},i(Ke,Oe),Ke.prototype.playbackCoreName="dvr",Ke.prototype.interval=null,Ke.prototype.ondurationchange=function(e){this.updateDuration()},Ke.prototype.ontimeupdate=function(e){this.updateCurrentTime()},Ke.prototype.onplay=function(e){this.stopTimer(),Ke.__super__.onplay.call(this,e)},Ke.prototype.onplaying=function(e){this.stopTimer(),Ke.__super__.onplaying.call(this,e)},Ke.prototype.onpause=function(e){this.startTimer(),Ke.__super__.onpause.call(this,e)},Ke.prototype.canPlayTemporalType=function(e){return"dvr"===e},Ke.prototype.getDuration=function(){var e;return e=this.getMediaElement(),e.duration===1/0&&this.updateDuration(),this.data.duration},Ke.prototype.getStartTime=function(){return this.getMediaElement().seekable.start(0)},Ke.prototype.getFragmentDuration=function(){return 10},Ke.prototype.getLiveTime=function(){return this.getDuration()-this.getFragmentDuration()},Ke.prototype.isLive=function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()},Ke.prototype.seek=function(e){var t=this;return Ke.__super__.seek.call(this,e+this.getStartTime()).then(function(e){t.sendNotification(Lo.IS_LIVE,t.isLive())})},Ke.prototype.updateCurrentTime=function(){var e,t;t=this.getMediaElement().seekable,0!==t.length&&(e=this.getMediaElement().currentTime,this.data.currentTime=e-t.start(0),this.sendNotification(Lo.TIME_CHANGE,{currentTime:this.data.currentTime}),this.mediaProxy.setIsLive(this.isLive()))},Ke.prototype.updateDuration=function(){var e;e=this.getMediaElement().seekable,0!==e.length&&(this.data.duration=e.end(0)-e.start(0),this.sendNotification(Lo.CHANGE_DURATION,this.data.duration))},Ke.prototype.startTimer=function(){this.interval=setInterval(this.updateCurrentTime.bind(this),1e3)},Ke.prototype.stopTimer=function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null,this.updateCurrentTime())},i($e,puremvc.Proxy),$e.prototype.contextName=null,$e.prototype.contextData=null,$e.prototype.onRegister=function(){var e,t;null!=this.getContextName()&&(e=this.facade.player||this.facade,t=e.retrieveProxy(nt.NAME),t.registerContext(this))},$e.prototype.getContextName=function(){return this.contextName},$e.prototype.getContextData=function(){return this.contextData},i(et,$e),et.NAME="PlayerProxy",et.prototype.contextName="player",et.prototype.getPlaybackOrder=null,et.prototype.playbackCoreMap=null,et.prototype.defaultPlaybackCore=null,et.prototype.activePlaybackCore=null,et.prototype.onRegister=function(){et.__super__.onRegister.call(this),this.registerPlaybackCore(new Ke),this.registerPlaybackCore(this.defaultPlaybackCore),this.registerPlaybackCore(new Xe),this.activePlaybackCore=this.defaultPlaybackCore},et.prototype.ready=function(){var e;e="function"==typeof this.getPlaybackOrder?this.getPlaybackOrder(this.playbackCoreMap.map(function(e){return e.getPlaybackCoreName()})):void 0,null!=e&&(this.playbackCoreMap=this.playbackCoreMap.sort(function(t,i){return t=e.indexOf(t.getPlaybackCoreName()),i=e.indexOf(i.getPlaybackCoreName()),t===i?0:-1===t&&-1!==i?1:-1!==t&&-1===i?-1:t-i}))},et.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore},et.prototype.registerPlaybackCore=function(e){var t;t=e.getPlaybackCoreName(),null==e||this.playbackCoreMap.some(function(e){return e.getPlaybackCoreName()===t})||this.playbackCoreMap.push(e)},et.prototype.retrievePlaybackCore=function(e){var t,i,n,o;for(o=this.playbackCoreMap,i=0,n=o.length;n>i;i++)if(t=o[i],t.getPlaybackCoreName()===e)return t},et.prototype.removePlaybackCore=function(e){var t,i;return t=this.retrievePlaybackCore(e),null==t?null:(i=this.playbackCoreMap.indexOf(t),this.playbackCoreMap.splice(i,1),t)},et.prototype.setPlaybackCore=function(e){var t,i,n,o,r,a,s;for(s=this.playbackCoreMap,r=0,a=s.length;a>r;r++)if(t=s[r],t.canPlayMedium(e.medium)===!0&&t.canPlayTemporalType(e.temporalType)===!0&&""!==t.canPlayType(e.type)){n=t;break}if(null==n)throw i=new Error,i.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,i;return o=this.facade.retrieveProxy(Se.NAME),o!==n&&("function"==typeof o.destroy&&o.destroy(),this.facade.removeProxy(Se.NAME),this.facade.registerProxy(n),n.setData(o.getData())),this.activePlaybackCore=n,e},et.prototype.canPlayType=function(e){var t,i,n,o,r;for(r=this.playbackCoreMap,n=0,o=r.length;o>n;n++)if(i=r[n],t=i.canPlayType(e),""!==t)return t;return""},et.prototype.getContextData=function(){var e,t,i,n;return e=this.facade.retrieveProxy(qe.NAME),n=this.facade.retrieveProxy(Se.NAME),i=this.facade.retrieveProxy(tt.NAME),t=this.facade.getViewComponent(),{width:t.offsetWidth,height:t.offsetHeight,mode:"html5",autoplay:e.getAutoplay(),domain:e.getDomain(),name:e.getName(),currentTime:n.getCurrentTime(),duration:n.getDuration(),version:e.getVersion(),timecode:{duration:r.formatTimecode(i.getDuration()),currentTime:r.formatTimecode(n.getCurrentTime())}}},i(tt,$e),tt.NAME="MediaProxy",tt.prototype.contextName="media",tt.prototype.data=null,tt.prototype.value=null,tt.prototype.started=!1,tt.prototype.authorized=!0,tt.prototype.getContextData=function(){return this.data},tt.prototype.getData=function(){var e;return e=r.clone(tt.__super__.getData.call(this)),null==e.authorization&&(e.authorization=r.clone(this.facade.security.data)),e},tt.prototype.setData=function(e){return this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(Lo.MEDIA_SEQUENCE_ABORTED),this.started=!1,this.setAutoplay(e.autoplay),this.setType(e.type),this.setIsLive(e.isLive),this.setTemporalType(e.temporalType),null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.setTitle(e.title),this.setDuration(e.duration),this.setPoster(e.poster),this.setGUID(e.guid),this.setLink(e.link),this.setEmbed(e.embed),this.setWidth(e.width),this.setHeight(e.height),this.setCategory(e.category),this.setStartTime(e.startTime),this.setDescription(e.description),this.setStatus(e.status),this.setCategory(e.category),this.setMetadata(e.metadata),this.setAuthorization(e.authorization),this.setMedium(e.medium),this.setPubDate(e.pubDate),this.setTrack(e.track),this.setScenes(e.scenes),this.setKeys(e.keys),this.setCues(e.cues),this.setRestriction(e.restriction),this.data},tt.prototype.transform=function(e){var t,i,n,o,a,s,l,d,c;if(null==e.src&&(null!=(d=e.source)?d.length:void 0)>0&&(n=this.facade.retrieveProxy(et.NAME)||this.facade,null!=n&&(i=r.selectSource(e.source,function(e){return n.canPlayType(e)})),null!=(null!=i?i.src:void 0)&&""!==i.src&&(e.src=i.src,e.type=i.type)),null==e.type&&(e.type=r.getMimeType(e.src)),null==e.medium&&(e.medium=/audio/.test(e.type)?"audio":"video"),null==e.temporalType&&(e.temporalType="vod"),e.isLive="live"===e.temporalType||"dvr"===e.temporalType,null!=e.scenes)for(c=e.scenes,t=s=0,l=c.length;l>s;t=++s)o=c[t],o.start=isNaN(a=r.flattenTimecode(o.sceneStartTime))?0:a,o.end=isNaN(a=r.flattenTimecode(o.sceneEndTime))?0:a,o.title=o.sceneTitle||"",o.description=o.sceneDescription||"",o.position=t+1;return null==e.startTime&&(e.startTime=0),null==e.status&&(e.status={}),null==e.metadata&&(e.metadata={}),e.originalSrc=e.src,e},tt.prototype.updateData=function(e){var t,i;for(t in e)i=e[t],t in this.data&&(this.data[t]=i)},tt.prototype.getGUID=function(){return this.data.guid},tt.prototype.setGUID=function(e){return this.data.guid=e},tt.prototype.getLink=function(){return this.data.link},tt.prototype.setLink=function(e){return this.data.link=e},tt.prototype.getStartTime=function(){return this.data.startTime},tt.prototype.setStartTime=function(e){return this.data.startTime=e},tt.prototype.getEmbed=function(){return this.data.embed},tt.prototype.setEmbed=function(e){return this.data.embed=e},tt.prototype.getAutoplay=function(){return this.data.autoplay},tt.prototype.setAutoplay=function(e){return this.data.autoplay=e},tt.prototype.getPubDate=function(){return this.data.pubDate},tt.prototype.setPubDate=function(e){return this.data.pubDate=e},tt.prototype.getCategory=function(){return this.data.category},tt.prototype.setCategory=function(e){return this.data.category=e},tt.prototype.getStatus=function(){return this.data.status},tt.prototype.setStatus=function(e){return null==e&&(e={}),this.data.status=e},tt.prototype.getSrc=function(){return this.facade.security.createURL(this.data.src)},tt.prototype.setSrc=function(e){return this.data.src=e},tt.prototype.getType=function(){return this.data.type},tt.prototype.setType=function(e){return this.data.type=e},tt.prototype.getMedium=function(){return this.data.medium},tt.prototype.setMedium=function(e){return e!==this.data.medium?(this.data.medium=e,this.facade.retrieveProxy(ot.NAME).setMedium(e)):void 0},tt.prototype.getMetadata=function(){return this.data.metadata},tt.prototype.setMetadata=function(e){return this.data.metadata=e},tt.prototype.getSource=function(){return this.data.source},tt.prototype.setSource=function(e){return this.data.source=e},tt.prototype.getTrack=function(){return this.data.track},tt.prototype.setTrack=function(e){return this.data.track=e},tt.prototype.getTitle=function(){return this.data.title},tt.prototype.setTitle=function(e){return this.data.title=e},tt.prototype.getWidth=function(){return this.data.width},tt.prototype.setWidth=function(e){return this.data.width=e},tt.prototype.getHeight=function(){return this.data.height},tt.prototype.setHeight=function(e){return this.data.height=e},tt.prototype.getDescription=function(){return this.data.description},tt.prototype.setDescription=function(e){return this.data.description=e},tt.prototype.getCategory=function(){return this.data.category},tt.prototype.setCategory=function(e){return this.data.category=e},tt.prototype.getDuration=function(e){return this.data.duration},tt.prototype.setDuration=function(e){var t;if(0!==e&&"live"!==this.data.temporalType&&(t=navigator.userAgent,1!==e||!/Android/.test(t)||/Android.*Chrome/.test(t)))return e!==this.data.duration&&(this.data.duration=e,this.sendNotification(Lo.TIME_CHANGE,{duration:e})),e===1/0&&this.setTemporalType("live"),e},tt.prototype.getPoster=function(e){return this.data.poster},tt.prototype.setPoster=function(e){this.data.poster=e},tt.prototype.getIsLive=function(){return this.data.isLive},tt.prototype.setIsLive=function(e){return e!==this.data.isLive?(this.data.isLive=e,
this.sendNotification(Lo.IS_LIVE,e),e):void 0},tt.prototype.getTemporalType=function(){return this.data.temporalType||"vod"},tt.prototype.setTemporalType=function(e){var t;e!==this.data.temporalType&&(t=this.data.temporalType,this.data.temporalType=e,this.sendNotification(Lo.TEMPORAL_TYPE_CHANGE,{previous:t,value:e}))},tt.prototype.getScenes=function(){return this.data.scenes},tt.prototype.setScenes=function(e){return this.data.scenes=e},tt.prototype.getCues=function(){return this.data.cues},tt.prototype.setCues=function(e){return null==e&&(e=[]),this.data.cues!==e?(this.data.cues=e,this.sendNotification(Lo.CUES_CHANGE,e),e):void 0},tt.prototype.getScene=function(e){var t,i,n,o,r;if(null!=this.data.scenes)for(r=this.data.scenes,t=n=0,o=r.length;o>n;t=++n)if(i=r[t],i.start<=e&&e<i.end)return i},tt.prototype.getKeys=function(){return this.data.keys},tt.prototype.setKeys=function(e){this.data.keys=e},tt.prototype.getAuthorization=function(){return this.data.authorization},tt.prototype.setAuthorization=function(e){this.data.authorization=e},tt.prototype.getRestriction=function(){return this.data.restriction},tt.prototype.setRestriction=function(e){null==e&&(e=[]),this.data.restriction=e},i(it,puremvc.Proxy),it.NAME="SecurityProxy",it.prototype.authorized=!0,it.prototype.timeout=null,it.prototype.setupHDN1=function(){var e=this;return window.retrieveToken=function(t,i){var n;try{e.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",t,i),n=e.getToken(),null!=n?e.facade.getMediaElement().tokenRetrievalSuccess("&primaryToken="+n):e.sendNotification(Oo.AUTHORIZE)}catch(o){e.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",o)}return!0}},it.prototype.setMedia=function(e){var t;this.setSession(null),t="blocked"!==e.status.state&&0===e.restriction.length,this.setAuthorized(t),this.setAuthorization(e.authorization)},it.prototype.authorize=function(e){this.setAuthorization(e),this.sendNotification(Oo.AUTHORIZED,e)},it.prototype.getAuthorization=function(){return this.data},it.prototype.setAuthorization=function(e){return null!=(null!=e?e.token:void 0)&&this.setAuthorized(!0),this.data=e||{},null!=this.data.expiration&&this.setExpiration(this.data.expiration),e},it.prototype.getKey=function(){return this.data.key},it.prototype.setKey=function(e){return this.data.key=e,e},it.prototype.getToken=function(){return this.data.token},it.prototype.setToken=function(e){return this.data.token=e,e},it.prototype.getExpiration=function(){return this.data.expiration},it.prototype.setExpiration=function(e){return this.data.expiration=e,this.data.expiration>Date.now()&&this.startTimeout(),e},it.prototype.startTimeout=function(){var e=this;r.getUTC().then(function(t){var i;return i=function(){e.sendNotification(Oo.AUTHORIZATION_EXPIRED),e.sendNotification(Oo.AUTHORIZE,{media:e.facade.getMedia()})},e.timeout=setTimeout(i,e.getExpiration()-t)})},it.prototype.stopTimeout=function(){clearTimeout(this.timeout)},it.prototype.getSecret=function(){var e;return null==this.data.token?null:(e="",null!=this.data.token&&(e=""+this.data.token),null!=this.data.key&&(e=""+this.data.key+"="+e),e)},it.prototype.createURL=function(e){var t;return t=this.getSecret(),null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e},it.prototype.getAuthorized=function(){return this._authorized},it.prototype.setAuthorized=function(e){return this.stopTimeout(),this._authorized=e,e},it.prototype.getSession=function(){return this.session},it.prototype.setSession=function(e){return this.session=e,e};var Vo={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"};i(nt,puremvc.Proxy),nt.NAME="DataBindingProxy",nt.prototype.contextMap=null,nt.prototype.configurationMap=null,nt.prototype.paramsProxy=null,nt.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(Je.NAME),this.update()},nt.prototype.registerContext=function(e){null!=e&&(this.contextMap[e.getContextName()]=e)},nt.prototype.retrieveContext=function(e){return this.contextMap[e]},nt.prototype.removeContext=function(e){var t;return t=this.contextMap[e],delete this.contextMap[e],t},nt.prototype.registerConfiguration=function(e){null!=e&&(this.configurationMap[e.getConfigurationName()]=e,e.compile(this.context,!0))},nt.prototype.retrieveConfiguration=function(e){return this.configurationMap[e]},nt.prototype.removeConfiguration=function(e){var t;return t=this.configurationMap[e],delete this.configurationMap[e],t},nt.prototype.update=function(e){var t,i,n,o,r,a;this.data.now=Date.now(),r=this.contextMap;for(n in r)t=r[n],-1!==(null!=e&&"function"==typeof e.indexOf?e.indexOf(n):void 0)&&(this.data[n]=t.getContextData());this.paramsProxy.compile(this.data),a=this.paramsProxy.value;for(i in a)o=a[i],this.data[i]=o;return this.data},nt.prototype.compile=function(e,t){var i,n,o,r,a;null==t&&(t=!1),this.update(e),n=this.data,r=this.paramsProxy.getConfigurationName(),a=this.configurationMap;for(o in a)i=a[o],o!==r&&i.compile(n,t)};var Go={FLASH:"flash",HTML:"html"},Bo={ACTIVE:"active",INACTIVE:"inactive"},Ho={TIME:"time",SEEK:"seek",MEDIA:"media",AD_REQUEST:"adrequest",PLAY_STATE:"playstate",ERROR:"error"},Uo={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"};i(ot,puremvc.Proxy),ot.NAME="ApplicationStateProxy",ot.prototype.displayState=Ro.NORMAL,ot.prototype.playState=null,ot.prototype.renderMode=null,ot.prototype.activeState=null,ot.prototype.seeking=!1,ot.prototype.seekrequested=!1,ot.prototype.waiting=!1,ot.prototype.busy=!1,ot.prototype.isUserActive=!1,ot.prototype.device=null,ot.prototype.volume=1,ot.prototype.playbackTarget="amp",ot.prototype.hasPostContent=!1,ot.prototype.locked=!1,ot.prototype.mediaElement=null,ot.prototype.hidden=!1,ot.prototype.ended=!1,ot.prototype.buffering=!1,ot.prototype.time=null,ot.prototype.playbackRate=1,ot.prototype.getHasPostContent=function(){return this.hasPostContent},ot.prototype.setHasPostContent=function(e){this.hasPostContent=e},ot.prototype.getEnded=function(){return this.ended},ot.prototype.setEnded=function(e){this.ended=e,this.ended===!0&&this.seeking===!0&&(this.seeking=!1)},ot.prototype.getDisplayState=function(){return this.displayState},ot.prototype.setDisplayState=function(e){var t;e!==this.displayState&&(t=this.displayState,this.displayState=e,this.sendNotification(Lo.DISPLAY_STATE_CHANGE,{previous:t,value:this.displayState}))},ot.prototype.getPlayState=function(){return this.playState},ot.prototype.setPlayState=function(e){var t,i=this;this.getWaiting()===!0&&this.setWaiting(!1),e!==this.playState&&(t=this.playState,this.playState=e,this.facade.transform(Ho.PLAY_STATE,this.playState).then(function(n){switch(i.sendNotification(Lo.PLAY_STATE_CHANGE,{previous:t,value:i.playState}),e){case Vo.PLAYING:return i.sendNotification(Lo.DISPATCH_EVENT,new s("playing"))}})["catch"](function(e){return i.sendNotification(Lo.ERROR,e)}))},ot.prototype.getDevice=function(){return this.device},ot.prototype.getSeeking=function(){return this.seeking},ot.prototype.setSeeking=function(e){e!==this.seeking&&(this.seeking=e,this.seeking===!1&&this.playState===Vo.PAUSED&&this.getWaiting()===!0&&this.setWaiting(!1))},ot.prototype.getSeekRequested=function(){return this.seekrequested},ot.prototype.setSeekRequested=function(e){e!==this.seekrequested&&(this.seekrequested=e)},ot.prototype.getWaiting=function(){return this.waiting},ot.prototype.setWaiting=function(e){var t,i,n,o=this;e!==this.waiting&&(this.waiting=e,n=this.waiting===!0?Lo.ADD_APPLICATION_STATE:Lo.REMOVE_APPLICATION_STATE,this.sendNotification(n,Vo.WAITING),this.waiting===!0&&(i=this.facade.getMediaElement(),t=function(e){o.facade.removeEventListener("playing",t),o.facade.removeEventListener("canplaythrough",t),o.facade.removeEventListener("ended",t),o.setWaiting(!1)},this.facade.addEventListener("playing",t),this.facade.addEventListener("canplaythrough",t),this.facade.addEventListener("ended",t)))},ot.prototype.getBusy=function(){return this.busy},ot.prototype.setBusy=function(e){e!==this.busy&&(this.busy=e,this.sendNotification(Lo.DISPATCH_EVENT,new s("busy",e)))},ot.prototype.getLocked=function(){return this.locked},ot.prototype.setLocked=function(e){this.locked=e},ot.prototype.getBuffering=function(){return this.buffering},ot.prototype.setBuffering=function(e){this.buffering=e},ot.prototype.getIsUserActive=function(){return this.isUserActive},ot.prototype.setIsUserActive=function(e){e!==this.isUserActive&&(this.isUserActive=e)},ot.prototype.getRenderMode=function(){return this.renderMode},ot.prototype.setRenderMode=function(e){e!==this.renderMode&&(this.renderMode=e)},ot.prototype.getMedium=function(){return this.medium},ot.prototype.setMedium=function(e){var t;e!==this.medium&&(t=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=e,this.sendNotification(Lo.MEDIUM_CHANGE,{previous:t,value:"medium-"+this.medium}))},ot.prototype.getVolume=function(){return this.volume},ot.prototype.setVolume=function(e){return e!==this.volume?this.volume=e:void 0},ot.prototype.getPlaybackTarget=function(){return this.playbackTarget},ot.prototype.setPlaybackTarget=function(e){var t;e!==this.playbackTarget&&(t=this.playbackTarget,this.playbackTarget=e,"amp"!==e?this.getPlayState()!==Vo.PAUSED&&this.facade.pause():this.getPlayState()===Vo.PLAYING&&this.facade.play(),this.sendNotification(Lo.PLAYBACK_TARGET_CHANGE,{previous:t,value:this.playbackTarget}))},ot.prototype.getActiveState=function(){return this.activeState},ot.prototype.setActiveState=function(e){var t;e!==this.activeState&&(t=this.activeState,this.activeState=e,this.sendNotification(Lo.ACTIVE_STATE_CHANGE,{previous:t,value:this.activeState}))},ot.prototype.getMediaElement=function(){return this.mediaElement},ot.prototype.setMediaElement=function(e){var t;e!==this.mediaElement&&(t=this.mediaElement,this.mediaElement=e,this.sendNotification(Lo.MEDIA_ELEMENT_CHANGE,{previous:t,value:this.mediaElement}))},ot.prototype.getHidden=function(){return this.hidden},ot.prototype.setHidden=function(e){var t;e!==this.hidden&&(t=this.hidden,this.hidden=e,this.sendNotification(Lo.HIDDEN_CHANGE,{previous:t,value:this.hidden}))},ot.prototype.getCurrentTime=function(){return this.time.currentTime},ot.prototype.setCurrentTime=function(e){e===this.time.currentTime||0>e||(this.time.currentTime=e,this.sendNotification(Lo.TIME_UPDATE,e))},ot.prototype.getDuration=function(){return this.time.duration},ot.prototype.setDuration=function(e){e!==this.time.duration&&(this.time.duration=e,this.sendNotification(Lo.DURATION_CHANGE,e))},ot.prototype.getPlaybackRate=function(){return this.playbackRate},ot.prototype.setPlaybackRate=function(e){e!==this.playbackRate&&(this.playbackRate=e)},i(rt,tt),rt.NAME="MediaProxy",rt.prototype.setSource=function(e){return null==e||e.length<1?void 0:(e=e.filter(function(e){return"external"===e.type}),rt.__super__.setSource.call(this,e))},i(at,puremvc.Proxy),at.NAME="PlaybackProxy",at.prototype.src=null,at.prototype.getPlaybackCoreName=function(){return"external"},at.prototype.canPlayType=function(e){return"external"===e},at.prototype.canPlayTemporalType=function(e){return!0},at.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()},at.prototype.play=function(){window.open(this.getSrc(),"_blank")},at.prototype.load=function(){},at.prototype.setVolume=function(){},at.prototype.pause=function(){},at.prototype.setEnabled=function(){},at.prototype.getCurrentTime=function(){return 0},at.prototype.setCurrentTime=function(e){},at.prototype.getDuration=function(){return 0};var Fo={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek",SEEKED:"userseeked",GO_LIVE:"usergolive"};i(st,ze),st.NAME=_.NAME,st.prototype.enabled=!0,st.prototype.plugin=null,st.prototype.appState=null,st.prototype.getDefaults=function(){var e;return e=st.__super__.getDefaults.call(this),null==e.debug&&(e.debug=null),e},st.prototype.initializeNotifier=function(e){st.__super__.initializeNotifier.call(this,e),this.appState=this.facade.player.appState},st.prototype.getMediaElement=function(){return this.facade.player.getMediaElement()},st.prototype.setEnabled=function(e){return this.enabled=e,e},st.prototype.getEnabled=function(){return this.enabled},st.prototype.getDebug=function(){return null!=this.value.debug?this.value.debug:this.facade.player.getConfig().debug===!0},st.prototype.createPlugin=function(){},st.prototype.initialize=function(){this.plugin=this.createPlugin()},st.prototype.error=function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)};var jo={PREFIX:"akamai-"};i(lt,E),lt.prototype.player=null,lt.prototype.proxy=null,lt.prototype.initialize=function(e,t){this.player=t,this.logger=this.player.logger,lt.__super__.initialize.call(this,e,t)},lt.prototype.isAvailable=function(){return!0},lt.prototype.loadModuleResources=function(){return this.isAvailable()?lt.__super__.loadModuleResources.call(this):Promise.resolve()},lt.prototype.resourcesLoaded=function(){"function"==typeof this.oninitialized&&this.oninitialized(this)},lt.prototype.onRegister=function(){var e;this.isAvailable()&&(this.createFramework(),null!=(e=this.retrieveProxy(st.NAME))&&"function"==typeof e.initialize&&e.initialize()),this.performance.ready=Date.now(),this.sendNotification(Uo.PLUGIN_REGISTERED,this)},lt.prototype.logEvent=function(e){var t;/(timeupdate|timeremaining)/.test(e.type)!==!0&&(t=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},lt.prototype.listNotificationPublications=function(){var e,t,i;return t=[Lo.ADD_LAYER,Lo.REMOVE_LAYER,Lo.ADD_OVERLAY,Lo.REMOVE_OVERLAY,Lo.ADD_APPLICATION_STATE,Lo.REMOVE_APPLICATION_STATE,Lo.IS_USER_ACTIVE,Lo.PLAYBACK_CORE_CHANGE],t.concat(function(){var t;t=[];for(e in Uo)i=Uo[e],t.push(i);return t}())},i(dt,M),dt.prototype.execute=function(e){this.applicationState.setPlayState(e.getBody())},i(ct,M),ct.prototype.execute=function(e){var t;try{t=this.media.setData(e.getBody())}catch(i){return void this.sendNotification(Lo.ERROR,i.message)}this.sendNotification(Lo.UPDATE_DATA_BINDINGS),t=this.media.getData(),this.security.setMedia(t),this.security.getAuthorized()?this.sendNotification(Oo.AUTHORIZED,this.security.getAuthorization()):this.sendNotification(Oo.AUTHORIZE,{media:t})},i(ut,M),ut.prototype.execute=function(e){var t,i,n=this;t=e.getBody(),this.applicationState.setBuffering(!1),this.applicationState.setEnded(!1),this.playback.setEnabled(!1),this.playback.pause(),null!=(i=this.tracks)&&i.clear(),this.sendNotification(Lo.HAS_POST_CONTENT,!1),this.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.READY),this.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),t=this.media.transform(t),this.facade.transform(Ho.MEDIA,t).then(function(e){return n.sendNotification(Lo.CHANGE_MEDIA,e)})["catch"](function(e){return n.sendNotification(Lo.ERROR,e)})},i(pt,k),pt.prototype.execute=function(e){var t,i;t=e.getBody(),this.playerCore.setPlaybackCore(t),i=this.playerCore.getActivePlaybackCore()||this.player.playback,i.reset(),i.setCurrentTime(t.startTime||0),pt.__super__.execute.call(this,e)},i(ht,M),ht.prototype.execute=function(e){var t;t=e.getBody(),this.media.getDuration()!==t&&this.media.setDuration(t)},i(gt,k),gt.prototype.execute=function(e){var t,i=this;t=function(e){var t;i.playback.destroy(),t=i.playback.getMediaElement(),Ye.clear(t),i.logger.error("[AMP ERROR]",e),i.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.ERROR),i.facade.error=e,i.dispatchEvent(Events.ERROR,e)},this.facade.transform(Ho.ERROR,e.getBody()).then(function(e){return null!=e?t(e):void 0})["catch"](function(e){return t(e)})},i(ft,k),ft.prototype.execute=function(e){var t,i,n=this;t=null!=(i=this.facade.config)?i.volume:void 0,null!=t&&this.sendNotification(Lo.CHANGE_VOLUME,t),this.playerCore.ready(),this.facade.config.autoplay===!0&&this.sendNotification(Lo.ADD_APPLICATION_STATE,"autoplay"),this.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL),this.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.READY),this.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),this.facade.performance.ready=Date.now(),je.track("ready",this.facade.performance.ready-this.facade.performance.init),this.dispatchEventAfterCommand(e).then(function(){var e,t;return e=null!=(t=n.facade.config)?t.media:void 0,null!=e?n.sendNotification(Lo.SET_MEDIA,e):void 0})},i(mt,M),mt.prototype.execute=function(e){var t;t=e.getBody()||{},this.bindings.compile(t.contexts,t.suppressErrors)},i(yt,M),yt.prototype.execute=function(e){this.params.setData(e.getBody()),this.sendNotification(Lo.UPDATE_DATA_BINDINGS,{suppressErrors:!0})},i(At,Me),At.prototype.componentName="overlays",At.NAME="OverlayLayerMediator",At.prototype.createMediatorName=function(){return At.NAME},At.prototype.listNotificationInterests=function(){return[Lo.ADD_OVERLAY,Lo.REMOVE_OVERLAY]},At.prototype.handleNotification=function(e){var t,i;switch(t=e.getName(),i=e.getBody(),t){case Lo.ADD_OVERLAY:this.viewComponent.appendChild(i);break;case Lo.REMOVE_OVERLAY:this.viewComponent.removeChild(i)}},i(vt,puremvc.Mediator),vt.NAME="PluginAdapter",vt.prototype.plugins=null,vt.prototype.registered=null,vt.prototype.onRegister=function(){return vt.__super__.onRegister.call(this)},vt.prototype.listNotificationInterests=function(){return[Uo.REGISTER_PLUGINS,Uo.PLUGIN_REGISTERED]},vt.prototype.handleNotification=function(e){var t,i,n,o,r,a,s,l,d,c,u,p,h=this;switch(s=e.getName(),t=e.getBody(),s){case Uo.REGISTER_PLUGINS:c=this.facade.getPlayerType(),i=t,p=xt.plugins;for(a in p)if(u=p[a],a in i&&(o=i[a],null!=o&&o.enabled!==!1))if(n=u[c],null!=n)try{l=new n,l.oninitialized=this.onplugininitialized.bind(this,a),l.onerror=this.onpluginerror.bind(this,a),r=l.initialize.bind(l,o,this.facade),this.plugins.push(r)}catch(g){this.logger.error("[AMP] Plugin could not be created: "+a+". "+g);continue}else this.facade.logger.debug("[AMP] Plugin could not be found: "+a);d=i.plugins||{};for(a in d)o=d[a],null!=o&&o.enabled!==!1&&(r=function(e,t,i,o,r){return h.facade.loadResources(t.resources).then(function(){return n=xt.plugins[i][c],null==n&&r("[AMP] Plugin could not be found: "+i),n(e,t,i)}).then(o)["catch"](r)},this.plugins.push(r.bind(null,this.facade,o,a,this.onpluginregistered.bind(this,a),this.onpluginerror.bind(this,a))));this.plugins.forEach(function(e){return e()});break;case Uo.PLUGIN_REGISTERED:this.onpluginregistered(t.getModuleName(),t)}},vt.prototype.initializedCheck=function(){this.registered===this.plugins.length&&this.sendNotification(Uo.PLUGINS_INITIALIZED,this.plugins)},vt.prototype.onplugininitialized=function(e,t){t.oninitialized=null,t.onerror=null,this.facade.registerModule(t)},vt.prototype.onpluginerror=function(e,t){this.registered++,this.facade.logger.error("[AMP] Plugin could not be registered: "+e),this.facade.logger.error(t),this.initializedCheck()},vt.prototype.onpluginregistered=function(e,t){var i;this.registered++,this.facade.logger.debug("[AMP] Plugin registered: "+e),this.facade[e]=t,i=("function"==typeof t.getFeatureName?t.getFeatureName():void 0)||t.feature,null!=i&&(this.facade[i]=t),this.initializedCheck()},_t.prototype.element=null,_t.prototype.prefix=jo.PREFIX,_t.prototype.contains=function(e){return this.constructor.contains(e,this.element,this.prefix)},_t.prototype.add=function(e){this.constructor.add(e,this.element,this.prefix)},_t.prototype.remove=function(e){this.constructor.remove(e,this.element,this.prefix)},_t.prototype.toggle=function(e){return this.constructor.contains(e,this.element,this.prefix)},_t.contains=function(e,t,i){var n,o;return null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.contains:void 0)?t.classList.contains(n):-1!==t.className.indexOf(n)},_t.add=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.add:void 0)?t.classList.add(n):this.contains(e,t)||(""!==t.className?t.className+=" "+n:t.className=n)},_t.remove=function(e,t,i){var n,o,r;null==i&&(i=""),n=i+e,null!=(null!=(r=t.classList)?r.remove:void 0)?t.classList.remove(n):this.contains(e,t)&&(o=new RegExp(" ?"+n),t.className=t.className.replace(o,""))},_t.toggle=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.toggle:void 0)?t.classList.toggle(this.prefix+e):this.contains(e,t)?this.remome(e,t):this.add(e,t)},i(Et,$e),Et.NAME="LocalizationProxy",Et.prototype.contextName="l10n",Et.prototype.locale=null,Et.prototype.localeId=null,Et.prototype.onRegister=function(){Et.__super__.onRegister.call(this),this.setLocale(this.data.language)},Et.prototype.getContextData=function(){return this.locale},Et.prototype.getLanguage=function(){return this.data.language},Et.prototype.setLanguage=function(e){var t=this;return this.setLocale(e).then(function(){t.data.language=e,t.sendNotification(Lo.LANGUAGE_CHANGE,e)}),e},Et.prototype.setLocale=function(e){var t=this;return new Promise(function(i,n){var o,a,s;return o=function(){t.localeId=s,t.locale=t.facade.l10n=t.data.locales[s],i()},s=e,a=t.data.locales[s],null==a&&(s=e.substring(0,2),a=t.data.locales[s]),"string"==typeof a?xt.addResource({src:t.facade.evaluatePaths(a),type:r.mimeTypes.json}).then(function(e){return t.data.locales[s]=e.data,o()}):o()})},Et.prototype.getLocaleId=function(){return this.localeId},Et.prototype.getLocales=function(){return this.data.locales},Et.prototype.setLocales=function(e){return this.data.locales=e,e},Et.prototype.getString=function(e,t){var i,n;try{return i=this.locale||this.data.locales.en,n=i[e]||e,null!=t&&(n=Ue.evaluateBindings(n,t)),n}catch(o){return""}},Et.prototype.getLanguageString=function(e){var t,i;return"string"!=typeof e||null==e||""===e?"":(t="MSG_"+e.toUpperCase(),i=this.getString(t),""===i&&(e=e.split("-").shift(),t="MSG_"+e.toUpperCase(),i=this.getString(t)),i)},bt.create=function(e,t,i,n){var o,r,a,s,l;if(null==i&&(i="div"),"string"==typeof i&&(i=document.createElement(i)),o=new _t(i),null!=e)for("string"==typeof e&&(e=[e]),s=0,l=e.length;l>s;s++)r=e[s],o.add(r);return i._classList=o,null!=n&&(null!=i.innerText?i.innerText=n:i.textContent=n),null!=t&&(null!=t.getViewComponent&&(a=t.getViewComponent()),null!=a&&(t=a),t.appendChild(i)),i},bt.bindEvents=function(e,t,i){var o,r;null==i&&(i=["onRemove","onRegister"]);for(o in t)r=t[o],n.call(i,o)>=0||!/^on/.test(o)||null==(null!=r?r.bind:void 0)||(e[o]=r.bind(t))},i(Ct,k),Ct.prototype.execute=function(e){this.sendNotification(Lo.PLAY_REQUEST),this.playback.play(),Ct.__super__.execute.call(this,e)},i(St,be),St.prototype.playerType="external",St.prototype.createModel=function(){var e;St.__super__.createModel.call(this),this.registerProxy(new Et(this.config)),e=new at,this.registerProxy(e),this.playerCore=new et(e),this.registerProxy(this.playerCore),this.bindings.initialize()},St.prototype.createView=function(){var e,t=this;this.registerMediator(new xe("external",this.getViewComponent())),this.registerMediator(new vt),e=new At,this.registerMediator(e),Ye.create(e.viewComponent,Ye.CLICK,function(){return t.sendNotification(Lo.TOGGLE_ACTIVE)})},St.prototype.createController=function(){St.__super__.createController.call(this),this.registerCommand(Lo.UPDATE_DATA_BINDINGS,mt),this.registerCommand(Fo.TOGGLE_PLAY_PAUSE,Ct),this.registerCommand(Lo.PLAY,Ct),this.registerCommand(Lo.CHANGE_PLAY_STATE,dt),this.registerCommand(Lo.SET_MEDIA,ut),this.registerCommand(Lo.CHANGE_MEDIA,ct),this.registerCommand(Lo.MEDIA_CHANGE,pt),this.registerCommand(Lo.MEDIA_VALIDATED,B),this.registerCommand(Lo.ERROR,gt),this.registerCommand(Uo.PLUGINS_INITIALIZED,P),this.registerCommand(Lo.READY,ft),this.registerCommand(Lo.CHANGE_PARAMS,yt)},St.prototype.createMediaElement=function(){return document.createElement("div")},St.prototype.canPlayType=function(e){return"maybe"},St.prototype.play=function(){this.sendNotification(Lo.PLAY)},St.prototype.setParams=function(e){return this.sendNotification(Lo.CHANGE_PARAMS,e),e},St.prototype.getParams=function(){return this.retrieveProxy(Je.NAME).getData()},St.prototype.setAutoplay=function(e){return!1},St.prototype.getAutoplay=function(){return!1},St.prototype.setLoop=function(e){return!1},St.prototype.getLoop=function(){return!1},St.prototype.setMuted=function(e){return!1},St.prototype.getMuted=function(){return!1},St.prototype.setMedia=function(e){return this.sendNotification(Lo.SET_MEDIA,e),e},St.prototype.getMedia=function(e){var t;return null!=(t=this.retrieveProxy(tt.NAME))?t.getData():void 0},St.prototype.setCurrentTime=function(e){return 0},St.prototype.getCurrentTime=function(e){return 0},St.prototype.getDuration=function(e){return this.retrieveProxy(tt.NAME).getDuration()},St.prototype.setSrc=function(e){return this.sendNotification(Lo.SET_MEDIA,{src:e}),e},St.prototype.getSrc=function(e){return this.retrieveProxy(tt.NAME).getSrc()},St.prototype.setSource=function(e){return this.sendNotification(Lo.SET_MEDIA,{source:e}),e},St.prototype.getSource=function(){return this.retrieveProxy(tt.NAME).getSource()},St.prototype.setVolume=function(e){return e},St.prototype.getVolume=function(e){return 1},St.prototype.getSeeking=function(){return!1},St.prototype.getPaused=function(){return!1},St.prototype.getEnded=function(){return!1},Nt.prototype.getFeed=function(e){return r.getFeed(e)},Nt.prototype.getMediaNode=function(e,t,i){var n,o,r,a;return null==i&&(i=!0),r="media-"+t,n=e["media-group"]||e,o=n["media-content"],null!=o&&null!=o[r]?a=o[r]:null!=n[r]?a=n[r]:null!=e[r]?a=e[r]:null!=e[t]&&i&&(a=e[t]),a},Nt.prototype.createEmbed=function(e){var t,i,n,o,r,s;try{if(t=this.getMediaNode(e,"embed"),null==t)return i;for(i={},i.url=t["@attributes"].url,i.width=t["@attributes"].width,i.height=t["@attributes"].height,i.params={},t["media-param"]instanceof Array||(t["media-param"]=[t["media-param"]]),s=t["media-param"],o=0,r=s.length;r>o;o++)n=s[o],i.params[n["@attributes"].name]=n["#text"]}catch(l){a.error("[AMP Feed Parse Error] embed parse error: "+l.message,l)}return i},Nt.prototype.createFeed=function(e){var t,i,n,o,r,s,l,d,c;try{if(t=e.channel,i=new y,null!=t){for(i.title=t.title,i.description=t.description,i.language=t.language,i.category=t.category,i.pubDate=new Date(Date.parse(t.pubDate)),i.ttl=t.ttl,o=t.item instanceof Array?t.item:[t.item],d=0,c=o.length;c>d;d++)n=o[d],s=this.createMedia(n),i.item.push(s);for(r in t)l=t[r],r in i||(i.metadata[r]=l)}}catch(u){a.error("[AMP Feed Parse Error] feed parse error: "+u.message,u)}return i},Nt.prototype.createMedia=function(e){var t,i,n,o,r,s,l,d,c,u,p,h,g,f,m,y,A,v,_,E,b,C,S;try{if(l=new It,s=this.getMediaNode(e,"content"),s instanceof Array)for(l.source=[],g=0,A=s.length;A>g;g++)n=s[g],u={src:n["@attributes"].url,type:n["@attributes"].type},i=n["media-category"],null!=i&&(t=i["@attributes"],"http://mrss.akamai.com/user_agent_hint"===t.schema&&(r=t.label||i["#text"],null!=r&&""!==r&&(null==u.rules&&(u.rules=[]),u.rules.push(r)))),l.source.push(u),l.medium=n["@attributes"].medium,l.duration=parseFloat(n["@attributes"].duration);else l.type=s["@attributes"].type,l.src=s["@attributes"].url,l.medium=s["@attributes"].medium,l.duration=parseFloat(s["@attributes"].duration);if(l.guid=e.guid,l.title=this.getMediaNode(e,"title"),l.link=e.link,l.description=this.getMediaNode(e,"description"),l.pubDate=new Date(Date.parse(e.pubDate)),l.thumbnail=l.poster=null!=(b=this.getMediaNode(e,"thumbnail"))&&null!=(C=b["@attributes"])?C.url:void 0,l.embed=this.createEmbed(e),l.scenes=null!=(S=this.getMediaNode(e,"scenes"))?S["media-scene"]:void 0,d=this.getMediaNode(e,"status",!1),null!=d&&(l.status={state:d["@attributes"].state,reason:d["@attributes"].reason}),d=this.getMediaNode(e,"restriction",!1),null!=d)for(d instanceof Array||(d=[d]),l.restriction=[],f=0,v=d.length;v>f;f++)c=d[f],l.restriction.push({relationship:c["@attributes"].relationship,type:c["@attributes"].type,value:c["#text"].split(" ")});if(l.category=e.category,l.category instanceof Array||(l.category=[l.category]),d=this.getMediaNode(e,"category",!1),null!=d)for(m=0,_=d.length;_>m;m++)i=d[m],null!=i["#text"]&&""!==i["#text"]&&l.category.push(i["#text"]);if(null!=l.category&&l.category.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:t>e?-1:0}),d=this.getMediaNode(e,"subTitle"),null!=d)for(null==l.track&&(l.track=[]),d instanceof Array||(d=[d]),y=0,E=d.length;E>y;y++)p=d[y],null!=p["@attributes"]&&l.track.push({src:p["@attributes"].href,type:p["@attributes"].type,kind:"captions",srclang:p["@attributes"].lang||"en"});i=e.category,i instanceof Array||(i=[i]),l.isLive="live"===e.temporalType||null!=i&&-1!==i.join(",").indexOf("live_stream"),l.temporalType=l.isLive?"live":e.temporalType||"vod";for(o in e)h=e[o],o in l||(l.metadata[o]=h)}catch(N){a.error("[AMP Feed Parse Error] media parse error: "+N.message,N)}return l},i(It,A),It.prototype.source=null,It.prototype.title=null,It.prototype.description=null,It.prototype.link=null,It.prototype.guid=null,It.prototype.pubDate=null,It.prototype.poster=null,It.prototype.thumbnail=null,It.prototype.embed=null,It.prototype.category=null,It.prototype.type=null,It.prototype.medium=null,It.prototype.duration=null,It.prototype.track=null,It.prototype.metadata=null,It.prototype.scenes=null,It.prototype.startTime=null,It.DEFAULT={src:r.blankVideo(),type:r.mimeTypes.mp4,temporalType:"vod",medium:"video"},wt.prototype.id=null,wt.prototype.startTime=null,wt.prototype.endTime=null,wt.prototype.text=null,wt.prototype.html=null,wt.prototype.align=null;var zo={REGISTER_FEATURE:"registerfeature"};Tt.prototype.parse=function(e,t){var i,n,o,s,l,d,c,u,p,h,g;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),h=0,g=n.length;g>h;h++){i=n[h],d=i.split("\n");try{l=d[0],p=d[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1),c=r.flattenTimecode(p[0]),s=r.flattenTimecode(p[1]),u=d.slice(2)}catch(f){a.instance.warn("SRT Parsing Warning")}o=new wt(c,s,"cue_"+l),o.html="<p>"+u.join("<br />")+"</p>",o.text=u.join("\n"),e.cues.push(o)}return e},Pt.prototype.parse=function(e,t){var i,n,o,s,l,d,c,u,p,h,g,f;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),l=0,/^WEBVTT/.test(n[0])&&n.shift(),g=0,f=n.length;f>g;g++)if(i=n[g],""!==i){d=i.trim().split("\n");try{l=/^[0-9]+$/.test(d[0])?d.shift():++l,h=d[0].match(/([0-9:\.]+)\s*-->\s*([0-9:\.]+)([^\n]*)/).slice(1),c=h[2],u=r.flattenTimecode(h[0]),s=r.flattenTimecode(h[1]),p=d.slice(1),o=new wt(u,s,"cue_"+l),o.html="<p>"+p.join("<br />")+"</p>",o.text=p.join("\n"),null!=c&&c.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g,function(e,t,i){return o[t]=i,""}),e.cues.push(o)}catch(m){a.instance.error("WebVTT Parse Error")}}return e},Mt.prototype.parse=function(e,t){var i,n,o,a,s;return"string"==typeof t&&(t=d.parse(t)),a=Array.prototype.slice.call(t.querySelectorAll("styling style")),a.forEach(function(t,i,n){var o,a,s;s="",a=t.getAttribute("id")||t.getAttribute("xml:id"),o=Array.prototype.slice.call(t.attributes),o.forEach(function(e,t,i){return"tts"===e.prefix?s+=r.formatStyleName(e.localName)+":"+e.nodeValue+";":void 0}),e.styles[a]=s}),o=Array.prototype.slice.call(t.querySelectorAll("body [style]")),o.forEach(function(t,i,n){var o;o=t.getAttribute("style"),t.setAttribute("style",e.styles[o])}),s=t.querySelector("tt"),n=s.getAttribute("lang")||s.getAttribute("xml:lang"),(void 0===e.language||null===e.language)&&(e.language=n),i=Array.prototype.slice.call(t.querySelectorAll("body p[begin]")),i.forEach(function(t,n,o){var a,s,l,c,u;c=t.getAttribute("begin"),t.removeAttribute("begin"),null!=t.getAttribute("end")?(l=t.getAttribute("end"),t.removeAttribute("end")):null!=i[n+1]&&(l=i[n+1].getAttribute("begin")),s=new wt(r.flattenTimecode(c),r.flattenTimecode(l),"cue_"+n),a=t.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=a&&(s.align="center"===a?"middle":a,t.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),u=d.serialize(t),u=u.replace(/\s*xmlns="[^"]*"/,""),s.html=u,u=u.replace(/^<p[^>]*>/,""),u=u.replace(/<\/p>$/,""),u=u.replace(/<br\/>/,"\n"),u=u.replace(/<span style="([^"]*)"/,"<c.$1"),u=u.replace(/<\/span>/,"</c>"),
s.text=u,e.cues.push(s)}),e},i(Dt,puremvc.Proxy),Dt.NAME="LiveCaptionProxy",Dt.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},Dt.prototype.caption=null,Dt.prototype.head=null,Dt.prototype.script=null,Dt.prototype.timeout=null,Dt.prototype.getURL=function(){return this.data.url},Dt.prototype.setURL=function(e){return this.data.url=e,e},Dt.prototype.start=function(){this.send()},Dt.prototype.poll=function(){var e,t=this;e=setTimeout(function(){t.send()},this.data.interval||1e3)},Dt.prototype.send=function(){var e=this;null!=this.script&&this.head.removeChild(this.script),this.script=r.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now()).then(function(t){return e.script=t})["catch"](function(t){return e.facade.logger.error("[AMP CAPTIONING ERROR]",t)})},Dt.prototype.stop=function(){clearTimeout(timeout)},Dt.prototype.parse=function(e){var t,i,n,o,a;if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks)){for(this.caption=new wt(r.flattenTimecode(e.From),r.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,t="",a=e.Text.split("\n"),n=0,o=a.length;o>n;n++)i=a[n],""!==t&&(t+="<br />"),t+="<span>"+i+"</span>";return this.caption.html="<p>"+t+"</p>",this.sendNotification(qo.CUE_CHANGE,[this.caption]),this.caption}},xt.create=function(e,t,i){var n,o,r,s;if(o=Date.now(),"string"==typeof e?(n=document.getElementById(e),null==n&&(n=document.querySelector(e))):n=e,null==n)throw new Error("[AMP ERROR] Invalid container. Could not find DOM element: "+e);return null!=t.autoplayPolicy&&t.autoplayPolicy!==Po.NONE&&AutoplayThreshold.init(t.autoplayPolicy),t=t instanceof v?t:v.create(t),a.instance=new a(t.debug),s=this.getVersion(),null==n.dataset&&(n.dataset={}),n.dataset["amp.version"]=s,a.instance.log("[AMP] "+s),r=this.createPlayer(t,n),r.initTime=r.performance.init=o,n.amp=r,r.request=this.request.bind(this),r.require=this.require.bind(this),r.loadResources=r.loadModuleResources.bind(r),r.onready=i,r.initialize(t),je.track("create"),r},xt.createPlayer=function(e,t){var i;return i=this.players[e.mode],null!=i&&(i=new i(t)),i},xt.getVersion=function(){return this.VERSION},xt.VERSION="AMP Premier - NDN v2.102.4",xt.plugins=[],xt.players={},xt.getPlaybackMode=function(){return r.getPlaybackMode()},xt.registerPlayer=function(e,t){this.players[e]=t},xt.registerPlugin=function(e,t,i){var n,o,r,a,s;for(null==(o=this.plugins)[e]&&(o[e]={}),"function"==typeof t&&(s=[i,t],t=s[0],i=s[1]),"string"==typeof t&&(t=[t]),null==t&&(t=["html","flash"]),r=0,a=t.length;a>r;r++)n=t[r],this.plugins[e][n]=i},xt.resourceManager=null,xt.getResourceManager=function(){return null==this.resourceManager&&(this.resourceManager=new T),this.resourceManager},xt.addResource=function(e){return this.getResourceManager().add(e)},xt.addResources=function(e){return this.getResourceManager().addResources(e)},xt.request=function(e){return r.request(e)},xt.requestJson=function(e){return r.requestJson(e)},xt.require=function(e){return this.resourceManager.require(e)},xt.getResource=function(e){return this.getResourceManager().item(e)},xt.removeResource=function(e){return this.getResourceManager().remove(e)},xt.evaluateBindings=function(e,t){return Ue.evaluateBindings(e,t)},xt.registerPlayer("html",Ce),xt.registerPlayer("flash",Ge),xt.registerPlayer("none",S),xt.registerPlayer("external",St),i(kt,M),kt.prototype.plugin=null,kt.prototype.proxy=null,kt.prototype.initializeNotifier=function(e){kt.__super__.initializeNotifier.call(this,e),this.proxy=this.facade.retrieveProxy(_.NAME),this.plugin=this.facade},i(Lt,kt),Lt.prototype.execute=function(e){var t,i;return t=e.getBody(),i=e.getBody().track,this.proxy.setTracks(i),null==i?void this.sendNotification(qo.ENABLED,!1):(this.proxy.selectRenderer(t),void this.sendNotification(qo.ENABLED,!0))},i(Rt,kt),Rt.prototype.dispatchEvent=function(e,t){var i,n,o;return"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),n="function"==typeof(o=this.plugin).getFeatureName?o.getFeatureName():void 0,null!=n&&"auth"!==n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),""),i=new s(e,t),this.sendNotification(Lo.DISPATCH_EVENT,i),i},Rt.prototype.dispatchEventAfterCommand=function(e,t){setTimeout(this.dispatchEvent.bind(this,e,t),0)},Rt.prototype.execute=function(e){this.dispatchEvent(e)},i(Ot,Rt),Ot.prototype.execute=function(e){this.proxy.setEnabled(e.getBody()),Ot.__super__.execute.call(this,e)};var Yo={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"};i(Vt,Rt),Vt.prototype.execute=function(e){var t;t=!e.getBody(),t!==this.proxy.getHidden()&&(this.proxy.setHidden(t),Vt.__super__.execute.call(this,e))},i(Gt,kt),Gt.prototype.execute=function(e){var t,i,o,r,a,s,l,d,c;if(s=e.getBody(),l=this.proxy.getTrack(),null!=l){for(t=l.activeCues,r=l.cues,i=!1,d=0,c=r.length;c>d;d++)o=r[d],s>=o.startTime&&s<o.endTime?n.call(t,o)>=0||(t.push(o),i=!0):(a=t.indexOf(o),-1!==a&&(t.splice(a,1),i=!0));i===!0&&this.sendNotification(qo.CUE_CHANGE,t)}},i(Bt,puremvc.SimpleCommand),Bt.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(Ft.NAME),i=t.getTrack(),null==i&&(null!=(n=t.getTracks())?n.length:void 0)>0&&(i=t.autoSelectTrack()),(null!=i?i.isLive:void 0)===!0&&(this.facade.removeCommand(Lo.TIME_UPDATE),t=this.facade.retrieveProxy(Dt.NAME),null==t&&(t=new Dt,this.facade.registerProxy(t)),t.setURL(i.src),t.start())},CaptionParsers={"application/ttml+xml":new Mt,"application/x-subrip":new Tt,"text/vtt":new Pt,undefined:new Mt},i(Ht,puremvc.Mediator),Ht.NAME="PluginWrapper",Ht.prototype.player=null,Ht.prototype.config=null,Ht.prototype.dispatcher=null,Ht.prototype.flashPlugins=null,Ht.prototype.createFlashVars=null,Ht.prototype.createXML=null,Ht.prototype.createDefaults=function(){this.player.createDefaults.call(this)},Ht.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},Ht.prototype.logEvent=function(e){},Ht.prototype.dispatchEvent=function(e){"timeupdate"!==e.type&&"timeremaining"!==e.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+e.type,e),e.player=this.player,this.dispatcher.dispatchEvent(e)},Ht.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},Ht.prototype.createElement=function(e,t,i){var n;return n=e.createElement("element"),n.setAttribute("id",t),null==i&&(i=this.getControls(e).controls),null!=i&&i.appendChild(n),n},Ht.prototype.createProperty=function(e,t,i,n){var o,r,a;if(o=e.createElement("property"),o.setAttribute("key",t),null!=n&&n.appendChild(o),null!=i)if("object"!=typeof i||i instanceof Array)r=d.createTextContent(e,i.toString()),o.appendChild(r);else for(t in i)a=i[t],this.createProperty(e,t,a,o);return o},Ht.prototype.listNotificationInterests=function(){return[ko.CREATE_FLASH_VARS,ko.CREATE_XML]},Ht.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case ko.CREATE_FLASH_VARS:"function"==typeof this.createFlashVars&&this.createFlashVars(t.flashvars);break;case ko.CREATE_XML:"function"==typeof this.createXML&&this.createXML(t.xml)}},Ht.prototype.destroy=function(){},i(Ut,b),Ut.prototype.src=null,Ut.prototype.cues=null,Ut.prototype.activeCues=null,Ut.prototype.type=null,Ut.prototype.styles=null,Ut.prototype.isLive=!1;var qo={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"};i(Ft,st),Ft.NAME=_.NAME,Ft.TEXT_TRACK_RENDERER="caption-text",Ft.prototype.defaults={useNative:!1,crossorigin:null},Ft.prototype.enabled=!1,Ft.prototype.hidden=!0,Ft.prototype.tracks=null,Ft.prototype.track=null,Ft.prototype.activeCaptions=null,Ft.prototype.captions=null,Ft.prototype.loaded=!0,Ft.prototype.rendererMap=null,Ft.prototype.getUseNative=function(){return this.getValue("useNative")},Ft.prototype.getCrossOrigin=function(){return this.getValue("crossorigin")},Ft.prototype.getTracks=function(){return this.tracks},Ft.prototype.setTracks=function(e){var t,i,n,o,r,a,s,l=this;if(this.tracks=[],this.track=null,null!=e){for(t=e.length,n=0,r=function(){n++,n===t&&(l.sendNotification(qo.TRACKS_LOADED,l.tracks),l.autoSelectTrack())},a=0,s=e.length;s>a;a++)i=e[a],o=new Ut(i,r),this.tracks.push(o);return e}},Ft.prototype.registerRenderer=function(e){null!=e&&(e.proxy=this,this.rendererMap.push(e))},Ft.prototype.retrieveRenderer=function(e){var t,i,n,o;for(o=this.rendererMap,i=0,n=o.length;n>i;i++)if(t=o[i],t.getRendererName()===e)return t},Ft.prototype.removeRenderer=function(e){var t,i;return i=this.retrieveRenderer(e),i.proxy=null,null==i?null:(t=this.rendererMap.indexOf(i),this.rendererMap.splice(t,1),i)},Ft.prototype.getRenderer=function(){return this.renderer},Ft.prototype.setRenderer=function(e){return e===this.renderer?e:(null!=this.renderer&&this.facade.removeMediator(Ft.TEXT_TRACK_RENDERER),this.renderer=e,null!=this.renderer&&this.facade.registerMediator(this.renderer),e)},Ft.prototype.selectRenderer=function(e){var t,i,n,o,r,a,s,l,d;if(i=null,o=e.track,null!=o){for(r=0,s=o.length;s>r;r++){for(n=o[r],d=this.rendererMap,a=0,l=d.length;l>a;a++)if(t=d[a],t.canUseResource(n)===!0){i=t;break}if(null!=i)break}return this.setRenderer(i),i}},Ft.prototype.getTrack=function(){return this.track},Ft.prototype.setTrack=function(e){return this.track=e,this.captions=this.track.cues,this.activeCaptions=[],this.sendNotification(Lo.CHANGE_SETTINGS,{captions:{track:this.track.flatten()}}),this.sendNotification(qo.TRACK_SELECTED,this.track),e},Ft.prototype.selectTrackByIndex=function(e){var t;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t},Ft.prototype.selectTrackByLanguage=function(e){var t,i,n,o,r;for(r=this.tracks,n=0,o=r.length;o>n;n++)if(t=r[n],t.language===e){i=t;break}return null!=i&&this.setTrack(i),i},Ft.prototype.getHidden=function(){return this.hidden},Ft.prototype.setHidden=function(e){return this.hidden=e,e},Ft.prototype.getEnabled=function(){return this.enabled},Ft.prototype.setEnabled=function(e){return this.enabled=e,e},Ft.prototype.autoSelectTrack=function(){var e,t,i;return e=null!=(i=this.facade.player.retrieveProxy(Et.NAME))?i.getLanguage():void 0,null!=e&&(e=e.split("-").shift(),t=this.selectTrackByLanguage(e)),null==t&&(t=this.tracks[0],this.setTrack(t)),t},i(jt,ge),jt.prototype.initializeNotifier=function(e){jt.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(_.NAME),this.media=this.facade.player.retrieveProxy(tt.NAME)},i(zt,he),zt.prototype.video=null,zt.prototype.index=-1,zt.prototype.plugin=null,zt.prototype.parallelement=null,zt.prototype.paralleltimer=null,zt.prototype.paddingvalue=6,zt.prototype.cueChangeListener=null,zt.prototype.lineheight=34,zt.prototype.playerDefaultHeight=648,zt.NAME=Ft.TEXT_TRACK_RENDERER,zt.prototype.getRendererName=function(){return"native"},zt.prototype.canUseResource=function(e){var t,i,n,o;return null==e?!1:(t=null!=document.createElement("video").textTracks)?(n=[r.mimeTypes.vtt,r.mimeTypes.cea608,r.mimeTypes.cea708],i=e.type,i===n[1]||i===n[2]?!0:(o=/iphone|ipad/.test(r.getDevice())||this.proxy.getUseNative(),o?-1!==n.indexOf(e.type):!1)):!1},zt.prototype.onRegister=function(){this.plugin=this.facade.retrieveProxy(Ft.NAME),this.cueChangeListener=this.cueChange.bind(this),r.getSafariVersion()<0&&this.facade.player.getMediaElement().textTracks.addEventListener("addtrack",this.updateTrack.bind(this)),this.facade.player.getMediaElement().textTracks.addEventListener("cuechange",this.cueChangeListener),null==this.plugin||null==this.plugin.config||this.plugin.config.hasOwnProperty("useparallelrendering")||(this.plugin.config.useparallelrendering=!1)},zt.prototype.onRemove=function(){null!=this.viewComponent&&null!=this.parallelelment&&(this.viewComponent.removeChild(this.parallelement),this.facade.player.getMediaElement().textTracks.removeEventListener("addtrack",this.updateTrack),this.facade.player.getMediaElement().textTracks.removeEventListener("cuechange",this.cueChangeListener))},zt.prototype.listNotificationInterests=function(){return[qo.VISIBILITY_CHANGE,qo.TRACK_SELECTED,qo.TRACKS_LOADED,Lo.LOADED_METADATA,Lo.CAN_PLAY_THROUGH,xo.BREAK_START]},zt.prototype.handleNotification=function(e){var t,i,n,o,a,s,l,d;switch(t=e.getBody(),e.getName()){case qo.TRACKS_LOADED:this.tracks=t;break;case qo.TRACK_SELECTED:this.facade.player.getMediaElement().textTracks.length&&this.index>-1&&(o=this.facade.player.getMediaElement().textTracks[this.index]),null!=o&&(o.mode="hidden"),this.index=this.plugin.getTracks().indexOf(t),this.lang=t.language,this.updateTrack();break;case qo.VISIBILITY_CHANGE:case Lo.CAN_PLAY_THROUGH:this.updateTrack();break;case xo.BREAK_START:this.clearCaption();break;case Lo.LOADED_METADATA:if(null==this.tracks)return;for(a=this.facade.player.getMediaElement(),i=this.plugin.getCrossOrigin(),null!=i&&a.setAttribute("crossorigin",i),d=this.tracks,s=0,l=d.length;l>s;s++)o=d[s],o.type===r.mimeTypes.vtt&&(n=document.createElement("track"),n.src=o.src,null!=o.kind&&(n.kind=o.kind),null!=o.language&&(n.srclang=o.language),null!=o.label&&(n.label=o.label),n["default"]="default"in o,a.appendChild(n));this.tracks=null}},zt.prototype.updateTrack=function(e){var t,i,n,o,r,a,s,l,d;for(t=this.plugin.config,s=this.facade.player.getMediaElement().textTracks,n=r=0,a=s.length;a>r;n=++r)if(o=s[n],/subtitles|captions/.test(o.kind)&&(o.language===this.lang||!o.language.length)){if(null==o)return;this.index=n,this.getTracksByKind(o.kind).length>1&&(this.suppressDupeTracks(o.kind,[1]),1===n&&(o.mode=this.plugin.getHidden()?"hidden":"showing")),"subtitles"===o.kind?o.mode="hidden":t.useparallelrendering===!1&&(o.mode=this.plugin.getHidden()?"hidden":"showing")}if((!e||"metadata"!==(null!=(l=e.track)?l.kind:void 0))&&(this.plugin.getHidden()?null!=this.plugin&&this.plugin.config.useparallelrendering?null!=this.parallelement&&(this.parallelement.style.display="none"):this.clearCaption():null!=this.plugin&&this.plugin.config.useparallelrendering&&null!=this.parallelement&&(this.parallelement.style.display="inline"),null!=(d=this.plugin)?d.config.useparallelrendering:void 0)){if(i=null,this.parallelement||this.createParallelement(),e&&(i=e.track),i&&null!==i.language&&i.language!==this.lang)return;this.useParallelRendering(this.plugin.config.useparallelrendering,i)}},zt.prototype.createParallelement=function(){return this.parallelement?void 0:(this.parallelement=document.createElement("div"),this.parallelement.className="akamai-caption-container",this.viewComponent.appendChild(this.parallelement),this.parallelement)},zt.prototype.useParallelRendering=function(e,t){var i,n;if(null!=(i=this.plugin)&&(i.config.useparallelrendering=e),!t&&(null!=(n=this.facade.player.getMediaElement().textTracks)?n.length:void 0)&&(t=this.facade.player.getMediaElement().textTracks[this.index]),t){if(e!==!0)return t.hasCueChangeListener=!1,t.removeEventListener("cuechange",this.cueChangeListener);if(t.hasCueChangeListener===!1||"undefined"==typeof t.hasCueChangeListener)return t.hasCueChangeListener=!0,t.addEventListener("cuechange",this.cueChangeListener)}},zt.prototype.cueChange=function(e){var t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y,A;if(c=this.proxy.track?this.proxy.track.kind===e.target.kind:!0,!this.plugin.getHidden()&&c){for(u=0,h=!1,this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null),this.parallelement&&(this.parallelement.innerHTML=""),i=[],d=0;d<e.target.activeCues.length;){if(new RegExp('^{".*}$').test(e.target.activeCues[d].text))return;this.parallelement.style.display="inline",i[d]=document.createElement("div"),i[d].className="akamai-caption-text",this.viewComponent.getElementsByClassName("akamai-caption-container")[0].appendChild(i[d]),t=document.createElement("p"),i[d].appendChild(t),o=window.getComputedStyle(t).lineHeight.replace("px",""),o&&(this.lineheight=o),y=void 0,y=-1!==navigator.userAgent.indexOf("Firefox")?e.target.activeCues[d].position-50+"%":e.target.activeCues[d].position+"%",A=void 0,r=this.facade.player.getMediaElement().getBoundingClientRect().height,p=r/this.playerDefaultHeight*100,f=e.target.activeCues[d].snapToLines,A=null===f||e.target.activeCues[d].snapToLines!==!0&&"undefined"!=typeof f?r/100*e.target.activeCues[d].line*10:e.target.activeCues[d].line*(this.lineheight/100*p),d>0&&A&&(s=this.viewComponent.getElementsByClassName("akamai-caption-container")[0].childNodes[0].offsetHeight-this.lineheight/100*p,A+=s*d),A+="px",i[d].style.left=y,i[d].style.top=A,i[d].style.textAlign="left",i[d].style.position="absolute",i[d].style.bottom="auto",i[d].style.display="inline",i[d].style.padding=this.paddingvalue+"px",i[d].style.width="auto",i[d].style["min-height"]="0px",t.innerHTML=e.target.activeCues[d].text,t.style.margin="0px",t.style.display="block",t.style.lineHeight="normal",n=null;try{m=document.createElement("span"),m.style.fontSize=JSON.parse(localStorage.getItem("akamai-captioningDefault")).size,i[d].appendChild(m),n=window.getComputedStyle(m).fontSize.replace("px",""),m=null}catch(v){}n&&(h&&(n=n/100*p,t.style.fontSize=n+"px"),u=Math.max(u,(Number(A.replace("px",""))||0)+i[d].getBoundingClientRect().height)),d===e.target.activeCues.length-1&&(l=e.target.activeCues[d].endTime?e.target.activeCues[d].endTime:0,g=e.target.activeCues[d].startTime?e.target.activeCues[d].startTime:0,a=1e3*(l-g),a>500&&(this.paralleltimer=setTimeout(this.clearCaption.bind(this),a))),d++}if(u>r)for(u-=r,d=0;d<i.length;)i[d].style.top=Number(i[d].style.top.replace("px",""))-u+"px",d++}},zt.prototype.clearCaption=function(){this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null),this.parallelement&&(this.parallelement.innerHTML="")},zt.prototype.getTracksByKind=function(e){var t,i,n,o,r;for(n=this.facade.player.getMediaElement().textTracks,t=[],o=0,r=n.length;r>o;o++)i=n[o],i.kind===e&&"en"===i.language&&t.push(i);return t},zt.prototype.suppressDupeTracks=function(e,t){var i,n,o,r,a;for(a=this.getTracksByKind(e),i=o=0,r=a.length;r>o;i=++o)if(n=a[i],n.kind===e&&"en"===n.language){if(null!=t&&new RegExp(i).test(t))continue;n.mode="hidden"}return i>0},i(Yt,jt),Yt.prototype.componentName=Ft.TEXT_TRACK_RENDERER,Yt.prototype.captionText=null,Yt.prototype.getRendererName=function(){return"html"},Yt.prototype.onRemove=function(){if(null!==this.viewComponent)for(;this.viewComponent.firstChild;)this.viewComponent.removeChild(this.viewComponent.firstChild)},Yt.prototype.canUseResource=function(e){var t;return null==e?!1:(t=[r.mimeTypes.srt,r.mimeTypes.ttml,r.mimeTypes.vtt],-1!==t.indexOf(e.type))},Yt.prototype.getCaptionDisplayHeight=function(){var e,t,i;for(e=0,t=i=this.viewComponent.childNodes.length;t&&(--t,3!==i||0!==t);)e+=r.getActualSize(this.viewComponent.childNodes[t]).height;return e+"px"},Yt.prototype.scrollCaptions=function(e,t,i){var n,o,r=this;null==e&&(e=this.viewComponent.scrollHeight),null==t&&(t=this.viewComponent.scrollTop),null==i&&(i=20),o=(e-t)/i,(n=function(){var i;if(e>t)return r.viewComponent.scrollTop=t+=o,setTimeout(n,20);for(i=[];r.viewComponent.childNodes.length>2;)i.push(r.viewComponent.removeChild(r.viewComponent.firstChild));return i})()},Yt.prototype.listNotificationInterests=function(){return[qo.CUE_CHANGE,Lo.CHANGE_MEDIA]},Yt.prototype.handleNotification=function(e){var t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y;switch(s=e.getName(),t=e.getBody(),s){case Lo.CHANGE_MEDIA:this.viewComponent.innerHTML="";break;case qo.CUE_CHANGE:for(l=this.facade.player.settings.captions||{},i="",l.scroll=l.scroll.toLowerCase().replace("-",""),c=0,h=t.length;h>c;c++){for(r=t[c],m=this.viewComponent.children,u=0,g=m.length;g>u;u++)n=m[u],!new RegExp(r.html).test(n.outerHTML)||"popout"!==l.scroll;i+=r.html}switch("painton"===l.scroll?this.classList.add("captioning-typed"):this.classList.remove("captioning-typed"),l.scroll){case"popout":this.viewComponent.innerHTML=i;break;case"rollon":case"painton":for(d=document.createElement("div"),d.innerHTML=i,y=d.childNodes,a=p=0,f=y.length;f>p;a=++p)o=y[a],this.viewComponent.children.length&&new RegExp(o.innerText).test(this.viewComponent.lastChild.innerText)||this.viewComponent.appendChild(o);this.viewComponent.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}}},qt.MSG_LIVE="MSG_LIVE",qt.MSG_REPLAY="MSG_REPLAY",qt.MSG_BUFFERING="MSG_BUFFERING_TEXT",qt.MSG_CC="MSG_CC",qt.MSG_CC_TITLE="MSG_CC_TITLE",qt.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE",qt.MSG_CC_PRESETS="MSG_CC_PRESETS",qt.MSG_CC_FONT="MSG_CC_FONT",qt.MSG_CC_EDGE="MSG_CC_EDGE",qt.MSG_CC_SIZE="MSG_CC_SIZE",qt.MSG_CC_SCROLL="MSG_CC_SCROLL",qt.MSG_CC_COLOR="MSG_CC_COLOR",qt.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND",qt.MSG_CC_EDGE="MSG_CC_EDGE",qt.MSG_CC_WINDOW="MSG_CC_WINDOW",qt.MSG_CC_OPACITY="MSG_CC_OPACITY",qt.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED",qt.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED",qt.MSG_CC_RESET="MSG_CC_RESET",qt.MSG_CC_CANCEL="MSG_CC_CANCEL",qt.MSG_CC_APPLY="MSG_CC_APPLY",qt.MSG_CC_PREVIEW_TEXT="MSG_CC_PREVIEW_TEXT",qt.MSG_SECONDS="MSG_SECONDS",qt.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE",qt.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO",qt.MSG_NEXT_AD="MSG_NEXT_AD",qt.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR",qt.MSG_VIEW_ALL="MSG_VIEW_ALL",qt.MSG_VIDEO="MSG_VIDEO",i(Wt,fe),Wt.prototype.initializeNotifier=function(e){Wt.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(_.NAME),this.media=this.facade.player.retrieveProxy(tt.NAME)},Wt.prototype.onRegister=function(){Wt.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent},i(Zt,Wt),Zt.prototype.componentName="captioning",Zt.prototype.onRegister=function(){Zt.__super__.onRegister.call(this),this.captioningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captioningStyle.type="text/css",this.applyStyles()},Zt.prototype.listNotificationInterests=function(){return[qo.VISIBILITY_CHANGE,qo.ENABLED,qo.TRACK_SELECTED,Lo.SETTINGS_CHANGE]},Zt.prototype.onRemove=function(){var e;this.captioningStyle&&(e=document.getElementsByTagName("head")[0],e.removeChild(this.captioningStyle))},Zt.prototype.handleNotification=function(e){var t,i,n;switch(t=e.getBody(),i=t?Lo.ADD_APPLICATION_STATE:Lo.REMOVE_APPLICATION_STATE,e.getName()){case qo.TRACK_SELECTED:n="cc-embedded",i="embedded"===t.type?Lo.ADD_APPLICATION_STATE:Lo.REMOVE_APPLICATION_STATE;break;case qo.VISIBILITY_CHANGE:n="cc-active";break;case qo.ENABLED:i=t?Lo.ADD_CONTROL_STATE:Lo.REMOVE_CONTROL_STATE,n="cc-enabled",t||this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"cc-active");break;case Lo.SETTINGS_CHANGE:null!=t.captions&&this.applyStyles()}this.sendNotification(i,n)},Zt.prototype.applyStyles=function(){var e,t,i,n,o,r,a,s,l,d;s=this.facade.settings,null!=s.visible&&(this.facade.hidden=!s.visible),o="font-family: "+s.fontFamily+" !important;",n=""+s.edgeType+" "+s.edgeColor+" !important;",r="font-size: "+s.size+" !important;",t="color: "+s.fontColor+" !important;",e="background-color: "+s.backgroundColor+" !important;",l="background-color: "+s.windowColor+" !important;",i="line-height:2.2em;",d=l.match(/rgba\([^)]+\)/g),null!=d&&d instanceof Array&&d.length>0&&(i=0===Number(d[0].replace(/^.*, (.+)\)/,"$1"))?"":i),a=this.facade.player.viewComponent.id,this.captioningStyle.innerHTML="#"+a+" .akamai-caption-text { "+o+r+n+l+" } #"+a+" .akamai-caption-text p { "+t+e+" } #"+a+" video::-webkit-media-text-track-display { "+l+" } #"+a+" video::-webkit-media-text-track-display span { "+o+r+n+e+" } #"+a+" video::-webkit-media-text-track-display { "+l+" } #"+a+" video::cue { "+t+o+r+n+e+" } #"+a+" video::-webkit-media-text-track-container {"+i+"} #"+a+" video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}"},i(Xt,Ht),Xt.NAME="CaptioningWrapper",Xt.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}],Xt.prototype.flashView={elements:{captionDisplay:{attributes:{defaultMessage:"Sorry! No captions available for this stream",initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 0px; windowColor :0x000000; windowOpacity: 0; font: Monospaced Serif; fontColor: 0xffffff; fontOpacity: 1; fontBGColor: 0x000000; fontBGOpacity: 0; edgeType: none; edgeColor: 0x000000; edgeOpacity: 1; scroll: Pop-Out; fontSize: 12;"}},controls:{elements:{captionBtn:{}}}}},Xt.prototype._hidden=!0,Xt.prototype.createXML=function(e){var t,i,n,o;if(n=null!=(o=this.config.flash)?o.subply:void 0,null!=n)try{null!=n.timeMethod&&(i=e.getElementsByTagName("player")[0],i.setAttribute("subply_time_method",n.timeMethod)),null!=n.plugin&&(t=e.firstChild,n=e.getElementsByTagName("subply")[0],null==n&&(n=e.createElement("subply"),t.appendChild(n)),this.createProperty(e,"SUBPLY_URL",this.config.flash.subply.plugin,n))}catch(r){this.facade.logger.error("[AMP CAPTIONING ERROR]",r)}},Xt.prototype.createFlashVars=function(e){var t,i,n,o,a,s,l,d;if(n=this.player.config,null!=(null!=(l=n.media)?l.track:void 0)){if(o=r.selectTrack(n.media.track,"captions"),null!=o.src&&""!==o.src&&(e.caption_url=o.src),n.media.track.length>0){for(i=[],t=[],d=n.media.track,a=0,s=d.length;s>a;a++)o=d[a],i.push(o.src),t.push(o.srclang);e.caption_url=i.join(","),e.caption_language=t.join(",")}e.caption_type=null!=o.type?encodeURIComponent(o.type):"application/ttml+xml"}null==e.caption_language&&(e.caption_language="en-us")},Xt.prototype.listNotificationInterests=function(){return Xt.__super__.listNotificationInterests.apply(this,arguments).concat([Lo.MEDIA_CHANGE,ko.CAPTIONING_REQUEST,ko.CAPTION_LANG_CHANGE,ko.INITIALIZED])},Xt.prototype.handleNotification=function(e){var t,i,n,o,a;switch(Xt.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case ko.CAPTION_LANG_CHANGE:a="";break;case ko.CAPTIONING_REQUEST:a="visibilitychange",t=t.enabled,this.hidden=!t;break;case Lo.MEDIA_CHANGE:if(i=t,null!=i.track){if(this._tracks=i.track.map(function(e){return Object.assign({language:e.srclang},e)}),o=r.selectTrack(this._tracks,"captions"),null==o)return;null!=o.src&&""!==o.src&&(i.captioningUrl=o.src),null!=o.type&&(i.captioningType=o.type||"application/ttml+xml"),this._track=o}break;case ko.INITIALIZED:this.hidden=!this.player.getMediaElement().getPlayerProperty("isCaptionVisible")}null!=a&&""!==a&&this.dispatchEvent(new s(a,t))},Xt.prototype.getHidden=function(){return this._hidden},Xt.prototype.setHidden=function(e){return this._hidden=e,this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!e}),e},Xt.prototype.getVisible=function(){return!this._hidden},Xt.prototype.setVisible=function(e){return this.setHidden(!e),e},Xt.prototype.getTracks=function(){return this._tracks||[]},Xt.prototype.getTrack=function(){return this._track},Xt.prototype.selectTrackByIndex=function(e){},Xt.prototype.selectTrackByLanguage=function(e){this.facade.getMediaElement().setTrackByLanguage(e)},Xt.prototype.changeSettings=function(e){return null!=(null!=e?e.fontFamily:void 0)&&"object"==typeof e.fontFamily?this.facade.getMediaElement().setPlayerProperty("captionSettingsUI",e):(null!=(null!=e?e.visible:void 0)&&(this.hidden=!e.visible),void this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!this.hidden,style:this.parseObject(e)}))},Xt.prototype.parseObject=function(e){var t,i,n,o;t={};try{for(n in e)switch(n){case"fontFamily":t.font=e[n];break;case"fontColor":case"backgroundColor":case"edgeColor":case"windowColor":i="fontColor"===n?"font":"backgroundColor"===n?"fontBG":"edgeColor"===n?"edge":"window",-1!==(null!=(o=e[n])?o.indexOf("rgba"):void 0)&&(t[i+"Color"]=this.parseRGBA(e[n]),t[i+"Opacity"]=e[n].replace(/^.*,(.+)\)/,"$1"));break;default:t[n]=e[n]}delete t.visible}catch(r){this.facade.logger.error("Captioning Settings Parse Error",r)}return t},Xt.prototype.parseRGBA=function(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"0x"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},xt.registerPlugin("captioning","flash",Xt),i(Qt,fe),Qt.prototype.componentName="context-menu",Qt.prototype.contextMenu=null,Qt.prototype.onRegister=function(){var e=this;Qt.__super__.onRegister.call(this),Ye.create(this.facade.player.viewComponent,Ye.CONTEXTMENU,function(t){return t.preventDefault(),e.contextMenuHandler(t),!1})},Qt.prototype.contextMenuHandler=function(e){var t,i,n=this;this.contextMenu&&this.removeContextMenu(),this.contextMenu=bt.create("context-menu",document.body,"ul"),bt.create("context-item",this.contextMenu,"li",this.facade.player.getVersion()),"undefined"!=typeof akamaiGetViewerId&&null!==akamaiGetViewerId&&(t=akamaiGetViewerId(),i=bt.create("context-item",this.contextMenu,"li",""+(this.localizationManager.getString("MSG_VIEWER_ID")||"Viewer ID: ")),bt.create("selectable",i,"span",""+(null!=t?t:"N/A"))),this.contextMenu.style.top=e.pageY+"px",this.contextMenu.style.left=e.pageX+"px",Ye.create(document.body,Ye.CLICK,function(e){return/selectable/.test(e.target.className)?!1:(n.removeContextMenu(e),!1)})},Qt.prototype.removeContextMenu=function(e){try{Ye.clear(document.body,Ye.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(t){}},i(Jt,fe),Jt.NAME="InteractiveMediator",Jt.prototype.componentName="interactive",i(Kt,fe),Kt.prototype.componentName="title-bar",Kt.prototype.title=null,Kt.prototype.description=null,Kt.prototype.onRegister=function(){Kt.__super__.onRegister.call(this),this.title=this.create("title-text"),this.description=this.create("description-text")},Kt.prototype.listNotificationInterests=function(){return[Lo.CHANGE_MEDIA]},Kt.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case Lo.CHANGE_MEDIA:t=e.getBody(),i=this.facade.player.evaluateBindings(t.title),null==i||""===i||"undefined"===i?this.classList.add("hidden"):(this.title.innerHTML=i,this.description.innerHTML=t.description?t.description:"",this.classList.remove("hidden"))}},i($t,Ht),$t.NAME="ControlsWrapper",$t.prototype.mode="auto",$t.prototype.autoHide=5,$t.prototype.flashView={elements:{controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:{},playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}},$t.prototype.listNotificationInterests=function(){return $t.__super__.listNotificationInterests.apply(this,arguments).concat([Lo.MEDIUM_CHANGE])},$t.prototype.handleNotification=function(e){var t,i,n;switch($t.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case Lo.MEDIUM_CHANGE:i=/audio/.test(t)?"persistent":this.mode,this.setMode(i)}},$t.prototype.createFlashVars=function(e){return null!=this.config.mode&&(this.mode=e.controls_mode=this.config.mode),null!=this.config.admode&&this.config.admode!==this.config.mode&&(e.ads_auto_fit=!0),e.show_play_button_overlay=null!=this.config.playoverlay?this.config.playoverlay:!0,
e},$t.prototype.createXML=function(e){var t,i,n;return t=null!=(i=this.player.flashView)&&null!=(n=i.elements)?n.controls:void 0,null!=t?(null!=t.attributes.autoHideDelay?this.autoHide=t.attributes.autoHideDelay:null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,t.attributes.autoHideDelay=this.config.autoHide),e):void 0},$t.prototype.getMode=function(){return this.mode},$t.prototype.setMode=function(e){if(e!==this.mode){try{this.mode=e,this.player.mediaElement.setPlayerProperty("controlsMode",e)}catch(t){this.facade.logger.error("[AMP CONTROLS ERROR]",t)}return e}},$t.prototype.getAutoHide=function(){return this.autoHide},i(ei,puremvc.SimpleCommand),ei.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(di.NAME),t.start()},i(ti,puremvc.SimpleCommand),ti.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(di.NAME),t.stop()},i(ii,puremvc.SimpleCommand),ii.prototype.execute=function(e){var t,i,n;n=this.facade.retrieveProxy(di.NAME),t=this.facade.player.retrieveProxy(ot.NAME),i=e.getBody(),i.value===Bo.ACTIVE&&t.getPlayState()!==Vo.READY&&"desktop"!==r.getDevice()&&n.start()},i(ni,kt),ni.prototype.execute=function(e){this.plugin.config["native"]===!0?this.player.getMediaElement().controls=!1:this.proxy.adBreakStart()},i(oi,kt),oi.prototype.execute=function(e){this.plugin.config["native"]===!0?this.player.getMediaElement().controls=!0:this.proxy.adBreakEnd()},i(ri,puremvc.SimpleCommand),ri.prototype.execute=function(e){var t,i,n;i=e.getBody(),n=i.poster,t=this.facade.player.getMediaElement(),null!=n&&""!==n&&(t.poster=n),t.src=i.src,this.facade.player.getAutoplay()!==!0&&this.facade.applyClickHandler()},i(ai,puremvc.SimpleCommand),ai.prototype.execute=function(e){this.facade.applyClickHandler(!1)},i(si,puremvc.SimpleCommand),si.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(di.NAME),t.start()},i(li,puremvc.SimpleCommand),li.prototype.execute=function(e){var t,i;i=e.getBody().value,t=this.facade.retrieveProxy(di.NAME),i===Ro.FULL_SCREEN?window.addEventListener("keypress",t.keypress):i===Ro.NORMAL&&window.removeEventListener("keypress",t.keypress)},i(di,_),di.NAME=_.NAME,di.prototype.defaults={mode:"auto",autoHide:3,admode:null},di.prototype.timeout=null,di.prototype.appState=null,di.prototype.controls=null,di.prototype.interactiveElement=null,di.prototype.idleUtil=null,di.prototype.initializeNotifier=function(e){di.__super__.initializeNotifier.call(this,e),this.appState=this.facade.player.retrieveProxy(ot.NAME),this.controls=this.facade.retrieveMediator(ot.NAME)},di.prototype.onRegister=function(){var e,t=this;di.__super__.onRegister.call(this),null!=this.config.mode&&this.changeMode(this.config.mode),e=new Jt,this.facade.registerMediator(e),this.interactiveElement=e.getViewComponent(),"desktop"===r.getDevice()?(Ye.create(this.interactiveElement,"mouseenter",function(){t.stop(),t.appState.activeState!==Bo.ACTIVE&&t.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE)}),Ye.create(this.interactiveElement,"mouseleave",function(){t.start()}),this.idleUtil=new f(this.facade.player.getViewComponent(),1e3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(e){var i;i=e.detail.active!==!0?Bo.INACTIVE:Bo.ACTIVE,t.sendNotification(Lo.CHANGE_ACTIVE_STATE,i)}),this.idleUtil.start(),Ye.create(this.interactiveElement,"click",function(){t.sendNotification(Fo.TOGGLE_PLAY_PAUSE)})):Ye.create(this.interactiveElement,Ye.CLICK,function(){t.sendNotification(Lo.TOGGLE_ACTIVE)})},di.prototype.setMode=function(e){return this.data.mode===e?e:(this.changeMode(e),e)},di.prototype.changeMode=function(e){"auto"===this.data.mode&&this.stop(),this.facade.sendNotification(Lo.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode),this.data.mode=e,this.facade.sendNotification(Lo.ADD_APPLICATION_STATE,"controls-"+this.data.mode)},di.prototype.getMode=function(){return this.data.mode},di.prototype.setAutoHide=function(e){return this.data.autoHide=e,e},di.prototype.getAutoHide=function(){return this.data.autoHide},di.prototype.adBreakStart=function(){null!=this.data.admode&&(this.config.mode=this.getMode(),this.setMode(this.data.admode))},di.prototype.adBreakEnd=function(){null!=this.data.admode&&this.setMode(this.config.mode)},di.prototype.start=function(){this.stop(),"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1e3*this.data.autoHide))},di.prototype.keypress=function(e){switch(e.keyCode||e.which||e.charCode){case 27:break;case 32:this.facade.player.getEnded()||(this.facade.player.getPaused()?this.facade.player.play():this.facade.player.pause())}},di.prototype.stop=function(){clearTimeout(this.timeout),this.timeout=null},di.prototype.hide=function(){return"auto"===this.data.mode?this.appState.getIsUserActive()!==!0&&!r.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===Ro.FULL_SCREEN?void this.facade.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.INACTIVE):void this.start():void 0},i(ci,fe),ci.prototype.componentName="replay",ci.prototype.replay=null,ci.prototype.icon=null,ci.prototype.label=null,ci.prototype.onRegister=function(){ci.__super__.onRegister.call(this),this.replay=this.create("replay-button"),this.replay.onclick=this.onclick.bind(this),this.icon=this.create("replay-icon",this.replay),this.label=this.createText("replay-label",this.localizationManager.getString(qt.MSG_REPLAY),this.replay)},ci.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(Lo.REPLAY),!1},i(ui,Me),ui.prototype.message=null,ui.prototype.componentName="error",ui.prototype.onRegister=function(){ui.__super__.onRegister.call(this),this.message=this.create("error-message")},ui.prototype.listNotificationInterests=function(){return[Lo.ERROR]},ui.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case Lo.ERROR:switch(t=e.getBody(),i=/^(Error: )/.test(t.toString())?"":"Error: ",t.code){case MediaError.MEDIA_ERR_ABORTED:i+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:i+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:i+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i+="Source not supported.";break;default:i+=t}this.message.textContent=i}},i(pi,fe),pi.prototype.componentName="loading",i(hi,fe),hi.prototype.componentName="waiting",hi.prototype.bar=null,hi.prototype.text=null,hi.prototype.onRegister=function(){hi.__super__.onRegister.call(this),this.bar=this.create("waiting-bar"),this.text=this.createText("waiting-text",this.localizationManager.getString(qt.MSG_BUFFERING))},i(gi,fe),gi.prototype.componentName="poster",gi.prototype.poster=null,gi.prototype.clickHandler=null,gi.prototype.onRegister=function(){gi.__super__.onRegister.call(this),this.poster=this.create("poster-content"),this.poster.onclick=this.onclick.bind(this)},gi.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(Fo.TOGGLE_PLAY_PAUSE,!0),!1},gi.prototype.listNotificationInterests=function(){return[Lo.SET_MEDIA]},gi.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case Lo.SET_MEDIA:i=e.getBody().poster,t=null!=i&&""!==i?'<img src="'+i+'" class="'+this.cssPrefix+'poster-image" />':"",this.poster.innerHTML=t}},i(fi,fe),fi.prototype.componentName="end-slate",fi.prototype.onRegister=function(){null!=this.facade.config.endslate&&fi.__super__.onRegister.call(this)},fi.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE]},fi.prototype.handleNotification=function(e){var t,i,n,o,r;switch(e.getName()){case Lo.MEDIA_CHANGE:n=e.getBody(),t=this.facade.config.endslate,r=this.getViewComponent(),i="",null!=t&&(o=t.usePoster===!0?n.poster:t.url,null!=o&&""!==o&&(i='<img src="'+o+'" class="end-slate-image" />')),null!=r&&(r.innerHTML=i)}},i(mi,ge),mi.prototype.componentType="button",mi.prototype.icon=null,mi.prototype.label=null,mi.prototype.onclick=null,mi.prototype.labelText=null,mi.prototype.onRegister=function(){mi.__super__.onRegister.call(this),this.icon=this.create("icon"),this.createLabel(this.labelText)},mi.prototype.createLabel=function(e){null!=e&&(this.label=this.createText("label",e))},mi.prototype.setLabel=function(e){return null==this.label?this.createLabel(e):this.label.textContent=e,e},mi.prototype.getLabel=function(){var e;return null!=(e=this.label)?e.textContent:void 0},i(yi,ge),yi.prototype.componentName="logo",yi.prototype.url=null,yi.prototype.onRegister=function(){yi.__super__.onRegister.call(this),this.sendNotification(Lo.ADD_CONTROL_STATE,this.componentName+"-enabled")},yi.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(Lo.DISPATCH_EVENT,new s("controlsLogoClicked")),!1},i(Ai,mi),Ai.prototype.componentName="full-screen",Ai.prototype.onRegister=function(){Ai.__super__.onRegister.call(this),this.sendNotification(Lo.ADD_CONTROL_STATE,this.componentName+"-enabled")},Ai.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(Lo.TOGGLE_FULL_SCREEN),!1},Ai.prototype.listNotificationInterests=function(){return[Lo.DISABLE_FULL_SCREEN,Lo.ENABLE_FULL_SCREEN]},Ai.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Lo.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case Lo.ENABLE_FULL_SCREEN:this.setDisabled(!1)}},i(vi,ge),vi.prototype.componentType="slider",vi.prototype.trackView=null,vi.prototype.handleView=null,vi.prototype.valueView=null,vi.prototype.startCapView=null,vi.prototype.endCapView=null,vi.prototype.clickView=null,vi.prototype.min=0,vi.prototype.max=1,vi.prototype.value=0,vi.prototype.draggable=!1,vi.prototype.dragging=!1,vi.prototype.draggingInterval=null,vi.prototype.draggingDelay=250,vi.prototype.direction="vertical",vi.prototype.pressHandler=null,vi.prototype.releaseHandler=null,vi.prototype.moveHandler=null,vi.prototype.clickHandler=null,vi.prototype.onRegister=function(){vi.__super__.onRegister.call(this),this.startCapView=this.create("start-cap"),this.endCapView=this.create("end-cap"),this.trackView=this.create("track"),this.valueView=this.create("value",this.trackView),this.clickView=this.create("click",this.trackView),this.handleView=this.create("handle",this.trackView),this.pressHandler=Ye.create(this.handleView,Ye.PRESS,this.handlePressHandler.bind(this)),this.releaseHandler=Ye.create(window,Ye.RELEASE,this.handleReleaseHandler.bind(this)),this.releaseHandler.unbind(),this.moveHandler=Ye.create(window,Ye.MOVE,this.updateHandler.bind(this,this.draggable)),this.moveHandler.unbind(),this.clickHandler=Ye.create(this.clickView,Ye.CLICK,this.updateHandler.bind(this,!0))},vi.prototype.setDirection=function(e){return this.direction=e,e},vi.prototype.getDirection=function(){return this.direction},vi.prototype.setValue=function(e){return this.updateValue(e),this.valueChanged(),e},vi.prototype.getValue=function(){return this.value},vi.prototype.setDragging=function(e){return e!==this.dragging?(this.dragging=e,this.sendNotification(Lo.IS_USER_ACTIVE,this.dragging),this.dragging===!0?this.draggingInterval=setInterval(this.valueChanged.bind(this),this.draggingDelay):(clearInterval(this.draggingInterval),this.valueChanged()),this.dragging):void 0},vi.prototype.getDragging=function(){return this.dragging},vi.prototype.setDraggable=function(e){return e!==this.draggable?(this.draggable=e,e):void 0},vi.prototype.getDraggable=function(){return this.draggable},vi.prototype.updateValue=function(e,t){var i;null==t&&(t=!1),(e!==this.value||t!==!1)&&(this.value=r.clamp(e,this.min,this.max),"vertical"===this.direction?(e="height",i="bottom"):(e="width",i="left"),this.valueView.style[e]=this.handleView.style[i]=""+100*this.value+"%")},vi.prototype.calculateValue=function(e){var t,i,n;return i={x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY},t=r.getElementOffset(this.viewComponent),n="vertical"===this.getDirection()?1-(i.y-t.top)/t.height:(i.x-t.left)/t.width,r.clamp(n,0,1)},vi.prototype.blockEvent=function(e){null!=e&&(e.stopImmediatePropagation(),e.preventDefault())},vi.prototype.handlePressHandler=function(e){return this.moveHandler.bind(),this.releaseHandler.bind(),this.clickHandler.unbind(),this.setDragging(!0),this.blockEvent(e),!1},vi.prototype.handleReleaseHandler=function(e){return this.moveHandler.unbind(),this.releaseHandler.unbind(),this.clickHandler.bind(),this.setDragging(!1),this.blockEvent(e),!1},vi.prototype.updateHandler=function(e,t){var i;return this.blockEvent(t),i=/click/.test(t.type)&&this.classList.contains("scrubbing")?this.getValue():this.calculateValue(t),e===!0?this.setValue(i):this.updateValue(i),!1},vi.prototype.valueChanged=function(){};var Wo={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"};i(_i,ge),_i.prototype.componentName="time-display",_i.prototype.duration=null,_i.prototype.currentTimeDisplay=null,_i.prototype.separatorDisplay=null,_i.prototype.durationDisplay=null,_i.prototype.liveDisplay=null,_i.prototype.onRegister=function(){_i.__super__.onRegister.call(this),this.liveDisplay=this.createText("live-display",this.localizationManager.getString(qt.MSG_LIVE)),this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span"),this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(qt.MSG_TIME_SEPARATOR),this,"span"),this.durationDisplay=this.createText("duration-display","00:00",this,"span")},_i.prototype.listNotificationInterests=function(){return[Lo.PLAY,Lo.DURATION_CHANGE,Lo.ENDED,Lo.DISPLAY_TIME]},_i.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Lo.PLAY:this.updateDuration();break;case Lo.DURATION_CHANGE:this.updateCurrentTime(),this.updateDuration(t);break;case Lo.ENDED:this.updateCurrentTime(this.duration),this.updateDuration();break;case Lo.DISPLAY_TIME:this.updateCurrentTime(t.currentTime,t.duration),this.updateDuration(t.duration)}},_i.prototype.updateCurrentTime=function(e,t){null!=e&&(this.currentTime=e),null!=t&&(this.duration=t),this.currentTimeDisplay.textContent=r.formatTimecode(this.currentTime,this.duration)},_i.prototype.updateDuration=function(e){null!=e&&(this.duration=e),this.durationDisplay.textContent=r.formatTimecode(this.duration)},i(Ei,mi),Ei.prototype.componentName="go-live",Ei.prototype.onRegister=function(){Ei.__super__.onRegister.call(this),this.createLabel(this.localizationManager.getString("MSG_LIVE"))},Ei.prototype.listNotificationInterests=function(){return[Lo.IS_LIVE]},Ei.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Lo.IS_LIVE:this.setLabel(t===!0?this.localizationManager.getString("MSG_LIVE"):this.localizationManager.getString("MSG_GO_LIVE"))}},Ei.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(Fo.GO_LIVE),!1},i(bi,fe),bi.prototype.duration=null,bi.prototype.currentTime=null,bi.prototype.container=null,bi.prototype.banner=null,bi.prototype.text=null,bi.prototype.adText=null,bi.prototype.bg=null,bi.prototype.totalAds=null,bi.prototype.adPosition=null,bi.prototype.adContainerRequired=!0,bi.prototype.componentName="ads",bi.prototype.onRegister=function(){bi.__super__.onRegister.call(this),this.adContainerRequired&&(this.container=this.create("ad-container")),this.banner=this.create("ad-banner"),this.bg=this.create("ad-text-bg",this.banner),this.adText=this.create("ad-text-title",this.banner),this.text=this.create("ad-text",this.banner),this.adContainerRequired&&(this.viewComponent.container=this.container),this.sendNotification(xo.AD_CONTAINER_CREATED,this.viewComponent),this.facade.player.adContainer=this.container},bi.prototype.listNotificationInterests=function(){return[xo.BREAK_START,xo.BREAK_END,xo.AD_TIME_REMAINING,xo.AD_STARTED]},bi.prototype.handleNotification=function(e){var t,i,n;switch(e.getName()){case xo.BREAK_END:this.text.textContent="",this.adText.textContent="";break;case xo.AD_TIME_REMAINING:n=Math.round(e.getBody()),i=null!=this.totalAds&&this.totalAds>0&&null!=this.adPosition&&this.adPosition!==this.totalAds?n>0?""+this.localizationManager.getString(qt.MSG_NEXT_AD)+n+" "+this.localizationManager.getString(qt.MSG_SECONDS):"":n>0?""+this.localizationManager.getString(qt.MSG_NEXT_VIDEO)+n+" "+this.localizationManager.getString(qt.MSG_SECONDS):"",this.text.textContent=i;break;case xo.AD_STARTED:t=e.getBody(),this.totalAds=t.totalAds,this.adPosition=t.position,i="Ad "+t.position+" of "+t.totalAds,null!=t.position&&null!=t.totalAds&&t.totalAds>=1&&(this.adText.textContent=i)}},i(Ci,mi),Ci.prototype.panel=null,Ci.prototype.timeout=null,Ci.prototype.closePanelDelayed=null,Ci.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this),"desktop"===r.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel,Ci.__super__.onRegister.call(this),this.sendNotification(Lo.ADD_CONTROL_STATE,""+this.componentName+"-enabled"),this.sendNotification(Lo.ADD_CONTROL,this.viewComponent)},Ci.prototype.openPanel=function(){clearTimeout(this.timeout),this.sendNotification(Wo.OPEN_PANEL,this.panel),this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)},Ci.prototype.closePanel=function(){r.isMouseOverElement(this.panel.viewComponent)||r.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(ot.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(Wo.CLOSE_PANEL,this.panel))},Ci.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)},Ci.prototype.togglePanel=function(e){e.stopImmediatePropagation(),this.sendNotification(Wo.TOGGLE_PANEL,this.panel)},Ci.prototype.clickPanel=function(){},i(Si,ge),Si.prototype.componentType="panel",Si.prototype.control=null,Si.prototype.onRegister=function(){Si.__super__.onRegister.call(this),this.sendNotification(Wo.ADD_PANEL,this)},i(Ni,Wt),Ni.prototype.componentName="captioning",Ni.prototype.captionButton=null,Ni.prototype.onRegister=function(){var e;this.captioning=this.facade.player.captioning,e=new mi(this.localizationManager.getString(qt.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this)),this.facade.registerMediator(e),this.captionButton=e.getViewComponent(),this.sendNotification(Lo.ADD_CONTROL,this.captionButton),Ni.__super__.onRegister.call(this)},Ni.prototype.onclick=function(e){var t;return e.stopImmediatePropagation(),"embedded"===(null!=(t=this.captioning.getTrack())?t.type:void 0)?this.captioning.setHidden(!this.captioning.getHidden()):e.currentTarget===this.captionButton&&this.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,this.captioning.getHidden()),!1},i(Ii,jt),Ii.prototype.componentName="captioning-settings",Ii.prototype.settingsUiVisible=!1,Ii.prototype.captionningStyle=null,Ii.prototype.swatchColorCurr=null,Ii.prototype.swatchOpacityCurr=null,Ii.prototype.colorPicker=null,Ii.prototype.colorPickerOpacity=null,Ii.prototype.advancedSettingContainer=null,Ii.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null},Ii.prototype.onRegister=function(){var e,t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y,A,v,_,E=this;for(Ii.__super__.onRegister.call(this),this.captioning=this.facade.player.captioning,m=this.create("captioning-titlebar"),y=this.create("captioning-title",m,"span",this.localizationManager.getString(qt.MSG_CC_TITLE)),this.toggle.OFF=this.create("captioning-toggle-btn",m,"div","OFF"),this.toggle.ON=this.create("captioning-toggle-btn",m,"div","ON"),Ye.create(this.toggle.ON,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.toggle.disabled||E.toggleButtonHandler(!0),!1}),this.toggle.disabled||_t.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),Ye.create(this.toggle.OFF,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.toggle.disabled||E.toggleButtonHandler(!1),!1}),i=this.create("captioning-row"),n=this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_LANGUAGE)),this.list.language=this.create("captioning-dropdown",i,"select"),this.languageListPopulate(),Ye.create(this.list.language,"change",function(e){var t;return e.stopImmediatePropagation(),t="None"!==e.target.selectedValue,E.captioining.setHidden(!t),t&&E.captioning.setTrack(E.captioning.selectTrackByIndex(e.target.selectedIndex)),!1}),n=this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_PRESETS)),l=this.create(["captioning-preset","captioning-preset1"],i,null,"Aa"),d=this.create(["captioning-preset","captioning-preset2"],i,null,"Aa"),c=this.create(["captioning-preset","captioning-preset3"],i,null,"Aa"),u=this.create(["captioning-preset","captioning-preset4"],i,null,"Aa"),Ye.create(l,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.captioningObject.selected=E.cloneObject(E.captioningObject.preset1),E.applyCaptioningStyle(),!1}),Ye.create(d,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.captioningObject.selected=E.cloneObject(E.captioningObject.preset2),E.applyCaptioningStyle(),!1}),Ye.create(c,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.captioningObject.selected=E.cloneObject(E.captioningObject.preset3),E.applyCaptioningStyle(),!1}),Ye.create(u,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.captioningObject.selected=E.cloneObject(E.captioningObject.preset4),E.applyCaptioningStyle(),!1}),this.advancedSettingContainer=this.create("captioning-advanced-container"),i=this.create("captioning-row",this.advancedSettingContainer),n=this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_FONT)),this.list.font=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",this.create(null,this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",this.create(null,this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy",this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps",Ye.create(this.list.font,"change",function(e){return e.stopImmediatePropagation(),E.captioningObject.selected.fontFamily=e.target.value,E.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.font),n=this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_EDGE)),this.list.edge=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.edge,"option","None").value="text-shadow: 0px 0px 0px",this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px",this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px",this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px",this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px",this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px",Ye.create(this.list.edge,"change",function(e){return e.stopImmediatePropagation(),E.captioningObject.selected.edgeType=e.target.value,E.applyCaptioningStyle(!1),!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_SIZE)),this.list.size=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.size,"option","Extra Small").value="x-small",this.create(null,this.list.size,"option","Small").value="small",this.create(null,this.list.size,"option","Medium").value="medium",this.create(null,this.list.size,"option","Large").value="large",this.create(null,this.list.size,"option","Extra Large").value="x-large",this.list.size.selectedIndex=1,Ye.create(this.list.size,"change",function(e){return e.stopImmediatePropagation(),E.captioningObject.selected.size=e.target.value,E.applyCaptioningStyle(!1),!1}),this.create("captioning-label",i,"span",this.localizationManager.getString(qt.MSG_CC_SCROLL)),this.list.scroll=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.scroll,"option","Pop-Out").value="popout",this.create(null,this.list.scroll,"option","Roll-On").value="rollon",this.create(null,this.list.scroll,"option","Paint-On").value="painton",Ye.create(this.list.scroll,"change",function(e){return e.stopImmediatePropagation(),E.captioningObject.selected.scroll=E.scroll.type=e.target.value,!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label-small",i,"span",this.localizationManager.getString(qt.MSG_CC_COLOR)),this.picker.color=this.create("captioning-color-picker",i),this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,Ye.create(this.picker.color,Ye.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),E.colorPickerHandler(),E.colorPicker.style.display="block"===E.colorPicker.style.display?"none":"block","block"===E.colorPicker.style.display&&(null!=(i=E.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),E.colorPicker.style.left="152px",E.colorPicker.name="fontColor",E.captioningObject.instance=E.picker.color,-1!==E.picker.color.style.backgroundColor.indexOf("rgba")&&(t=E.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),E.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(qt.MSG_CC_BACKGROUND)),this.picker.background=this.create("captioning-color-picker",i),this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,Ye.create(this.picker.background,Ye.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),E.colorPickerHandler(),E.colorPicker.style.display="block"===E.colorPicker.style.display?"none":"block","block"===E.colorPicker.style.display&&(null!=(i=E.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),E.colorPicker.style.left="264px",E.colorPicker.name="backgroundColor",E.captioningObject.instance=E.picker.background,-1!==E.picker.background.style.backgroundColor.indexOf("rgba")&&(t=E.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),E.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(qt.MSG_CC_EDGE)),this.picker.edge=this.create("captioning-color-picker",i),this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,Ye.create(this.picker.edge,Ye.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),E.colorPickerHandler(),E.colorPicker.style.display="block"===E.colorPicker.style.display?"none":"block","block"===E.colorPicker.style.display&&(null!=(i=E.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),E.colorPicker.style.left="212px",E.colorPicker.name="edgeColor",E.captioningObject.instance=E.picker.edge,-1!==E.picker.edge.style.backgroundColor.indexOf("rgba")&&(t=E.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),E.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(qt.MSG_CC_WINDOW)),this.picker.window=this.create("captioning-color-picker",i),this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor,Ye.create(this.picker.window,Ye.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),E.colorPickerHandler(),E.colorPicker.style.display="block"===E.colorPicker.style.display?"none":"block","block"===E.colorPicker.style.display&&(null!=(i=E.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),E.colorPicker.style.left="300px",E.colorPicker.name="windowColor",E.captioningObject.instance=E.picker.window,-1!==E.picker.window.style.backgroundColor.indexOf("rgba")&&(t=E.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),E.colorPickerOpacity.value=null!=t?t:1),!1}),p=this.create(["caption-text","caption-text-preview"]),h=this.create(null,p,"p",this.localizationManager.getString(qt.MSG_CC_PREVIEW_TEXT)),i=this.create("captioning-footer-container"),e=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(qt.MSG_CC_APPLY)),t=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(qt.MSG_CC_CANCEL)),g=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(qt.MSG_CC_RESET)),this.captioning.getViewComponent().clientWidth>=0&&(A=this.create("captioning-advanced-button",i,"div",this.localizationManager.getString(qt.MSG_CC_SHOW_ADVANCED)),Ye.create(A,Ye.CLICK,function(e){return e.stopImmediatePropagation(),"block"===E.advancedSettingContainer.style.display?(e.target.innerHTML=E.localizationManager.getString(qt.MSG_CC_SHOW_ADVANCED),E.advancedSettingContainer.style.display="none",E.colorPicker.style.display="none"):(e.target.innerHTML=E.localizationManager.getString(qt.MSG_CC_HIDE_ADVANCED),E.advancedSettingContainer.style.display="block"),!1})),Ye.create(e,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,E.settingsUiVisible),E.applyCaptioningStyle(!1,!0),E.sendNotification(qo.SETTINGS_CHANGE,E.captioningObject.selected),!1}),Ye.create(t,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,E.settingsUiVisible),!1}),Ye.create(g,Ye.CLICK,function(e){return e.stopImmediatePropagation(),E.colorPicker.style.display="none",E.applyCaptioningStyle(!0),!1}),this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captionningStyle.type="text/css",a=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"],this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement),f=this.create("colorpicker-swatch",!1,null,"&nbsp;"),v=0,_=a.length;_>v;v++)r=a[v],f.style.backgroundColor=r,o=f.cloneNode(),Ye.create(o,Ye.CLICK,function(e){return e.stopImmediatePropagation(),null!==E.swatchColorCurr&&(E.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"),E.swatchColorCurr=e.target,E.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)",E.captioningObject.instance.style.backgroundColor=E.captioningObject.selected[E.colorPicker.name]=E.toRGBA(e.target.style.backgroundColor),E.applyCaptioningStyle(!1),!1}),this.colorPicker.appendChild(o);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(qt.MSG_CC_OPACITY)),this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input"),this.colorPickerOpacity.type="range",
this.colorPickerOpacity.min=0,this.colorPickerOpacity.max=1,this.colorPickerOpacity.step=.1,this.colorPickerOpacity.value=1,Ye.create(this.colorPickerOpacity,"change",function(e){return e.stopImmediatePropagation(),E.captioningObject.instance.style.backgroundColor=E.captioningObject.selected[E.colorPicker.name]=E.toRGBA(E.captioningObject.instance.style.backgroundColor),E.applyCaptioningStyle(!1),!1}),this.swatchOpacityCurr=this.colorPickerOpacity;try{null!=localStorage.getItem(jo.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(jo.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1,!this.captioning.getHidden())):(s=!(null!=this.captioning.config.style||"undefined"!==this.captioning.config.style),s||(this.captioningObject.selected=this.cloneObject(this.captioning.config.style)),this.applyCaptioningStyle(s))}catch(b){}this.setSettings(Object.keys(this.captioningObject.selected).length>0?this.captioningObject.selected:this.captioningObject["default"]),this.toggleButtonHandler(!this.captioning.getHidden(),!1)},Ii.prototype.toRGBA=function(e){var t,i;return i=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),t="rgba("+i[0]+","+i[1]+","+i[2]+","+this.swatchOpacityCurr.value+")"},Ii.prototype.onScrollListChange=function(e){var t;null!=e&&(this.captioningObject.selected.scroll=this.scroll.type=e),this.setSettings({scroll:this.scroll.type});try{null!=(null!=(t=this.captioning.proxy.renderer)?t.viewComponent:void 0)&&("painton"===this.scroll.type?_t.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):_t.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent))}catch(i){this.facade.logger.error("AMP Captioning Error",i)}},Ii.prototype.languageListPopulate=function(){var e,t,i,n,o,r;if(i=this.captioning.getTracks(),null!=i){for(this.list.language.innerHTML="",n=0,o=i.length;o>n;n++)t=i[n],e=t.language,e=this.facade.player.retrieveProxy(Et.NAME).getLanguageString(e),null!=e&&""!==e&&(this.create(null,this.list.language,"option",e).value=t.language);this.toggle.disabled=0===this.list.language.childElementCount,this.toggle.disabled&&this.create(null,this.list.language,"option","None"),this.list.language.value=null!=(r=this.captioning.getTrack())?r.language:void 0}},Ii.prototype.colorPickerHandler=function(e){var t=this;return null==e&&(e=!1),e?Ye.unbind(document,Ye.CLICK):void Ye.create(document,Ye.CLICK,function(e){return e.stopImmediatePropagation(),t.colorPickerHandler(!0),"akamai-colorpicker-palette"!==e.target.className&&"akamai-opacity-label"!==e.target.className&&"akamai-colorpicker-slider"!==e.target.className&&"none"!==t.colorPicker.style.display&&(t.colorPicker.style.display="none"),!1})},Ii.prototype.cloneObject=function(e){var t,i;t={};for(i in e)t[i]=e[i];return t},Ii.prototype.applyCaptioningStyle=function(e,t,i){var n,o,r,a,s,l,d,c,u;if(null==e&&(e=!1),null==t&&(t=!1),null==i&&(i=!1),e?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"text-shadow: 0px 0px 0px",this.list.size.value=this.captioningObject["default"].size,this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null==this.captioningObject.selected.fontFamily||i||(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"text-shadow: 0px 0px 0px",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll?this.list.scroll.value=this.captioningObject.selected.scroll:this.captioningObject.selected.scroll=this.list.scroll.value,this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor)),s="font-family: "+(e?this.captioningObject["default"].fontFamily:i?this.captioningObject.selected.fontFamily:this.list.font.value)+" !important;",a=(e?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;",l="font-size: "+(e?this.captioningObject["default"].size:this.list.size.value)+" !important;",o="color: "+(e?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;",n="background-color: "+(e?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;",c="background-color: "+(e?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;",r="line-height:2.2em;",u=c.match(/rgba\([^)]+\)/g),null!=u&&u instanceof Array&&u.length>0&&(r=0===Number(u[0].replace(/^.*, (.+)\)/,"$1"))?"":r),t){this.onScrollListChange(),d=this.facade.player.viewComponent.id,this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText="#"+d+" .akamai-caption-text { "+s+l+a+c+" } #"+d+" .akamai-caption-text p { "+o+n+" } video::-webkit-media-text-track-display { "+c+" } video::-webkit-media-text-track-display span { "+s+l+a+n+" } video::-webkit-media-text-track-display { "+c+" } video::cue { "+o+s+l+a+n+" } video::-webkit-media-text-track-container {"+r+"} video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}";try{e!==!1||i||localStorage.setItem(jo.PREFIX+"captioningDefault",JSON.stringify(this.captioningObject.selected))}catch(p){this.facade.logger.error("LocalStorage Not Supported on this Browser",p)}}else this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+"#"+d+" .akamai-caption-text.akamai-caption-text-preview { "+s+l+a+c+" } #"+d+" .akamai-caption-text.akamai-caption-text-preview p { "+o+n+" }"},Ii.prototype.toggleButtonHandler=function(e,t){null==e&&(e=!1),null==t&&(t=!0),e?(_t.add("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix),_t.remove("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix)):(_t.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),_t.remove("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix)),t&&this.captioning.setHidden(!e),this.sendNotification(Yo.UPDATE_SETTINGS,{captioning:{hidden:!e}})},Ii.prototype.setSettings=function(e){return this.settings=e,this.facade.player.settings.change({captions:e}),e},Ii.prototype.getSettings=function(){return this.settings},Ii.prototype.listNotificationInterests=function(){return[qo.SETTINGS_VISIBILITY_CHANGE,qo.TOGGLE_SETTINGS_VISIBILITY,qo.SETTINGS_CHANGE]},Ii.prototype.handleNotification=function(e){var t,i,n,o,r,a,s,l,d,c,u,p,h,g,f;switch(l=e.getName(),t=e.getBody(),l){case qo.SETTINGS_VISIBILITY_CHANGE:case qo.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none"),this.settingsUiVisible=!this.settingsUiVisible,this.settingsUiVisible&&1===this.list.language.length&&this.languageListPopulate(),d=this.settingsUiVisible?Lo.ADD_APPLICATION_STATE:Lo.REMOVE_APPLICATION_STATE,u="cc-setting-active",this.toggleButtonHandler(!this.captioning.getHidden(),!1),this.list.language.value=this.captioning.getTrack().language,this.onScrollListChange(this.captioningObject.selected.scroll),this.sendNotification(d,u);break;case qo.SETTINGS_CHANGE:r=!1;for(a in t)switch(p=t[a],a){case"fontFamily":case"fontSize":case"scroll":case"edgeType":for(s="fontFamily"===a?"font":"fontSize"===a?"size":"edgeType"===a?"edge":"scroll",f=this.list[s].options,o=h=0,g=f.length;g>h;o=++h)if(c=f[o],"fontFamily"===a&&"object"==typeof p)for(i in p)n=p[i],"default"===i&&(this.captioningObject.selected.fontFamily=n,r=!0),new RegExp(i,"i").test(c.label)&&(new RegExp("^"+n).test(c.value)||(c.value=n+","+c.value),c.selected&&(this.captioningObject.selected.fontFamily=c.value));else if(new RegExp("^"+p+"$","i").test(c.label)&&(this.list[s].selectedIndex=o,"fontSize"===a&&(a="size"),this.captioningObject.selected[a]=c.value,"scroll"===a)){this.scroll.type=this.captioningObject.selected.scroll=c.value,this.setSettings({scroll:this.scroll.type});try{"painton"===c.value?_t.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):_t.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent)}catch(m){this.facade.logger.error("AMP Captioning Error",m)}}break;case"backgroundColor":case"edgeColor":case"fontColor":case"windowColor":this.captioningObject.selected[a]=p}this.applyCaptioningStyle(!1,!0,r),null!=t.visible&&t.visible!==!this.captioning.getHidden()&&this.captioning.setHidden(!t.visible)}},i(wi,fe),wi.prototype.componentName="play",wi.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(Fo.TOGGLE_PLAY_PAUSE),!1},i(Ti,Ci),Ti.prototype.clickHandler=function(){this.sendNotification(Lo.TOGGLE_MUTED)},i(Pi,vi),Pi.prototype.componentName="volume",Pi.prototype.draggable=!0,Pi.prototype.valueChanged=function(){this.sendNotification(Lo.CHANGE_VOLUME,this.value),this.sendNotification(Yo.UPDATE_SETTINGS,{volume:this.value})},Pi.prototype.listNotificationInterests=function(){return[Lo.VOLUME_CHANGE,Lo.READY]},Pi.prototype.handleNotification=function(e){switch(e.getName()){case Lo.READY:this.updateValue(this.facade.player.getVolume(),!0);break;case Lo.VOLUME_CHANGE:this.updateValue(e.getBody())}},i(Mi,Wt),Mi.prototype.panel=null,Mi.prototype.control=null,Mi.prototype.separator=null,Mi.prototype.controls=null,Mi.prototype.labels=null,Mi.prototype.closed=!0,Mi.prototype.panelClass=Si,Mi.prototype.controlClass=Ci,Mi.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName),this.control=this.createControl(this.componentName),this.separator=this.createSeparator(this.componentName),this.panel.control=this.control,this.control.panel=this.panel,null==this.labels&&(this.labels={}),this.createPanelControls(this.componentName)},Mi.prototype.createControl=function(e){var t;return t=new this.controlClass(e),this.facade.registerMediator(t),t},Mi.prototype.createPanel=function(e){var t;return t=new this.panelClass(e),this.facade.registerMediator(t),t},Mi.prototype.createSeparator=function(e){return this.create(["separator","icon"],this.panel)},Mi.prototype.createPanelControls=function(e){var t,i,n,o,r;t=("function"==typeof(o=this.plugin).getConfigurationData?o.getConfigurationData():void 0)||this.facade.getConfig()[this.componentName];for(i in t)n=t[i],n===!0&&(this.controls[i]=this.addPanelControl(new mi(this.localizationManager.getString(this.labels[i]),null,null,i,null!=(r=this.panelButtonClickHandler)&&"function"==typeof r.bind?r.bind(this,i):void 0)))},Mi.prototype.addPanelControl=function(e){return this.facade.registerMediator(e),this.panel.getViewComponent().appendChild(e.getViewComponent()),e},Mi.prototype.panelButtonClickHandler=function(){this.sendNotification(Wo.CLOSE_PANEL,this.panel)},i(Di,Mi),Di.prototype.componentName="volume",Di.prototype.slider=null,Di.prototype.level=null,Di.prototype.controlClass=Ti,Di.prototype.onRegister=function(){var e;Di.__super__.onRegister.call(this),this.slider=new Pi(this.panel,null!=(e=this.facade.getConfig().volume)?e.direction:void 0),this.facade.registerMediator(this.slider)},Di.prototype.updateVolumeButton=function(e){var t;t=Math.ceil(10*e),t!==this.level&&(null!=this.level&&this.sendNotification(Lo.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=t,this.sendNotification(Lo.ADD_CONTROL_STATE,"volume-"+this.level))},Di.prototype.listNotificationInterests=function(){return Di.__super__.listNotificationInterests.apply(this,arguments).concat([Lo.VOLUME_CHANGE])},Di.prototype.handleNotification=function(e){switch(Di.__super__.handleNotification.call(this,e),e.getName()){case Lo.VOLUME_CHANGE:this.updateVolumeButton(e.body)}},i(xi,ge),xi.prototype.componentName="panels",xi.prototype.activePanel=null,xi.prototype.panels=null,xi.prototype.closeHandler=null,xi.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Wo)t=Wo[e],i.push(t);return i}().concat([])},xi.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Wo.ADD_PANEL:this.addPanel(t);break;case Wo.REMOVE_PANEL:this.removePanel(t);break;case Wo.OPEN_PANEL:this.openPanel(t);break;case Wo.CLOSE_PANEL:this.closePanel(t);break;case Wo.CLOSE_ALL_PANELS:this.closeAllPanels(t);break;case Wo.TOGGLE_PANEL:this.togglePanel(t)}},xi.prototype.addPanel=function(e){this.panels.push(e),this.viewComponent.appendChild(e.getViewComponent())},xi.prototype.removePanel=function(e){this.panels.splice(this.panels.indexOf(e),1),this.viewComponent.removeChild(e.getViewComponent())},xi.prototype.openPanel=function(e){e!==this.activePanel&&null!=e&&(this.closeAllPanels(),this.activePanel=e,this.activePanel.classList.add("active"),"desktop"!==r.getDevice()&&this.sendNotification(Lo.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))},xi.prototype.closePanel=function(e){e.classList.remove("active"),null!=this.activePanel&&(this.activePanel=null,"desktop"!==r.getDevice()&&this.sendNotification(Lo.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))},xi.prototype.togglePanel=function(e){e===this.activePanel?this.closePanel(e):this.openPanel(e)},xi.prototype.closeAllPanels=function(){var e,t,i,n;for(n=this.panels,t=0,i=n.length;i>t;t++)e=n[t],this.closePanel(e)},xi.prototype.mouseupHandler=function(e){var t,i,n;i=document.elementFromPoint(e.clientX,e.clientY),n=this.activePanel.getViewComponent(),t=this.activePanel.control.getViewComponent(),i!==n&&n.contains(i)===!1&&i!==t&&t.contains(i)===!1&&this.closeAllPanels()},i(ki,vi),ki.prototype.componentName="progress",ki.prototype.bufferValue=null,ki.prototype.scrubTime=null,ki.prototype.scrubTimeSeparator=null,ki.prototype.cuePoints=null,ki.prototype.cues=null,ki.prototype.duration=0,ki.prototype.isLive=!1,ki.prototype.seeking=!1,ki.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null},ki.prototype.hoverHandler=null,ki.prototype.mouseoutHandler=null,ki.prototype.mouseMoveHandler=null,ki.prototype.previewMoveHandler=null,ki.prototype.onRegister=function(){ki.__super__.onRegister.call(this),this.bufferValue=this.create("buffer-value",!1),this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild),this.cuePoints=this.create("cue-points",this.trackView),this.scrubTimeSeparator=this.create("scrub-time-separator"),this.scrubTime=this.create("scrub-time"),this.thumbPreview=this.create("thumb-preview",this.trackView),this.previewMoveHandler=Ye.create(this.clickView,Ye.MOVE,this.updatePreviewHandler.bind(this)),this.previewMoveHandler.unbind(),this.hoverHandler=Ye.create(this.clickView,Ye.HOVER,this.handlehoverHandler.bind(this)),this.mouseoutHandler=Ye.create(this.clickView,Ye.HOVEROUT,this.handlemouseoutHandler.bind(this)),this.mouseoutHandler.unbind(),Ye.create(this.clickView,Ye.HOVER,this.mouseOverHandler.bind(this)),Ye.create(this.clickView,Ye.HOVEROUT,this.mouseOutHandler.bind(this)),this.mouseMoveBinding=Ye.create(document,Ye.MOVE,this.mouseMoveHandler.bind(this)),this.mouseMoveBinding.unbind()},ki.prototype.listNotificationInterests=function(){return[Lo.ENDED,Lo.MEDIA_CHANGE,Lo.DURATION_CHANGE,Lo.PROGRESS,Lo.CUES_CHANGE,Lo.DISPLAY_TIME,xo.BREAK_START]},ki.prototype.handleNotification=function(e){var t,i,n;switch(ki.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case Lo.MEDIA_CHANGE:this.isLive="live"===t.temporalType,this.updateValue(0),this.bufferValue.style.width="0%",this.updatePreview(t.metadata);break;case Lo.PROGRESS:n=r.clamp(t/this.duration*100,0,100),this.bufferValue.style.width=n+"%";break;case Lo.DURATION_CHANGE:this.duration=t,this.updateCuePoints();break;case Lo.ENDED:this.updateValue(1);break;case Lo.CUES_CHANGE:this.cues=t,this.updateCuePoints();break;case Lo.DISPLAY_TIME:this.dragging===!1&&this.updateValue(t.currentTime/t.duration,t.duration),t.duration!==this.duration&&(this.duration=t.duration);break;case xo.BREAK_START:this.getDragging()&&this.handleReleaseHandler()}},ki.prototype.updateCuePoints=function(){var e,t,i,n,o;if(null!=this.cues&&this.facade.config.displaySceneMarkers!==!1)for(this.removeCuePoints(),o=this.cues,i=0,n=o.length;n>i;i++)e=o[i],0!==e.startTime&&-1!==e.startTime&&(t=this.create("cue-point",this.cuePoints),t.style.left=e.startTime/this.duration*100+"%")},ki.prototype.preloadPreviewImages=function(e){var t,i;for(t=1;t<e.previewThumbnailCount;)i=new Image,i.src=e.previewThumbnailSrc+"out"+t+".png",t++},ki.prototype.updatePreview=function(e){this.preloadPreviewImages(e),this.previewData.src=e.previewThumbnailSrc,this.previewData.previewHeight=e.previewThumbnailHeight,this.previewData.previewWidth=e.previewThumbnailWidth,this.previewData.count=e.previewThumbnailCount,void 0===this.previewData.src&&this.hoverHandler.unbind()},ki.prototype.handlehoverHandler=function(e){return this.previewMoveHandler.bind(),this.mouseoutHandler.bind(),this.hoverHandler.unbind(),this.updatePreviewHandler(e),e.stopImmediatePropagation(),!1},ki.prototype.handlemouseoutHandler=function(e){return this.previewMoveHandler.unbind(),this.mouseoutHandler.unbind(),this.hoverHandler.bind(),e.stopImmediatePropagation(),!1},ki.prototype.mouseOverHandler=function(e){this.mouseOver=!0,this.classList.add("active"),this.mouseMoveBinding.bind()},ki.prototype.mouseOutHandler=function(e){this.mouseOver=!1,this.getDragging()!==!0&&(this.classList.remove("active"),this.mouseMoveBinding.unbind())},ki.prototype.mouseMoveHandler=function(e){var t;t=this.calculateValue(e),this.scrubTime.textContent=r.formatTimecode(Math.round(t*this.duration)),this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*t).toFixed(2)+"%"},ki.prototype.updatePreviewHandler=function(e){var t,i;i=this.calculateValue(e),this.previewInterval=this.duration/this.previewData.count,this.previewImgIndex=Math.floor(i*this.duration/this.previewInterval),this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+"out"+(this.previewImgIndex+1)+".png)"),this.thumbPreview.style.width=this.previewData.previewWidth+"px",this.thumbPreview.style.height=this.previewData.previewHeight+"px",t=r.clamp((100*i-10).toFixed(2),1,80),this.thumbPreview.style.left=""+t+"%"},ki.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")},ki.prototype.valueChanged=function(){this.sendNotification(Fo.SEEK,this.value*this.facade.player.retrieveProxy(Se.NAME).getDuration())},ki.prototype.updateValue=function(e){e!==this.value&&(this.isLive===!0&&(e=1),isNaN(e)===!0&&(e=0),ki.__super__.updateValue.call(this,e),this.getDragging()&&this.value>=this.max&&(this.handleReleaseHandler(),this.sendNotification(Lo.END)))},ki.prototype.updateHandler=function(e,t){ki.__super__.updateHandler.call(this,e,t),this.mouseMoveHandler(t)},ki.prototype.handlePressHandler=function(e){ki.__super__.handlePressHandler.call(this,e),this.classList.add("scrubbing")},ki.prototype.handleReleaseHandler=function(e){var t;ki.__super__.handleReleaseHandler.call(this,e),t=this,setTimeout(function(){return t.classList.remove("scrubbing")},500),this.mouseOver===!1&&this.mouseOutHandler()},i(Li,mi),Li.prototype.componentName="play-pause",Li.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(Fo.TOGGLE_PLAY_PAUSE),!1},i(Ri,lt),Ri.NAME="Feature",Ri.prototype.featureName=null,Ri.prototype.getFeatureName=function(){return this.featureName},Ri.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification(zo.REGISTER_FEATURE,this)},Ri.prototype.onRegister=function(){this.registerFeature(),Ri.__super__.onRegister.call(this)},Ri.prototype.listNotificationPublications=function(){return Ri.__super__.listNotificationPublications.call(this).concat([zo.REGISTER_FEATURE])},i(Oi,Me),Oi.prototype.componentName="controls",Oi.prototype.activeControlPanel=null,Oi.prototype.controlBar=null,Oi.prototype.panels=null,Oi.prototype.onRegister=function(){var e,t;this.facade.registerMediator(new ui),this.facade.player.config.debug!==!0&&this.facade.player.config.contextmenu&&this.facade.player.config.contextmenu.enabled!==!1&&this.facade.registerMediator(new Qt),Oi.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent,this.overlays!==!1&&(this.facade.registerMediator(new gi),this.facade.registerMediator(new pi),this.facade.registerMediator(new hi),this.facade.registerMediator(new ci),this.facade.registerMediator(new fi),t=this.facade.config.titlebar||this.facade.player.config.titlebar||{},t.enabled!==!1&&this.facade.registerMediator(new Kt)),this.controlBar=this.create("control-bar"),this.facade.registerMediator(new xi(this.viewComponent)),this.facade.registerMediator(new Li(this.controlBar)),this.facade.registerMediator(new _i(this.controlBar)),this.facade.registerMediator(new ki(this.controlBar)),null!=this.facade.config.logo&&this.facade.registerMediator(new yi(this.controlBar)),this.facade.registerMediator(new Ei(this.controlBar)),this.overlays!==!1&&null!=this.facade.player.captioning&&(this.facade.registerMediator(new Ni),this.facade.registerMediator(new Ii(this.viewComponent))),this.facade.registerMediator(new Di),this.overlays!==!1&&(this.facade.ads=new bi,this.facade.registerMediator(this.facade.ads),this.facade.registerMediator(new wi)),e=this.create("separator",this.controlBar)},Oi.prototype.listNotificationInterests=function(){return[Lo.READY,Lo.ADD_CONTROL,Lo.REMOVE_CONTROL,Lo.ADD_CONTROL_STATE,Lo.REMOVE_CONTROL_STATE,Lo.SET_MEDIA,xo.BREAK_START,xo.BREAK_END]},Oi.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case Lo.READY:(null!=(n=t.fullscreen)?n.enabled:void 0)!==!1&&this.facade.registerMediator(new Ai(this.controlBar));break;case Lo.SET_MEDIA:case xo.BREAK_END:this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-mode");break;case xo.BREAK_START:this.sendNotification(Lo.ADD_APPLICATION_STATE,"ad-mode");break;case Lo.ADD_CONTROL_STATE:this.classList.add(t);break;case Lo.REMOVE_CONTROL_STATE:this.classList.remove(t);break;case Lo.ADD_CONTROL:this.controlBar.appendChild(t);break;case Lo.REMOVE_CONTROL:this.controlBar.contains(t)&&this.controlBar.removeChild(t)}};var Zo={SET_DIMENSIONS:"mediaanalytics:setDimensions"};i(Vi,Ri),Vi.prototype.featureName="captioning",Vi.prototype.moduleName="captioning",Vi.prototype.mediatorname="",Vi.prototype.createController=function(){Vi.__super__.createController.call(this),this.registerCommand(Lo.CHANGE_MEDIA,Lt),this.registerCommand(Lo.STARTED,Bt),this.registerCommand(Lo.TIME_UPDATE,Gt),this.registerCommand(qo.VISIBILITY_CHANGE,Vt),this.registerCommand(qo.ENABLED,Ot),this.registerCommand(qo.TRACK_SELECTED,Rt),this.registerCommand(qo.TRACKS_LOADED,Rt),this.registerCommand(qo.CUE_CHANGE,Rt)},Vi.prototype.createModel=function(){this.proxy=new Ft(this.config),this.registerProxy(this.proxy)},Vi.prototype.createView=function(){var e,t;e=new Zt,this.registerMediator(e),this.mediatorname=e.getMediatorName(),t=e.viewComponent,this.proxy.registerRenderer(new zt(t)),this.proxy.registerRenderer(new Yt(t))},Vi.prototype.destroy=function(){for(var e,t;this.proxy.rendererMap.length>=1;)t=this.proxy.rendererMap[0],e=t.getMediatorName(),this.removeMediator(e),this.proxy.removeRenderer(t.getRendererName());this.removeMediator(this.mediatorname)},Vi.prototype.listNotificationInterests=function(){return[Lo.LOADED_METADATA,Lo.CAN_PLAY_THROUGH,Lo.CHANGE_MEDIA,Lo.STARTED,Lo.TIME_UPDATE,Lo.SETTINGS_CHANGE,qo.TRACK_SELECTED]},Vi.prototype.listNotificationPublications=function(){return Vi.__super__.listNotificationPublications.call(this).concat([qo.CUE_CHANGE,Lo.ADD_CONTROL_STATE,Lo.REMOVE_CONTROL_STATE,Lo.CHANGE_SETTINGS,qo.VISIBILITY_CHANGE,qo.SETTINGS_CHANGE])},Vi.prototype.getEnabled=function(){return this.proxy.getEnabled()},Vi.prototype.setEnabled=function(e){return this.sendNotification(qo.ENABLED,e),e},Vi.prototype.getHidden=function(){return this.proxy.getHidden()},Vi.prototype.setHidden=function(e){return this.setVisible(!e),e},Vi.prototype.getVisible=function(){return!this.proxy.getHidden()},Vi.prototype.setVisible=function(e){return this.sendNotification(Lo.CHANGE_SETTINGS,{captions:{visible:e}}),this.sendNotification(qo.VISIBILITY_CHANGE,e),e},Vi.prototype.getTracks=function(){return this.proxy.getTracks()},Vi.prototype.getTrack=function(){return this.proxy.getTrack()},Vi.prototype.setTrack=function(e){return this.proxy.setTrack(e),e},Vi.prototype.selectTrackByIndex=function(e){return this.proxy.selectTrackByIndex(e)},Vi.prototype.selectTrackByLanguage=function(e){return this.proxy.selectTrackByLanguage(e)},Vi.prototype.changeSettings=function(e){return this.sendNotification(Lo.CHANGE_SETTINGS,{captions:e}),this.sendNotification(qo.SETTINGS_CHANGE,e),e},Vi.prototype.getSettings=function(){return this.player.settings.captions},Vi.prototype.useParallelRendering=function(e){var t;return t=this.proxy.getRenderer(),t&&t.useParallelRendering(e),e},xt.registerPlugin("captioning","html",Vi),i(Gi,st),Gi.NAME=_.NAME,Gi.prototype.defaults={config:null,dimensions:null,iplookup:!0},Gi.prototype.ready=function(){try{this.getDebug()===!0&&(window.AkamaiAnalytics_debug=1),window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",e)}this.value.iplookup===!1&&"function"==typeof akamaiDisableServerIpLookup&&akamaiDisableServerIpLookup()},Gi.prototype.setDimensions=function(e){var t,i,n;t=this.data.dimensions;for(i in e)n=e[i],null!=n&&(t[i]=n);return this.applyDimensions(t),e},Gi.prototype.applyDimensions=function(e){var t,i;if(null!=window.setAkamaiMediaAnalyticsData)try{for(t in e)i=e[t],setAkamaiMediaAnalyticsData(t,i)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",n)}},Gi.prototype.setMedia=function(e){var t,i,n;return"function"==typeof akamaiSetStreamURL&&akamaiSetStreamURL(e.src,!1),i=this.value.viewerId||this.value.viewerID||this.value["std:viewerId"],null!=i&&akamaiSetViewerId(i),t=null!=(null!=(n=e.mediaanalytics)?n.dimensions:void 0)?r.override(this.value.dimensions,e.mediaanalytics.dimensions):this.value.dimensions,akamaiHandleStreamSwitch(),this.applyDimensions(t),e},Gi.prototype.udpateMedia=function(e){return"function"==typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(e),e},Gi.prototype.fragmentLoadStart=function(e){"function"==typeof fragmentDownloadStarted&&fragmentDownloadStarted(e)},Gi.prototype.fragmentLoaded=function(e){"function"==typeof fragmentDownloadCompleted&&fragmentDownloadCompleted(e)},Gi.prototype.bitrateSwitch=function(e){"function"==typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(e.bitrate)},i(Bi,puremvc.SimpleCommand),Bi.prototype.execute=function(e){this.facade.retrieveProxy(Gi.NAME).ready()},i(Hi,kt),Hi.prototype.execute=function(e){this.proxy.setMedia(e.getBody())},i(Ui,puremvc.SimpleCommand),Ui.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!0},i(Fi,puremvc.SimpleCommand),Fi.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!1},i(ji,puremvc.SimpleCommand),ji.prototype.execute=function(e){var t,i;try{i=e.getBody(),t={adDuration:i.duration,adPartnerId:i.partner,adTitle:i.title,adId:i.id},"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(t)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}},i(zi,kt),zi.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}},i(Yi,kt),Yi.prototype.execute=function(e){var t,i;t=e.getBody(),i=Math.round(t.currentTime/t.duration*100);try{i>=25&&this.proxy.percent<25?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):i>=50&&this.proxy.percent<50?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):i>=75&&this.proxy.percent<75&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}this.proxy.percent=i},i(qi,puremvc.SimpleCommand),qi.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}this.facade.player.getMediaElement().dataset.isad=!0},i(Wi,kt),Wi.prototype.execute=function(e){var t;t=e.getBody(),this.proxy.setDimensions(t)},i(Zi,kt),Zi.prototype.execute=function(e){this.proxy.updatedMedia(e.getBody())},i(Xi,kt),Xi.prototype.execute=function(e){this.proxy.fragmentLoadStart(e.getBody())},i(Qi,kt),Qi.prototype.execute=function(e){this.proxy.fragmentLoaded(e.getBody())},i(Ji,kt),Ji.prototype.execute=function(e){this.proxy.bitrateSwitch(e.getBody())},i(Ki,Ht),Ki.NAME="MediaAnalyticsWrapper",Ki.prototype.flashPlugins=[{id:"OSMFCSMALoader",host:"osmf",main:"com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo",type:"application/x-shockwave-flash"}],Ki.prototype.listNotificationInterests=function(){return Ki.__super__.listNotificationInterests.call(this).concat([Lo.MEDIA_CHANGE,Zo.SET_DIMENSIONS])},Ki.prototype.createFlashVars=function(e){var t,i,n,o,r;if(t=null!=(o=this.player.config)&&null!=(r=o.media)?r.mediaanalytics:void 0,null!=t)for(i in t)n=t[i],e["report_"+i]=n;return e},Ki.prototype.createXML=function(e){var t,i,n,o,r,a,s,l,c,u;if(t=e.firstChild,r=e.getElementsByTagName("metrics")[0],null==r&&(r=e.createElement("metrics"),t.appendChild(r)),l=e.createElement("vendor"),l.setAttribute("id","akamai"),r.appendChild(l),null!=this.config.config&&(n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_BEACON"),n.appendChild(d.createTextContent(e,this.config.config)),l.appendChild(n),a=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),n.appendChild(d.createTextContent(e,a)),l.appendChild(n)),null!=this.config.dimensions){i=e.createElement("property"),i.setAttribute("key","dimensions"),l.appendChild(i),u=this.config.dimensions;for(o in u)s=u[o],n=e.createElement("property"),n.setAttribute("key",o),n.appendChild(d.createTextContent(e,s)),i.appendChild(n)}return e},Ki.prototype.handleNotification=function(e){var t,i,n,o,r,a,s;switch(Ki.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case Lo.MEDIA_CHANGE:if(n=t,null!=(null!=(a=n.mediaanalytics)?a.dimensions:void 0)){n.dimensions=[],s=n.mediaanalytics.dimensions;for(i in s)r=s[i],n.dimensions.push({key:i,value:r})}break;case Zo.SET_DIMENSIONS:this.setDimensions(t)}},Ki.prototype.setDimensions=function(e){return this.player.mediaElement.setPlayerProperty("maDimensions",e),e};var Xo={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedloaded",FEED_ERROR:"feederror"};i($i,Ri),
$i.prototype.moduleName="controls",$i.prototype.featureName="ui",$i.prototype.createFramework=function(){return this.registerCommand(xo.BREAK_START,ni),this.registerCommand(xo.BREAK_END,oi),this.config["native"]!==!0?void $i.__super__.createFramework.call(this):(this.player.getMediaElement().controls=!0,this.player.sendNotification(Lo.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(Lo.MEDIA_VALIDATED,ri),this.registerCommand(Lo.PLAY_REQUEST,ai),void(this.createView=function(){}))},$i.prototype.applyClickHandler=function(e){null==e&&(e=!0),this.player.getMediaElement().onclick=e?this.clickHandler.bind(this):null,this.player.getMediaElement().onplay=e?this.clickHandler.bind(this):null},$i.prototype.clickHandler=function(e){this.sendNotification(Fo.TOGGLE_PLAY_PAUSE,!0)},$i.prototype.createController=function(){$i.__super__.createController.call(this),this.registerCommand(Lo.START,si),this.registerCommand(Lo.PLAY,ei),this.registerCommand(Lo.PAUSE,ti),this.registerCommand(Lo.ACTIVE_STATE_CHANGE,ii),this.registerCommand(Lo.DISPLAY_STATE_CHANGE,li),this.registerCommand(xo.BREAK_START,ni),this.registerCommand(xo.BREAK_END,oi)},$i.prototype.createModel=function(){this.proxy=new di(this.config),this.registerProxy(this.proxy)},$i.prototype.createView=function(){this.registerMediator(new Oi)},$i.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Wo)t=Wo[e],i.push(t);return i}().concat([Lo.CHANGE_MEDIA,Lo.MEDIA_CHANGE,Lo.TIME_UPDATE,Lo.DURATION_CHANGE,Lo.PROGRESS,Lo.ENDED,Lo.CUES_CHANGE,Lo.DISABLE_FULL_SCREEN,Lo.ENABLE_FULL_SCREEN,Lo.READY,Lo.ADD_CONTROL,Lo.REMOVE_CONTROL,Lo.ADD_CONTROL_STATE,Lo.REMOVE_CONTROL_STATE,Lo.ACTIVE_STATE_CHANGE,Lo.START,Lo.PLAY,Lo.PAUSE,Lo.ERROR,xo.BREAK_START,xo.BREAK_END,xo.AD_TIME_REMAINING,xo.AD_STARTED,Lo.SET_MEDIA,Lo.DISPLAY_TIME,Lo.MEDIA_VALIDATED,Lo.STARTED,Lo.PLAY_REQUEST,Lo.IS_LIVE,Lo.VOLUME_CHANGE,Lo.DISPLAY_STATE_CHANGE,qo.TOGGLE_SETTINGS_VISIBILITY])},$i.prototype.listNotificationPublications=function(){return $i.__super__.listNotificationPublications.call(this).concat([Lo.CHANGE_ACTIVE_STATE,Lo.TOGGLE_FULL_SCREEN,Fo.SEEK,Lo.TOGGLE_ACTIVE,Fo.TOGGLE_PLAY_PAUSE,Fo.GO_LIVE,Lo.END,Lo.REPLAY,xo.AD_CONTAINER_CREATED,Lo.CHANGE_VOLUME,Lo.TOGGLE_MUTED,Yo.UPDATE_SETTINGS])},$i.prototype.setMode=function(e){return this.proxy.setMode(e),e},$i.prototype.getMode=function(){return this.proxy.getMode()},$i.prototype.setAutoHide=function(e){return this.proxy.setAutoHide(e),e},$i.prototype.getAutoHide=function(){return this.proxy.getAutoHide()},xt.registerPlugin("controls","html",$i),xt.registerPlugin("controls","flash",$t),xt.registerPlugin("controls","external",$i),i(en,_),en.NAME=_.NAME,en.prototype.defaults={url:null,data:null},en.prototype.feed=null,en.prototype.helper=null,en.prototype.setURL=function(e){var t=this;return this.data.url=this.facade.evaluatePaths(e),this.sendNotification(Lo.DISPATCH_EVENT,new s("request",this.data.url)),this.helper.getFeed(this.data.url).then(function(e){t.sendNotification(Xo.FEED_LOADED,e),t.sendNotification(Xo.CHANGE_FEED,e)})["catch"](function(i){t.sendNotification(Xo.FEED_ERROR,{error:i,url:e}),a.instance.error("[AMP Feed Load Error]",t.data.url,i)}),e},en.prototype.getURL=function(){return this.data.url},en.prototype.setFeedData=function(e){return this.data.data=e,this.feed=this.helper.createFeed(e),this.sendNotification(Xo.FEED_CHANGED,this.feed),e},en.prototype.getFeedData=function(){return this.data.data},en.prototype.invoke=function(){var e;null!=this.data.url&&""!==this.data.url?e=this.sendNotification.bind(this,Xo.LOAD_FEED,this.data.url):null!=this.data.data&&(e=this.sendNotification.bind(this,Xo.CHANGE_FEED,this.data.data)),null!=e&&setTimeout(e,1)},i(tn,puremvc.SimpleCommand),tn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(en.NAME),t.setURL(e.getBody())},i(nn,puremvc.SimpleCommand),nn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(en.NAME),t.setFeedData(e.getBody())},i(on,Rt),on.prototype.execute=function(e){var t,i;on.__super__.execute.call(this,e),this.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.READY),t=e.getBody(),i=t.item[0],this.player.sendNotification(Lo.SET_MEDIA,i)},i(rn,puremvc.SimpleCommand),rn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(en.NAME),t.invoke()},i(an,Ht),an.NAME="FeedWrapper",an.prototype.url=null,an.prototype.data=null,an.prototype.updateData=!0,an.prototype.createFlashVars=function(e){null!=this.url&&""!==this.url&&(e.data_feed_url=escape(this.facade.evaluatePaths(this.url)))},an.prototype.listNotificationInterests=function(){return an.__super__.listNotificationInterests.apply(this,arguments).concat([ko.READY,ko.FEED_LOADED,ko.LOAD_FEED])},an.prototype.handleNotification=function(e){var t,i,n,o=this;switch(an.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case ko.FEED_LOADED:this.data=t,this.sendNotification(Xo.FEED_CHANGED,this.data);break;case ko.LOAD_FEED:n="request";break;case ko.READY:null!=this.data?setTimeout(function(){o.setData(o.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(Xo.LOAD_FEED,this.url)}null!=n&&this.dispatchEvent(new s(n,t))},an.prototype.setURL=function(e){return null!=e&&""!==e&&(this.url=e,this.player.mediaElement.playFile(this.url,this.player.getAutoplay()),this.sendNotification(Xo.LOAD_FEED,this.url)),e},an.prototype.getURL=function(){return this.url},an.prototype.setData=function(e){return this.data=e,this.updateData=!1,this.player.mediaElement.playFile(this.data,this.player.getAutoplay()),e},an.prototype.getData=function(){return this.data},i(sn,lt),sn.prototype.moduleName="mediaanalytics",sn.prototype.initialize=function(e,t){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=e.config,sn.__super__.initialize.call(this,e,t)},sn.prototype.createModel=function(){this.proxy=new Gi(this.config),this.registerProxy(this.proxy)},sn.prototype.createController=function(){sn.__super__.createController.call(this),this.registerCommand(Lo.READY,Bi),this.registerCommand(Lo.MEDIA_CHANGE,Hi),this.registerCommand(xo.BREAK_START,Ui),this.registerCommand(xo.BREAK_END,Fi),this.registerCommand(xo.AD_LOADED,ji),this.registerCommand(xo.AD_STARTED,zi),this.registerCommand(xo.AD_TIME_UPDATE,Yi),this.registerCommand(xo.AD_ENDED,qi),this.registerCommand(Zo.SET_DIMENSIONS,Wi),this.registerCommand(Lo.CONTENT_CHANGED,Zi),this.registerCommand(Lo.FRAGMENT_LOAD_START,Xi),this.registerCommand(Lo.FRAGMENT_LOADED,Qi),this.registerCommand(Lo.QUALITY_CHANGE,Ji)},sn.prototype.listNotificationInterests=function(){return[Lo.READY,Lo.MEDIA_CHANGE,xo.BREAK_START,xo.BREAK_END,xo.AD_LOADED,xo.AD_STARTED,xo.AD_TIME_UPDATE,xo.AD_ENDED,Zo.SET_DIMENSIONS,Lo.CONTENT_CHANGED,Lo.FRAGMENT_LOAD_START,Lo.FRAGMENT_LOADED,Lo.QUALITY_CHANGE]},sn.prototype.setDimensions=function(e){return this.retrieveProxy(Gi.NAME).setDimensions(e),e},xt.registerPlugin("mediaanalytics","html",sn),xt.registerPlugin("mediaanalytics","flash",Ki),i(ln,Ht),ln.NAME="InfoWrapper",ln.prototype.listNotificationInterests=function(){return[ko.CREATE_FLASH_VARS,ko.CREATE_XML,ko.SHARE,ko.SHARE_REQUEST]},ln.prototype.handleNotification=function(e){var t,i,n,o,r,a,l,c,u,p,h,g,f,m,y,A;switch(c=e.getName(),i=e.getBody(),c){case ko.CREATE_FLASH_VARS:a=i.flashvars;break;case ko.CREATE_XML:for(m=i.xml,t=m.firstChild,f=m.getElementsByTagName("view")[0],r=m.getElementsByTagName("element"),y=0,A=r.length;A>y;y++)if(o=r[y],"infoOverlayAdvanced"===o.getAttribute("id")){l=o;break}if(null==f)return;null==l&&(l=m.createElement("element"),l.setAttribute("id","infoOverlayAdvanced"),l.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),f.insertBefore(l,f.childNodes[0])),n=m.createElement("data"),l.appendChild(n),null!=this.config.title&&(u=m.createElement("property"),u.setAttribute("key","title"),h=d.createTextContent(m,this.config.title),u.appendChild(h),n.appendChild(u)),null!=this.config.description&&(u=m.createElement("property"),u.setAttribute("key","description"),h=d.createTextContent(m,this.config.description),u.appendChild(h),n.appendChild(u)),null!=this.config.more&&(u=m.createElement("property"),u.setAttribute("key","more"),h=d.createTextContent(m,this.config.more),u.appendChild(h),n.appendChild(u)),null!=this.config.less&&(u=m.createElement("property"),u.setAttribute("key","less"),h=d.createTextContent(m,this.config.less),u.appendChild(h),n.appendChild(u)),null!=this.config.provider&&(p=m.createElement("property"),p.setAttribute("key","provider"),n.appendChild(p),null!=this.config.provider.name&&(u=m.createElement("property"),u.setAttribute("key","name"),h=d.createTextContent(m,this.config.provider.name),u.appendChild(h),p.appendChild(u)),null!=this.config.provider.image&&(u=m.createElement("property"),u.setAttribute("key","image"),h=d.createTextContent(m,this.config.provider.image),u.appendChild(h),p.appendChild(u)));break;case ko.SHARE:case ko.SHARE_REQUEST:g="share"}return null!=g?this.dispatchEvent(new s(g,i)):void 0},xt.registerPlugin("info","flash",ln),i(dn,Wt),dn.prototype.componentName="info",dn.prototype.title=null,dn.prototype.shortDescription=null,dn.prototype.icon=null,dn.prototype.provider=null,dn.prototype.onRegister=function(){dn.__super__.onRegister.call(this),this.title=this.create("info-title"),this.provider=this.create("info-provider"),this.shortDescription=this.create("info-short-description"),this.icon=this.create("info-icon",this,"img"),this.dataChangedHandler()},dn.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE]},dn.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Lo.MEDIA_CHANGE:this.dataChangedHandler()}},dn.prototype.moreClicked=function(e){return this.classList.add("open")},dn.prototype.closeClicked=function(e){return this.classList.remove("open")},dn.prototype.dataChangedHandler=function(){var e,t;return null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title),null!=(null!=(t=this.plugin.value.provider)?t.image:void 0)&&(this.icon.src=this.plugin.value.provider.image),e=getComputedStyle(this.title),this.title.clientHeight>parseInt(e.lineHeight)?(this.classList.add("info-small"),void(this.shortDescription.innerHTML=this.provider.innerHTML="")):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),void(this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:""))},dn.prototype.truncateDescription=function(e){var t,i,n,o,r,a,s;if(i="...",o="",r=this.shortDescription,r.textContent="",null!=e)for(n=a=0,s=e.length;s>a;n=++a){if(t=e[n],r.textContent=o+t+i,r.scrollHeight>r.clientHeight){r.textContent=o+i;break}o+=t}},i(cn,ze),cn.prototype.configurationName="info",cn.NAME=_.NAME,cn.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"},i(un,lt),un.prototype.moduleName="feed",un.prototype.createModel=function(){this.proxy=new en(this.config),this.registerProxy(this.proxy)},un.prototype.createController=function(){un.__super__.createController.call(this),this.registerCommand(Lo.READY,rn),this.registerCommand(Xo.LOAD_FEED,tn),this.registerCommand(Xo.CHANGE_FEED,nn),this.registerCommand(Xo.FEED_CHANGED,on),this.registerCommand(Xo.FEED_LOADED,Rt),this.registerCommand(Xo.FEED_ERROR,Rt)},un.prototype.listNotificationInterests=function(){return un.__super__.listNotificationInterests.call(this).concat([Lo.READY])},un.prototype.listNotificationPublications=function(){var e,t;return un.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Xo)t=Xo[e],i.push(t);return i}())},un.prototype.setURL=function(e){return this.sendNotification(Xo.LOAD_FEED,e),e},un.prototype.getURL=function(){return this.proxy.getURL()},un.prototype.setData=function(e){return this.sendNotification(Xo.CHANGE_FEED,e),e},un.prototype.getData=function(){return this.proxy.getFeedData()},xt.registerPlugin("feed","html",un),xt.registerPlugin("feed","flash",an),i(pn,Ht),pn.NAME="ShareWrapper",pn.prototype.controls=["share","facebook","twitter"],pn.prototype.flashView={elements:{controls:{elements:{shareBtn:{}}}}},pn.prototype.getFeatureName=function(){return"share"},pn.prototype.createFlashVars=function(e){return null==e.share_mode&&(e.share_mode=2),e},pn.prototype.createXML=function(e){var t,i,n,o,r,a,s,l,d;if(t=null!=(r=this.player.config)&&null!=(a=r.flash)&&null!=(s=a.view)&&null!=(l=s.elements)?l.controls:void 0,null!=t){for(null==t.elements&&(t.elements={}),d=this.controls,n=0,o=d.length;o>n;n++)i=d[n],this.config[i]===!0&&null==t.elements[i+"Btn"]&&(t.elements[i+"Btn"]={});return e}},pn.prototype.listNotificationInterests=function(){return pn.__super__.listNotificationInterests.call(this).concat([ko.SHARE,ko.SHARE_REQUEST])},pn.prototype.handleNotification=function(e){var t,i,n;switch(pn.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case ko.SHARE:case ko.SHARE_REQUEST:n="share"}null!=n&&this.dispatchEvent(new s(n,t))},xt.registerPlugin("share","flash",pn),i(hn,Wt),hn.prototype.componentName="share",hn.prototype.shareControl=null,hn.prototype.shareSeparator=null,hn.prototype.embed=null,hn.prototype.onRegister=function(){this.sendNotification(Lo.ADD_CONTROL_STATE,"share-enabled"),this.shareControl=this.create(["share","control"],!1),this.shareSeparator=this.create(["share","separator"],this.shareControl),this.createButton("share"),this.plugin.getFacebook()===!0&&this.createButton("facebook"),this.plugin.getTwitter()===!0&&this.createButton("twitter"),this.sendNotification(Lo.ADD_CONTROL,this.shareControl),hn.__super__.onRegister.call(this)},hn.prototype.createButton=function(e){var t;t=new mi(null,this.shareControl,null,e,this.clickHandler.bind(this,e)),this.facade.registerMediator(t)},hn.prototype.clickHandler=function(e,t){return t.stopImmediatePropagation(),this.sendNotification(Lo.DISPATCH_EVENT,new s("share",{provider:e,link:this.plugin.getLink(),embed:this.plugin.getEmbed()})),!1},hn.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE]},hn.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case Lo.MEDIA_CHANGE:i=t,null!=i.embed?this.sendNotification(Lo.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(Lo.REMOVE_CONTROL_STATE,"share-enabled")}},i(gn,st),gn.NAME=_.NAME,gn.prototype.defaults={facebook:!1,twitter:!1},gn.prototype.loaded=!0,gn.prototype.link=null,gn.prototype.embed=null,gn.prototype.getEmbed=function(){return this.embed},gn.prototype.setEmbed=function(e){return this.embed=e},gn.prototype.getLink=function(){return this.link},gn.prototype.setLink=function(e){return this.link=e},gn.prototype.getFacebook=function(){return this.getConfigurationData().facebook},gn.prototype.setFacebook=function(e){return this.data.facebook=e},gn.prototype.getTwitter=function(){return this.getConfigurationData().twitter},gn.prototype.setTwitter=function(e){return this.data.twitter=e},i(fn,puremvc.SimpleCommand),fn.prototype.execute=function(e){var t,i;t=e.getBody(),i=this.facade.retrieveProxy(gn.NAME),i.setEmbed(t.embed),i.setLink(t.link)},i(mn,lt),mn.prototype.moduleName="info",mn.prototype.createModel=function(){this.registerProxy(new cn(this.config))},mn.prototype.createView=function(){this.registerMediator(new dn)},mn.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE]},xt.registerPlugin("info","html",mn),xt.registerPlugin("info","external",mn),i(yn,ze),yn.prototype.configurationName="comscore",yn.NAME=_.NAME,yn.prototype.defaults={url:"//b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}},yn.prototype.adStart=function(){var e;e=this.constructURL("ads","started"),r.beacon(e)},yn.prototype.videoStart=function(){var e;e=this.constructURL("video","started"),r.beacon(e)},yn.prototype.constructURL=function(e,t){var i,n,o,r,a,s,l,d,c,u,p,h,g;if(i={},o=null!=(p=this.value.events)?p[e]:void 0,null!=o)for(c=0,u=o.length;u>c;c++)r=o[c],r.type===t&&(n=r);h=this.value.data;for(a in h)d=h[a],i[a]=(null!=n&&null!=(g=n.data)?g[a]:void 0)||d;null==i.c7&&(i.c7=document.location.href.substr(0,512)),null==i.c8&&(i.c8=document.referrer.substr(0,512)),null==i.c9&&(i.c9=document.title),null==i.cv&&(i.cv="2.0"),i.rn=Date.now(),l=this.value.url,s=[];for(a in i)d=i[a],null!=d&&""!==d&&s.push(a+"="+escape(d));return s.length>0&&(l+="?"+s.join("&")),l.substr(0,2080)},i(An,Ht),An.NAME="ComscoreWrapper",An.prototype.flashPlugins=[{id:"ComscorePlugin",src:"#{paths.resources}plugins/ComscorePlugin.swf",blocking:!1,host:"akamai",main:"ComscorePlugin",type:"application/x-shockwave-flash"}],An.prototype.createXML=function(e){var t,i,n,o,r,a,s,l,c,u,p,h,g,f,m,y,A,v,_;t=e.firstChild,a=e.getElementsByTagName("metrics")[0],null==a&&(a=e.createElement("metrics"),t.appendChild(a)),h=e.createElement("vendor"),h.setAttribute("id","comscore"),a.appendChild(h),r={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},c=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}],A=this.config.events;for(p in A)if(o=A[p],null!=o&&o.length>0)for(g=0,m=o.length;m>g;g++)for(n=o[g],s=e.createElement("property"),s.setAttribute("key",r[p][n.type]),h.appendChild(s),i=e.createElement("property"),i.setAttribute("key","COMSCORE_CSURL"),u=d.createTextContent(e,this.config.url),i.appendChild(u),s.appendChild(i),f=0,y=c.length;y>f;f++)l=c[f],u=(null!=(v=n.data)?v[l.value]:void 0)||(null!=(_=this.config.data)?_[l.value]:void 0),null!=u&&""!==u&&(i=e.createElement("property"),i.setAttribute("key",l.key),u=d.createTextContent(e,u),i.appendChild(u),s.appendChild(i));return e},i(vn,puremvc.SimpleCommand),vn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(yn.NAME),t.adStart()},i(_n,puremvc.SimpleCommand),_n.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(yn.NAME),t.videoStart()},i(En,Ri),En.prototype.moduleName="share",En.prototype.featureName="share",En.prototype.createModel=function(){this.registerProxy(new gn(this.config))},En.prototype.createController=function(){En.__super__.createController.call(this),this.registerCommand(Lo.MEDIA_CHANGE,fn)},En.prototype.createView=function(){this.registerMediator(new hn)},En.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE]},En.prototype.listNotificationPublications=function(){return En.__super__.listNotificationPublications.apply(this,arguments).concat([Lo.ADD_CONTROL,Lo.REMOVE_CONTROL,Lo.ADD_CONTROL_STATE,Lo.REMOVE_CONTROL_STATE])},xt.registerPlugin("share","html",En),xt.registerPlugin("share","external",En),i(bn,Ht),bn.NAME="ComscoreStreamsenseWrapper",bn.prototype.flashPlugins=[{id:"ComscoreStreamSensePlugin",src:"#{paths.resources}plugins/ComscoreStreamSensePlugin.swf",blocking:!1,host:"akamai",main:"ComscoreStreamSensePlugin"}],bn.prototype.createXML=function(e){var t,i,n,o,r,a,s;for(t=e.firstChild,i=e.getElementsByTagName("metrics")[0],null==i&&(i=e.createElement("metrics"),t.appendChild(i)),r=e.createElement("vendor"),r.setAttribute("id","comscoreStreamSense"),i.appendChild(r),o=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}],a=0,s=o.length;s>a;a++)n=o[a],null!=n.value&&this.createProperty(e,n.key,n.value,r);return e},i(Cn,st),Cn.NAME=_.NAME,Cn.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}},Cn.prototype.myStreamingTag=null,Cn.prototype.sdk=null,Cn.prototype.getScript=function(){return this.config.plugin.js},Cn.prototype.initialize=function(){Cn.__super__.initialize.call(this),this.sdk=akamai.amp.ns_,null!=this.sdk&&null===this.myStreamingTag&&(this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}))},Cn.prototype.mediaChange=function(){null!=this.myStreamingTag&&this.myStreamingTag.stop(),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")},Cn.prototype.adStart=function(e){null==e&&(e=null),this.myStreamingTag.playVideoAdvertisement(this.getMetaData(!0)),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")},Cn.prototype.start=function(e){var t;null==e&&(e=null),(null!=(t=this.facade.player.ads)?t.getInProgress():0)||(this.myStreamingTag.playVideoContentPart(this.getMetaData()),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play"))},Cn.prototype.stop=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")},Cn.prototype.ended=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : End"),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId})},Cn.prototype.getMetaData=function(e){var t,i,n,o;null==e&&(e=!1),i={},n=e?this.value.data.metadata.ads:this.value.data.metadata.video;for(t in n)o=n[t],"null"!==o&&(i[t]=o);return i},i(Sn,puremvc.SimpleCommand),Sn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.start(e.body)},i(Nn,puremvc.SimpleCommand),Nn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.adStart(e.body)},i(In,puremvc.SimpleCommand),In.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.stop(e.body)},i(wn,puremvc.SimpleCommand),wn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.adStart(e.body),t.stop(e.body)},i(Tn,puremvc.SimpleCommand),Tn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.mediaChange()},i(Pn,puremvc.SimpleCommand),Pn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Cn.NAME),t.ended()},i(Mn,lt),Mn.prototype.moduleName="comscore",Mn.prototype.createController=function(){Mn.__super__.createController.call(this),this.registerCommand(Lo.STARTED,_n),this.registerCommand(Lo.CONTENT_CHANGED,_n),this.registerCommand(xo.AD_STARTED,vn)},Mn.prototype.createModel=function(){this.registerProxy(new yn(this.config))},Mn.prototype.listNotificationInterests=function(){return[Lo.STARTED,xo.AD_STARTED,Lo.CONTENT_CHANGED]},xt.registerPlugin("comscore","html",Mn),xt.registerPlugin("comscore","flash",An),i(Dn,kt),Dn.prototype.execute=function(e){this.proxy.contentStarted()},i(xn,kt),xn.prototype.execute=function(e){this.proxy.contentEnded()},i(kn,kt),kn.prototype.execute=function(e){this.proxy.getEnabled()!==!1&&(this.proxy.mediaChanging=!0,this.proxy.engage(e.getBody()))},i(Ln,Rt),Ln.prototype.dispatchEvent=function(e,t){var i;i=Ln.__super__.dispatchEvent.call(this,e,t),this.facade.player.sendNotification(Lo.DISPATCH_EVENT,new s("ad"+i.type,i.detail))},i(Rn,Ln),Rn.prototype.execute=function(e){Rn.__super__.execute.call(this,e),this.proxy.breakStart()},i(On,Ln),On.prototype.execute=function(e){var t,i;On.__super__.execute.call(this,e),this.proxy.breakEnd(),"ima"===(null!=(i=e.getBody())?i.partner:void 0)&&(t=this.applicationState.getPlaybackRate(),this.facade.player.setPlaybackRate(t)),this.applicationState.getEnded()&&this.applicationState.getHasPostContent()===!0&&this.sendNotification(Lo.MEDIA_SEQUENCE_ENDED)},i(Vn,kt),Vn.prototype.execute=function(e){this.proxy.contentSeek(e.getBody())},i(Gn,Ln),Gn.prototype.execute=function(e){this.proxy.container=e.getBody(),Gn.__super__.execute.call(this,e)},i(Bn,kt),Bn.prototype.execute=function(e){"function"==typeof this.proxy.replay&&this.facade.player.getAutoplay()===!1&&this.proxy.replay()},Hn.prototype.id=null,Hn.prototype.title=null,Hn.prototype.duration=NaN,Hn.prototype.position=NaN,Hn.prototype.totalAds=NaN,Hn.prototype.type=null,Hn.prototype.partner=null,Hn.prototype.advertiser=null,Hn.prototype.companions=null,Hn.prototype.metadata=null,Hn.prototype.request=null,Hn.prototype.error=null,Hn.prototype.time=null,Un.create=function(e,t,i,n){return new Un(e,t,i,n)},Un.prototype.request=null,Un.prototype.partner=null,Un.prototype.config=null,i(Fn,Ln),Fn.prototype.execute=function(e){this.sendNotification(Lo.UPDATE_DATA_BINDINGS,{contexts:[this.proxy.getContextName()]}),Fn.__super__.execute.call(this,e)},i(jn,kt),jn.prototype.execute=function(e){if(this.applicationState.getLocked()!==!0){if(this.sendNotification(Lo.PLAY_REQUEST),this.proxy.getStarted()===!1)return void this.sendNotification(Lo.START,!0);this.proxy.play(),this.facade.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PLAYING)}},i(zn,kt),zn.prototype.execute=function(e){var t,i,n,o=this;return i=this.proxy.adVO.time,t=this.proxy.adVO.duration,"undefined"!==i&&i&&i!==t?(this.proxy.pause(),void this.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PAUSED)):(n={transform:function(e){return e===Lo.PLAYING?(setTimeout(function(){return o.player.removeTransform(Ho.PLAY_STATE,n),o.player.sendNotification(Lo.PAUSE)},300),e):void 0},priority:2},void this.player.addTransform(Ho.PLAY_STATE,n))},i(Yn,Ln),Yn.prototype.execute=function(e){var t;t=this.proxy.getPaused()||this.proxy.getStarted()===!1?Lo.PLAY:Lo.PAUSE,this.sendNotification(t,!0)},i(qn,Ln),qn.prototype.execute=function(e){this.proxy.setVolume(e.getBody()),qn.__super__.execute.call(this,e)},i(Wn,Ln),Wn.prototype.execute=function(e){"playing"===e.getBody().value&&this.dispatchEvent("playing",this.proxy.adVO)},i(Zn,Ln),Zn.prototype.execute=function(e){this.sendNotification(Lo.PLAY_REQUEST),this.playback.initialized===!1&&this.player.sendNotification(Lo.INITIALIZED),this.proxy.start(),Zn.__super__.execute.call(this,e)},i(Xn,st),Xn.NAME=st.NAME,Xn.prototype.inProgress=!1,Xn.prototype.paused=!1,Xn.prototype.started=!1,Xn.prototype.adVO=null,Xn.prototype.contextName="ad",Xn.prototype.container=null,Xn.prototype.partner=null,Xn.prototype.pods=null,Xn.prototype.mediaChanging=!1,Xn.prototype.createDefaultAdVO=function(){return new Hn(null,null,null,null,null,this.partner,null,null,null,null,null)},Xn.prototype.getContainer=function(){return this.facade.player.adContainer},Xn.prototype.getContextData=function(){return this.adVO||{}},Xn.prototype.setCompanions=function(e){return this.adVO.companions=e,this.sendNotification(xo.AD_COMPANION,this.adVO),e},Xn.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},Xn.prototype.getInProgress=function(){return this.inProgress},Xn.prototype.setInProgress=function(e){return this.inProgress=e,e},Xn.prototype.getStarted=function(){return this.started},Xn.prototype.setStarted=function(e){return this.started=e,e},Xn.prototype.getPaused=function(){return this.paused},Xn.prototype.setPaused=function(e){return this.paused=e,e},Xn.prototype.setCues=function(e){var t,i,n,o;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({startTime:t,endTime:t});return this.facade.player.mediaProxy.setCues(i),e},Xn.prototype.play=function(){this.setPaused(!1),this.sendNotification(xo.AD_PLAY,this.adVO)},Xn.prototype.pause=function(){this.setPaused(!0),this.sendNotification(xo.AD_PAUSE,this.adVO)},Xn.prototype.breakStart=function(){this.setInProgress(!0)},Xn.prototype.breakEnd=function(){this.setInProgress(!1),this.reset()},Xn.prototype.error=function(e,t){var i;null==t&&(t=!0),i=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message,this.facade.logger.error("[AMP AD ERROR]",""+i+" Skipping ad content.",e),null==this.adVO&&(this.adVO={}),this.adVO.error=e,this.sendNotification(xo.AD_ERROR,this.adVO),t===!0&&this.endBreak()},Xn.prototype.engage=function(e){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())},Xn.prototype.engageAds=function(){this.facade.player.removeCommand(Lo.START),this.facade.player.removeCommand(Lo.PLAY),this.facade.player.removeCommand(Lo.PAUSE),this.facade.player.removeCommand(Lo.ENDED),this.facade.player.removeCommand(Fo.PLAY),this.facade.player.removeCommand(Fo.PAUSE),this.facade.player.removeCommand(Fo.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(Lo.CHANGE_DURATION),this.facade.removeCommand(Lo.STARTED),this.facade.removeCommand(Lo.ENDED),this.facade.registerCommand(Lo.START,Zn),this.facade.registerCommand(Lo.PLAY,jn),this.facade.registerCommand(Lo.PAUSE,zn),this.facade.registerCommand(Fo.PLAY,jn),this.facade.registerCommand(Fo.PAUSE,zn),this.facade.registerCommand(Fo.TOGGLE_PLAY_PAUSE,Yn),this.facade.registerCommand(Lo.VOLUME_CHANGE,qn),this.facade.registerCommand(Lo.PLAY_STATE_CHANGE,Wn)},Xn.prototype.reset=function(){this.facade.removeCommand(Lo.START),this.facade.removeCommand(Lo.PLAY),this.facade.removeCommand(Lo.PAUSE),this.facade.removeCommand(Fo.PLAY),this.facade.removeCommand(Fo.PAUSE),this.facade.removeCommand(Fo.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(Lo.VOLUME_CHANGE),this.facade.removeCommand(Lo.PLAY_STATE_CHANGE),this.facade.player.registerCommand(Lo.START,q),this.facade.player.registerCommand(Lo.PLAY,ve),this.facade.player.registerCommand(Lo.PAUSE,R),this.facade.player.registerCommand(Lo.ENDED,Y),this.facade.player.registerCommand(Fo.PLAY,ve),this.facade.player.registerCommand(Fo.PAUSE,R),this.facade.player.registerCommand(Fo.TOGGLE_PLAY_PAUSE,D),this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(Lo.CHANGE_DURATION,ht),this.facade.registerCommand(Lo.STARTED,Dn),this.facade.registerCommand(Lo.ENDED,xn)},Xn.prototype.processAdRequest=function(e){var t=this;return this.facade.player.transform(Ho.AD_REQUEST,e).then(function(e){return t.facade.transform(Ho.AD_REQUEST,e)})},Xn.prototype.requestAd=function(){this.sendNotification(xo.REQUEST,this.adVO)},Xn.prototype.getPodById=function(e){var t,i,n,o;for(o=this.pods,i=0,n=o.length;n>i;i++)if(t=o[i],t.id===e)return t},Xn.prototype.setPodLocks=function(e){var t,i,n,o;for(i=0,n=e.length;n>i;i++)t=e[i],null!=(o=this.getPodById(t.id))&&(o.locked=t.locked)},Xn.prototype.resize=function(e){},Xn.prototype.startBreak=function(e){return null!=e&&(this.adVO=e),this.setStarted(!0),this.sendNotification(xo.BREAK_START,this.adVO),this.getEnabled()===!1?(this.endBreak(),!1):!0},Xn.prototype.endBreak=function(){this.sendNotification(xo.BREAK_END,this.adVO)},Xn.prototype.start=function(){this.mediaChanging=!1,this.startBreak()},Xn.prototype.contentPlay=function(){this.facade.player.sendNotification(Lo.PLAY,!0)},Xn.prototype.contentPause=function(){var e;e=this.facade.player.mediaElement,e.seeking===!0?e.once("seeked",function(){e.pause()}):e.pause()},Xn.prototype.contentStarted=function(){},Xn.prototype.contentSeek=function(e){},Xn.prototype.contentEnded=function(){},Xn.prototype.setVolume=function(e){},Xn.prototype.getVolume=function(){},Xn.prototype.terminateAd=function(){},Xn.prototype.terminateAllAds=function(){},i(Qn,lt),Qn.prototype.moduleName="comscorestreamsense",Qn.prototype.createModel=function(){this.registerProxy(new Cn(this.config))},Qn.prototype.createController=function(){Qn.__super__.createController.call(this),this.registerCommand(Lo.MEDIA_CHANGE,Tn),this.registerCommand(xo.AD_STARTED,Nn),this.registerCommand(xo.AD_ENDED,In),this.registerCommand(xo.SKIPPED,In),this.registerCommand(xo.AD_ERROR,wn),this.registerCommand(Lo.PLAYING,Sn),this.registerCommand(Lo.PAUSED,In),this.registerCommand(Lo.ENDED,Pn)},Qn.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE,xo.AD_STARTED,xo.AD_ENDED,xo.AD_ERROR,xo.SKIPPED,Lo.ENDED,Lo.PAUSED,Lo.PLAYING]},xt.registerPlugin("comscorestreamsense","html",Qn),xt.registerPlugin("comscorestreamsense","flash",bn);var Qo={BREAK_START:"adComponentBreakInitiated",
BREAK_END:"adComponentBreakComplete",BREAK_SKIPPED:"adComponentBreakSkipped",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentImpressionEnd",COMPLETE:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest",AD_REQUEST_COMPLETE:"adComponentAdsRequestComplete",AD_SKIPPED:"adComponentAdSkipped",AD_IMPRESSION:"adComponentImpression"};i(Jn,ze),Jn.prototype.configurationName="imaoverlay",Jn.NAME="IMAOveralyProxy",Jn.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30},Jn.prototype.durationTimer=null,Jn.prototype.intervalTimer=null,Jn.prototype.delayTimer=null,Jn.prototype.stop=function(){clearTimeout(this.durationTimer),clearTimeout(this.delayTimer),clearTimeout(this.intervalTimer)},Jn.prototype.play=function(){var e=this;this.stop(),this.delayTimer=setTimeout(function(){return e.requestAd()},1e3*this.value.delay)},Jn.prototype.requestAd=function(){var e;e=this.getValue("adTagUrl"),null!=e&&(e=e.replace("[timestamp]",(new Date).getTime()),e=e.replace("__random-number__",(new Date).getTime())),r.request({url:e,withCredentials:!0}).then(this.vastLoadHandler.bind(this))["catch"](this.error.bind(this))},Jn.prototype.vastLoadHandler=function(e){var t,i,n,o,r,a;if(a=e.target.responseXML,null!=a)try{t=a.querySelector("NonLinear"),null!=t?(r=null!=a.querySelector("Impression")?a.querySelector("Impression").textContent:"",n=null!=a.querySelector("Tracking[event=creativeView]")?a.querySelector("Tracking[event=creativeView]").textContent:"",i=null!=t.querySelector("NonLinearClickThrough")?t.querySelector("NonLinearClickThrough").textContent:"",o={src:t.querySelector("StaticResource").textContent,width:t.getAttribute("width"),height:t.getAttribute("height"),tracking:[r,n],href:i},this.displayAd(o)):this.error("No overlay was returned")}catch(s){this.error(s)}},Jn.prototype.error=function(e){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",e),this.stop()},Jn.prototype.displayAd=function(e){var t=this;this.sendNotification(Jo.ADD_OVERLAY,e),this.durationTimer=setTimeout(function(){return t.sendNotification(Jo.REMOVE_OVERLAY),t.intervalTimer=setTimeout(function(){return t.requestAd()},1e3*t.value.interval)},1e3*this.value.duration)};var Jo={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};i(Kn,Xn),Kn.NAME=Xn.NAME,Kn.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null,logEventsEnabled:!1},Kn.prototype.partner="ima",Kn.prototype.key="ima",Kn.prototype.intervals=null,Kn.prototype.adDisplayContainer=null,Kn.prototype.adDisplayContainerInitialized=!1,Kn.prototype.adsLoader=null,Kn.prototype.adsRenderingSettings=null,Kn.prototype.adsManagerLoaded=!1,Kn.prototype.adsManager=null,Kn.prototype.cuepoints=null,Kn.prototype.adLoaded=!1,Kn.prototype.playWhenLoaded=!1,Kn.prototype.contentHasEnded=!1,Kn.prototype.adTagUrl=null,Kn.prototype.viewMode=null,Kn.prototype.playbackCore=null,Kn.prototype.loadedmetadata=null,Kn.prototype.setEnabled=function(e){var t;return Kn.__super__.setEnabled.call(this,e),e===!1&&(null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy(),this.getInProgress()&&this.contentPlay()),e},Kn.prototype.onLoadedMetadata=function(e){this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Kn.prototype.initialize=function(){},Kn.prototype.ready=function(){var e,t,i,n;this.viewMode=google.ima.ViewMode.NORMAL,window.addEventListener("resize",this.resize.bind(this)),null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed),null!=this.config.vpaidMode&&null!=(t=google.ima.ImaSdkSettings.VpaidMode[this.config.vpaidMode.toUpperCase()])&&google.ima.settings.setVpaidMode(t),null!=this.config.disableFlashAds&&google.ima.settings.setDisableFlashAds(this.config.disableFlashAds),this.adDisplayContainer=this.createPlugin(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),i=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),e=i?parseInt(i[2],10)>52:!1,((null!=(n=r.getIOSversion())?n[0]:void 0)>=10||e)&&this.facade.player.getConfig().playsinline!==!1&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)},Kn.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.getContainer())},Kn.prototype.engage=function(e){var t,i;null==e&&(e=!0),this.getEnabled()!==!1&&(Kn.__super__.engage.call(this),(this.adsManagerLoaded===!0&&this.contentHasEnded===!1||this.contentHasEnded===!0&&"postroll"===(null!=(t=this.adVO)?t.type:void 0))&&null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManagerLoaded=!1,this.contentHasEnded=!1,this.adsManagerLoaded=!1,this.playWhenLoaded=!1)},Kn.prototype.setVolume=function(e){var t;return null!=(t=this.adsManager)&&t.setVolume(e),e},Kn.prototype.getVolume=function(){var e;return null!=(e=this.adsManager)?e.getVolume():void 0},Kn.prototype.requestAd=function(){var e,t,i,n,o,a,s,l=this;return Kn.__super__.requestAd.call(this),t=this.getDimensions(),o=t.clientWidth,i=t.clientHeight,e=new google.ima.AdsRequest,this.adTagUrl=this.getValue("adTagUrl"),"object"==typeof this.adTagUrl&&(this.adTagUrl=this.buildAdTagUrl(this.adTagUrl)),e.adTagUrl=this.adTagUrl,null==e.adsResponse&&null==e.adTagUrl?void this.onAdError("No valid adTagUrl or adsResponse provided."):(e.linearAdSlotWidth=o,e.linearAdSlotHeight=i,e.nonLinearAdSlotWidth=(null!=(a=this.value.overlay)?a.width:void 0)||o,e.nonLinearAdSlotHeight=(null!=(s=this.value.overlay)?s.height:void 0)||i,n=this.adsLoader.getSettings(),null!=this.config.ppid&&n.setPpid(this.getValue("ppid")),void Promise.resolve(Un.create(e,"ima",this.getData(),{loader:this.adsLoader})).then(function(e){var t;return t=l.getValue("adsResponse"),null!=t&&""!==t?r.requestText(t).then(function(t){return e.request.adsResponse=t,e}):e}).then(this.processAdRequest.bind(this)).then(function(e){return l.adsLoader.requestAds(e.request)}))},Kn.prototype.requestOverlay=function(){var e,t;t=this.value.overlay,null!=t&&(e=new google.ima.AdsRequest,e.adTagUrl=t.adTagUrl,e.nonLinearAdSlotWidth=t.width||300,e.nonLinearAdSlotHeight=t.height||50,this.adsLoader.requestAds(e))},Kn.prototype.start=function(e){var t;return null==e&&(e=!0),e===!0?(this.playbackCore=this.facade.player.retrieveProxy(et.NAME).getActivePlaybackCore(),t=this.getMediaElement(),t.once("loadedmetadata",this.loadedmetadata),this.playbackCore.setEnabled(!1),this.facade.isFullscreenDevice()?this.playbackCore.load():t.load()):this.engage(),Kn.__super__.start.call(this)===!1?!1:(this.isLiveMidroll=e===!1&&"live"===this.facade.player.retrieveProxy(tt.NAME).getTemporalType(),this.adDisplayContainerInitialized!==!0&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0),void(this.canPlay()===!0&&e===!0?this.startAd():(this.playWhenLoaded=!0,this.requestAd())))},Kn.prototype.canPlay=function(){return this.adsManagerLoaded===!0},Kn.prototype.startAd=function(){this.playWhenLoaded=!1;try{null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(e){this.error(e)}},Kn.prototype.resize=function(e,t){var i;null==t&&(t=this.getDimensions()),(null==this.dimensions||this.dimensions.width!==t.width||this.dimensions.height!==t.height)&&(this.dimensions=t,null!=e&&(this.viewMode=e===Ro.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),null!=(i=this.adsManager)&&i.resize(this.dimensions.width,this.dimensions.height,this.viewMode))},Kn.prototype.onAdsManagerLoaded=function(e){var t,i;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate"),this.adsRenderingSettings.autoAlign=!0,this.adsRenderingSettings.useStyledNonLinearAds=!0,null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManager=e.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings),this.sendNotification(xo.AD_MANAGER_LOADED,{adManager:this.adsManager,viewMode:google.ima.ViewMode.NORMAL,adContainer:this.getContainer()}),this.adsManagerLoaded=!0,this.cuePoints=this.adsManager.getCuePoints(),this.setCues(this.cuePoints),-1!==this.cuePoints.indexOf(-1)&&this.sendNotification(Lo.HAS_POST_CONTENT,!0),t=this.onAdEvent.bind(this),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,t),this.sendNotification(xo.REQUEST_COMPLETE,{pods:this.cuePoints}),this.sendNotification(xo.RESPONSE,{pods:this.cuePoints,response:e,adsManager:this.adsManager}),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Kn.prototype.onAdClick=function(e){return(null!=e?e.getAd().isLinear():void 0)===!1?void this.facade.player.sendNotification(Lo.PAUSE):(this.getPaused()||this.pause(),void this.sendNotification(xo.AD_CLICKED,this.adVO))},Kn.prototype.onAdPaused=function(e){this.setPaused(!0),this.facade.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PAUSED),this.facade.player.sendNotification(Lo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),this.facade.player.sendNotification(xo.AD_PAUSED,this.adVO)},Kn.prototype.onAdResumed=function(e){this.setPaused(!1),this.facade.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PLAYING)},Kn.prototype.onAdEvent=function(e){var t,i,n,o,r,a,s,l,d,c;switch(t=e.getAd(),null!=this.adVO&&(null!=t&&(t.wrapperAdIds="function"==typeof t.getWrapperAdIds?t.getWrapperAdIds():void 0,t.wrapperAdSystems="function"==typeof t.getWrapperAdSystems?t.getWrapperAdSystems():void 0),this.adVO.metadata=t),e.type){case google.ima.AdEvent.Type.IMPRESSION:this.sendNotification(xo.IMPRESSION,this.adVO);break;case google.ima.AdEvent.Type.LOADED:t.isLinear()?(this.facade.player.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-overlaymode"),r=t.getAdPodInfo().getPodIndex(),a=0===r?"preroll":-1===r?"postroll":"midroll",this.adVO=new Hn(t.getAdId(),t.getAdId(),t.getDuration(),r,a,"ima",null,null,this.adTagUrl,t,t.getAdPodInfo().getTotalAds(),t.getDuration()-this.adsManager.getRemainingTime()),(!this.getInProgress()&&"midroll"===a||"postroll"===a)&&(this.startBreak(),this.engageAds()),this.resize(),this.sendNotification(xo.AD_LOADED,this.adVO),this.sendNotification(xo.AD_DURATION_CHANGE,this.adVO),this.setVolume(this.facade.player.retrieveProxy(ot.NAME).getVolume())):(this.facade.player.sendNotification(Lo.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(this.adVO.position=t.getAdPodInfo().getAdPosition(),this.sendNotification(xo.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),67)),this.facade.player.sendNotification(Lo.CHANGE_PLAY_STATE,Vo.PLAYING),this.sendNotification(xo.AD_PLAY,this.adVO));try{for(n=[],o=("function"==typeof this.getConfigurationData&&null!=(d=this.getConfigurationData())?d.companions:void 0)||[],s=0,l=o.length;l>s;s++)i=o[s],n=n.concat(t.getCompanionAds(i.width,i.height));(null!=n?n.length:void 0)>0&&this.setCompanions(n)}catch(u){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",u)}break;case google.ima.AdEvent.Type.COMPLETE:t.isLinear()&&this.sendNotification(xo.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(xo.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(xo.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(xo.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.facade.player.retrieveProxy(ot.NAME).getEnded()===!0&&null!=(null!=(c=e.getAdData())?c.adError:void 0)&&(this.forceBreakEnd=!0),this.getValue("logEventsEnabled")===!0&&this.sendNotification(xo.LOG,this.adVO);break;case google.ima.AdEvent.Type.SKIPPED:this.sendNotification(xo.SKIPPED,this.adVO);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:(this.getInProgress()===!0||this.forceBreakEnd===!0)&&(this.forceBreakEnd=!1,this.endBreak())}},Kn.prototype.getDimensions=function(){var e;return e=this.getContainer(),{width:e.clientWidth,height:e.clientHeight}},Kn.prototype.onAdTimeUpdate=function(e){var t,i;this.resize(),t=r.clamp(this.adsManager.getRemainingTime(),0,this.adVO.duration),i=Math.max(this.adVO.duration-t,0),this.adVO.time=i,this.sendNotification(xo.AD_TIME_UPDATE,i),this.sendNotification(xo.AD_TIME_REMAINING,t)},Kn.prototype.onAdError=function(e){var t;t=(null!=e&&"function"==typeof e.getError?e.getError():void 0)||e,this.error(t),this.contentPlay()},Kn.prototype.play=function(){var e;Kn.__super__.play.call(this);try{null!=(e=this.adsManager)&&e.resume(),this.sendNotification(xo.AD_RESUME)}catch(t){this.facade.logger.error("[AMP IMA ERROR]","resume",t)}},Kn.prototype.pause=function(){if(Kn.__super__.pause.call(this),null!=this.adsManager)try{this.adsManager.pause()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","pause",e)}else this.playWhenLoaded=!1},Kn.prototype.clearIntervals=function(){var e,t,i,n;for(n=this.intervals,t=0,i=n.length;i>t;t++)e=n[t],clearInterval(this.intervals.pop())},Kn.prototype.breakEnd=function(){var e;this.clearIntervals(),Kn.__super__.breakEnd.call(this),e=this.facade.retrieveProxy(Jn.NAME),null!=e&&e.play()},Kn.prototype.setCompanions=function(e){var t,i,n,o,r;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({data:t.getContent(),type:null!=(r=t.getContentType())?r.toLowerCase():void 0,width:t.getWidth(),height:t.getHeight(),metadata:t});return Kn.__super__.setCompanions.call(this,i),e},Kn.prototype.contentPause=function(){var e,t=this;return e=["pause","waiting","playing","ended","durationchange","error"],this.facade.player.retrieveProxy(ot.NAME).getSeeking()===!1?e.push("seeked"):this.getMediaElement().once("seeked",function(){t.sendNotification(Lo.DISABLE_VIDEO_EVENTS,["seeked"])}),this.sendNotification(Lo.DISABLE_VIDEO_EVENTS,e),this.isLiveMidroll===!0?void(this.getMediaElement().volume=0):void Kn.__super__.contentPause.call(this)},Kn.prototype.contentPlay=function(){var e,t;if(this.getInProgress()===!0&&this.endBreak(),this.sendNotification(Lo.ENABLE_VIDEO_EVENTS,["pause","seeked","waiting","playing","ended","durationchange","error"]),"postroll"!==(null!=(e=this.adVO)?e.type:void 0)){if(this.isLiveMidroll===!0){if(this.getMediaElement().volume=this.facade.player.retrieveProxy(ot.NAME).getVolume(),"ipad"!==r.getDevice())return;this.getMediaElement().load()}Kn.__super__.contentPlay.call(this),"midroll"===(null!=(t=this.adVO)?t.type:void 0)&&"desktop"===r.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))}},Kn.prototype.contentEnded=function(){var e;this.contentHasEnded=!0;try{null!=(e=this.adsLoader)&&"function"==typeof e.contentComplete&&e.contentComplete()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",t)}},Kn.prototype.terminateAd=function(){var e;try{null!=(e=this.adsManager)&&e.stop()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",t)}"postrol"===this.adVO.type&&this.sendNotification(Lo.HAS_POST_CONTENT,!1),this.endBreak(),this.contentPlay()},Kn.prototype.terminateAllAds=function(){var e;try{null!=(e=this.adsManager)&&e.destroy()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",t)}this.sendNotification(Lo.HAS_POST_CONTENT,!1),this.endBreak(),this.contentPlay()},Kn.prototype.destroy=function(){var e;this.clearIntervals(),null!=(e=this.adsManager)&&"function"==typeof e.destroy&&e.destroy()},Kn.prototype.buildAdTagUrl=function(e){var t;return t=e.base||"//pubads.g.doubleclick.net/gampad/ads",t+="?"+this.encodeAdTagParams(e.params)},Kn.prototype.encodeAdTagParams=function(e){var t,i,n;t=[];for(i in e)n=e[i],"object"==typeof n&&(n=encodeURIComponent(this.encodeAdTagParams(n))),t.push(""+i+"="+n);return t.join("&")},i($n,puremvc.SimpleCommand),$n.prototype.execute=function(e){this.facade.sendNotification(Lo.ADD_APPLICATION_STATE,"ad-overlay-mode")},i(eo,puremvc.SimpleCommand),eo.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Jn.NAME),t.stop(),this.facade.player.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-overlay-mode")},i(to,fe),to.prototype.componentName="ad-overlay",to.prototype.anchor=null,to.prototype.image=null,to.prototype.tracker=null,to.prototype.tracker2=null,to.prototype.closeButton=null,to.prototype.closeText=null,to.prototype.onRegister=function(){var e=this;to.__super__.onRegister.call(this),this.anchor=this.create("ad-overlay-anchor"),this.anchor.target="_blank",this.image=this.create("ad-overlay-img",this.anchor,"img"),this.tracker=this.create(),this.tracker.width=0,this.tracker.height=0,this.tracker2=this.create(null,this,"img"),this.tracker2.width=0,this.tracker2.height=0,this.closeButton=this.create("ad-close-button",this.anchor),this.closeButton.onclick=function(t){return t.stopImmediatePropagation(),e.sendNotification(Jo.REMOVE_OVERLAY),!1},this.closeText=this.createText("ad-close-text","x",this.closeButton)},to.prototype.listNotificationInterests=function(){return[Jo.ADD_OVERLAY,Jo.REMOVE_OVERLAY]},to.prototype.handleNotification=function(e){var t;switch(e.getName()){case Jo.ADD_OVERLAY:t=e.getBody(),this.image.src=t.src,this.anchor.href=t.href,this.tracker.src=t.tracking[0],this.tracker2.src=t.tracking[1]}},i(io,puremvc.SimpleCommand),io.prototype.execute=function(e){var t=this;setTimeout(function(){return t.facade.retrieveProxy(Kn.NAME).ready()},10)},i(no,puremvc.SimpleCommand),no.prototype.execute=function(e){this.facade.retrieveProxy(Kn.NAME).resize(e.getBody())},i(oo,puremvc.SimpleCommand),oo.prototype.execute=function(e){this.facade.retrieveProxy(Kn.NAME).resize(e.getBody())},i(ro,Kn),ro.NAME=Kn.NAME,ro.prototype.createPlugin=function(){var e,t,i;return e=this.getContainer(),r.isIPhone()&&(null!=(t=r.getIOSversion())?t[0]:void 0)<10?new google.ima.AdDisplayContainer(e,this.facade.player.getMediaElement(),e):((null!=(i=r.getIOSversion())?i[0]:void 0)>=10&&(this.facade.player.getMediaElement().playsInline=null!=this.facade.player.getConfig().playsinline?this.facade.player.getConfig().playsinline:!0),new google.ima.AdDisplayContainer(e,this.facade.player.getMediaElement()))},ro.prototype.engage=function(e){ro.__super__.engage.call(this,e),this.sendNotification(Lo.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},ro.prototype.reset=function(e){ro.__super__.reset.call(this,e),this.sendNotification(Lo.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},ro.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(et.NAME).getActivePlaybackCore(),this.playbackCore.setEnabled(!1),this.setInProgress(!0)},ro.prototype.breakEnd=function(){ro.__super__.breakEnd.call(this),this.playbackCore.setEnabled(!0)},i(ao,Ht),ao.NAME="AdWrapper",ao.prototype.enabled=!0,ao.prototype.paused=!1,ao.prototype.started=!1,ao.prototype.adVO=null,ao.prototype.partner=null,ao.prototype.getFeatureName=function(){return"ads"},ao.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")},ao.prototype.getStarted=function(){return this.started},ao.prototype.getPaused=function(){return this.paused},ao.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},ao.prototype.setEnabled=function(e){return this.enabled=e,this.player.mediaElement.setPlayerProperty("adsEnabled",e),e},ao.prototype.getEnabled=function(){return this.enabled},ao.prototype.getCurrentAd=function(){return this.adVO},ao.prototype.enable=function(){this.setEnabled(!0)},ao.prototype.disable=function(){this.setEnabled(!1)},ao.prototype.createFlashVars=function(e){return e.core_ads_enabled=!0,e},ao.prototype.listNotificationInterests=function(){var e,t;return ao.__super__.listNotificationInterests.call(this).concat(function(){var i;i=[];for(e in Qo)t=Qo[e],i.push(t);return i}())},ao.prototype.handleNotification=function(e){var t,i,n,o,r,a,l,d,c,u,p,h,g;switch(ao.__super__.handleNotification.call(this,e),r=e.getName(),t=e.getBody(),this.adVO=this.createAdVO(t),c=this,r){case Qo.BREAK_START:u=xo.BREAK_START,this.facade.setPlayState("playing"),(null!=(g=t.cuePoints)?g.length:void 0)>0&&(i=t.cuePoints.map(function(e){var t;return t=isNaN(e.sceneStartSeconds)?e.sceneEndSeconds:e.sceneStartSeconds,{startTime:t,endTime:e.sceneEndSeconds}}),this.facade.setCues(i));break;case Qo.BREAK_END:u=xo.BREAK_END;break;case Qo.BREAK_SKIPPED:u=xo.BREAK_SKIPPED;break;case Qo.AD_MEDIA_LOADED:u=xo.AD_LOADED,this.start=!1,c.dispatchEvent(new s(xo.AD_DURATION_CHANGE.replace(/^ads/,""),this.adVO));break;case Qo.AD_STARTED:u=xo.AD_STARTED,this.started=!0,this.sendNotification(Lo.ADD_APPLICATION_STATE,"ad-mode");break;case Qo.AD_TIME_UPDATE:u=xo.AD_TIME_UPDATE,l=t.duration-t.currentTime,c.dispatchEvent(new s(xo.AD_TIME_REMAINING.replace(/^ads/,""),l)),t=t.currentTime;break;case Qo.AD_TIME_REMAINING:u=xo.AD_TIME_REMAINING,t=t.timeElapsed;break;case Qo.AD_ERROR:case Qo.AD_PLAYBACK_FAILED:u=xo.AD_ERROR,this.start=!1,this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Qo.COMPLETE:u=xo.COMPLETE;break;case Qo.AD_ENDED:case Qo.AD_PLAYBACK_TERMINATED:u=xo.AD_ENDED,this.sendNotification(Lo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Qo.AD_CLICKED:u=xo.AD_CLICKED;break;case Qo.AD_COMPANION:u=xo.AD_COMPANION,null!=this.adVO&&null!=t&&(this.adVO.companions=t);break;case Qo.AD_PAUSE:u=xo.AD_PAUSE,c=this.player,this.paused=!0,this.player.setPlayState("paused");break;case Qo.AD_PLAY:u=xo.AD_PLAY,this.paused=!1,this.player.setPlayState("playing");break;case Qo.AD_LOG:u=xo.AD_LOG;break;case Qo.AD_FIRST_QUARTILE:u=xo.FIRST_QUARTILE;break;case Qo.AD_MIDPOINT:u=xo.MIDPOINT;break;case Qo.AD_THIRD_QUARTILE:u=xo.THIRD_QUARTILE;break;case Qo.AD_REQUEST:u=xo.REQUEST;break;case Qo.AD_REQUEST_COMPLETE:for(u=xo.REQUEST_COMPLETE,a=[],n=t.cuePoints||[],p=0,h=n.length;h>p;p++)d=n[p],a.push(new Hn(d.sceneId,d.sceneTitle,d.sceneDuration,d.scenePodIndex,d.scenePodPosition,this.partner,null,null,null,{},d.sceneSubCount,d.sceneEndSeconds));this.adVO={pods:a},o=new s("response",this.adVO),o.player=this.player,c.dispatchEvent(o);break;case Qo.AD_SKIPPED:u=xo.SKIPPED;break;case Qo.AD_IMPRESSION:u=xo.IMPRESSION}null!=u&&(this.sendNotification(u,this.adVO),o=u===xo.AD_TIME_REMAINING||u===xo.AD_TIME_UPDATE?new s(u.replace(/^ads/,""),t):new s(u.replace(/^ads/,""),this.adVO),o.player=this.player,c.dispatchEvent(o))},ao.prototype.createAdVO=function(e){return null==e?null:new Hn(e.id,e.title,e.duration,e.adIndex,e.podPosition,e.adPlatform,null,null,e.requestURL,e.metadata,e.totalAds,e.currentTime)},ao.prototype.setPodLocks=function(e){var t,i,n,o;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({sceneId:t.id,sceneLocked:t.locked,sceneTitle:t.title,sceneStartSeconds:t.time,sceneEndSeconds:t.duration+t.time,scenePodIndex:t.position,scenePodPosition:t.type});this.player.mediaElement.setAdPodLocks(i)},ao.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()},ao.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()},ao.prototype.requestAd=function(){this.player.mediaElement.triggerAd()},i(so,ao),so.NAME="IMAWrapper",so.prototype.partner="ima",so.prototype.flashPlugins=[{id:"GoogleIMAPlugin",src:"#{paths.resources}plugins/GoogleIMAPlugin.swf",blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"},{id:"IMAOverlayAdPlugin",src:"#{paths.resources}plugins/IMAOverlayAdPlugin.swf",blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"},{id:"AdOptionsPlugin",src:"#{paths.resources}plugins/AdOptionsPlugin.swf",blocking:!1,host:"akamai",main:"AdOptionsPlugin",type:"application/x-shockwave-flash"}],so.prototype.createXML=function(e){var t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m;for(i=e.firstChild,t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),d=e.createElement("vendor"),d.setAttribute("id","dfp"),t.appendChild(d),l=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}],c=0,h=l.length;h>c;c++)s=l[c],null!=s.value&&this.createProperty(e,s.key,s.value,d);if(null!=this.config.position&&d.setAttribute("position",this.config.position),null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(e,"DFP_AD_TAG_PARAMS",this.config.params.adTag,d),null!=this.config.params.manual&&this.createProperty(e,"DFP_MANUAL_PARAMS",this.config.params.manual,d)),null!=this.config.companions){for(o=[],r=[],m=this.config.companions,u=0,g=m.length;g>u;u++)n=m[u],o.push(n.width+"x"+n.height),r.push(n.id);this.createProperty(e,"DFP_SIZE",o.join(","),d),this.createProperty(e,"COMPANION_ID",r.join(","),d)}if(null!=this.config.disableCompanionAds&&this.createProperty(e,"disableCompanionAds",this.config.disableCompanionAds,d),null!=this.config.overlay)for(this.config.overlay.enabled===!0&&(a=e.createElement("overlay"),t.appendChild(a)),l=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],p=0,f=l.length;f>p;p++)s=l[p],null!=s.value&&this.createProperty(e,s.key,s.value,a);return e},i(lo,Ri),lo.NAME="AdPlugin",lo.prototype.container=null,lo.prototype.featureName="ads",lo.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)},lo.prototype.createController=function(){lo.__super__.createController.call(this),this.registerCommand(Lo.MEDIA_CHANGE,kn),this.registerCommand(xo.BREAK_START,Rn),this.registerCommand(xo.AD_LOADED,Fn),this.registerCommand(xo.BREAK_END,On),this.registerCommand(Fo.SEEKED,Vn),this.registerCommand(xo.AD_CONTAINER_CREATED,Gn),this.registerCommand(Lo.REPLAY,Bn),this.registerCommand(xo.AD_STARTED,Ln),this.registerCommand(xo.SKIPPED,Ln),this.registerCommand(xo.AD_MANAGER_LOADED,Ln),this.registerCommand(xo.AD_TIME_UPDATE,Ln),this.registerCommand(xo.AD_TIME_REMAINING,Ln),this.registerCommand(xo.AD_DURATION_CHANGE,Ln),this.registerCommand(xo.AD_ENDED,Ln),this.registerCommand(xo.AD_ERROR,Ln),this.registerCommand(xo.AD_COMPANION,Ln),this.registerCommand(xo.FIRST_QUARTILE,Ln),this.registerCommand(xo.MIDPOINT,Ln),this.registerCommand(xo.THIRD_QUARTILE,Ln),this.registerCommand(xo.COMPLETE,Ln),this.registerCommand(xo.LOG,Ln),this.registerCommand(xo.REQUEST,Ln),this.registerCommand(xo.AD_RESUME,Ln),this.registerCommand(xo.AD_PLAY,Ln),this.registerCommand(xo.AD_PAUSE,Ln),this.registerCommand(xo.AD_PAUSED,Ln),this.registerCommand(xo.IMPRESSION,Ln),this.registerCommand(xo.AD_CLICKED,Ln),this.registerCommand(xo.REQUEST_COMPLETE,Ln),this.registerCommand(xo.RESPONSE,Ln),this.registerCommand(xo.BREAK_SKIPPED,Ln)},lo.prototype.isFullscreenDevice=function(){return r.isFullscreenDevice()},lo.prototype.createProxy=function(){},lo.prototype.createFullscreenProxy=function(){},lo.prototype.listNotificationInterests=function(){return[Lo.MEDIA_CHANGE,Lo.REPLAY,Lo.PLAY,Lo.PAUSE,Lo.PAUSED,Lo.START,Lo.STARTED,Lo.ENDED,Lo.READY,Lo.VOLUME_CHANGE,Lo.FULL_SCREEN_CHANGE,Lo.CHANGE_ACTIVE_STATE,Lo.PLAY_STATE_CHANGE,Fo.PLAY,Fo.PAUSE,Fo.SEEKED,Fo.TOGGLE_PLAY_PAUSE]},lo.prototype.listNotificationPublications=function(){var e,t;return lo.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in xo)t=xo[e],i.push(t);return i}()).concat([Lo.PLAY_REQUEST,Lo.UPDATE_DATA_BINDINGS,Lo.DISPLAY_TIME,Lo.DISABLE_FULL_SCREEN,Lo.ENABLE_VIDEO_EVENTS,Lo.DISABLE_VIDEO_EVENTS,Lo.HAS_POST_CONTENT,Lo.MEDIA_SEQUENCE_ENDED,Lo.CHANGE_PLAY_STATE,Lo.AUTOPLAY_BLOCKED])},lo.prototype.setEnabled=function(e){this.proxy.setEnabled(e)},lo.prototype.getEnabled=function(){return this.proxy.getEnabled()},lo.prototype.getInProgress=function(){return this.proxy.getInProgress()},lo.prototype.getStarted=function(){return this.proxy.getStarted()},lo.prototype.getPaused=function(){return this.proxy.getPaused()},lo.prototype.getCompanions=function(){return this.proxy.getCompanions()},lo.prototype.getCurrentAd=function(){return this.proxy.adVO},lo.prototype.setPodLocks=function(e){this.proxy.setPodLocks(e)},lo.prototype.resize=function(e){this.proxy.resize(e)},lo.prototype.terminateAd=function(){this.proxy.terminateAd()},lo.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()},lo.prototype.requestAd=function(){this.proxy.start(!1)},i(co,Ht),co.NAME="AdChoicesWrapper",co.prototype.flashView={elements:{adOptions:{elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}}}}}},i(uo,ge),uo.prototype.componentName="ad-choices",uo.prototype.icon=null,uo.prototype.text=null,uo.prototype.container=null,uo.prototype.onRegister=function(){var e;uo.__super__.onRegister.call(this),e=this.facade.retrieveProxy(_.NAME),this.container=this.create("ad-choices-link",this,"a"),this.container.target="_blank",this.container.href=e.getTarget(),this.text=this.createText("ad-choices-text","AdChoices",this.container),this.icon=this.create("ad-choices-icon",this.container)},uo.prototype.listNotificationInterests=function(){return[xo.AD_CONTAINER_CREATED]},uo.prototype.handleNotification=function(e){var t;switch(e.getName()){case xo.AD_CONTAINER_CREATED:t=e.getBody(),null!=t&&t.appendChild(this.viewComponent)}},i(po,_),po.NAME=_.NAME,po.prototype.defaults={target:null},po.prototype.getTarget=function(){return this.data.target},po.prototype.setTarget=function(e){return this.data.target=e},i(ho,lo),ho.prototype.moduleName="ima",ho.prototype.createFullscreenProxy=function(){return new ro(this.config)},ho.prototype.createProxy=function(){return new Kn(this.config)},ho.prototype.isFullscreenDevice=function(){var e;return e=navigator.userAgent,
this.config.fullscreen===!0||r.isFullscreenDevice()||/Android 4\.[0-1]/.test(e)||/CrKey/.test(e)},ho.prototype.createModel=function(){ho.__super__.createModel.call(this),null!=this.config.overlay&&this.registerProxy(new Jn(this.config.overlay))},ho.prototype.createController=function(){ho.__super__.createController.call(this),null!=this.config.overlay&&(this.registerCommand(Jo.ADD_OVERLAY,$n),this.registerCommand(Jo.REMOVE_OVERLAY,eo)),this.registerCommand(Lo.READY,io),this.registerCommand(Lo.FULL_SCREEN_CHANGE,no),this.registerCommand(Lo.CHANGE_ACTIVE_STATE,oo)},ho.prototype.createView=function(){ho.__super__.createView.call(this),null!=this.config.overlay&&this.registerMediator(new to)},xt.registerPlugin("ima","html",ho),xt.registerPlugin("ima","flash",so),i(go,Ht),go.NAME="HLSWrapper",go.prototype.flashPlugins=[{id:"flashlsOSMF",src:"#{paths.resources}plugins/flashlsOSMF.swf",host:"osmf",type:"application/x-shockwave-flash"}],xt.registerPlugin("hls","flash",go),i(fo,Oe),fo.prototype.playbackCoreName="hls",fo.prototype.player=null,fo.prototype.hlsConfig=null,fo.prototype.fragErrorTime=0,fo.prototype.timedMedatadata=null,fo.prototype.currentMedatadata=null,fo.prototype.id3Track=null,fo.prototype.manifestParsed=!1,fo.prototype.details=null,fo.prototype.quality=-1,fo.prototype.qualityMode="auto",fo.prototype.userSwitched=!1,fo.prototype.canPlayMedium=function(e){return fo.__super__.canPlayMedium.call(this,e)||"audio"===e},fo.prototype.getUseMAE=function(){return fo.__super__.getUseMAE.call(this)&&"undefined"!=typeof MediaAccelerationHlsJsWrapper&&null!==MediaAccelerationHlsJsWrapper},fo.prototype.getConfig=function(){var e,t,i;return e=r.clone(this.config.data),t=this.facade.configuration.getMetadataOverrides(this.config.withCredentials).withCredentials,i=null!=t?t:this.facade.configuration.getWithCredentials(),i===!0&&(e.xhrSetup=function(e,t){e.withCredentials=!0}),e.debug=this.plugin.proxy.getDebug(),this.getUseMAE()||(e.enableSoftwareAES=null!=e.enableSoftwareAES?e.enableSoftwareAES:!0),e},fo.prototype.load=function(){var e,t,i,n,o,r,a=this;null!=this.player&&this.destroy(),this.manifestParsed=!1,this.userSwitched=!1,this.quality=-1,e=this.getConfig(),this.getUseMAE()?(this.facade.mae=new MediaAccelerationHlsJsWrapper(this.config.mae,e),i=this.facade.mae.getPlayer()):i=new Hls(e),i.attachMedia(this.getMediaElement()),o=Hls.Events;for(t in o)n=o[t],i.on(n,function(e,t){a.plugin.dispatcher.dispatchEvent(new s(e,t))});i.on(Hls.Events.MANIFEST_LOADED,this.onManifestLoaded.bind(this)),i.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this)),i.on(Hls.Events.ERROR,this.onError.bind(this)),i.on(Hls.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata.bind(this)),i.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this)),i.on(Hls.Events.LEVEL_SWITCHING,this.onLevelSwitching.bind(this)),i.on(Hls.Events.LEVEL_SWITCHED,this.onLevelSwitched.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.FRAG_LOADING,this.onFragmentLoadStart.bind(this)),i.on(Hls.Events.FRAG_LOADED,this.onFragmentLoaded.bind(this));try{r=this.config.quality;for(t in r)n=r[t],i[t]=n}catch(l){}this.player=i,this.details=null,fo.__super__.load.call(this)},fo.prototype.applySrc=function(){this.currentMedatadata=null,this.player.loadSource(this.getSrc()),this.getMediaElement().load()},fo.prototype.onManifestLoaded=function(e,t){this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.MANIFEST_LOADED,{event:e,data:t}))},fo.prototype.onManifestParsed=function(e,t){this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.MANIFEST_PARSED,{event:e,data:t})),this.manifestParsed=!0,this.sendNotification(Lo.QUALITY_LEVELS_LOADED,t.levels),this.player.loadLevel=-1},fo.prototype.onLevelLoaded=function(e,t){var i;this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.LEVEL_LOADED,{event:e,data:t})),this.player.levels[t.level].level=t.level,this.sendNotification(Lo.QUALITY_CHANGE,this.player.levels[t.level]),this.details=t.details,i=this.details.totalduration,i!==this.data.duration&&(this.data.duration=this.details.totalduration,this.sendNotification(Lo.CHANGE_DURATION,this.data.duration)),t.details.live===!0&&"dvr"!==this.facade.mediaProxy.getTemporalType()&&this.facade.mediaProxy.setTemporalType("live")},fo.prototype.onLevelSwitching=function(e,t){"manual"===this.getQualityMode()&&(this.userSwitched=!0),this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.LEVEL_SWITCHING,{event:e,data:t})),this.sendNotification(Lo.QUALITY_CHANGING,this.player.levels[t.level])},fo.prototype.onLevelSwitched=function(e,t){this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.LEVEL_SWITCHED,{event:e,data:t})),this.sendNotification(Lo.QUALITY_SWITCHED,this.player.levels[t.level])},fo.prototype.onAudioTrackSwitch=function(e,t){var i;i=e===Hls.Events.AUDIO_TRACK_SWITCHED,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(e,{event:e,data:t})),this.sendNotification(Lo.AUDIO_TRACK_SWITCH,{switched:i})},fo.prototype.onseeking=function(e){"manual"===this.getQualityMode()&&this.userSwitched||fo.__super__.onseeking.call(this,e)},fo.prototype.onseeked=function(e){return"manual"===this.getQualityMode()&&this.userSwitched?void(this.userSwitched=!1):void fo.__super__.onseeked.call(this,e)},fo.prototype.onFragParsingMetadata=function(e,t){this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.FRAG_PARSING_METADATA,{event:e,data:t}))},fo.prototype.onFragmentLoadStart=function(e,t){var i;this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.FRAG_LOADING,{event:e,data:t}));try{i=this.player.levels[t.frag.level].bitrate}catch(n){return}this.sendNotification(Lo.FRAGMENT_LOAD_START,i)},fo.prototype.onFragmentLoaded=function(e,t){var i;this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(Hls.Events.FRAG_LOADED,{event:e,data:t}));try{i=this.player.levels[t.frag.level].bitrate}catch(n){return}this.sendNotification(Lo.FRAGMENT_LOADED,i)},fo.prototype.ontimeupdate=function(e){var t;(null!=(t=this.facade.ads)?t.inProgress:void 0)!==!0&&(this.data.currentTime=this.getCurrentTime(),this.sendNotification(Lo.TIME_CHANGE,{currentTime:this.data.currentTime}))},fo.prototype.ondurationchange=function(e){var t;t=this.getDetails().totalduration,t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,this.sendNotification(Lo.CHANGE_DURATION,t))},fo.prototype.oncanplaythrough=function(e){this.createTracks(),this.sendNotification(Lo.CAN_PLAY_THROUGH),this.sendNotification(Lo.PROGRESS,this.getDuration()),"manual"===this.qualityMode&&this.player.currentLevel!==this.quality&&this.setQuality(this.quality)},fo.prototype.getCurrentTime=function(){return this.getMediaElement().currentTime-this.getStartTime()},fo.prototype.getDetails=function(){return this.details||{}},fo.prototype.getFragmentDuration=function(){return this.getDetails().targetduration},fo.prototype.getUTCStart=function(){return 1e4*this.getDetails().startSN},fo.prototype.getUTCTime=function(){return this.getUTCStart()+1e3*this.getCurrentTime()},fo.prototype.getUTCEnd=function(){return 1e4*this.getDetails().endSN},fo.prototype.getStartTime=function(){return this.getMediaElement().duration-this.getDuration()},fo.prototype.goLive=function(){this.setCurrentTime(this.getLiveTime())},fo.prototype.getLiveTime=function(){return this.getDuration()-this.getFragmentDuration()},fo.prototype.isLive=function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()},fo.prototype.seek=function(e){var t=this;return fo.__super__.seek.call(this,e+this.getStartTime()).then(function(e){"dvr"===t.mediaProxy.getTemporalType()&&t.sendNotification(Lo.IS_LIVE,t.isLive())})},fo.prototype.onplaying=function(e){fo.__super__.onplaying.call(this),this.retried=!1},fo.prototype.onError=function(e,t){if(this.userSwitched=!1,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s("error",{event:e,data:t})),this.config.ignoreErrors!==!0){if(this.config.retryOnError===!1||this.retried===!0)return this.retried=!1,void this.error(t);if(t.fatal&&t.type===Hls.ErrorTypes.MEDIA_ERROR&&t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(t.fatal=!1),t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0,this.manifestParsed?this.player.startLoad():this.player.loadSource(this.getSrc()),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=!0,this.player.recoverMediaError(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",e),this.error(t)}else t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)}},fo.prototype.error=function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:e.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:e.code=MediaError.MEDIA_ERR_DECODE;break;default:e.toString=function(){return e.details}}this.sendNotification(Lo.ERROR,e)},fo.prototype.createTracks=function(){var e,t,i,n,o,a,s,l,d,c;for(e=this.player.audioTracks,n=this.player.audioTrack,l=this.facade.tracks.getAudioTracks(),i=e.length,t=function(e,t){this.facade.tracks.getAudioTracks().forEach(function(e){return e.data.enabled=!1}),t===!0&&(this.facade.tracks.getAudioTracks()[e.id].data.enabled=!0,this.player.audioTrack=e.id)},o=d=0,c=e.length;c>d;o=++d)a=e[o],r.fieldIsUnique(l,"id",a.id)!==!1&&(s=new b({kind:a.type,label:a.name||a.id,language:a.lang,id:a.id,enabled:a.id===n,data:a}),s.changeEnabled=t.bind(this,a),l.add(s,o+1===i))},fo.prototype.setQuality=function(e){var t,i;return t=this.qualityMode,t=e>-1?"manual":"auto",this.setQualityMode(t),e===this.player.currentLevel?(this.onLevelSwitching("hlsLevelSwitching",this.player.levels[e]),void this.onLevelSwitched("hlsLevelSwitched",{level:e})):(null!=(i=this.player)&&(i.currentLevel=this.quality=e),this.quality)},fo.prototype.getQuality=function(){var e,t,i;return e=null!=(t=this.player)?t.currentLevel:void 0,-1===e&&(e=null!=(i=this.player)?i.nextLoadLevel:void 0),e},fo.prototype.getQualityLevels=function(){var e;return(null!=(e=this.player)?e.levels:void 0)||fo.__super__.getQualityLevels.call(this)},fo.prototype.getQualityMode=function(){return this.qualityMode},fo.prototype.setQualityMode=function(e){return"auto"!==e&&"manual"!==e?e+=" is not a valid key":this.qualityMode=e,e},fo.prototype.destroy=function(){null!=this.player&&(fo.__super__.destroy.call(this),this.player.destroy(),this.player=null)},i(mo,kt),mo.prototype.execute=function(e){var t,i;"freewheel"===(null!=(i=e.getBody())?i.partner:void 0)&&(t=this.facade.player.getPlaybackRate(),this.proxy.destroy(),this.facade.player.setPlaybackRate(t))},i(yo,st),yo.NAME=_.NAME,yo.prototype.playbackProxy=null,yo.prototype.createPlaybackProxy=function(){},yo.prototype.initialize=function(){var e;this.playbackProxy=this.createPlaybackProxy(),null!=this.playbackProxy&&(this.sendNotification(Lo.INITIALIZED),e=this.facade.player.retrieveProxy(et.NAME),e.registerPlaybackCore(this.playbackProxy))},yo.prototype.destroy=function(){var e;null!=(e=this.playbackProxy)&&e.destroy()},i(Ao,yo),Ao.NAME=_.NAME,Ao.prototype.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableCEA708Captions:!0},mae:null,buffer:null,quality:null,withCredentials:null,retryOnError:!0,ignoreErrors:!1},Ao.prototype.createPlaybackProxy=function(){var e;return e=window.MediaSource||window.WebKitMediaSource,null!=e&&Hls.isSupported()?new fo(this.getConfigurationData(),this.facade):void 0},i(vo,Oe),vo.SCTE="urn:scte:scte35:2013:xml",vo.prototype.playbackCoreName="dash",vo.prototype.context=null,vo.prototype.player=null,vo.prototype.buffer=null,vo.prototype.resumecomplete=function(){var e,t,i;try{t=null!=(i=this.facade.getMediaElement())?i.textTracks:void 0,0!==(null!=t?t.length:void 0)&&(e=t[0],null!=e&&(e.mode="hidden"))}catch(n){}vo.__super__.resumecomplete.call(this)},vo.prototype.onerror=function(){},vo.prototype.ontimeupdate=function(e){vo.__super__.ontimeupdate.call(this,{target:{currentTime:this.getCurrentTime()}})},vo.prototype.onseeked=function(e){vo.__super__.onseeked.call(this,{target:{currentTime:this.getCurrentTime()}})},vo.prototype.onseeking=function(e){vo.__super__.onseeking.call(this,{target:{currentTime:this.getCurrentTime()}})},vo.prototype.ondurationchange=function(e){vo.__super__.ondurationchange.call(this,{target:{duration:this.getDuration()}})},vo.prototype.onloadedmetadata=function(e){vo.__super__.onloadedmetadata.call(this,e),this.sendNotification(Lo.CHANGE_DURATION,this.getDuration())},vo.prototype.oncanplaythrough=function(e){vo.__super__.oncanplaythrough.call(this,e),this.sendNotification(Lo.CHANGE_DURATION,this.getDuration())},vo.prototype.canPlayMedium=function(e){return vo.__super__.canPlayMedium.call(this,e)||"audio"===e},vo.prototype.createTracks=function(){var e,t,i,n,o,a,s,l,d,c;for(e=this.player.getTracksFor("audio"),n=this.player.getCurrentTrackFor("audio"),l=this.facade.tracks.getAudioTracks(),i=e.length,t=function(e,t,i){this.facade.tracks.getAudioTracks().forEach(function(e){return e.data.enabled=e===t}),i===!0&&this.player.setCurrentTrack(e)},o=d=0,c=e.length;c>d;o=++d)a=e[o],r.fieldIsUnique(l,"id",a.id)!==!1&&(s=new b({kind:a.roles.join(" "),label:a.id,language:a.lang,id:a.id,enabled:a===n,data:a}),s.changeEnabled=t.bind(this,a,s),l.add(s,o+1===i))},vo.prototype.getUseMAE=function(){return vo.__super__.getUseMAE.call(this)&&"undefined"!=typeof MediaAccelerationDashJsWrapper&&null!==MediaAccelerationDashJsWrapper},vo.prototype.load=function(){var e,t;null==this.player&&(e=(null!=(t=this.config.mae)?t.enabled:void 0)!==!1&&"undefined"!=typeof MediaAccelerationDashJsWrapper&&null!==MediaAccelerationDashJsWrapper,this.getUseMAE()?(this.facade.mae=new MediaAccelerationDashJsWrapper(this.config.mae),this.player=this.facade.mae.getPlayer()):this.player=dashjs.MediaPlayer().create(),this.player.on("error",this.onError.bind(this)),this.player.on("fragmentLoadingStarted",this.onFragmentLoadStart.bind(this)),this.player.on("fragmentLoadingCompleted",this.onFragmentLoaded.bind(this)),this.player.on("qualityChangeRequested",this.onLevelSwitching.bind(this)),this.player.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,this.onManifestLoaded.bind(this)),this.player.on(dashjs.Protection.events.PROTECTION_CREATED,this.onProtectionCreated.bind(this)),this.player.on(vo.SCTE,this.onEmsg.bind(this)),this.player.getDebug().setLogToBrowserConsole(this.plugin.proxy.getDebug()),this.player.initialize(this.getMediaElement(),null,!0),null!=this.config.initialBitrate&&this.player.setInitialBitrateFor(this.facade.getMedia().medium,this.config.initialBitrate)),vo.__super__.load.call(this)},vo.prototype.applySrc=function(){var e;e=this.facade.getMedia().keys,null!=e&&this.player.setProtectionData(e),this.player.attachSource(this.getSrc()),this.getMediaElement().load()},vo.prototype.seek=function(e){return Promise.resolve(this.player.seek(e))},vo.prototype.getCurrentTime=function(){var e;return(null!=(e=this.player)?e.time():void 0)||0},vo.prototype.getDuration=function(){var e;return(null!=(e=this.player)?e.duration():void 0)||0},vo.prototype.getStats=function(){return{}},vo.prototype.onFragmentLoadStart=function(e){var t;t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth,this.sendNotification(Lo.FRAGMENT_LOAD_START,t)},vo.prototype.onFragmentLoaded=function(e){var t;t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth,this.sendNotification(Lo.FRAGMENT_LOADED,t)},vo.prototype.onLevelSwitching=function(e){this.sendNotification(Lo.QUALITY_CHANGING,this.getQualityLevels()[e.newQuality])},vo.prototype.onManifestLoaded=function(e){var t;t=e.data,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(dashjs.MediaPlayer.events.MANIFEST_LOADED,t))},vo.prototype.onProtectionCreated=function(e){var t;t=e.data,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(dashjs.Protection.events.PROTECTION_CREATED,t))},vo.prototype.onEmsg=function(e){var t,i,n,o,r,a,l;n=e.event,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(e.type,n)),t=DataCue||VTTCue,a=n.presentationTime/n.presentationTimeDelta*1e4,o=a+n.duration/n.presentationTimeDelta*1e4,l=String.fromCharCode.apply(null,n.messageData),r=d.parse(l),n.text=l,i=new t(a,o,{key:vo.SCTE,data:n,info:r}),this.sendNotification(Lo.TIMED_METADATA,i)},vo.prototype.onError=function(e){var t;t=e.data,this.plugin.sendNotification(Lo.DISPATCH_EVENT,new s(dashjs.MediaPlayer.events.ERROR,t)),this.facade.logger.error("DASH JS Playback Error:",e)},vo.prototype.setQuality=function(e){var t,i,n;return null!=(t=this.player)&&t.setAutoSwitchQualityFor(null!=(i=this.facade.getMedia())?i.medium:void 0,-1===e),-1!==e&&null!=(n=this.player)?n.setQualityFor("video",e):void 0},vo.prototype.getQuality=function(){var e;return null!=(e=this.player)?e.getQualityFor("video"):void 0},vo.prototype.getQualityLevels=function(){var e;return(null!=(e=this.player)?e.getBitrateInfoListFor("video"):void 0)||vo.__super__.getQualityLevels.call(this)},vo.prototype.getQualityMode=function(){var e,t;return(null!=(e=this.player)?e.getAutoSwitchQualityFor(null!=(t=this.facade.getMedia())?t.medium:void 0):void 0)===!0?"auto":"abr"},vo.prototype.setQualityMode=function(e){var t,i;return"auto"!==e?e+" is not a valid key":null!=(t=this.player)?t.setAutoSwitchQualityFor(null!=(i=this.facade.getMedia())?i.medium:void 0,e):void 0},vo.prototype.destroy=function(){null!=this.player&&(this.player.reset(),vo.__super__.destroy.call(this))},i(_o,lt),_o.prototype.moduleName="adchoices",_o.prototype.createModel=function(){this.registerProxy(new po(this.config))},_o.prototype.createView=function(){this.registerMediator(new uo)},_o.prototype.listNotificationInterests=function(){return[xo.AD_CONTAINER_CREATED]},xt.registerPlugin("adchoices","html",_o),xt.registerPlugin("adchoices","flash",co),i(Eo,puremvc.SimpleCommand),Eo.prototype.execute=function(e){var t,i,n,o,r,a,l=this;r=e.getBody(),n=this.facade.retrieveProxy(Se.NAME),t=this.facade.getMediaElement(),null!=t&&t.webkitSupportsFullscreen&&(o=this.facade.retrieveProxy(ot.NAME),o.setDisplayState(r),i={},a=this.facade.viewComponent,null!=a.requestFullscreen?(i.enter=function(){return a.requestFullscreen()},i.exit=function(){return document.cancelFullscreen()},i.event="onfullscreenchange",i.element="fullscreenElement"):null!=a.webkitRequestFullScreen?(i.enter=function(){return a.webkitRequestFullScreen()},i.exit=function(){return document.webkitCancelFullScreen()},i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement"):null!=a.mozRequestFullScreen?(i.enter=function(){return a.mozRequestFullscreen()},i.exit=function(){return document.mozCancelFullScreen()},i.event="onmozfullscreenchange",i.element="mozFullscreenElement"):null!=a.msRequestFullScreen&&(i.enter=function(){return a.msRequestFullscreen()},i.exit=function(){return document.msCancelFullScreen()},i.event="onmozfullscreenchange",i.element="mozFullscreenElement"),r===Ro.FULL_SCREEN?(i.enter(),null!=i.event&&(t[i.event]=function(e){return null==document[i.element]?l.sendNotification(Lo.CHANGE_DISPLAY_STATE,Ro.NORMAL):void 0})):r===Ro.NORMAL&&(i.exit(),t[i.event]=null),this.facade.dispatchEvent(new s("fullscreenchange",r===Ro.FULL_SCREEN)))},i(bo,yo),bo.NAME=_.NAME,bo.prototype.defaults={types:["application/dash+xml"],buffer:null,mae:null,initialBitrate:null},bo.prototype.createPlaybackProxy=function(){var e;return e=window.MediaSource||window.WebKitMediaSource,null!=e?new vo(this.getConfigurationData(),this.facade):void 0},i(Co,lt),Co.prototype.moduleName="hls",Co.prototype.createModel=function(){this.proxy=new Ao(this.config),this.registerProxy(this.proxy)},Co.prototype.createController=function(){this.registerCommand(xo.BREAK_START,mo),Co.__super__.createController.call(this)},Co.prototype.logEvent=function(e){/(hlsFragLoading|hlsFragLoaded)/.test(e.type)!==!0&&Co.__super__.logEvent.call(this,e)},Co.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy},Co.prototype.getInstance=function(){return this.getPlaybackProxy().player},Co.prototype.listNotificationInterests=function(){return Co.__super__.listNotificationInterests.call(this).concat([xo.BREAK_START])},Co.prototype.listNotificationPublications=function(){return Co.__super__.listNotificationPublications.call(this).concat([Lo.TIMED_METADATA,Lo.QUALITY_LEVELS_LOADED,Lo.QUALITY_CHANGE,Lo.QUALITY_CHANGING,Lo.FRAGMENT_LOAD_START,Lo.FRAGMENT_LOADED])},xt.registerPlugin("hls","html",Co),i(So,lt),So.prototype.moduleName="dash",So.prototype.createModel=function(){this.proxy=new bo(this.config),this.registerProxy(this.proxy)},So.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy},So.prototype.getInstance=function(){return this.getPlaybackProxy().player},So.prototype.registered=function(){this.player.registerCommand(Lo.CHANGE_DISPLAY_STATE,Eo),So.__super__.registered.call(this)},So.prototype.listNotificationPublications=function(){return So.__super__.listNotificationPublications.call(this).concat([Lo.FRAGMENT_LOAD_START,Lo.FRAGMENT_LOADED])},xt.registerPlugin("dash","html",So);var Ko=function(e){function t(e,i,n){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.player=e,o.config=i||{},o.key=n,o.logger=new a(o.debug),Object.values(Events).forEach(function(e){var t=o["on"+e];null!=t&&"function"==typeof t&&(t=o["on"+e]=t.bind(o),o.player.addEventListener(e,t))}),o}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"bindHandlers",value:function(e){var t=this;e instanceof Array==0&&(e=[e]),e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"destroy",value:function(){var e=this;Object.values(Events).forEach(function(t){var i=e["on"+t];null!=i&&"function"==typeof i&&e.player.removeEventListener(t,i)})}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}},{key:"data",get:function(){return this.player.evaluateBindings(this.config)}}],[{key:"createFactory",value:function(e){return function(e,t,i){var n=this;return new Promise(function(o,r){try{var a=new n(e,t,i);o(a)}catch(s){r(s)}})}.bind(e)}}]),t}(l),$o=function(e){function t(e,i){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e){this.player.logger.log("[AMP AD EVENT] "+e.type,e),"function"==typeof this.player.sendNotification&&this.player.sendNotification("ads"+e.type,e.detail),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e),this.player.dispatch("ad"+e.type,e.detail)}}]),t}(Ko),er=function(e){function t(e,i){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.player.createDefaults.call(n),n.player.addEventListener("createflashvars",n.createFlashVars.bind(n)),n.player.addEventListener("createxml",n.createXML.bind(n)),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createFlashVars",value:function(e){}},{key:"createXML",value:function(e){}},{key:"createProperty",value:function(e,t,i,n){var o=e.createElement("property");if(o.setAttribute("key",t),null!=n&&n.appendChild(o),null!=i)if("object"!==("undefined"==typeof i?"undefined":babelHelpers["typeof"](i))||i instanceof Array){var r=akamai.amp.XMLUtils.createTextContent(e,i.toString());o.appendChild(r)}else for(var a in i){var s=i[a];this.createProperty(e,a,s,o)}return o}},{key:"flashPlugins",get:function(){return[]}}]),t}(Ko);No.akamai={amp:{AMP:xt,utils:{Timer:u,Utils:r,QueryString:c,Logger:a.instance,MRSSHelper:Nt},Timer:u,Utils:r,ID3:m,Poller:g,Cookies:p,PlayState:Vo,DisplayState:Ro,PlaybackMode:To,QueryString:c,Logger:a,Config:v,XMLUtils:d,IdleUtil:f,chromecast:{ChromeCastShim:"undefined"!=typeof ChromeCastShim?ChromeCastShim.getInstance():null},XHR:h,Resource:A,Media:It,Authorization:w,Event:s,Events:Events,EventDispatcher:l,Plugin:Ko,FlashPlugin:er,AdPlugin:$o,DataBinding:Ue,Logger:a,Transformer:He,TransformType:Ho,AutoplayPolicy:Po,AutoplayThreshold:AutoplayThreshold}},Object.defineProperties(No.akamai.amp,{Settings:{get:We.GET,enumerable:!0,configurable:!1}}),"undefined"!=typeof Hn&&(No.akamai.amp.AdVO=Hn),"undefined"!=typeof xo&&(No.akamai.amp.AdEvents=function(){var e={};for(var t in xo)e[t.replace(/^AD_/,"")]=xo[t].replace(/^ads/,"");return e}()),window.AKAMAI_MEDIA_PLAYER.saveSDK(Io,No)}window.AKAMAI_MEDIA_PLAYER.setVersion(Io)}(),Ndn_Require.define("amp_lib",function(){});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Amp",["jquery","require","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Analytics","models/Ndn/Utils/UserAgent","models/Ndn/Viewer/ViewerModule","models/Ndn/Viewer/ViewerModule/Amp/Config","models/Ndn/PlayerServices/Cache","models/Ndn/Debug","models/Ndn/AdBlockDetector","models/Ndn/Utils/DomElement","models/Ndn/Enum/Bumper","models/Ndn/Enum/ViewerModuleId","amp_lib"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h,g,f){_nw2e.videoPlayer=AKAMAI_MEDIA_PLAYER.noConflict();var m,y=u.logger("amp"),A=l.extend({defaults:{moduleId:"amp",playerInstance:null,isReady:!1,isMuted:!1,playOnLoad:!1,params:null,ampVideoData:null,isBumperVideo:null,isSynchronized:!1,isFullscreen:!1,playAttempt:!1,ampConfig:null,debugInfo:null},initialize:function(e){var t=this;l.prototype.initialize.call(this,e),this.set({isReady:!1}),this.set("debugInfo",{ampVersion:A.getVersion(),playerConfigDefaults:A.getDebugConfig(),playerConfig:null,videosLoaded:[]}),this.on({fullscreenStart:function(){t.set("isFullscreen",!0)},fullscreenEnd:function(){t.set("isFullscreen",!1)}}),this.on("share",function(){t.isFullscreen()&&t.get("playerInstance").exitFullScreen()}),this.on("viewerModuleStart",function(){t.set("hasLoadedVideoFeed",!1)}),this.handleClosedCaptioning()},isSynchronized:function(){return this.get("isSynchronized")},toggleSynchronized:function(e){this.set("isSynchronized",e)},startSession:function(e){l.prototype.startSession.apply(this,arguments),this.applySessionDefaults(e,{isMuted:!1,playOnLoad:!0,isBumperVideo:!1,playbackMode:A.getDefaultPlaybackMode(),showControls:!0,showShareIcons:!0}),this.toggleAdPlayer(!!e.dfp),this.toggleContentPlayer(!!e.videoData),this.toggleSynchronized(!1);var t=this;this.set({isMuted:e.isMuted,params:{dfp:e.dfp||{},comscore:e.comscore||{}},ampVideoData:function(){var i=e.videoData||c.getLastCachedVideoData();return t.getAmpVideoData(i,e.isBumperVideo)}()}),this.getSessionParams().playOnLoad&&this.syncThirdPartyPlayer()},debugAmpSession:function(){var e=this.get("debugInfo").videosLoaded;if(arguments.length){var t=e[e.length-1];t.push([].slice.call(arguments))}else e.push([])},isMuted:function(){return this.get("isMuted")},maintainVisibility:function(){},isFullscreen:function(){return this.get("isFullscreen")},getCurrentTime:function(){if(this.isShowingAdPlayer())return this.getAdPlayerMetadata().currentTime;var e=this.getAmp();return e&&e.getCurrentTime()||0},getDuration:function(){return this.isShowingAdPlayer()?this.getAdPlayerMetadata().duration:this.getSessionParams().isBumperVideo?6:this.getAmp().getDuration()},getAdPlayerMetadata:function(){var e=this.getPlayerInstance();return e.ads&&e.ads.adVO&&e.ads.adVO.metadata||{}},getPlayerInstance:function(){return this.get("playerInstance")},handleClosedCaptioning:function(){if(s.isOnIos()){var t=this;t.onceReady(function(){var i=t.getPlayerInstance().getMediaElement();i&&(i.setAttribute("crossorigin","anonymous"),t.on("loadedmetadata",function(){if(t.isShowingVideo()){var e=t.getSessionParams().videoData,n=function(){for(var t=0;t<e.subtitles.length;t++){var i=e.subtitles[t];if("text/vtt"==i.type)return i}}();if(n){var o=document.createElement("track");o.kind="captions",o.label="English",o.srclang="en",o.src=n.url,o.type="text/vtt",o.addEventListener("load",function(){this.mode="disabled",i.textTracks[0].mode="disabled"}),i.appendChild(o)}}}),t.on("viewerModuleEnd",function(){e(i).find("track").remove()}))})}},getDuration:function(){return this.getSessionParams().isBumperVideo?6:this.getAmp().getDuration()},getAmp:function(){return this.get("playerInstance")},play:function(){var e=this;this.syncThirdPartyPlayer().done(function(t){e.get("hasLoadedVideoFeed")?t.play():(t.autoplay=!0,t.feed.data=e.get("ampVideoData"),e.set("hasLoadedVideoFeed",!0))})},getAmpVideoData:function(e,t){var i=this.getSessionParams(),n=this.getContainerElement(),o=n.width(),r=n.height(),a="Wed, 03 Aug 2011 10:00:21 -0400",s={"@attributes":{version:"2.0"},channel:{category:"",pubDate:a,language:"en",ttl:"10",item:{title:"NDN - AMP Premier",link:"http://akamai.com/player.html",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc augue sapien, dapibus vitae imperdiet vitae, ullamcorper eget tortor. In lorem eros, porttitor quis commodo et, egestas a odio. Nunc eu augue sit amet dolor malesuada condimentum in eu velit. Donec commodo bibendum egestas. In viverra condimentum dapibus. Praesent molestie, dolor a laoreet cursus, massa sem varius tellus, at consectetur mauris ligula at dolor. Etiam semper augue et risus mattis iaculis tincidunt odio sodales. Vivamus eget elit quis metus pulvinar condimentum. Donec et vestibulum dui. Proin ultricies ligula sed felis pretium at adipiscing tortor bibendum. Morbi et ligula non massa facilisis lacinia. Duis at ligula mauris. Nullam ipsum tortor, lobortis eget adipiscing eu, sagittis eu sapien. Nunc dictum porttitor lobortis. Suspendisse cursus mollis lorem sed ultrices",category:"",pubDate:a,"ndn-provider":{id:e.provider.trackingGroup,name:e.provider.name,image:e.provider.logoUrl},"media-group":{"media-content":function(e){function n(e){var t;return(t=e.url.match(/_([0-9]+)k\.mp4$/))?parseInt(t[1]):0}function o(e){var i={"@attributes":{url:function(){var t=e.url.replace(" ",""),i=/^(rtmp:.*)\.flv$/gi.exec(t);return i&&(t=i[1]),/\.f4m\?/.exec(t)&&(t+="&hdcore=1"),t}(),medium:e.medium,type:e.type,duration:t?g.bumperVideoDuration:e.duration,width:640,height:360}};return"undefined"!=typeof a[e.type]&&(i["media-category"]={"@attributes":{schema:"http://mrss.akamai.com/user_agent_hint",label:a[e.type]}}),i}var r=[972,800,664,1e3,1024,1500,1572,2500,4e3,640,600,425,400,336,320,200,126],a={"video/mp4":"PDL","video/flv":"RMTP","video/x-flv":"RMTP","application/x-mpeg":"HLS","application/x-mpegURL":"HLS","video/f4m":"HDS"},s=[];if(i.highRenditionPreferred){var l=e.slice(0).filter(function(e){return n(e)>0&&"undefined"!=typeof a[e.type]}).sort(function(e,t){var i=n(e),o=(r.indexOf(i),n(t));r.indexOf(o);return r.indexOf(n(e))-r.indexOf(n(t))});l.length&&s.push(o(l[0]))}if(!s.length)for(var d=0;d<e.length;d++){var c=e[d];s.push(o(c))}return s[0]["@attributes"].isDefault="true",s}(e.mediaContent),"media-title":e.videoTitle,"media-subTitle":function(){for(var t=[],i=0;i<e.subtitles.length;i++){var n=e.subtitles[i];t.push({"@attributes":{type:n.type,lang:n.language,href:n.url}})}return t.length?t:null}(),"media-description":e.description,"media-thumbnail":{"@attributes":{url:e[o>400?"stillImageXLUrl":"stillImageUrl"],width:(o||"604")+"",height:(r||"341")+""}}}}}};return i.showShareIcons&&(s.channel.item["media-group"]["media-embed"]={"@attributes":{url:"http://player.js",width:(o||"604")+"",height:(r||"341")+""},"media-param":{"@attributes":{name:"type"},"#text":"text/javascript"}}),t&&(s.channel.item["media-group"]["akamai-subclip"]={"akamai-start":g.bumperVideoStartPosition+"","akamai-end":g.bumperVideoStartPosition+g.bumperVideoDuration+""
}),u.log("ampVideoData",s),s},end:function(){this.isPlaying()&&this.getAmp().end()},pause:function(){this.isPlaying()&&this.getAmp().pause()},onBadEvent:function(e){l.prototype.onBadEvent.apply(this,arguments),"videoTimeUpdate"!=e||this.isActive()||this.getAmp().pause()},initializeThirdPartyPlayer:function(){var t=this;return e.Deferred(function(e){if(t.get("playerInstance"))e.resolve();else{var i=t.getSessionParams(),n=d.generatePlayerConfig({adOverlayText:t.getContainerElement().width()>350?"Your content starts in ":"Starts in ",adBlockDetectionId:i.adBlockDetectionId,comscoreEnabled:!!i.comscore,playbackMode:i.playbackMode});y("AMP: playerConfig ==",n),t.debug({playerConfig:n},!0),y("New AMP player. Container element ==",t.getContainerElement().get(0),"; playerConfig ==",n),Ndn_Require.require(["lib/amp.premier/hls"],function(o){window.Hls=o;var r=_nw2e.videoPlayer.akamai.amp.AMP.create(t.getContainerElement().get(0),n);t.set("playerInstance",r),"html"===i.playbackMode&&t.getContainerElement().append('<a class="ndn-viewer-viewerModule-amp-adchoices-logo" href="http://assets.newsinc.com/info/adchoices.html" target="_blank"></a>'),t.initializeAmpEventProcessing(),t.onceReady(function(){y("AMP IS READY!!!"),t.initializeViewerModuleEventProcessing(),t.trigger("playerLoad"),e.resolve()})})}}).promise()},onResize:function(){l.prototype.onResize.call(this);var e=this.get("playerInstance"),t=this.getViewer(),i=t.getContainerElement(),n=this;this.onceReady(function(){h.onceHasWidthAndHeight(i).done(function(){var t=e.ima&&e.ima.proxy&&e.ima.proxy.adsManager;t&&t.resize(parseInt(i.width()),parseInt(i.height()),n.isFullscreen()?"fullscreen":"normal")})})},initializeViewerModuleEventProcessing:function(){var e=this;this.on("adStart videoStart",function(t){e.onResize()})},initializeAmpEventProcessing:function(){function t(e,t){n.trigger(e,t)}y("initializeAmpEventProcessing....");var n=this,o=this.get("playerInstance"),r="flash"==this.getSessionParams().playbackMode;o.addEventListener("ready",e.proxy(function(a){o.addEventListener("started",function(e){t("videoStart",e)}),o.getMediaElement().addEventListener("loadedmetadata",function(){t("loadedmetadata")}),o.addEventListener("playstatechange",e.proxy(function(e){if(e&&e.data){var i=e.data.value;"playing"==i?n.isShowingAd()?t("adResume",e):n.isShowingVideo()&&t("videoResume",e):"ended"==i&&n.isShowingAd()&&t("adEnd")}},this)),o.addEventListener("fullscreenchange",function(e){t(e.data?"fullscreenStart":"fullscreenEnd")}),o.addEventListener("volumechange",e.proxy(function(e){u.log("volumechange","event ==",e);var o;n.isPlayingAd()&&(i.isNumber(e.data.currentVolume)?(o=e.data.currentVolume,0==e.data.currentVolume&&this.previous("volume")>0?t("adMute"):e.data.currentVolume>0&&0==this.previous("volume")&&t("adUnmute")):i.isNumber(e.data)&&(o=e.data,t(0==e.data?"adMute":"adUnmute"))),n.isPlaying()&&t("volumeUpdate",{isMuted:0>=o})},this)),o.addEventListener("timeupdate",function(e){n.isPlayingVideo()&&(n.getCurrentTime()>n.getDuration()?(n.end(),t("videoEnd")):t("videoTimeUpdate",e))}),o.addEventListener("mediasequenceended",function(e){n.isShowingVideo()&&t("videoEnd")}),o.addEventListener("error",function(e){t("error",{source:o.getSrc()})}),r?o.addEventListener("adComponentAdsRequest",function(e){var i=e.data;n.isAdPlayerEnabled()&&t("adRequest",{adTag:i.requestURL,receivedData:i})}):o.ads.addEventListener("request",function(e){n.isAdPlayerEnabled()&&t("adRequest",{receivedData:{}})}),function(){var e=function(e){try{var i=e.data;if(i){var n=i.metadata&&i.metadata.wrapperAdIds&&i.metadata.wrapperAdIds[0]||i.id;t("adLoad",{adId:n,adPlatform:i.adPlatform,adSystem:i.adSystem,adTitle:i.title,duration:i.duration,linear:i.linear?1:0,podPosition:i.podPosition,totalAds:i.totalAds,workflow:i.workflow,url:i.requestURL})}}catch(o){}};r?o.addEventListener("adComponentMediaLoaded",e):o.ads.addEventListener("loaded",e)}(),o.addEventListener("playstatechange",function(e){e&&e.data&&"paused"==e.data.value&&(n.isPlayingAd()?t("adPause",{currentTime:n.getCurrentTime()}):n.isPlayingVideo()&&t("videoPause",{currentTime:n.getCurrentTime()}))}),o.addEventListener("mediaPlayerElementEvent",function(e){"videoWindow"==e.data.element&&"click"==e.data.type&&t("click",e)}),o.ads.addEventListener("started",function(e){t("adStart")}),o.ads.addEventListener("ended",function(e){t("adEnd")}),o.ads.addEventListener("timeupdate",function(e){t("adTimeUpdate")}),o.ads.addEventListener("companion",function(e){if(e&&e.data){var i=e.data[0]||e.data.metadata&&e.data.metadata[0];i||(i=e.data&&e.data.companions&&e.data.companions[0]),i&&t("adCompanion",{content:i.data||i.content})}}),null!=o.share&&o.share.addEventListener("share",function(e){n.pause(),t("share",{medium:e.data.provider})}),o.ads.addEventListener("error",function(e){try{if(e.data&&e.data.error&&e.data.error.h)t("adError",{vastErrorCode:e.data.error.h,message:e.data.error.o,description:e.data.error.l});else{var i=e.data.metadata.error;i&&t("adError",{message:i.reason,receivedData:i,vastErrorCode:i.vastErrorCode})}}catch(n){}}),o.ads.addEventListener("log",function(e){try{var i=e.data.metadata.metadata.error;i&&t("adError",{message:i.message,receivedData:i,vastErrorCode:i.vastErrorCode})}catch(n){}}),n.toggleReady(!0)},this))},syncThirdPartyPlayer:function(){var t=this;return e.Deferred(function(e){function i(){e.resolve(t.getAmp())}t.initializeThirdPartyPlayer().done(function(){t.isSynchronized()?i():t.updateThirdPartyPlayer().done(function(){i()})})})},setMuted:function(e){var t=this.getAmp();e?(t.setVolume(.01),t.setMuted(!0)):(t.setMuted(!1),t.setVolume(.75)),this.trigger("volumeUpdate",{isMuted:e})},updateThirdPartyPlayer:function(){var t=this;return e.Deferred(function(e){t.onceReady(function(){var i=t.getSessionParams(),n=t.getAmp();t.isSynchronized()||(n.muted||t.setMuted(t.get("isMuted")),n.controls.setMode(i.showControls?"auto":"none"),n.ads.setEnabled(t.isAdPlayerEnabled()),n.setParams(t.get("params")),y("amp.controls.setMode(",i.showControls?"auto":"none",");"),y("amp.setParams(",t.get("params"),");"),t.toggleSynchronized(!0),i.playOnLoad&&t.play()),e.resolve()})}).promise()},getDebugInfo:function(){return i.extend({},this.get("debugInfo"),{playerConfigDefaults:A.getDebugConfig()})}},{viewerModuleId:f.AMP,generateConfig:function(e){return d.generateDefaultConfig(i.extend(e,{imaEnabled:!0,comscoreEnabled:!0}))},getVersion:function(){var e,t=_nw2e.videoPlayer.version||A.getAmpPremier().VERSION;return(e=t.match(/v([x0-9.]+)$/))&&e[1]?(e[1]||"").replace(/x/g,"0"):null},getAmpPremier:function(){return _nw2e.videoPlayer.akamai.amp.AMP},getDefaultPlaybackMode:function(){return A.getAmpPremier().getPlaybackMode()},getConfig:function(e){return this.generateConfig(i.extend({},e))},getDebugConfigParams:function(){return{akamaiJsLibFolderUrl:"../amp.premier",akamaiResourcesFolderUrl:"../resources"}},getTestConfig:function(e){return this.generateConfig(i.extend({},e,this.getDebugConfigParams()))},getDebugConfig:function(){return m}});return A}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/VideoPlayer",["models/Ndn/Viewer/ViewerModule/Amp"],function(e){return e}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/easi.html",[],function(){return'<html>\n<head>\n    <script type="text/javascript">\n        // IE workaround (unverified if this is actually helping) \n        if (typeof(Object) === "undefined") window.location.reload();\n    </script>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <script type="text/javascript" src="{{appUrl}}/resources/js/streamsense.4.1504.21.min.js"></script>\n    <script type="text/javascript" src="//cdn.spotxcdn.com/website/integrations/easi/inform/inform-solution.v2.js"></script>\n    <script type="text/javascript">\n        var oAdUnit;\n        \n        var informStreamingTagMetadata,\n            informStreamingTag;\n        \n        var previousAdCountdownText = \'\';\n        \n        /**\n         * @param {Object} data Structured data concerning the comScore Video Metrix Stream Sense configuration. Format:\n         * <pre>{\n         *   \'enabled\': Boolean, // Whether comScore Video Metrix is enabled\n         *   \'metadata\': Object, // Structured data concerning the metadata used for ad playback\n         * }</pre>\n         */\n        function initializeComscore(data) {\n            if (data.enabled) {\n                informStreamingTag = new ns_.StreamingTag({\n                    customerC2: \'11112732\'\n                });\n                informStreamingTagMetadata = data.metadata; //.comscoreMetadata;\n            }\n            else {\n                // Make a dummy placeholder object \n                informStreamingTag = {\n                    playVideoAdvertisement: function() {},\n                    stop: function() {}\n                };\n            }\n        }\n        \n        function startAd(params) {\n            window.parent.{{closures.onAdRequest}}();\n            \n            initializeComscore(params.comscore);\n            \n            try {\n                oAdUnit = placeAdUnit("inform_container", {\n                    "spotx_ad_unit": params.adUnitType,\n                    "spotx_channel_id": params.channelId,\n                    "spotx_https": params.isHttps ? 1 : 0,\n                    "spotx_vpix": params.excludedCreatives,\n                    "spotx_ad_format": params.adFormat,\n                    "spotx_content_page_url": params.embedOriginUrl,\n                    "spotx_content_width": params.width,\n                    "spotx_content_height": params.height, \n                    "spotx_ad_done_function": "onAdDone",\n                    "custom": params.customData,\n                    "events": {\n                        \'AdPaused\': onAdPaused,\n                        \'AdPlaying\': onAdPlaying,\n                        \'AdLoaded\': window.parent.{{closures.onAdLoad}},\n                        \'AdImpression\': onAdImpression,\n                        \'AdStarted\': onAdStarted,\n                        \'AdVideoStart\': onAdVideoStart,\n                        \'AdRemainingTimeChange\': onAdTimeUpdate\n                    }\n                });\n            }\n            catch (e) {\n                window.parent.{{closures.onAdError}}(e.getMessage());\n            }\n        }\n        \n        function onAdStarted() {\n            document.getElementById(\'adchoices-container\').style.display = \'block\';\n        }\n        \n        function onAdPaused() {\n            window.parent.{{closures.onAdPause}}();\n            informStreamingTag.stop();\n        }\n        \n        function onAdPlaying() {\n            informStreamingTag.playVideoAdvertisement(informStreamingTagMetadata);\n            \n            if (informStreamingTagMetadata) {\n                window.parent.{{closures.onComscoreCall}}();\n            }\n        }\n        \n        function onAdTimeUpdate() {\n            var timeRemaining = parseInt(oAdUnit.getAdOS().getAdRemainingTime(), 10),\n                text = \'Time Remaining: \';\n            \n            if (!isNaN(timeRemaining)) {\n                text += timeRemaining + \' second\';\n                if (timeRemaining != 1) {\n                    text += \'s\';\n                }\n            }\n            else {\n                text = \'\';\n            }\n            \n            // If time remaining is less than 0, hide time remaining\n            if (timeRemaining < 0) text = \'\';\n            \n            if (text != previousAdCountdownText) {\n                document.getElementById(\'inform-time-remaining\').innerHTML = text;\n                previousAdCountdownText = text;\n            }\n        }\n        \n        function onAdImpression() {\n        	window.parent.{{closures.onAdStart}}(\'AdImpression\');\n        }\n        \n        function onAdVideoStart() {\n        	window.parent.{{closures.onAdStart}}(\'AdVideoStart\');\n        	onAdPlaying();\n        }\n        \n        function stopAd() {\n            oAdUnit && oAdUnit.close();\n        }\n        \n        function onAdDone(displayedAd) {\n            informStreamingTag.stop();\n            window.parent.{{closures.onAdDone}}(displayedAd);\n        }\n    </script>\n    <style>\n        .ndn-viewer-viewerModule-easi {\n          width: 100%;\n          height: 100%;\n          position: relative;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices {\n          color: #6a6f72;\n          width: 100%;\n          height: 24px;\n          line-height: 24px;\n          font-family: Helvetica, Arial, Tahoma;\n          font-size: 12px;\n          text-align: right;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-logo {\n          display: block;\n          width: 78px;\n          height: 16px;\n          margin: 4px;\n          float: left;\n          background: url(\'{{appUrl}}/img/ad-choices.png\');\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-logo:hover,\n        .ndn-viewer-viewerModule-easi-adchoices-logo:active {\n          background-position: 78px 0;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices,\n        .ndn-viewer-viewerModule-easi-adchoices-text,\n        .ndn-viewer-viewerModule-easi-player {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-background {\n          background: black;\n          height: 24px;\n          opacity: 0.7;\n          z-index: 9001;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices,\n        .ndn-viewer-viewerModule-easi-adchoices-text {\n            z-index: 9002;\n        }\n    </style>\n</head>\n<body style="margin:0;">\n    <div class="ndn-viewer-viewerModule-easi" style="width:{{width}}px;height:{{height}}px;">\n        <div id="adchoices-container" class="ndn-viewer-viewerModule-easi-adchoices" style="display:none;">\n            <div class="ndn-viewer-viewerModule-easi-adchoices-background"></div>\n            <div class="ndn-viewer-viewerModule-easi-adchoices-text">\n                <a class="ndn-viewer-viewerModule-easi-adchoices-logo" href="http://assets.newsinc.com/info/adchoices.html" target="_blank"></a> <span id="inform-time-remaining"></span>&nbsp;\n            </div>\n        </div>\n        <div class="ndn-viewer-viewerModule-easi-player" id="inform_container"></div>\n    </div>\n</body>\n</html>'}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Easi",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Viewer/ViewerModule","models/Ndn/Utils/DomElement","models/Ndn/Utils/UserAgent","models/Ndn/Debugger","text!templates/ndn/viewer/viewer-module/easi.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a,s,l,d){var c=o.getSetting("easiTimeout")?parseInt(o.getSetting("easiTimeout")):15,u=l.inMode("easi");return r.extend({defaults:{playerInstanceId:4},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.toggleAdPlayer(!0),this.toggleContentPlayer(!1);var t=this;this.on({"adEnd adTimeout adError adUnavailable":function(){t.endSession()}})},prepareSession:function(){this.toggleReady(!1);var t=this;return e.Deferred(function(e){t.onceReady(e.resolve),t.initializeDom(),t.initializeIframeContent()}).promise()},initializeDom:function(){var t=this.get("containerElement"),i=t.width(),n=t.height(),o=function(){var o=document.createElement("iframe");return o.scrolling="no",o.style.overflow="hidden",o.style.width=i+"px",o.style.height=n+"px",o.style.border="0",o.style.background="transparent none",e(o).attr("allowTransparency","true"),e(o).addClass("ndn_easiPlayer"),t.html("").append(o),o}(),r=this;o.onload=function(){r.toggleReady(!0),o.onload=null},this.set("iframeElement",o),this.debug({iframeElementHtml:a.getFullHtml(o)})},initializeIframeContent:function(){var e=this.get("iframeElement"),t=this.getIframeContent(),i=e.contentDocument;i.open(),i.write(t),i.close(),this.set("iframeElement",e),this.debug({iframeContent:t})},getIframeContent:function(){var t=this.getContainerElement(),i=this.getIframeClosures(),r=n.to_html(d.replace(/\{\{appUrl\}\}/g,o.getAppUrl()),{width:t.width(),height:t.height(),closures:i});return this.debug({iframeContent:r,instructions:function(){var t=["var _nw2e = _nw2e || [];","_nw2e.closures = _nw2e.closures || {};"];return e.each(i,function(e,i){t.push(i+' = function() { console.log("'+e+'", arguments); };')}),t}()}),r},getIframeClosures:function(){function e(e){return o.makeClosureGlobal(t.makeSessionClosure(e))}var t=this;return{onComscoreCall:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onComscoreCall"),t.updateScheduleLog({hasMadeEasiComscoreCall:!0})}),onAdRequest:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onAdRequest"),t.trigger("adRequest",{receivedData:{},playerInstanceType:4})}),onAdLoad:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onAdLoad"),t.trigger("adLoad",{})}),onAdStart:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] "+e),t.isShowingAd()||t.trigger("adStart",{})}),onAdDone:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdDone "+e),t.trigger(e?"adEnd":"adUnavailable")}),onAdError:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdError ",e),t.trigger("adError",{message:e})}),onAdPause:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdPause ",e),t.trigger("adPause")})}},startSession:function(t){r.prototype.startSession.apply(this,arguments);var i=this,n=this.getViewer(),a="undefined"!=typeof t.timeout?t.timeout:c,s=!!t.comscore,l=t.comscore||{},d="undefined"!=typeof t.allowFlash?t.allowFlash:!0,p="undefined"!=typeof t.isHttps?t.isHttps:!1;n.getSessionIndex();setTimeout(this.makeSessionClosure(function(){i.isShowingAd()||(u&&console.log("[Ndn_Ads_EasiInformPlayer] adTimeout"),i.trigger("adTimeout"))}),1e3*a),this.prepareSession().done(function(){var n=i.get("containerElement"),r=n.width(),a=n.height(),c=t.customData||{},u={channelId:t.channelId,adFormat:d?"":"html5",isHttps:p,excludedCreatives:d?"[]":'["FLV","VPAID"]',adUnitType:t.adUnitType||"incontent",embedOriginUrl:o.getEmbedOriginUrl(),width:r,height:a,comscore:{enabled:s,metadata:{ns_st_ci:l.videoAssetId,c3:l.distributorName,c4:l.providerName,c6:l.siteSection}},customData:e.toJSON({vs:c.videoSizeId,sitesection:c.siteSection,wgt:c.wgtValue,plt:c.pltValue,aoi:c.adOpportunityIndex,asi:c.spotxCallIndex,fp:c.foldPositionId,ab:c.adBlockDetectionId,dpid:c.adCampaignId,eidx:c.embedIndex,ceidx:c.widgetId,pw:r,ph:a})};i.debug({instructions:function(){var t=i.get("debugInfo").instructions;return t.push("iframeElement.onload = function() { iframeElement.contentWindow.startAd("+e.toJSON(u)+"); iframeElement.onload = null; };"),t}()},!0),i.get("iframeElement").contentWindow.startAd(u)})},halt:function(){var e=this.get("iframeElement");e&&e.contentWindow&&e.contentWindow.stopAd&&e.contentWindow.stopAd(),r.prototype.halt.apply(this,arguments)}})}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/rtk.html",[],function(){return"<!doctype html>\n<html>\n<head></head>\n<body style=\"margin:0;\">\n<script>\nvar dv = document.createElement('div');\nvar el = document.createElement('script');\ndv.id =\"RTK_{{adUnitShortcode}}\";\ndocument.body.appendChild(dv);\nel.async = true; el.type = 'text/javascript'; \nel.src = ((window.top.document.location.protocol === 'http:') ? 'http:' : 'https:') + \"//thor.rtk.io/{{auctionId}}/{{adUnitShortcode}}/jita.js?dfp={{dfpMacro}}\";\ndocument.body.appendChild(el);\n</script>\n</body>\n</html>"}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Rtk",["jquery","mustache","models/Ndn/App","models/Ndn/Viewer/ViewerModule","models/Ndn/Debugger","models/Ndn/Utils/DomElement","text!templates/ndn/viewer/viewer-module/rtk.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a){var s=(o.inMode("rtk"),n.extend({defaults:{duration:null},initialize:function(e){n.prototype.initialize.apply(this,arguments),o.inMode("adPlayer")&&this.on("all",function(e){console.log("Ndn_Viewer_ViewerModule_Rtk event: "+e)}),this.toggleAdPlayer(!0)},getIframeElement:function(){return this.getContainerElement().html(""),this.createIframe(),this.get("iframeElement")},createIframe:function(){var t=300,i=250,n=document.createElement("iframe");n.scrolling="no",n.style.overflow="hidden",n.style.width=t+"px",n.style.height=i+"px",n.style.border="0",n.style.background="transparent none",e(n).attr("allowTransparency","true"),e(n).addClass("ndn_easiPlayer"),n.onload=function(){n.onload=null},this.getContainerElement().get(0).appendChild(n),this.set("iframeElement",n),this.debug({iframeElementHtml:r.getFullHtml(n)})},getDuration:function(){return this.get("duration")},getCurrentTime:function(){return 0},startSession:function(e){n.prototype.startSession.apply(this,arguments);var t=e.duration,i=s.generateCode(e),o=this.getIframeElement().contentDocument;if(o.open(),o.write(i),o.close(),this.debug({iframeContent:i},!0),this.trigger("adRequest",{receivedData:{},playerInstanceType:8}),this.trigger("adStart",{}),this.set("duration",t),t>0){var r=this;setTimeout(this.makeSessionClosure(function(){r.trigger("adEnd"),r.endSession()}),1e3*t)}}},{generateCode:function(e){return t.to_html(a.replace(/\{\{embedOriginUrl\}\}/g,e.embedOriginUrl),{trackingGroup:e.trackingGroup,dfpMacro:e.useDfpMacro?"1":"0",adUnitShortcode:e.adUnitShortcode,auctionId:e.auctionId})}}));return s}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/SoundManager",["jquery","backbone"],function(e,t){return t.Model.extend({defaults:{player:null,active:!1},initialize:function(e){var t=this;this.set("player",e),e.getContainerElement().on("mouseenter",function(){t.isActive()&&e.setMuted(!1)}).on("mouseleave",function(){t.isActive()&&e.setMuted(!0)}),e.on("volumeUpdate",function(){})},isActive:function(){return this.get("active")},setActive:function(e){this.set("active",e)}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel",["jquery","backbone"],function(e,t){return t.Model.extend({defaults:{informPlayer:null},initialize:function(e){t.Model.prototype.initialize.apply(this,arguments),this.set({informPlayer:e});var i=this;this.getPlayer().on("viewerModuleEnd",function(){i.hide()})},getPlayer:function(){return this.get("informPlayer")},hide:function(){this.get("view").$el.hide()},show:function(){this.get("view").$el.prependTo(this.getPlayer().getContainerElement()).show()},isShowing:function(){return this.get("view").$el.is(":visible")}})}),Ndn_Require.define("text!templates/ndn/video-player/endslate-overlay.html",[],function(){return'<div class="ndn_endslateContainer">\n	{{^mediaIsBlocked}}\n	    <div class="ndn_endslateClickSurface"></div>\n	    {{#showUnavailableAlert}}\n	    <div class="ndn_endslateAlertUnavailable">The requested video is no longer available</div>\n	    {{/showUnavailableAlert}}\n	    <div class="ndn_upNextContainer">\n			<span class="ndn_upNextLabel">Up Next: </span> \n			<div class="ndn_upNextThumbnailContainer">\n                <div class="ndn_thumbnailPlayIcon"></div>\n		    	<img class="ndn_upNextThumbnail" src="{{upNextThumbnail}}" />\n			</div>\n			<span class="ndn_upNextTitle">{{upNextTitle}}</span>			\n	    </div> \n	    {{#showCountdown}}\n	    <div class="ndn_startsInContainer">\n	        <div class="ndn_startsInLabel">Starts In:</div>\n	        <div class="ndn_startsInCountdownContainer">\n		        <span class="ndn_startsInCountdown">{{countdownValue}}</span>\n	        </div>\n	    </div>\n	    {{/showCountdown}}	    \n	{{/mediaIsBlocked}}\n    {{#mediaIsBlocked}}\n    	<div class="ndn_endslateMediaBlocked">We\'re sorry but this video cannot be played from your location.</div>\n    {{/mediaIsBlocked}}\n</div>'}),Ndn_Require.define("jquery_autoellipsis",["jquery","underscore"],function(e,t){!function(e,t){function i(t){void 0===window.ndn_ellipsis_handler&&(window.ndn_ellipsis_handler=new EllipsisResizeHandler,e(window).on("resize",function(){clearTimeout(window.ndnResizeTimeout),window.ndnResizeTimeout=setTimeout(function(){window.ndn_ellipsis_handler.onResize.call(window.ndn_ellipsis_handler)},100)})),t.each(function(){window.ndn_ellipsis_handler.$elements=window.ndn_ellipsis_handler.$elements.add(this)})}function n(i,n){var s=i.data("jqae");s||(s={});var l=s.wrapperElement;l||(l=i.wrapInner("<div/>").find(">div"),l.css({margin:"0 0 0 0",padding:0,border:0}));var d=l.data("jqae");d||(d={});var c=d.originalContent;c?l=d.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(l):l.data("jqae",{originalContent:l.clone(!0)}),i.data("jqae",{wrapperElement:l,containerWidth:i.width(),containerHeight:i.height()});var u=i.height(),p=(parseInt(i.css("padding-top"),10)||0)+(parseInt(i.css("border-top-width"),10)||0)-(l.offset().top-i.offset().top),h=!1,g=l;n.selector&&(g=e(l.find(n.selector).get().reverse())),g.each(function(){var i=e(this),s=i.text(),d=!1;if(l.innerHeight()-i.innerHeight()>u+p)i.remove();else if(a(i),i.contents().length){if(h&&(r(i).get(0).nodeValue+=n.ellipsis,h=!1),1==i.contents().length){if(void 0===i.data("jaelh")){var c=l.attr("style"),g=l.html();l.attr("style","height: auto; padding: 0;").html("&nbsp;"),l.data("jaelh",l.innerHeight()),l.html(g),void 0!==c?l.attr("style",c):l.removeAttr("style")}var f=u+p+i.data("jaelh"),m=l.innerHeight(),y=f/m;if(1>y){var A=r(i),v=A.get(0).nodeValue.split(" ");A.get(0).nodeValue=t.first(v,Math.ceil(v.length*y)).join(" ")}}for(;l.innerHeight()>u+p;){if(d=o(i),!d){h=!0,i.remove();break}if(a(i),!i.contents().length){h=!0,i.remove();break}r(i).get(0).nodeValue+=n.ellipsis}"onEllipsis"==n.setTitle&&d||"always"==n.setTitle?i.attr("title",s):"never"!=n.setTitle&&i.removeAttr("title")}})}function o(t){var i=r(t);if(i.length){var n=i.get(0).nodeValue,o=n.lastIndexOf(" ");return o>-1?(n=e.trim(n.substring(0,o)),i.get(0).nodeValue=n):i.get(0).nodeValue="",!0}return!1}function r(e){if(e.contents().length){var t=e.contents(),i=t.eq(t.length-1);return i.filter(s).length?i:r(i)}e.append("");var t=e.contents();return t.eq(t.length-1)}function a(t){if(t.contents().length){var i=t.contents(),n=i.eq(i.length-1);if(n.filter(s).length){var o=n.get(0).nodeValue;return o=e.trim(o),""==o?(n.remove(),!0):!1}for(;a(n););return n.contents().length?!1:(n.remove(),!0)}return!1}function s(){return 3===this.nodeType}function l(e,t){p[e]=t,u||(u=window.setInterval(function(){c()},200))}function d(e){p[e]&&(delete p[e],p.length||u&&(window.clearInterval(u),u=void 0))}function c(){if(!h){h=!0;for(var t in p)e(t).each(function(){var i,o;i=e(this),o=i.data("jqae"),(o.containerWidth!=i.width()||o.containerHeight!=i.height())&&n(i,p[t])});h=!1}}EllipsisResizeHandler=function(){this.$elements=e(),this.onResize=function(){this.$elements.ellipsis()}};var u,p={},h=!1,g={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(t,o){var r,a;return r=e(this),"string"!=typeof t&&(o=t,t=void 0),a=e.extend({},g,o),a.selector=t,r.each(function(){var t=e(this);n(t,a)}),a.live?l(r.selector,a):d(r.selector),a.updateOnWindowResize&&i(r),this}}(e,t)}),Ndn_Require.define("lib/jquery_plugins/jquery.backstretch.min",["jquery"],function(e){!function(e,t,i){e.fn.backstretch=function(n,o){return(n===i||0===n.length)&&e.error("No images were supplied for Backstretch"),0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(){var t=e(this),i=t.data("backstretch");if(i){if("string"==typeof n&&"function"==typeof i[n])return void i[n](o);o=e.extend(i.options,o),i.destroy(!0)}i=new r(this,n,o),t.data("backstretch",i)})},e.backstretch=function(t,i){return e("body").backstretch(t,i).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==i},e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var n={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},o={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},r=function(i,o,r){this.options=e.extend({},e.fn.backstretch.defaults,r||{}),this.images=e.isArray(o)?o:[o],e.each(this.images,function(){e("<img />")[0].src=this}),this.isBody=i===document.body,this.$container=e(i),this.$root=this.isBody?e(a?t:document):this.$container,i=this.$container.children(".backstretch").first(),this.$wrap=i.length?i:e('<div class="backstretch"></div>').css(n).appendTo(this.$container),this.isBody||(i=this.$container.css("position"),o=this.$container.css("zIndex"),this.$container.css({position:"static"===i?"relative":i,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&a?"fixed":"absolute"}),this.index=0,this.show(this.index),e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};r.prototype={resize:function(){try{var e,i={left:0,top:0},n=this.isBody?this.$root.width():this.$root.innerWidth(),o=n,r=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),a=o/this.$img.data("ratio");a>=r?(e=(a-r)/2,this.options.centeredY&&(i.top="-"+e+"px")):(a=r,o=a*this.$img.data("ratio"),e=(o-n)/2,this.options.centeredX&&(i.left="-"+e+"px")),this.$wrap.css({width:n,height:r}).find("img:not(.deleteable)").css({width:o,height:a}).css(i)}catch(s){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){var i=this,n=i.$wrap.find("img").addClass("deleteable"),r={relatedTarget:i.$container[0]};return i.$container.trigger(e.Event("backstretch.before",r),[i,t]),this.index=t,clearInterval(i.interval),i.$img=e("<img />").css(o).bind("load",function(o){var a=this.width||e(o.target).width();o=this.height||e(o.target).height(),e(this).data("ratio",a/o),e(this).fadeIn(i.options.speed||i.options.fade,function(){n.remove(),i.paused||i.cycle(),e(["after","show"]).each(function(){i.$container.trigger(e.Event("backstretch."+this,r),[i,t])})}),i.resize()}).appendTo(i.$wrap),i.$img.attr("src",i.images[t]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){e(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var a,s=navigator.userAgent,l=navigator.platform,d=s.match(/AppleWebKit\/([0-9]+)/),d=!!d&&d[1],c=s.match(/Fennec\/([0-9]+)/),c=!!c&&c[1],u=s.match(/Opera Mobi\/([0-9]+)/),p=!!u&&u[1],h=s.match(/MSIE ([0-9]+)/),h=!!h&&h[1];a=!((-1<l.indexOf("iPhone")||-1<l.indexOf("iPad")||-1<l.indexOf("iPod"))&&d&&534>d||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||u&&7458>p||-1<s.indexOf("Android")&&d&&533>d||c&&6>c||"palmGetResource"in t&&d&&534>d||-1<s.indexOf("MeeGo")&&-1<s.indexOf("NokiaBrowser/8.5.0")||h&&6>=h)}(e,window)}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateView",["jquery","backbone","mustache","text!templates/ndn/video-player/endslate-overlay.html","jquery_autoellipsis","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n){return t.View.extend({events:{"click .ndn_endslateClickSurface":"onSurfaceClick"},initialize:function(){this.setElement(e(document.createElement("div")).addClass("ndn_endslateOverlay ndn_playerOverlay").prependTo(this.model.getPlayer().getContainerElement()).hide().get(0)),this.model.on("change:countdownValue",function(){this.$el.find(".ndn_startsInCountdown").html(this.model.get("countdownValue"));
}.bind(this))},hide:function(){this.$el.hide()},show:function(e){this.model.set("type",e);var t=this.model.getTemplateData();this.$el.html(i.to_html(n,t)),this.$el.appendTo(this.model.getPlayer().getContainerElement()).show(),t.backgroundImage&&(this.$el.backstretch(t.backgroundImage).css("z-index",""),this.$el.find(".backstretch").css("z-index",110)),this.$el.height()<300&&this.$el.find(".ndn_upNextTitle").ellipsis(),this.$el.height()<250&&this.$el.find(".ndn_justWatchedContainer").hide(),this.model.displaysCountdown()&&this.model.countdownToPlay(),this.$el.prependTo(this.model.getPlayer().getContainerElement()).show()},onSurfaceClick:function(){this.model.getPlayer().requestVideoStart({source:"endslateNextVideoClick"}),this.hide()}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateModel",["jquery","underscore","mustache","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateView","models/Ndn/Debug"],function(e,t,i,n,o,r){var a=5;return n.extend({defaults:{viewerModule:null,type:null,countdownInterval:null,countdownValue:a,view:null},initialize:function(e){n.prototype.initialize.apply(this,arguments),this.set("view",new o({model:this}))},show:function(e){n.prototype.show.apply(this,arguments),this.get("view").show(e)},getTemplateData:function(){var e=this.getPlayer().getSessionParams().videoData||{},t={upNextTitle:e.videoTitle,upNextThumbnail:e.stillImageUrl,showUnavailableAlert:"videoNotAvailable"==this.get("type"),showCountdown:this.displaysCountdown(),mediaIsBlocked:"mediaBlocked"==this.get("type"),countdownValue:this.get("countdownValue"),backgroundImage:e.stillImageUrl};return t},displaysCountdown:function(){return"videoNotAvailable"==this.get("type")&&this.getPlayer().getSessionParams().playOnLoad},countdownToPlay:function(){var e=this.getPlayer(),t=this;this.set("countdownInterval",setInterval(function(){this.get("countdownValue")<=0&&(t.cancelCountdown(),t.hide(),e.play()),r.inMode("endslateTimer")||this.set("countdownValue",Math.max(0,this.get("countdownValue")-1))}.bind(this),1e3))},cancelCountdown:function(){null!==this.get("countdownInterval")&&(clearInterval(this.get("countdownInterval")),this.set({countdownInterval:null,countdownValue:a}))}})}),Ndn_Require.define("models/Ndn/Utils/FastClick",[],function(){var e="ontouchstart"in window;return function(t){function i(e){return l=!0,s.x=e.targetTouches[0].clientX,s.y=e.targetTouches[0].clientY,s.scroll=window.pageYOffset,!0}function n(e){return l&&(Math.abs(e.targetTouches[0].clientX-s.x)>10||Math.abs(e.targetTouches[0].clientY-s.y)>10)&&(l=!1),!0}function o(e){var t,i;return!l||Math.abs(window.pageYOffset-s.scroll)>5?!0:(t=document.elementFromPoint(s.x,s.y),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),(-1===t.className.indexOf("ndn_fastClick_clickevent")||-1!==t.className.indexOf("ndn_fastClick_touchandclickevent"))&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,0,0,s.x,s.y,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)),t instanceof HTMLSelectElement||-1!==t.className.indexOf("ndn_fastClick_clickevent")?!1:void e.preventDefault())}function r(e){l=!1}function a(t){if(!window.event)return!0;var i,n=!0,o=window.event.forwardedTouchEvent;return e&&(i=t.currentTarget,(!i||!o&&-1==i.className.indexOf("ndn_fastClick_clickevent"))&&(n=!1)),n?!0:(t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),!1)}if("undefined"==typeof HTMLElement)return!1;if(!(t instanceof HTMLElement))throw new TypeError("Layer must be instance of HTMLElement");e&&(t.addEventListener("touchstart",i,!0),t.addEventListener("touchmove",n,!0),t.addEventListener("touchend",o,!0),t.addEventListener("touchcancel",r,!0)),t.addEventListener("click",a,!0),t.onclick instanceof Function&&(t.addEventListener("click",t.onclick,!1),t.onclick="");var s={x:0,y:0,scroll:0},l=!1}}),Ndn_Require.define("text!templates/ndn/video-player/info-overlay.html",[],function(){return'<div class="ndn_videoInfo">\n	<div class="ndn_videoTitle">{{videoTitle}}</div>\n	<div class="ndn_videoInfoDescription">{{videoDescription}}</div>\n	<div class="ndn_videoProviderName">{{videoProviderName}}</div>\n	<div class="ndn_toggleInfoDescription ndn_icon_info-circled" title="More Info"></div>\n	<div class="ndn_toggleShare ndn_icon_share" title="Share"></div>\n	<div class="ndn_infoPanelOverlay"></div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/info-overlay.html","jquery_autoellipsis"],function(e,t,i,n,o){return i.View.extend({events:{"click .ndn_toggleInfoDescription":"toggleDescription","click .ndn_toggleShare":"openShareOverlay"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.setElement(e('<div class="ndn_infoOverlayContainer ndn_playerOverlay">').get(0))},toggleDescription:function(){var e=this.$el.find(".ndn_toggleInfoDescription"),t=this.$el.find(".ndn_videoInfoDescription");e.hasClass("ndn_icon_info-circled")?(e.removeClass("ndn_icon_info-circled").addClass("ndn_icon_cancel-circled"),t.slideToggle("500","swing")):(e.removeClass("ndn_icon_cancel-circled").addClass("ndn_icon_info-circled"),t.slideToggle("500","swing"))},openShareOverlay:function(e){var t=this.model.getPlayer(),i=t.getOverlays(),n=i.getOverlay("share"),o=i.getOverlay("start"),r=this.model;return o.isShowing()?(o.togglePlayButton(!1),r.hide()):(t.pause(),i.hideAll()),n.show(),!1},updateHtml:function(e){this.$el.html(t.to_html(o,{videoTitle:e.videoTitle,videoDescription:e.description,videoProviderName:e.provider.name})),this.$el.find(".ndn_icon_share").toggle(!!this.model.getPlayer().getSessionParams().share)}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoModel",["jquery","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoView"],function(e,t,i){return t.extend({defaults:{view:null,toggleableDisplay:!0},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.set("view",new i({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var n=this,o=this.get("view");e.on({videoLoad:function(e){o.updateHtml(e.videoData)},"videoStart videoResume":function(){n.setToggleableDisplay(!0).setVisibility(!1)},"adStart adResume":function(){n.setToggleableDisplay(!1).setVisibility(!1,!0)},"adPause videoPause":function(){n.setToggleableDisplay(!1).setVisibility(!0,!0)}}),e.getContainerElement().on({"mouseenter touchstart":function(){n.get("toggleableDisplay")&&n.setVisibility(!0)},"mouseleave touchend":function(){n.get("toggleableDisplay")&&n.setVisibility(!1)}})},setVisibility:function(e,t){"undefined"==typeof t&&(t=!1);var i=this.get("view").$el,n="flash"!=this.getPlayer().getSessionParams().playbackMode;return n?e?(i.stop(!0,!0).css("display","block").css("visibility","visible"),i.delay(0).fadeIn(900)):i.stop(!0,!0).delay(4700).fadeOut(900):e?i.stop(!0,!0).fadeIn():i.stop(!0,!0).delay(1e3).fadeOut(800),t&&i.stop(!0,!0),this},setToggleableDisplay:function(e){return this.set("toggleableDisplay",e),this}})}),Ndn_Require.define("jquery_bxslider",["jquery"],function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,slideHeight:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var r={},a=this;t.el=this;var s=e(window).width(),l=e(window).height(),d=function(){r.settings=e.extend({},n,o),r.settings.slideWidth=parseInt(r.settings.slideWidth),r.settings.slideHeight=parseInt(r.settings.slideHeight),r.children=a.children(r.settings.slideSelector),r.children.length<r.settings.minSlides&&(r.settings.minSlides=r.children.length),r.children.length<r.settings.maxSlides&&(r.settings.maxSlides=r.children.length),r.settings.randomStart&&(r.settings.startSlide=Math.floor(Math.random()*r.children.length)),r.active={index:r.settings.startSlide},r.carousel=r.settings.minSlides>1||r.settings.maxSlides>1,r.carousel&&(r.settings.preloadImages="all"),r.minThreshold=r.settings.minSlides*r.settings.slideWidth+(r.settings.minSlides-1)*r.settings.slideMargin,r.maxThreshold=r.settings.maxSlides*r.settings.slideWidth+(r.settings.maxSlides-1)*r.settings.slideMargin,r.working=!1,r.controls={},r.interval=null,r.animProp="vertical"==r.settings.mode?"top":"left",r.usingCSS=r.settings.useCSS&&"fade"!=r.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return r.cssPrefix=t[i].replace("Perspective","").toLowerCase(),r.animProp="-"+r.cssPrefix+"-transform",!0;return!1}(),"vertical"==r.settings.mode&&(r.settings.maxSlides=r.settings.minSlides),c()},c=function(){a.wrap('<div class="ndn_carousel-wrapper"><div class="ndn_carousel-viewport"></div></div>'),r.viewport=a.parent(),r.loader=e('<div class="ndn_carousel-loading" />'),r.viewport.prepend(r.loader),a.css({width:"horizontal"==r.settings.mode?215*r.children.length+"%":"auto",position:"relative"}),r.usingCSS&&r.settings.easing?a.css("-"+r.cssPrefix+"-transition-timing-function",r.settings.easing):r.settings.easing||(r.settings.easing="swing");f();if(r.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),r.viewport.parent().css({maxWidth:h()}),r.children.css({"float":"horizontal"==r.settings.mode?"left":"none",listStyle:"none",position:"relative"}),r.children.width(g()),"horizontal"==r.settings.mode&&r.settings.slideMargin>0&&r.children.css("marginRight",r.settings.slideMargin),"vertical"==r.settings.mode&&r.settings.slideMargin>0&&r.children.css("marginBottom",r.settings.slideMargin),"fade"==r.settings.mode&&(r.children.css({position:"absolute",zIndex:0,display:"none"}),r.children.eq(r.settings.startSlide).css({zIndex:50,display:"block"})),r.controls.el=e('<div class="ndn_carousel-controls" />'),r.settings.captions&&S(),r.settings.infiniteLoop&&"fade"!=r.settings.mode&&!r.settings.ticker){var t="vertical"==r.settings.mode?r.settings.minSlides:r.settings.maxSlides,i=r.children.slice(0,t).clone().addClass("ndn_carousel-clone"),n=r.children.slice(-t).clone().addClass("ndn_carousel-clone");a.append(i).prepend(n)}r.active.last=r.settings.startSlide==m()-1,r.settings.video&&a.fitVids();var o=r.children.eq(r.settings.startSlide);"all"==r.settings.preloadImages&&(o=a.children()),r.settings.ticker?r.settings.pager=!1:(r.settings.pager&&E(),r.settings.controls&&b(),r.settings.auto&&r.settings.autoControls&&C(),(r.settings.controls||r.settings.autoControls||r.settings.pager)&&r.viewport.after(r.controls.el)),o.imagesLoaded(u)},u=function(){r.loader.remove(),A(),"vertical"==r.settings.mode&&(r.settings.adaptiveHeight=!0),r.viewport.height(p()),a.redrawSlider(),r.settings.onSliderLoad(r.active.index),r.initialized=!0,e(window).bind("resize",U),r.settings.auto&&r.settings.autoStart&&L(),r.settings.ticker&&R(),r.settings.pager&&M(r.settings.startSlide),r.settings.controls&&k(),r.settings.touchEnabled&&!r.settings.ticker&&V()},p=function(){if(r.settings.slideHeight)return r.settings.slideHeight;var t=0,n=e();if("vertical"==r.settings.mode||r.settings.adaptiveHeight)if(r.carousel){var o=1==r.settings.moveSlides?r.active.index:r.active.index*y();for(n=r.children.eq(o),i=1;i<=r.settings.maxSlides-1;i++)n=o+i>=r.children.length?n.add(r.children.eq(i-1)):n.add(r.children.eq(o+i))}else n=r.children.eq(r.active.index);else n=r.children;return"vertical"==r.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),r.settings.slideMargin>0&&(t+=r.settings.slideMargin*(r.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},h=function(){var e="100%";return r.settings.slideWidth>0&&(e="horizontal"==r.settings.mode?r.settings.maxSlides*r.settings.slideWidth+(r.settings.maxSlides-1)*r.settings.slideMargin:r.settings.slideWidth),e},g=function(){var e=r.settings.slideWidth,t=r.viewport.width();return 0==r.settings.slideWidth||r.settings.slideWidth>t&&!r.carousel||"vertical"==r.settings.mode?e=t:r.settings.maxSlides>1&&"horizontal"==r.settings.mode&&(t>r.maxThreshold||t<r.minThreshold&&(e=(t-r.settings.slideMargin*(r.settings.minSlides-1))/r.settings.minSlides)),e},f=function(){var e=1;if("horizontal"==r.settings.mode&&r.settings.slideWidth>0)if(r.viewport.width()<r.minThreshold)e=r.settings.minSlides;else if(r.viewport.width()>r.maxThreshold)e=r.settings.maxSlides;else{var t=r.children.first().width();e=Math.floor(r.viewport.width()/t)}else"vertical"==r.settings.mode&&(e=r.settings.minSlides);return e},m=function(){var e=0;if(r.settings.moveSlides>0)if(r.settings.infiniteLoop)e=r.children.length/y();else for(var t=0,i=0;t<r.children.length;)++e,t=i+f(),i+=r.settings.moveSlides<=f()?r.settings.moveSlides:f();else e=Math.ceil(r.children.length/f());return e},y=function(){return r.settings.moveSlides>0&&r.settings.moveSlides<=f()?r.settings.moveSlides:f()},A=function(){if(r.children.length>r.settings.maxSlides&&r.active.last&&!r.settings.infiniteLoop){if("horizontal"==r.settings.mode){var e=r.children.last(),t=e.position();v(-(t.left-(r.viewport.width()-e.width())),"reset",0)}else if("vertical"==r.settings.mode){var i=r.children.length-r.settings.minSlides,t=r.children.eq(i).position();v(-t.top,"reset",0)}}else{var t=r.children.eq(r.active.index*y()).position();r.active.index==m()-1&&(r.active.last=!0),void 0!=t&&("horizontal"==r.settings.mode?v(-t.left,"reset",0):"vertical"==r.settings.mode&&v(-t.top,"reset",0))}},v=function(e,t,i,n){if(r.usingCSS){var o="vertical"==r.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";a.css("-"+r.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(a.css(r.animProp,o),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==t?a.css(r.animProp,o):"ticker"==t&&(a.css("-"+r.cssPrefix+"-transition-timing-function","linear"),a.css(r.animProp,o),a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),v(n.resetValue,"reset",0),O()}))}else{var s={};s[r.animProp]=e,"slide"==t?a.animate(s,i,r.settings.easing,function(){D()}):"reset"==t?a.css(r.animProp,e):"ticker"==t&&a.animate(s,speed,"linear",function(){v(n.resetValue,"reset",0),O()})}},_=function(){for(var t="",i=m(),n=0;i>n;n++){var o="";r.settings.buildPager&&e.isFunction(r.settings.buildPager)?(o=r.settings.buildPager(n),r.pagerEl.addClass("ndn_carousel-custom-pager")):(o=n+1,r.pagerEl.addClass("ndn_carousel-default-pager")),t+='<div class="ndn_carousel-pager-item"><a href="" data-slide-index="'+n+'" class="ndn_carousel-pager-link">'+o+"</a></div>"}r.pagerEl.html(t)},E=function(){r.settings.pagerCustom?r.pagerEl=e(r.settings.pagerCustom):(r.pagerEl=e('<div class="ndn_carousel-pager" />'),r.settings.pagerSelector?e(r.settings.pagerSelector).html(r.pagerEl):r.controls.el.addClass("ndn_carousel-has-pager").append(r.pagerEl),_()),r.pagerEl.delegate("a","click",P)},b=function(){r.controls.next=e('<a class="ndn_carousel-next" href="">'+r.settings.nextText+"</a>"),r.controls.prev=e('<a class="ndn_carousel-prev" href="">'+r.settings.prevText+"</a>"),r.controls.next.bind("click",N),r.controls.prev.bind("click",I),r.settings.nextSelector&&e(r.settings.nextSelector).append(r.controls.next),r.settings.prevSelector&&e(r.settings.prevSelector).append(r.controls.prev),r.settings.nextSelector||r.settings.prevSelector||(r.controls.directionEl=e('<div class="ndn_carousel-controls-direction" />'),r.controls.directionEl.append(r.controls.prev).append(r.controls.next),r.controls.el.addClass("ndn_carousel-has-controls-direction").append(r.controls.directionEl))},C=function(){r.controls.start=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-start" href="">'+r.settings.startText+"</a></div>"),r.controls.stop=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-stop" href="">'+r.settings.stopText+"</a></div>"),r.controls.autoEl=e('<div class="ndn_carousel-controls-auto" />'),r.controls.autoEl.delegate(".ndn_carousel-start","click",w),r.controls.autoEl.delegate(".ndn_carousel-stop","click",T),r.settings.autoControlsCombine?r.controls.autoEl.append(r.controls.start):r.controls.autoEl.append(r.controls.start).append(r.controls.stop),r.settings.autoControlsSelector?e(r.settings.autoControlsSelector).html(r.controls.autoEl):r.controls.el.addClass("ndn_carousel-has-controls-auto").append(r.controls.autoEl),x(r.settings.autoStart?"stop":"start")},S=function(){r.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!=i&&e(this).append('<div class="ndn_carousel-caption"><span>'+i+"</span></div>")})},N=function(e){r.settings.auto&&a.stopAuto(),a.goToNextSlide(),e.preventDefault()},I=function(e){r.settings.auto&&a.stopAuto(),a.goToPrevSlide(),e.preventDefault()},w=function(e){a.startAuto(),e.preventDefault()},T=function(e){a.stopAuto(),e.preventDefault()},P=function(t){r.settings.auto&&a.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=r.active.index&&a.goToSlide(n),t.preventDefault()},M=function(t){return"short"==r.settings.pagerType?void r.pagerEl.html(t+1+r.settings.pagerShortSeparator+r.children.length):(r.pagerEl.find("a").removeClass("active"),void r.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},D=function(){if(r.settings.infiniteLoop){var e="";0==r.active.index?e=r.children.eq(0).position():r.active.index==m()-1&&r.carousel?e=r.children.eq((m()-1)*y()).position():r.active.index==r.children.length-1&&(e=r.children.eq(r.children.length-1).position()),"horizontal"==r.settings.mode?v(-e.left,"reset",0):"vertical"==r.settings.mode&&v(-e.top,"reset",0)}r.working=!1,r.settings.onSlideAfter(r.children.eq(r.active.index),r.oldIndex,r.active.index)},x=function(e){r.settings.autoControlsCombine?r.controls.autoEl.html(r.controls[e]):(r.controls.autoEl.find("a").removeClass("active"),r.controls.autoEl.find("a:not(.ndn_carousel-"+e+")").addClass("active"))},k=function(){1==m()?(r.controls.prev.addClass("disabled"),r.controls.next.addClass("disabled")):!r.settings.infiniteLoop&&r.settings.hideControlOnEnd&&(0==r.active.index?(r.controls.prev.addClass("disabled"),r.controls.next.removeClass("disabled")):r.active.index==m()-1?(r.controls.next.addClass("disabled"),r.controls.prev.removeClass("disabled")):(r.controls.prev.removeClass("disabled"),r.controls.next.removeClass("disabled")))},L=function(){if(r.settings.autoDelay>0){setTimeout(a.startAuto,r.settings.autoDelay)}else a.startAuto();r.settings.autoHover&&a.hover(function(){r.interval&&(a.stopAuto(!0),r.autoPaused=!0)},function(){r.autoPaused&&(a.startAuto(!0),r.autoPaused=null)})},R=function(){var t=0;if("next"==r.settings.autoDirection)a.append(r.children.clone().addClass("ndn_carousel-clone"));else{a.prepend(r.children.clone().addClass("ndn_carousel-clone"));var i=r.children.first().position();t="horizontal"==r.settings.mode?-i.left:-i.top}v(t,"reset",0),r.settings.pager=!1,r.settings.controls=!1,r.settings.autoControls=!1,r.settings.tickerHover&&!r.usingCSS&&r.viewport.hover(function(){a.stop()},function(){var t=0;r.children.each(function(i){t+="horizontal"==r.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=r.settings.speed/t,n="horizontal"==r.settings.mode?"left":"top",o=i*(t-Math.abs(parseInt(a.css(n))));O(o)}),O()},O=function(e){speed=e?e:r.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==r.settings.autoDirection?t=a.find(".ndn_carousel-clone").first().position():i=r.children.first().position();var n="horizontal"==r.settings.mode?-t.left:-t.top,o="horizontal"==r.settings.mode?-i.left:-i.top,s={resetValue:o};v(n,"ticker",speed,s)},V=function(){r.touch={start:{x:0,y:0},end:{x:0,y:0}},r.viewport.bind("touchstart",G)},G=function(e){if(r.working)e.preventDefault();else{r.touch.originalPos=a.position();var t=e.originalEvent;r.touch.start.x=t.changedTouches[0].pageX,r.touch.start.y=t.changedTouches[0].pageY,r.viewport.bind("touchmove",B),r.viewport.bind("touchend",H)}},B=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-r.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-r.touch.start.y);if(3*i>n&&r.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&r.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=r.settings.mode&&r.settings.oneToOneTouch){var o=0;if("horizontal"==r.settings.mode){var a=t.changedTouches[0].pageX-r.touch.start.x;o=r.touch.originalPos.left+a}else{var a=t.changedTouches[0].pageY-r.touch.start.y;o=r.touch.originalPos.top+a}v(o,"reset",0)}},H=function(e){r.viewport.unbind("touchmove",B);var t=e.originalEvent,i=0;if(r.touch.end.x=t.changedTouches[0].pageX,r.touch.end.y=t.changedTouches[0].pageY,"fade"==r.settings.mode){var n=Math.abs(r.touch.start.x-r.touch.end.x);n>=r.settings.swipeThreshold&&(r.touch.start.x>r.touch.end.x?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto())}else{var n=0;"horizontal"==r.settings.mode?(n=r.touch.end.x-r.touch.start.x,i=r.touch.originalPos.left):(n=r.touch.end.y-r.touch.start.y,i=r.touch.originalPos.top),!r.settings.infiniteLoop&&(0==r.active.index&&n>0||r.active.last&&0>n)?v(i,"reset",200):Math.abs(n)>=r.settings.swipeThreshold?(0>n?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto()):v(i,"reset",200)}r.viewport.unbind("touchend",H)},U=function(t){var i=e(window).width(),n=e(window).height();(s!=i||l!=n)&&(s=i,l=n,a.redrawSlider())};return a.goToSlide=function(t,i){if(!r.working&&r.active.index!=t)if(r.working=!0,r.oldIndex=r.active.index,0>t?r.active.index=m()-1:t>=m()?r.active.index=0:r.active.index=t,r.settings.onSlideBefore(r.children.eq(r.active.index),r.oldIndex,r.active.index),"next"==i?r.settings.onSlideNext(r.children.eq(r.active.index),r.oldIndex,r.active.index):"prev"==i&&r.settings.onSlidePrev(r.children.eq(r.active.index),r.oldIndex,r.active.index),r.active.last=r.active.index>=m()-1,r.settings.pager&&M(r.active.index),r.settings.controls&&k(),"fade"==r.settings.mode)r.settings.adaptiveHeight&&r.viewport.height()!=p()&&r.viewport.animate({height:p()},r.settings.adaptiveHeightSpeed),r.children.filter(":visible").fadeOut(r.settings.speed).css({zIndex:0}),r.children.eq(r.active.index).css("zIndex",51).fadeIn(r.settings.speed,function(){e(this).css("zIndex",50),D()});else{r.settings.adaptiveHeight&&r.viewport.height()!=p()&&r.viewport.animate({height:p()},r.settings.adaptiveHeightSpeed);var n=0,o={left:0,top:0};if(!r.settings.infiniteLoop&&r.carousel&&r.active.last)if("horizontal"==r.settings.mode){var s=r.children.eq(r.children.length-1);o=s.position(),n=r.viewport.width()-s.width()}else{var l=r.children.length-r.settings.minSlides;o=r.children.eq(l).position()}else if(r.carousel&&r.active.last&&"prev"==i){var d=1==r.settings.moveSlides?r.settings.maxSlides-y():(m()-1)*y()-(r.children.length-r.settings.maxSlides),s=a.children(".ndn_carousel-clone").eq(d);o=s.position()}else if("next"==i&&0==r.active.index)o=a.find("> .ndn_carousel-clone").eq(r.settings.maxSlides).position(),r.active.last=!1;else if(t>=0){var c=t*y();o=r.children.eq(c).position()}if("undefined"!=typeof o){var u="horizontal"==r.settings.mode?-(o.left-n):-o.top;v(u,"slide",r.settings.speed)}}},a.goToNextSlide=function(){if(r.settings.infiniteLoop||!r.active.last){var e=parseInt(r.active.index)+1;a.goToSlide(e,"next")}},a.goToPrevSlide=function(){if(r.settings.infiniteLoop||0!=r.active.index){var e=parseInt(r.active.index)-1;a.goToSlide(e,"prev")}},a.startAuto=function(e){r.interval||(r.interval=setInterval(function(){"next"==r.settings.autoDirection?a.goToNextSlide():a.goToPrevSlide()},r.settings.pause),r.settings.autoControls&&1!=e&&x("stop"))},a.stopAuto=function(e){r.interval&&(clearInterval(r.interval),r.interval=null,r.settings.autoControls&&1!=e&&x("start"))},a.getCurrentSlide=function(){return r.active.index},a.getSlideCount=function(){return r.children.length},a.redrawSlider=function(){r.children.add(a.find(".ndn_carousel-clone")).width(g()),r.viewport.css("height",p()),r.settings.ticker||A(),r.active.last&&(r.active.index=m()-1),r.active.index>=m()&&(r.active.last=!0),r.settings.pager&&!r.settings.pagerCustom&&(_(),M(r.active.index))},a.destroySlider=function(){r.initialized&&(r.initialized=!1,e(".ndn_carousel-clone",this).remove(),r.children.removeAttr("style"),this.removeAttr("style").unwrap().unwrap(),r.controls.el&&r.controls.el.remove(),r.controls.next&&r.controls.next.remove(),r.controls.prev&&r.controls.prev.remove(),r.pagerEl&&r.pagerEl.remove(),e(".ndn_carousel-caption",this).remove(),r.controls.autoEl&&r.controls.autoEl.remove(),clearInterval(r.interval),e(window).unbind("resize",U))},a.reloadSlider=function(e){void 0!=e&&(o=e),a.destroySlider(),d()},d(),this}}),Ndn_Require.define("models/Ndn/Carousel",["underscore","jquery","backbone","jquery_bxslider"],function(e,t,i){var n=i.Model.extend({defaults:{containerElement:null,itemsPerSlide:null,slideWidth:null,slideMargin:null,parameters:null,currentSlideIndex:null,carousel:null},initialize:function(e){var t=e.containerElement,i=this.getItemsPerSlideFromParameters(e);this.set({containerElement:t,itemsPerSlide:i,parameters:e});var n=this;this.on({carouselLoad:function(){n.set("currentSlideIndex",0),n.loadPlaceholderImages(0)},slideLoad:function(e){n.set("currentSlideIndex",e.slideIndex),n.loadPlaceholderImages(e.slideIndex)}})},getCurrentSlideIndex:function(){return this.get("currentSlideIndex")},load:function(){return this.set("carousel",this.getContainerElement().bxSlider(this.getConfig(this.get("parameters")))),this},reload:function(e){"undefined"==typeof e&&(e=!0);var t=this.get("carousel"),i=t.getCurrentSlide();t.reloadSlider(),e&&t.goToSlide(i)},getItemsPerSlideFromParameters:function(e){return e.itemsPerSlide||e.maxItemsPerSlide||1},getConfig:function(t){var i=this,n=this.getItemsPerSlideFromParameters(t),o=t.containerElement,r={pager:!1,controls:!1,slideWidth:t.slideWidth||o.width(),slideHeight:t.slideHeight||o.height(),slideMargin:t.slideMargin,minSlides:t.minItemsPerSlide||n,maxSlides:t.maxItemsPerSlide||n,onSliderLoad:function(){i.trigger("carouselLoad")},onSlideBefore:function(e,t,n){i.loadPlaceholderImages(n),i.trigger("slideLoad",{slideElement:e,previousSlideIndex:t,slideIndex:n})}};return t.isSimple&&(delete r.slideWidth,delete r.slideHeight,delete r.minSlides,delete r.maxSlides),t.auto&&(r=e.extend(r,{pause:7e3,auto:!0,autoHover:!0})),r},goToSlide:function(e){this.get("carousel").goToSlide(e)},getItemsPerSlide:function(){return this.get("itemsPerSlide")},visitPreviousSlide:function(){var e=this.get("parameters").auto,t=this.get("carousel");e&&t.stopAuto(),t.goToPrevSlide(),e&&t.startAuto()},visitNextSlide:function(){var e=this.get("parameters").auto,t=this.get("carousel");e&&t.stopAuto(),t.goToNextSlide(),e&&t.startAuto()},getContainerElement:function(){return this.get("containerElement")},loadPlaceholderImages:function(e){n.loadSlidePlaceholderImages(this.getContainerElement(),e,this.get("itemsPerSlide")),this.centerImages()},processSlide:function(e,t){this.getContainerElement().find('> li:not(".ndn_carousel-clone"):eq('+e+"), > li.ndn_carousel-clone").each(t)},processCurrentSlide:function(e){this.processSlide(this.getCurrentSlideIndex(),e)},centerImages:function(){this.getContainerElement().find(".ndn_centerImage").each(function(){var e=t(this),i=e.width()-e.closest("li").width(),n=(0-Math.max(i,0))/2;e.css("margin-left",n+"px")})}},{loadSlidePlaceholderImages:function(e,i,n){function o(e){e.each(function(){var e=["src","alt","title","class"];t(this).find(".ndn_imagePlaceholder").each(function(){var i=t(this),n="<img ";t.each(e,function(){var e=this+"";i.attr("data-"+e)&&(n+=e+'="'+i.attr("data-"+e)+'" ')}),n+="/>",t(this).replaceWith(n)})})}var r=i*n,a=r+n-1,s='> li:not(".ndn_carousel-clone")',l=e.find(s).filter(":eq("+r+"), :gt("+r+"):lt("+a+")");o(l),o(e.find("> li.ndn_carousel-clone"))}});return n}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/overlay.html",[],function(){return'<div class="ndn_pauseOverlay ndn_overlayContainer"> \n    <div class="ndn_pauseOverlay_centerContainer">\n        <div class="ndn_startPlay ndn_fastClick_clickevent"></div>\n    </div>\n    <div class="ndn_pauseCarousel"></div>\n</div>'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/carousel.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_sliderPrev ndn_sliderNavButton ndn_icon_left-circled"></div>\n	<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems ndn_pauseOverlay_selectableVideos ndn_selectableVideos">\n        {{#videos}}\n            <li class="ndn_pauseOverlay_selectableVideo ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-video-id="{{videoId}}" title="{{videoTitle}}"> \n            	<div class="ndn_thumbnailContainer">\n                    <div class="ndn_imagePlaceholder" data-src="{{thumbnailUrl}}" data-alt="{{videoTitle}}" data-title="{{videoTitle}}"></div>\n            	</div>   	\n    			<div class="ndn_sliderThumbnailTitle">{{videoTitle}}</div>\n            </li>\n        {{/videos}}\n    </ul>\n	</div>\n	<div class="ndn_sliderNext ndn_sliderNavButton ndn_icon_right-circled"></div>\n</div>\n'}),Ndn_Require.define("jquery_imagesloaded",["jquery"],function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function o(){var t=e(p),i=e(h);l&&(h.length?l.reject(c,t,i):l.resolve(c)),e.isFunction(n)&&n.call(s,c,t,i)}function r(e){a(e.target,"error"===e.type)}function a(t,n){t.src===i||-1!==e.inArray(t,u)||(u.push(t),n?h.push(t):p.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),d&&l.notifyWith(e(t),[n,c,e(p),e(h)]),c.length===u.length&&(setTimeout(o),c.unbind(".imagesLoaded",r)))}var s=this,l=e.isFunction(e.Deferred)?e.Deferred():0,d=e.isFunction(l.notify),c=s.find("img").add(s.filter("img")),u=[],p=[],h=[];return e.isPlainObject(n)&&e.each(n,function(e,t){"callback"===e?n=t:l&&l[e](t)}),c.length?c.bind("load.imagesLoaded error.imagesLoaded",r).each(function(n,o){var r=o.src,s=e.data(o,"imagesLoaded");s&&s.src===r?a(o,s.isBroken):o.complete&&o.naturalWidth!==t?a(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=r)}):o(),l?l.promise(s):s}}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseView",["jquery","underscore","backbone","mustache","models/Ndn/Utils/FastClick","models/Ndn/Utils/UserAgent","models/Ndn/Carousel","text!templates/ndn/video-player/pause-overlay/overlay.html","text!templates/ndn/video-player/pause-overlay/carousel.html","jquery_imagesloaded","jquery_autoellipsis","jquery_bxslider"],function(e,t,i,n,o,r,a,s,l){return i.View.extend({events:{"click .ndn_pauseOverlay_selectableVideo":"onVideoSelect","click .ndn_pauseOverlay":"resumePlay","click .ndn_startPlay":"resumePlay","click .ndn_sliderNext":"visitNextSlide","click .ndn_sliderPrev":"visitPreviousSlide"
},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_pauseOverlayContainer ndn_playerOverlay").html(s),this.$el.appendTo(this.model.getPlayer().getContainerElement()).hide(),new o(this.$el.find(".ndn_fastClick_clickevent").get(0));var t=this;this.model.getPlayer().on("videoLoad",function(){t.updateCarousel()})},resumePlay:function(e){return this.$el.hide(),this.model.getPlayer().play(),!1},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.getPlayer().requestVideoStart({source:"pauseOverlayCarouselThumbnail",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1},updateCarousel:function(){var e=this.model.getCarouselData();if(e){var t=this.$el.is(":visible");t||this.model.show(),this.$el.find(".ndn_pauseCarousel").show().html(n.to_html(l,{videos:e}));var i=this.model.getPlayer().getContainerElement(),o=i.width(),r=function(){return o>=1022?5:o>=750?4:3}(),s=5==r?200:140,d=new a({containerElement:this.$el.find(".ndn_selectableVideos"),minItemsPerSlide:3,maxItemsPerSlide:r,slideMargin:5,slideWidth:s}).load();this.$el.find(".ndn_sliderThumbnailTitle").ellipsis(),this.model.set("carousel",d),t||this.model.hide()}else this.$el.find(".ndn_pauseCarousel").hide()},visitNextSlide:function(e){return this.model.get("carousel").visitNextSlide(),!1},visitPreviousSlide:function(e){return this.model.get("carousel").visitPreviousSlide(),!1}})}),Ndn_Require.define("jquery_resize",["jquery"],function(e){!function(e,t,i){"$:nomunge";function n(){o=t[s](function(){r.each(function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,d);(i!==o.w||n!==o.h)&&t.trigger(l,[o.w=i,o.h=n])}),n()},a[c])}var o,r=e([]),a=e.resize=e.extend(e.resize,{}),s="setTimeout",l="resize",d=l+"-special-event",c="delay",u="throttleWindow";a[c]=250,a[u]=!0,e.event.special[l]={setup:function(){if(!a[u]&&this[s])return!1;var t=e(this);r=r.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===r.length&&n()},teardown:function(){if(!a[u]&&this[s])return!1;var t=e(this);r=r.not(t),t.removeData(d),r.length||clearTimeout(o)},add:function(t){function n(t,n,r){var a=e(this),s=e.data(this,d);s.w=n!==i?n:a.width(),s.h=r!==i?r:a.height(),o.apply(this,arguments)}if(!a[u]&&this[s])return!1;var o;return e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n))}}}(e,this)}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseModel",["jquery","underscore","backbone","models/Ndn/Widget","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseView","jquery_resize"],function(e,t,i,n,o,r){return o.extend({defaults:{view:null,carousel:null},initialize:function(e){o.prototype.initialize.apply(this,arguments),this.set("view",new r({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({"adPause videoPause":function(){t.show()},"adStart adResume videoStart videoResume":function(){t.hide()}})},getCarouselData:function(){return this.getPlayer().getSessionParams().pauseCarousel}})}),Ndn_Require.define("text!templates/ndn/video-player/share-overlay.html",[],function(){return'<div class="ndn_shareContainer">\n    <div class="ndn_closeShare ndn_icon_cancel"></div>\n    <div class="ndn_shareBox">\n        <!--\n        <div class="ndn_shareButtons">\n            <div class="ndn_shareButtonList">\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_mainShareButtons ndn_shareFacebook"><a class="ndn_a_shareFacebook ndn_icon_facebook" target="_blank" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareTwitter"><a class="ndn_a_shareTwitter ndn_icon_twitter" target="_blank" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmail"><a class="ndn_icon_mail-alt" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmbed"><span class="ndn_icon_code"></span></li>\n                </ul>\n            </div>\n        </div>\n        -->\n        <div class="ndn_shareIcons">\n            <a class="ndn_shareIcon ndn_shareFacebook ndn_icon_facebook"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareTwitter ndn_icon_twitter"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareEmail ndn_icon_mail-alt"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareEmbed ndn_icon_code"></a>\n        </div>\n        <textarea readonly="" class="ndn_shareCopyVideoLinkText ndn_textarea">{{directLink}}</textarea>\n    </div>\n    <div class="ndn_embedBox">\n        <div class="ndn_backToShare ndn_icon_left-big">BACK</div>\n        <div class="ndn_embedLink">\n            <span class="ndn_shareCopyEmbedCode ndn_linkEmbed">\n                <label for="ndn_shareCopyEmbedCodeText">Embed</label>\n            </span>\n            <textarea readonly="" class="ndn_shareCopyEmbedCodeText ndn_textarea">{{embedCode}}</textarea>\n        </div>\n    </div>\n    <div class="ndn_sharePrivacyPolicy">\n        <a href="http://inform.com/privacy" target="_blank">Privacy Policy</a> &nbsp; | &nbsp; <a href="http://inform.com/player-terms" target="_blank">Terms of Use</a>\n    </div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareView",["jquery","backbone","mustache","text!templates/ndn/video-player/share-overlay.html"],function(e,t,i,n){return t.View.extend({events:{"click .ndn_closeShare":"resumePlayback","click .ndn_shareEmbed":"showEmbedLink","click .ndn_backToShare":"showEmbedLink","click .ndn_shareEmail":"shareViaEmail","click .ndn_shareFacebook":"shareViaFacebook","click .ndn_shareTwitter":"shareViaTwitter","mouseenter .ndn_shareCopyVideoLinkText":"selectDirectLink","mouseenter .ndn_shareCopyEmbedCodeText":"selectEmbedCode"},initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_shareOverlay ndn_playerOverlay")},resumePlayback:function(){return this.model.getPlayer().play(),!1},updateHtml:function(){var e=this.$el;e.html(i.to_html(n,{embedCode:this.model.getEmbedCode(),directLink:this.model.getDirectLink()})),e.find(".ndn_icon_mail-alt").toggle(this.model.allowsEmailSharing()),e.find(".ndn_icon_code").toggle(this.model.allowsEmbedSharing()),e.find(".ndn_shareEmbed,.ndn_shareFacebook,.ndn_shareEmail,.ndn_shareTwitter").toggle(this.model.allowsSocialSharing())},selectDirectLink:function(){return this.$el.find(".ndn_shareCopyVideoLinkText").select(),!1},selectEmbedCode:function(){return this.$el.find(".ndn_shareCopyEmbedCodeText").select(),!1},showEmbedLink:function(){return this.$el.find(".ndn_shareBox,.ndn_embedBox").fadeToggle("fast","linear"),!1},shareViaEmail:function(){return this.model.share("email"),!1},shareViaFacebook:function(){return this.model.share("facebook"),!1},shareViaTwitter:function(){return this.model.share("twitter"),!1}})}),Ndn_Require.define("models/Ndn/Widget/PlayerOptions",["jquery","backbone","models/Ndn/Utils/BrowserStorage","models/Ndn/Utils/UserAgent"],function(e,t,i,n){var o=[],r=t.Model.extend({defaults:{product:null,container:null},initialize:function(t){this.set({product:t}),this.initializeDom(),this.synchronizeInterface(),this.initializeEventListeners(),r.registerComponent(this),t.on("widgetEmbedEnd",e.proxy(function(){this.get("container").insertAfter(t.getContainerElement())},this))},initializeDom:function(){var t=this.get("product").getContainerElement(),i=e('<div class="ndn_playerOptions"><b>Autoplay:</b> <a href="#" data-autoplay="on">On</a> | <a href="#" data-autoplay="off">Off</a></div>').css("width",t.width());this.set("container",i)},initializeEventListeners:function(){this.get("container").on("click","a",function(t){return e(this).hasClass("ndn_selected")||r.setProductBehaviorToggleValue("on"==e(this).data("autoplay")),r.synchronizeAllInterfaces(),t.preventDefault(),!1})},hide:function(){this.get("container").attr("style","display:none !important")},synchronizeInterface:function(){var t=this.get("container"),i=r.getProductBehaviorToggleValue();t.find("a").each(function(){e(this).toggleClass("ndn_selected","on"==e(this).data("autoplay")&&i||"on"!=e(this).data("autoplay")&&!i)})}},{registerComponent:function(e){o.push(e)},synchronizeAllInterfaces:function(){e.each(o,function(){this.synchronizeInterface()})},getProductBehaviorToggleValue:function(){return"false"!=i.get("playOnInViewForSinglePlayers")},setProductBehaviorToggleValue:function(e){i.set("playOnInViewForSinglePlayers",e?"true":"false")}});return r}),Ndn_Require.define("models/Ndn/Legacy/Config/Ap",["jquery","models/Ndn/Utils/Helpers"],function(e,t){var i={1153168:"90703",1296344:"90416",10003188:"90693",TXABI:"90459",PAALM:"90364",GASTA:"90683",TXAMA:"90582",ARLID:"90554",GAATH:"90604",GAAUG:"90612",TXAUS:"90105",MTBOZ:"90721",PABUT:"90433",FLCAP:"90364",TXCOR:"90550",VACUL:"90527",IAWEB:"90364",MIESC:"90364",VADAR:"90528",ALDOT:"90510",PAERI:"90464",IAEST:"90364",FLJAJ:"90049",NCHIC:"90518",TXHOU:"90000",NCCON:"90517",JRC:"90734",WIKEN:"90233",WABRE:"90552",MOCAG:"90589",NDMIN:"90364",FLNAP:"90542",INBNB:"90605",ALOPE:"90514",MNROC:"90379",VARIT:"90535",FLSAR:"90492",INSBT:"90575",MNPAU:"90156",TXSAN:"90551",CAPAS:"90494",TNMEM:"90547",MSCCD:"90135",OHFIN:"90421",OHCAM:"90249",MIHOU:"90364",MIIRO:"90364",VACHA:"90526",NCFAY:"90364",wvwhe:"90364",TNKNN:"90542",OHMAR:"90364",HIMAN:"90364",NCMAR:"90519",MIMAR:"90364",VALYD:"90532",VAWAY:"90538",SCCHA:"90349",NYJAP:"90364",OHEAS:"90249",OHSAL:"90364",ILSPR:"90108",GAGAI:"90079",WVWEI:"90364",PAWIL:"90087",NYALT:"90001",WAKR:"90412",TXWIC:"90553",NCWIN:"90522",WRKO:"90629",WSPATV:"90507",WTKKFM:"90456",PAYOK:"90732",FLMIH:"90045",WABEL:"90472",SCCOL:"90474",CAFRE:"90476",CAMOD:"90479",CASAB:"90482",WATAC:"90483",FLBRA:"90484",ILROR:"90108",MAQUI:"90108",CTNOR:"90108",MABRO:"90108",WSAW:"90447",FLTAM:"90426",NVLAS:"90277",INSID:"90531",WNCNTV:"90777",WCMHTV:"90061",OREUG:"90878",SCFLO:"90784",WJARTV:"90053",WIMIL:"90078",RIJRJ:"90446",WRGBTV:"90028",WWMTTV:"90029",ILALT:"90033",WPECTV:"90039",KTVLTV:"90042",OHLIM:"90043",AAAA:"0000",WASECA:"90667",PAYOR:"90681",GACOV:"90691",GAHIN:"90686",CASCN:"90152",CAMAN:"90690",WIEAU:"90694",MSMCC:"90695",FLNAV:"90696",LAMOR:"90697",LAFRA:"90698",SCAIK:"90699",ARFOR:"90700",MIGHT:"90702"};return{getTrackingGroupFromApPartnerId:function(e){return i[e]||"90121"},translate:function(i,n){return e.Deferred(e.proxy(function(o){var r=n;return i.f&&(r.trackingGroup=this.getTrackingGroupFromApPartnerId((i.f+"").toUpperCase()),"0"==r.widgetId&&(r.widgetId="3989")),!r.videoId&&i.g?e.ajax({type:"GET",url:t.getHttpProtocol()+"//dmeserve.newsinc.com/apids/lookup.jsonp?apvid="+i.g,dataType:"jsonp"}).then(function(e){r.videoId=e,o.resolve(r)}):void o.resolve(r)},this)).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config/TritonLoyaltyProgram",["jquery"],function(e){return{translate:function(t,i){return e.Deferred(function(e){t.memberid=t.memberid||t.membedid||"",""!=t.memberid&&"none"!=t.memberid&&(i.loyaltyProgramId="ndntritonservice",i.loyaltyProgramData={memberId:t.memberid,siteId:t.siteid}),e.resolve(i)}).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config",["underscore","jquery","models/Ndn/Utils/UrlParser","models/Ndn/Legacy/Config/Ap","models/Ndn/Legacy/Config/TritonLoyaltyProgram"],function(e,t,i,n,o){return{translate:function(r,a){return t.Deferred(function(s){var l=i.parseHref(r),d=l.queryParams;for(var c in d)d.hasOwnProperty(c)&&c!=c.toLowerCase()&&(d[c.toLowerCase()]=d[c],delete d.paramKey);var u=l.url.match(/^http:[\/]{2}embed\.newsinc\.com/)?l.path.toLowerCase():"",p={widgetId:d.wid,siteSection:d.sitesection||"",videoId:d.vid||d.vcid||d.spid||"",trackingGroup:d.freewheel||"",playlistId:d.cid||"",hideWhenUnavailable:"true"==d.pp_hideExpired};t.each(p,function(e){""==this&&delete p[e]});var h={"/single/embed.js":"VideoPlayer/Single","/inform/article/matching/video/embed.js":"VideoPlayer/Single","/horizontaltitle550/embed.js":"VideoLauncher/Horizontal","/inline/embed.js":"VideoLauncher/Slider","/inlinesound/embed.js":"VideoLauncher/Slider","/inline590/embed.js":"VideoPlayer/Inline590","/inlinesound590/embed.js":"VideoPlayer/Inline590","/toppicks/embed.js":"VideoLauncher/Slider"};if("undefined"!=typeof a)p.type=a;else if("undefined"!=typeof h[u])p.type=h[u];else{var g={slider:"VideoLauncher/Slider",plist:"VideoLauncher/Slider",vertical:"VideoLauncher/VerticalTower",horizontal:"VideoLauncher/Horizontal",horizontal400:"VideoLauncher/Horizontal",horizontal500:"VideoLauncher/Horizontal"},f=d.type||d.thumbid;"undefined"!=typeof g[f]?p.type=g[f]:e.contains(["/thumbnail/embed.js","/thumbnail/iframe.html"],u)&&(p.type="VideoLauncher/Slider")}e.contains(["/inlinesound/embed.js","/inlinesound590/embed.js","/thumbnailsound/embed.js"],u)&&(p.rmmSoundOn=!0),(d.width||d.w)&&(p.width=d.width||d.w),(d.height||d.h)&&(p.height=d.height||d.h);var m={"/horizontaltitle550/embed.js":550};"undefined"!=typeof m[u]?p.width=m[u]:"horizontal400"==d.type?p.width=425:e.contains(["horizontal","horizontal500"],d.type)&&(p.width=550);for(var y=["playlistId","widgetId","videoId","trackingGroup"],A=0;A<y.length;A++){var v=y[A];"0"==p[v]&&delete p[v]}("/single/iframe.html"!=u&&!p.type||"VideoPlayer/Single"==p.type)&&(p.width||(p.width=600),p.height||(p.height=360)),n.translate(d,p).then(function(e){return o.translate(d,e)}).fail(s.reject).done(s.resolve)}).promise()}}}),Ndn_Require.define("models/Ndn/Enum/PltValue",[],function(){return{PROMO_PLAYER:27}}),Ndn_Require.define("models/Ndn/Widget/Config",["jquery","underscore","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Utils/UrlParser","models/Ndn/Widget/PlayerOptions","models/Ndn/Legacy/Config","models/Ndn/Enum/PltValue","models/Ndn/Debug"],function(e,t,i,n,o,r,a,s,l){var d=l.inMode("config"),c=["configId","distributorId","widgetId","type","trackingGroup","playlistId","videoId","placementId","placementPageId","providerId","providerStoryId","siteSection","acceptsConfigFromUrl","acceptsConfigFromUrlPrefix","loyaltyProgramId","loyaltyProgramData","legacyEmbedUrl","autoPlay","playOnMouseover","playOnInView","hideWhenUnavailable","continuousPlay","rmmSoundOn","adsEnabled","float","width","height","aspectRatio","pb"],u="10",p="0",h="7",g={"VideoPlayer/Single":{typeId:5},"VideoPlayer/16x9":{typeId:2},"VideoPlayer/Inline590":{typeId:11,typeIdForAutoPlay:14},"VideoPlayer/Inline":{typeId:11,typeIdForAutoPlay:14},"VideoLauncher/Slider":{typeId:21},"VideoLauncher/Horizontal":{typeId:19},"VideoLauncher/VerticalTower":{typeId:20},InView:{typeId:25},Promo:{typeId:s.PROMO_PLAYER},"VideoPlayer/Studio":{typeId:33}},f={"videolauncher/slider300x250":"VideoLauncher/Slider","videoplayer/single":"VideoPlayer/Single","videoplayer/inline590":"VideoPlayer/Inline","videoplayer/default":"VideoPlayer/Single","videoplayer/inline300":"VideoLauncher/Slider"},m=function(){var e={};return t.each(g,function(t,i){e[i.toLowerCase()]=i}),e}(),y=function(e){return e.toLowerCase&&f[e.toLowerCase()]&&(e=f[e.toLowerCase()]),e};return{getProductTypeData:function(){return g},cleanConfig:function(i){var n=t.extend({},i);e.each(n,function(t,i){"string"==typeof n[t]&&(n[t]=e.trim(n[t]))});var o=["autoPlay","playOnMouseover","rmmSoundOn","adsEnabled","acceptsConfigFromUrl","playOnInView","hideWhenUnavailable"];e.each(o,function(e,i){if("string"==typeof n[i]){var o=n[i];o=""==o?!0:t.contains(["true","1"],o.toLowerCase())?!0:!1,n[i]=o}else"undefined"!=typeof n[i]&&(n[i]=!!n[i])});var r=["continuousPlay","pb"];e.each(r,function(e,t){"undefined"!=typeof n[t]&&(n[t]=parseInt(n[t]))}),e.each(n,function(e){t.contains(c,e)||delete n[e]}),n.type&&(n.type=y(n.type),n.type=m[(n.type||"").toLowerCase()],n.type&&"undefined"==typeof m[n.type.toLowerCase()]&&delete n.type);var a;return n.height&&(a=n.height.match(/^(\d*)\/(\d*)w$/))&&(n.aspectRatio=a[2]+":"+a[1]),n.placementId&&(n.distributorId=n.trackingGroup),"VideoPlayer/Single"==n.type||n.distributorId||delete n.pb,this.usesAspectRatio(n.type)||delete n.aspectRatio,n["float"]&&(n["float"]=this.processFloatConfigSetting(n["float"]),n["float"]||delete n["float"]),n.configId&&(n.widgetId=n.configId),n.widgetId&&(n.configId=n.widgetId),n},processFloatConfigSetting:function(i){if(i=(i+"").toLowerCase(),t.contains(["default","off"],i))return i;var n=[],o=i.split(" "),r=["top","middle","bottom","left","center","right"];return e.each(o,function(e,i){t.contains(r,i)&&n.push(i)}),n.join(" ")},getSiteSectionSegments:function(e){var t=(e||"").split("_");return{site:t[1]||"",section:t[1]||"",subSection:t[2]||"",pageType:t[3]||""}},getPltValue:function(e,t){var i=g[e.type],n=t.settings.behavior,o=t.settings.deliverySettings;if(n["float"].enabled&&"VideoPlayer/Single"==e.type)return 24;if("InView"==e.type&&2==o.inview_version)return 26;var r=n.rmm;return r.enabled&&r.rotatingEnabled?22:e.autoPlay&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:0!=e.rmmSoundOn&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:i.typeId},applyConfigDefaults:function(e,i){var n=t.extend({},e);return delete n.adsEnabled,n=t.extend({},i,n),n.playOnMouseover&&"VideoPlayer/Single"!=n.type&&(n.playOnMouseover=!1),"InView"==n.type&&(n.widgetId="5"),n},getConfigFromElement:function(t,i){d&&console.log("getConfigFromElement(",t,");");var n={},o=new RegExp(this.hasUpdatedEmbedCode(t,i)?"^data-(.*)$":"^data-config-(.*)$");return e.each(t[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(o)){var r=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});n[r]=t.value}}),d&&console.log("result ==",n),n},getDefaultUrlVarPrefixForConfigSettings:function(){return"ndn."},isOnForcedMigrationRedirectedLandingPage:function(e){return!o.getUrlVar("legacyEmbedUrl")&&o.getUrlVar("freewheel")&&!o.getUrlVar(e+"trackingGroup")},getConfigFromLandingPageUrl:function(t){var n=i.getAppUrlInfo(t)?"":this.getDefaultUrlVarPrefixForConfigSettings(),r=o.parseHref(t).queryParams,a={};return e.each(r,function(e,t){e.substr(0,n.length)==n&&(a[e.substr(n.length)]=t)}),a},processConfigFromElement:function(i,n,r){d&&console.log("processConfigFromElement(",i,", ",n,", ",r,");");var s=e.extend({},this.getConfigFromElement(i,r),n||{});if("InView"==s.type&&(s.widgetId="5"),s=this.cleanConfig(s),s.acceptsConfigFromUrl){var l=s.hasOwnProperty("acceptsConfigFromUrlPrefix")?s.acceptsConfigFromUrlPrefix:this.getDefaultUrlVarPrefixForConfigSettings();this.isOnForcedMigrationRedirectedLandingPage(l)?s.legacyEmbedUrl||(s.legacyEmbedUrl=window.location.href+""):s=this.cleanConfig(t.extend({},o.getUrlVarsWithPrefix(l),s))}return e.Deferred(function(e){s.legacyEmbedUrl?a.translate(s.legacyEmbedUrl,s.type).done(function(i){s=t.extend(i,s),e.resolve(s)}):e.resolve(s)}).promise().always(function(e){"undefined"==typeof e.type&&(e.type=""),e.type=(e.type+"").replace(" ",""),""==e.type&&(e.type="VideoPlayer/Single")})},processAspectRatio:function(e,t,i){(this.usesAspectRatio(t.type)&&!t.aspectRatio&&this.hasUpdatedEmbedCode(e,i)||"VideoPlayer/Studio"==t.type)&&(t.width&&t.height||(t.aspectRatio="16:9",t.width||(t.width="100%")))},usesAspectRatio:function(e){return t.contains(["VideoPlayer/Single","VideoPlayer/Studio","InView","Promo"],e)},getEmbedCode:function(t,i,n){"undefined"==typeof i&&(i=!1);var o='<div class="'+(i?"ndn_embed":"inform-embed")+'"',r=i?"data-":"data-config-";return n&&(o+=' id="'+n+'"'),e.each(t,function(e,t){var i=r+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});o+=" "+i+'="'+t+'"'}),o+="></div>"},process:function(e){return d&&console.log("process(",e,");"),e.config=t.extend({},e.providedConfig),this.applyPbDefault(e),this.processPlayerBehaviorSetting(e),e.config=this.applyConfigDefaults(e.config,e.defaultConfig),this.applyBrowserSettings(e),this.syncPbSetting(e),e},applyBrowserSettings:function(e){var t=e.config,i=e.settings.browser;i.isAbleToPlayVideoAutomatically||(t.autoPlay=!1,t.playOnInView=!1),i.hasCursor||(t.playOnMouseover=!1)},applyPbDefault:function(e){var t=e.config,i=e.providedConfig,n=e.settings.deliverySettings;"undefined"==typeof i.pb&&n.playOnInViewToggle&&(t.pb=h),t.pb==u&&(t.pb=n.pb_default)},syncPbSetting:function(e){var i=e.config;"undefined"!=typeof i.pb&&delete i.pb,t.contains(["VideoPlayer/Single","VideoPlayer/Studio","InView"],i.type)&&this.processPlayerBehaviorSetting(e)},applyToggleToPbConfigSetting:function(e){var t=e.config,i=e.settings.behavior.toggle;return t.pb&&i.enabled&&!i.toggleValue&&(t.pb=p,this.processPlayerBehaviorSetting(e)),e},syncFloatWithBehaviorSettings:function(e){var t=e.settings.behavior["float"];e.providedConfig["float"]&&(e.config["float"]=t.enabled?t.initialPosition:"off")},processPlayerBehaviorSetting:function(i){var n=i.config;if("InView"==n.type)return n.pb="7",n;var o={0:{autoPlay:!1,playOnMouseover:!1,playOnInView:!1},1:{autoPlay:!0,playOnMouseover:!1,playOnInView:!1},3:{autoPlay:!1,playOnMouseover:!0,playOnInView:!1},7:{autoPlay:!1,playOnMouseover:!1,playOnInView:!0}},r=n.pb;return r==u?n:("undefined"!=typeof o[r]?(t.extend(n,o[r]),n.pb=r):e.each(o,function(t,i){var o=!0;return e.each(i,function(e,t){n[e]!==t&&(o=!1)}),o?(n.pb=t,!1):void 0}),n)},hasUpdatedEmbedCode:function(i,n){if(n&&t.contains(n,"legacyjsapi"))return!1;var o=!0;return e.each(i[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(/^data-config-(.*)$/)){var n=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});"id"!=n&&(o=!1)}}),o},retrofitEmbedCode:function(t,i){e.each(t,function(e,t){var n="data-config-"+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});i.attr(n,t)})},getPlaylistItemsLimit:function(e){return t.contains(["VideoLauncher/Slider"],e)?3:t.contains(["VideoLauncher/Horizontal","VideoLauncher/VerticalTower"],e)?15:40}}}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareModel",["underscore","jquery","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareView","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i,n,o,r){return i.extend({defaults:{view:null,videoData:null},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.set("view",new n({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({videoLoad:function(e){t.set("videoData",e.videoData),t.get("view").updateHtml()},"adStart adResume videoStart videoResume":function(){t.hide()}})},getVideoData:function(){return this.get("videoData")},getEmbedCode:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.embedCode},getDirectLink:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.directLink},allowsEmailSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.mode.email},allowsSocialSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.mode.social},allowsEmbedSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share,i=this.getPlayer().getSessionParams().videoData;return t&&i&&i.settings.share.embedCode.enabled},share:function(t){var i=this.getPlayer().getSessionParams(),n=i.videoData,o=i.share,r=encodeURIComponent(o["facebook"==t?"socialUrl":"secureSocialUrl"]);if(e.contains(["facebook","twitter"],t)){var a="http://api.addthis.com/oexchange/0.8/forward/"+t+"/offer?url="+r+"&pubid=ra-518bbde23f7ed2a9&ct=1";"facebook"==t&&(a+="&title="+n.videoTitle),window.open(a,"","")}else if("email"==t){var s=n.videoTitle;window.location.href="mailto:?subject="+s+"&body=Check out this video:%0A%0A"+s+"%0A"+r}return this}})}),Ndn_Require.define("text!templates/ndn/video-player/start-overlay.html",[],function(){return'<div class="ndn_startOverlayContainer ndn_playerOverlay">\n	<div class="ndn_startOverlay">\n		<div class="ndn_startPlay ndn_fastClick_clickevent"></div>\n	</div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/StartView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/start-overlay.html"],function(e,t,i,n,o){return i.View.extend({events:{mouseover:"onMouseover","click .ndn_startOverlay":"onOverlayClick","touchend .ndn_startOverlay":"onOverlayClick"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(t.to_html(o,{})),new n(this.$el.find(".ndn_fastClick_clickevent").get(0));var r=this;e(window).on("resize scroll",function(){r.syncScrollToPlay()})},syncScrollToPlay:function(){var e=this.model.getPlayer();e.isScrollToPlay()&&this.$el.is(":visible")&&this.isInViewVertically()&&e.requestVideoStart({source:"playOnInView"})},isInViewVertically:function(){var t=this.$el.offset().top,i=t+this.$el.height(),n=i-t,o=e(window).scrollTop(),r=o+e(window).height(),a=this.model.getPlayer(),s=a.getScrollToPlayPercent();if(s){var l=Math.floor(n*(s/100)),d=Math.max(t,o),c=Math.min(i,r),u=c-d;return u>=l}return o>t&&i>r||t>=o&&r>=t||i>=o&&r>=i},onOverlayClick:function(){var e=this.model.getPlayer();e.isPlaying()||e.requestVideoStart({source:"clickToPlay"})},show:function(){this.$el.appendTo(this.$el.parent()).show(),self.syncScrollToPlay()},hide:function(){this.$el.hide()},onMouseover:function(){var e=this.model.getPlayer();e.isMouseToPlay()&&!e.isPlaying()&&e.requestVideoStart({source:"mouseOverToPlay"})}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/StartModel",["jquery","underscore","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/StartView","lib/jquery_plugins/jquery.backstretch.min","jquery_autoellipsis"],function(e,t,i,n){return i.extend({defaults:{view:null},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.set("view",new n({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({"adStart videoStart adResume videoResume":function(){t.hide()},viewerSessionEnd:function(){t.show()}})},togglePlayButton:function(e){this.get("view").$el.find(".ndn_startPlay").toggle(e)},toggleInfoOverlay:function(e){this.get("view").$el.find(".ndn_startPlay").toggle(e)},show:function(e){this.update(),i.prototype.show.apply(this,arguments),this.getPlayer().getOverlays().getOverlay("info").show(),this.togglePlayButton(!0),this.get("view").syncScrollToPlay()},update:function(){var e=this.getPlayer(),t=e.getStillImageData(),i=e.getContainerElement().width()>400&&t.large,n=t[i?"large":"small"];n&&this.displayStillImage(n)},displayStillImage:function(e){this.get("view").$el.backstretch(e,{fade:300})}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlays",["jquery","backbone","models/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/StartModel"],function(e,t,i,n,o,r,a){return t.Model.extend({defaults:{viewerModule:null,overlays:null},initialize:function(e){var t=e.informPlayer;this.set({overlays:{endslate:new i(t),info:new n(t),pause:new o(t),share:new r(t),start:new a(t)}})},hideAll:function(){e.each(this.get("overlays"),function(){this.hide()})},getOverlay:function(e){return this.get("overlays")[e]}})}),Ndn_Require.define("models/Ndn/Widget/Settings/Lkqd",["jquery","underscore","models/Ndn/Analytics","models/Ndn/Widget/Config","models/Ndn/Debug","models/Ndn/Enum/Wgt"],function(e,t,i,n,o,r){return{process:function(e){o.logs(function(){o.trace("settings","[Ndn_Widget_Settings_Lkqd] process(settings)","settings ===",e)});var r=e.settings.ads.lkqd,a=e.settings.browser,s=e.config;if(r.accountNumber){var l=n.getSiteSectionSegments(s.siteSection);r.adUnitCode=r.accountNumber+"/"+r.adOwnershipGroupId+(a.isMobile?"_mob":"")+"/"+r.adTrackingGroupId+"/"+s.siteSection+"/"+(l.section||"oth")+"/"+(l.subSection||"non"),r.companionAd=t.contains(["VideoPlayer/16x9","VideoPlayer/Studio"],s.type)?"300x250":!1}return r.publisherProvidedId=i.getPpidValue(),r},getLkqdPlayerId:function(e){switch(e){case r.UI:return"mixed";case r.RMM:case r.INVIEW:case r.PROMO:default:return""}},getLkqdPlacement:function(e){switch(e){case 1:return"inform-rmm";case 2:return"inform-inview";case 3:return"inform-promo";case 0:default:return"inform-ui"}},getLkqdSupportMode:function(e){return e?"strict":""},getLkqdCpOverrides:function(t){var i={maxImps:t.patterns.currentAdPlayImpressions,maxOpps:t.patterns.currentAdPlayOpportunities},n={maxImps:t.patterns.continuousPlayAdImpressions,maxOpps:t.patterns.continuousPlayAdOpportunities};return e.Deferred(function(e){"number"==typeof t.cpvNumber&&t.cpvNumber>0?Ndn_Services_DeliveryService.fetchOutcomes(t).then(function(t){"undefined"!=typeof t.continuousPlayAdImpressions&&t.adImpressions!==n.maxImps&&(n.maxImps=t.adImpressions,n.maxOpps=t.adOpportunities),e.resolve(n)}).fail(function(){e.resolve(n)}):e.resolve(i)}).promise()},getSupplyId:function(e,i,n){var o=t.find(e,function(e){return e.wgtValue===i});return 0===e.length||"undefined"==typeof o?null:n?o.desktop:o.nonDesktop}}}),Ndn_Require.define("models/Ndn/Widget/Params",["underscore","jquery","models/Ndn/App","models/Ndn/Debug","models/Ndn/Enum/PbValue","models/Ndn/Enum/ViewerModuleId","models/Ndn/Utils/UserAgent","models/Ndn/Widget/Config","models/Ndn/Widget/Settings/Lkqd"],function(e,t,i,n,o,r,a,s,l){return{getWgtValue:function(e,t){return"InView"==e.type?2:t?1:"Promo"==e.type?3:0},getPlayerBehaviorId:function(e,t){var i=e.config;return"undefined"!=typeof i.pb?i.pb:e.settings.behavior.rmm.rotatingEnabled?o.ROTATING_RMM.toString():t?o.PREVIEW.toString():i.autoPlay?o.AUTO_PLAY.toString():i.playOnInView?o.SCROLL_TO_PLAY.toString():i.playOnMouseover?o.MOUSE_TO_PLAY.toString():o.CLICK_TO_PLAY.toString()},getVideoSizeId:function(e){return 300>=e?1:315>e?2:350>e?3:400>e?4:5},getVideoAssetId:function(e,t){return t?e+"":"23408962"},getFoldPositionId:function(e){if(i.isEmbeddedByIframe())return"0";var n=t(window).height()+t(window).scrollTop(),o=n>=e.offset().top+Math.floor(e.height()/2);return o?"1":"2"},getViewerData:function(e){return{foldPositionId:this.getFoldPositionId(e),viewerWidth:e.width(),viewerHeight:e.height(),viewerSizeId:this.getVideoSizeId(e.width())}},getComscoreData:function(t){var i=t.videoData,n=t.isProviderAttributed,o={siteSection:t.siteSection,distributorName:t.distributorName,videoAssetId:this.getVideoAssetId(i?i.videoId:"",n),c5:n?"03":"02",ca2:"null",ca3:"null"};if(i){var r=i.provider;o=e.extend(o,{providerId:r.id,providerCategory:r.category,providerName:r.name}),"Bloomberg"==i.provider.name&&(o=e.extend(o,{ca2:"19630659",ca3:"NDN"}))}return o},getShareData:function(e){if(e.shareSettings.enabled&&e.videoData){var i=e.shareSettings,n=i.template,o=e.videoData,r=o.videoId,a={showShareIcons:o.settings.share.embedCode.enabled&&i.mode.social,mode:i.mode};return t.each(n,function(e,t){a[e]=t.replace(/\[VIDEO_ID\]/g,r)}),a}},getImaAdTagUrl:function(e){if(n.inMode("forceAdError"))return"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dredirecterror&nofb=1&correlator=";var i=e.videoData,o=e.viewerData,r=e.productSettings,a=r.config,l=r.settings.app,d=r.settings.dfp,c=r.settings.behavior,u=r.settings.browser,p=encodeURIComponent(u.embedOriginUrl),h=encodeURIComponent(p),g=e.isProviderAttributed,f=this.getVideoAssetId(i?i.videoId:"",g),m=function(){var n=[["wgt",e.wgtValue],["plt",e.pltValue],["pb",e.pbValue],["snd",e.isMuted?"0":"1"],["fp",o.foldPositionId],["cp",a.continuousPlay],["vs",o.viewerSizeId],["pt",s.getSiteSectionSegments(a.siteSection).pageType],["dpid",d.adCampaignId],["sitesection",a.siteSection],["vt","flash"==e.playbackMode?e.playbackMode:"html5"],["cpvnum",e.cpvNumber],["plid",a.playlistId||""],["assetid",f],["modal",c.isModal?"1":"0"],["pit",e.playerInstanceTypeId],["pvid",encodeURIComponent(i.providerVideoId||"")],["width",o.viewerWidth],["height",o.viewerHeight],["vli",e.videoLoadIndex],["dtype",u.deviceTypeId],["ab",u.adBlockDetectionId],["lat",""],["akw",i?i.antiKeywords:""]];
d.adCampaignId!=d.defaultAdCampaignId&&n.push(["ordpid",d.defaultAdCampaignId]),n=n.concat([["wid",a.widgetId],["cpid",i?i.provider.id:""],["insid",l.pageViewSessionId],["embedIndex",r.embedIndex],["ver",l.buildNumber],["benv",l.buildEnvironment],["atei",e.analyticsTimelineEventIndex],["ua",u.browserId],["ext_url",p],["de_url",h],["hk_seg",u.kruxSegments||""],["hk_user",u.kruxUser||""],["adserver","dfp"]]);var g=[];return t.each(n,function(e,t){var i=t[0],n=(t[1]+"").substr(0,256);g.push([i,n])}),g}(),y=function(){var e=[];return t.each(m,function(t,i){var n=i[0],o=i[1].replace(/&/g,"");e.push(n+"="+o)}),encodeURIComponent(e.join("&"))}();return u.pageProtocol+"//pubads.g.doubleclick.net/gampad/ads?ad_rule=1&sz=750x425&iu="+d.adUnitCode+"&ciu_szs="+(d.companionAd||"")+"&vid="+f+"&cmsid=1169&vpos=preroll&scor="+e.now+"&vad_type=linear&description_url="+p+"&playlistId="+a.playlistId+"&widgetId="+(a.widgetId||"")+"&trackingGroup="+a.trackingGroup+"&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+p+"&correlator="+e.now+"&cust_params="+y},getLkqdConfig:function(t){var i=t.viewerData,n=t.productSettings,o=n.config,d=n.settings.ads.lkqd,c=(n.settings.ads.patterns,n.settings.app),u=n.settings.behavior,p=n.settings.browser,h=encodeURIComponent(p.embedOriginUrl),g=s.getSiteSectionSegments(o.siteSection),f="undefined"!=typeof t.usesDfp?t.usesDfp:!1,m={pid:d.lkqdAccountId||333,sid:l.getSupplyId(d.supplyIds,3,!!a.isDesktop()),sid:function(){var i=t.wgtValue||3,n=e.find(d.supplyIds,function(e){return e.wgtValue===i});return 0===d.supplyIds.length||"undefined"==typeof n?null:a.isDesktop()?n.desktop:n.nonDesktop}(),experience:"promo",lkqdContainer:void 0,playerWidth:i.viewerWidth,playerHeight:i.viewerHeight,volume:0,dfp:f,support:"html5",wgt:t.wgtValue,plt:t.pltValue,pb:t.pbValue||0,fp:i.foldPositionId,cp:o.continuousPlay,cpvnum:t.cpvNumber,vs:i.viewerSizeId,sitesection:o.siteSection,sec:g.section,sub:g.subSection,pt:g.pageType,dpid:o.trackingGroup,vt:"html5",plid:null,assetid:null,modal:u.isModal?"1":"0",lat:"",akw:null,ordpid:null,wid:o.widgetId,cpid:null,ver:c.buildNumber,exturl:h,plid:r.LKQD,pvid:null,adserver:"lkqd"};return d.adCampaignId!==d.defaultAdCampaignId&&(m.ordpid=d.defaultAdCampaignId),m}}}),Ndn_Require.define("jquery_responsive_containers",["jquery","jquery_resize"],function(e){!function(e){"use strict";var t={feature:"min-width",value:"800px",className:"",callback:null};e.fn.responsiveContainer=function(i){if("undefined"==typeof i.feature)throw new Error('Responsive container error: No "feature" supplied, such as min-width.');if("undefined"==typeof i.value)throw new Error('Responsive container error: No "value" supplied, such as 800px.');if("undefined"==typeof i.className&&"undefined"==typeof i.callback)throw new Error('Responsive container error: No "className" or "callback" supplied, one or the other is needed, else theres no use.');var n=e.extend({},t,i);return this.each(function(){var t=e(this),i=function(){var e=!1,i=t.width();switch(""!==n.className&&t.removeClass(n.className),n.feature){case"min-width":n.value.replace("px","")<i&&(e=!0);break;case"max-width":n.value.replace("px","")>i&&(e=!0)}e&&(""!==n.className&&t.addClass(n.className),null!==n.callback&&n.callback({width:i}))};e(this).resize(i),i()})}}(e)}),Ndn_Require.define("models/Ndn/Utils/Responsive",["jquery","jquery_responsive_containers"],function(e){return{addBreakpoints:function(t,i,n){"undefined"==typeof n&&(n="inform-"),e.each(i,function(i,o){e.each(o,function(){var e="undefined"!=typeof this[0],o=e?this[0]:this+0,r=e?n+this[1]:n+"breakpoint-"+i.split("-")[0]+o;t.responsiveContainer({feature:i,value:o+"px",className:r})})})}}});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Viewer/ViewerModule","models/Ndn/Utils/UserAgent","models/Ndn/Viewer","models/Ndn/Viewer/ViewerModule/Inform/SoundManager","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Viewer/ViewerModule/Inform/Overlays","models/Ndn/Analytics/Ndn","models/Ndn/Widget/Params","models/Ndn/Debug","models/Ndn/AdBlockDetector","models/Ndn/Utils/Responsive","models/Ndn/Viewer/ViewerModule/VideoPlayer","jquery_responsive_containers"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y){var A=r.extend({defaults:{moduleId:"inform",player:null,overlays:null,playOnMouseover:null,playOnInView:null,previousVideoStartRequest:null,stillImage:null,wgtValue:null,params:null,videoLoadIndex:-1,currentAteiValue:null},initialize:function(t){r.prototype.initialize.call(this,t);var i=t.containerElement,n="inform-player-container-"+A.getInformPlayerIndex();i.html('<div id="'+n+'" style="width:100%;height:100%;"></div>');var o=e("#"+n);this.initializeContainerElement(i);var a=new y({eventsReceiver:this,viewer:t.viewer,containerElement:o}),s=new u({informPlayer:this,viewerModule:a});this.set({containerElement:i,player:a,overlays:s}),a.on("share",function(e){s.hideAll(),s.getOverlay("share").share(e.medium).show()}),this.set("soundManager",new l(this))},onResize:function(){r.prototype.onResize.call(this);var e=this.get("player");e&&e.onResize()},getOverlay:function(e){return this.getOverlays().getOverlay(e)},getOverlays:function(){return this.get("overlays")},manageEvents:function(){},getDebugInfo:function(){return this.get("player").getDebugInfo()},isMouseToPlay:function(){return this.get("playOnMouseover")},isScrollToPlay:function(){return!!this.get("playOnInView")},getScrollToPlayPercent:function(){return this.getSessionParams().playOnInViewPercent||1e-7},getStillImageData:function(){return this.get("stillImage")},getVideoLoadIndex:function(){return this.get("videoLoadIndex")},setMuted:function(e){this.getPlayerInstance().setMuted(e)},getPlayerInstance:function(){return this.get("player")},play:function(){this.getOverlays().hideAll(),this.getPlayerInstance().play()},pause:function(){this.get("player").pause()},startSession:function(e){r.prototype.startSession.apply(this,arguments),g.logs(function(){g.debug("inform","[Ndn_Viewer_ViewerModule_Inform] startSession(data)","data ===",e)}),this.toggleAdPlayer(!!e.dfp),this.toggleContentPlayer(!!e.videoData);var t;t="undefined"!=typeof e.isBumperVideo?e.isBumperVideo:"undefined"!=typeof e.isRmm?e.isRmm:!1;var i=e.videoData,n=e.playOnLoad,o=e.share,a=e.isMuted,s=this.getViewer().getLoadingScreen();s.show(),this.set("stillImage",e.stillImage||{small:(i||{}).stillImageUrl,large:(i||{}).stillImageXLUrl}),this.get("soundManager").setActive(a&&e.unmuteOnMouseover),this.set({playOnMouseover:e.playOnMouseover||!1,playOnInView:e.playOnInView||!1}),i&&(this.set("videoLoadIndex",this.getVideoLoadIndex()+1),this.trigger("videoLoad",{playOnLoad:n,videoData:i,videoLoadIndex:this.getVideoLoadIndex()})),this.getPlayerInstance().startSession({dfp:e.dfp,comscore:e.comscore,videoData:i,isMuted:a,isBumperVideo:t,playOnLoad:n,playbackMode:e.playbackMode,showControls:e.showControls,showShareIcons:o&&o.showShareIcons,forceInstantiation:e.forceInstantiation,highRenditionPreferred:e.highRenditionPreferred}),e.endslate?(this.getOverlay("endslate").show(e.endslate),s.hide()):n||(s.hide(),this.getOverlay("start").show(i),this.getOverlay("info").setToggleableDisplay(!1).setVisibility(!1,!0))},requestVideoStart:function(e){this.getViewer().getLoadingScreen().show();var i="undefined"==typeof e.playlistIndex||"undefined"==typeof e.videoIndex?"play":"selectVideo",n={source:e.source||"",playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,action:i,sessionIndex:this.getModuleSessionIndex()},o=!t.isEqual(this.get("previousVideoStartRequest"),n);o&&(this.set("previousVideoStartRequest",n),this.trigger("videoStartRequest",n),"play"==i&&this.play())},initializeContainerElement:function(e){e.addClass("ndn_videoPlayer"),m.addBreakpoints(e,{"min-width":[[419,"largeView"]],"max-width":[[1198,"view1198"],[1022,"view1022"],[999,"view999"],[849,"view849"],[784,"view784"],[766,"view766"],[702,"view702"],[639,"view639"],[574,"view574"],[499,"view499"],[418,"smallView"]]},"ndn_videoPlayer_"),function(t){var i=e.get(0),n=function(){t.trigger("click")};i.addEventListener?i.addEventListener("click",n,!0):i.attachEvent&&i.attachEvent("onclick",n)}(this)},getDuration:function(){return this.get("player").getDuration()},getCurrentTime:function(){var e=this.get("player");return e&&e.getCurrentTime()||0},getCurrentPlaylistId:function(){return this.get("playlistId")},onceReady:function(e){return this.get("player").onceReady(e)},getDebugInfo:function(){return this.getPlayerInstance().getDebugInfo()}},{viewerModuleId:y.viewerModuleId,getInformPlayerIndex:function(){var e=1;return function(){return e++}}()});return A}),Ndn_Require.define("text!templates/ndn/viewer/loading-screen.html",[],function(){return'<div class="inform-viewer-loading-screen" style="position:absolute;z-index:1002;top:0;left:0;width:100%;height:100%;overflow:hidden;">\n    <div class="inform-loading-spinner-hidden"></div>\n    <div class="inform-viewer-loading-screen-bg" style="position:absolute;z-index:-999999;top:0;left:0;width:100%;height:100%;overflow:hidden;background:#ddd;"></div>\n</div>'});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Viewer",["underscore","jquery","backbone","models/Ndn/Viewer/Step","models/Ndn/Utils/DomElement","models/Ndn/Viewer/ViewerModule/LkqdRmm","models/Ndn/Viewer/ViewerModule/Lkqd","models/Ndn/Viewer/ViewerModule/VideoPlayer","models/Ndn/Viewer/ViewerModule/Easi","models/Ndn/Viewer/ViewerModule/DisplayAd","models/Ndn/Viewer/ViewerModule/Rtk","models/Ndn/Viewer/ViewerModule/Inform","models/Ndn/Debug","text!templates/ndn/viewer/loading-screen.html","lib/jquery_plugins/jquery.backstretch.min","jquery_resize"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h){var g={amp:s,lkqdRmm:r,lkqd:a,videoJs:s,easi:l,displayAd:d,rtk:c,inform:u};return i.Model.extend({defaults:{viewerModules:null,activeModule:null,containerElement:null,sessionIndex:null,sessionsLog:null,effectiveSessionsLog:null,debugInfo:null,steps:null,usesVideoJs:null},initialize:function(e){var i=t(e.containerElement);this.set({containerElement:i.addClass("inform-viewer-container"),viewerModules:{},debugInfo:[],steps:new n({viewer:this,stepName:"top",parentStep:null}),sessionsLog:[],effectiveSessionsLog:[],sessionIndex:0,usesVideoJs:!!e.usesVideoJs}),this.syncViewerSize(),this.handleViewerResizing(),this.handleLoadingScreen(),this.handleDebugMode()},syncViewerSize:function(){var e=this.getActiveModule();e&&e.onResize()},handleViewerResizing:function(){var e=this;t(this.getContainerElement()).resize(function(){e.syncViewerSize()})},usesVideoJs:function(){return this.get("usesVideoJs")},getViewerEventData:function(){var e=this.getActiveModule();return{sessionPlayerInstanceTypeId:g[this.getActiveModuleName()].viewerModuleId,sessionModuleName:this.getActiveModuleName(),sessionParams:this.getActiveSessionParams(),sessionIndex:this.getSessionIndex(),moduleSessionIndex:function(){return e?e.getModuleSessionIndex():void 0}()}},execute:function(e,i,n){var o=this;return n=n||{},t.Deferred(function(t){o.beginNextSession().done(function(){o.useModule(e,i,n).always(function(){o.set("sessionIndex",o.get("sessionIndex")+1)}).done(function(e){t.resolve(e)})})}).promise()},beginNextSession:function(){var e=this;return t.Deferred(function(t){e.isActive()?(e.once("viewerModuleEnd",t.resolve),e.getActiveModule().halt()):t.resolve()}).promise()},halt:function(){this.isActive()&&this.getActiveModule().halt(),this.getSteps().concludeAllSteps()},getViewerModule:function(e){return this.get("viewerModules")[e]},useModule:function(e,i,n){var r=this;return n=n||{},t.Deferred(function(a){t.Deferred(function(i){if("undefined"!=typeof r.get("viewerModules")[e])return i.resolve(r.get("viewerModules")[e]);if(!e||!g[e])return i.reject("Unrecognized module: "+e);var n="inform-viewer-module-"+e,a=t('<div class="'+n+' inform-viewer-module" style="width:100%;height:100%;overflow:hidden;"></div>');r.getContainerElement().append(a),o.onceHasWidthAndHeight(a).done(function(){var t=g[e],n=new t({viewer:r,containerElement:a});r.initializeViewerModule(e,n),i.resolve(n)})}).promise().always(function(t){var o="resolved"==this.state()?t:null;r.set({activeModule:o,activeModuleId:o?e:""}),o?(r.getContainerElement().find(".inform-viewer-module-active").removeClass("inform-viewer-module-active"),o.getContainerElement().addClass("inform-viewer-module-active"),o.once("viewerModuleEnd",function(e){e.halted?a.reject(n):a.resolve(n)}),o.startSession(i,n)):a.reject(n)})}).promise().always(function(){r.set({activeModule:null,activeModuleId:""})})},getContainerElement:function(){return this.get("containerElement")},initializeViewerModule:function(e,t){this.get("viewerModules")[e]=t},getModule:function(e){return this.get("viewerModules")[e]},getSessionIndex:function(){return this.get("sessionIndex")},getActiveModuleName:function(){return this.get("activeModuleId")},logSession:function(e){var i=[this.getActiveModuleName(),e];this.get("sessionsLog").push(i);var n=function(){var i=!1;return t.each(e,function(e,t){return t?(i=!0,!1):void 0}),i}();n&&this.get("effectiveSessionsLog").push(i)},getSessionsLog:function(){return this.get("sessionsLog")},getEffectiveSessionsLog:function(){return this.get("effectiveSessionsLog")},isActive:function(){return!!this.getActiveModule()},getActiveModule:function(){return this.get("activeModule")},getActiveSessionParams:function(){var e=this.getActiveModule();return e?e.getSessionParams():{}},getSteps:function(){return this.get("steps")},getDebugInfo:function(){return{sessions:this.get("debugInfo"),steps:this.getSteps().getData()}},step:function(e){return new n({viewer:this,stepName:e})},getLoadingScreen:function(){return this.getContainerElement().find(".inform-viewer-loading-screen")},setLoadingScreenImage:function(e){this.getLoadingScreen().backstretch(e,{fade:300})},disableLoadingScreen:function(){this.getLoadingScreen().addClass("inform-disabled")},handleLoadingScreen:function(){this.getContainerElement().prepend(t(h));var e=this.getLoadingScreen();this.on({"adRequest viewerModuleEnd":function(){e.show()},"adStart videoStart":function(){e.hide()}})},handleDebugMode:function(){var t=this;if(p.inMode("viewerEvents")||p.inMode("viewerEventsData")||p.inMode("allViewerEvents")){var i=this.trigger;this.trigger=function(n,o){if((p.inMode("allViewerEvents")||!e.contains(["adTimeUpdate","videoTimeUpdate","debugInfo"],n))&&0!==n.indexOf("change")){var r=["[Ndn_Viewer Event]"];if(p.inMode("viewerEventsData"))for(var a=0;a<arguments.length;a++)r.push(arguments[a]);else r.push(n),e.contains(["viewerModuleStart","viewerModuleEnd"],n)&&r.push(o.viewer.sessionModuleName);console.log.apply(console,r)}i.apply(t,arguments)}}if(p.isEnabled()){var n=this.get("debugInfo"),t=this;this.on({viewerModuleStart:function(i){var o=i.viewer;n.push(e.extend({log:t.getActiveModule().getScheduleLog()},o)),t.getSteps().getCurrentStep().recordSession(o.sessionIndex)},debugInfo:function(e){var t=e.viewer;n[t.sessionIndex].debugInfo=e},viewerModuleEnd:function(i){var o=i.viewer;n[o.sessionIndex].log=e.extend({},t.getActiveModule().getSessionLog())}})}}})}),Ndn_Require.define("models/Ndn/Services/Cache",["backbone","jquery","models/Ndn/Debug"],function(e,t,i){var n,o={},r={};return{cachePlaylistData:function(e,i){if(e.playlistId){var n="undefined"==typeof o[e.playlistId]||!o[e.playlistId].isCompletelyLoaded&&o[e.playlistId].items.length<e.items.length;n&&(e.isCompletelyLoaded=e.items.length<i,o[e.playlistId]=e,t.each(e.items,t.proxy(function(e,t){this.cacheVideoData(t)},this)))}},getPlaylistData:function(e,t){return"undefined"!=typeof o[e]&&(o[e].isCompletelyLoaded||"undefined"==typeof t||o[e].items.length>=t)?o[e]:null},cacheVideoData:function(e){i.logs(function(){return i.trace("cache","[Ndn_Services_Cache] cacheVideoData(videoData)","videoData === ",e)}),"undefined"==typeof r[e.videoId]&&(r[e.videoId]=e,n=e)},getLastCachedVideoData:function(){return i.logs(function(){return i.trace("cache","[Ndn_Services_Cache] getLastCachedVideoData()")}),n},getVideoData:function(e){return i.logs(function(){return i.trace("cache","[Ndn_Services_Cache] getVideoData(videoId)","videoId === ",e)}),"undefined"!=typeof r[e]?r[e]:void 0},getCache:function(){return i.logs(function(){return i.trace("cache","[Ndn_Services_Cache] getCache()")}),r}}}),Ndn_Require.define("models/Ndn/Services/PartnerContentService",["jquery","underscore","require","models/Ndn/Services/Cache","models/Ndn/Utils/UrlParser","models/Ndn/App","models/Ndn/Debug","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a){return{getBaseUrl:function(e){var t,e=e||{},i=e.environment;switch("undefined"==typeof e.trackingGroup&&(e.trackingGroup=10557),"undefined"==typeof e.limit&&(e.limit=10),a.logs(function(){a.trace("services","[Ndn_Services_PlaylistService] getBaseUrl() ")}),"undefined"==typeof i&&(i=o.getUrlVar("ndn_partnerContentServiceEnv")||""),i){case"local":t="http://localhost:9090/api/content/articles";break;case"dev":case"dev2":case"qa":case"qa1":case"qa2":case"qa3":case"qa4":case"stage":case"staging":t="http://partner-content-service.staging.ndnops.com/api/content/articles";break;case"prod":default:t="//player-content-service.prod.ndnops.com/api/content/articles"}return t+"/"+e.trackingGroup+"?limit="+e.limit+"&heavy=false"},fetch:function(t){var i=this;"undefined"!=typeof t.cacheData?t.cacheData:!0;return a.logs(function(){return a.trace("services","[Ndn_Services_PartnerContentService] fetch(data)","data === ",t)}),e.Deferred(function(n){e.ajax({type:"GET",url:i.getBaseUrl({trackingGroup:t.trackingGroup,limit:t.limit}),contentType:"application/json",dataType:"json"}).done(function(e){return a.logs(function(){return a.trace("services","[Ndn_Services_PartnerContentService] fetch(data)","response ==",e)}),n.resolve(e)})}).promise()},cachePartnerContent:function(t){a.logs(function(){return a.trace("services","[Ndn_Services_PartnerContentService] cachePartnerContent(articlesData)","articlesData === ",t)}),t&&e.each(t,function(){n.cacheArticleData(this)})}}}),Ndn_Require.define("models/Ndn/Services",["jquery","underscore","require","models/Ndn/PlayerServices","models/Ndn/Services/Cache","models/Ndn/Services/PartnerContentService","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r){return{configureServices:function(e){return"undefined"!=typeof e&&"Promo"===e?[{name:"partnerContent",service:r},{name:"player",service:n}]:[{name:"player",service:n}]},fetch:function(t){var i,n,o=this.configureServices(t.productType),r=[];return e.Deferred(function(a){for(i=0;i<o.length;i++)r.push(o[i].service.fetch(t));e.when.apply(void 0,r).then(function(e){var t={};for(n=0;n<arguments.length;n++)t[o[n].name]=arguments[n];a.resolve(t)}).fail(function(e){a.reject(e)})}).promise()}}});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget/Settings/App",["underscore","models/Ndn/App","models/Ndn/Analytics"],function(e,t,i){return{process:function(e){e.settings.deliverySettings,e.config;return e.settings.app={pageViewSessionId:t.getPageViewSessionId(),buildNumber:t.getBuild(),buildEnvironment:t.getEnv(),settings:t.getSettings(),buildDetails:_nw2e.buildDetails||{}},i.on("update",function(){e.settings.app.pageViewSessionId=i.getPageViewSessionId()}),e.settings.app}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Analytics",["underscore"],function(e){return{process:function(t){var i=t.settings.deliverySettings,n=t.config;return t.settings.analytics={chartbeat:{enabled:i.analytics_chartbeat&&e.contains(["VideoPlayer/Single","VideoPlayer/Studio","VideoPlayer/16x9"],n.type)}}}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Behavior",["underscore","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/UrlParser"],function(e,t,i,n){var o=n.parseParams(n.getUrlParam("ndn_behaviorSettings")||"");return{process:function(i,n){var o=i.settings.behavior,r=i.settings.deliverySettings,a=i.settings.browser,s=i.config,n=n||{},l="VideoLauncher/Slider"==s.type;return function(){var t=o.rmm={enabled:a.isAbleToPlayVideoAutomatically||l};if(e.contains(["VideoPlayer/Inline","VideoLauncher/Slider"],s.type)||(t.enabled=!1),t.enabled){var i=r.rmmEarlyContent&&a.ableToUseEarlyContentRmm;if(t.earlyContent=i,"VideoLauncher/Slider"==s.type){var n=a.isDesktop;t.rtkEnabled=n&&r.rtk_d||!n&&r.rtk_nd}}}(),o["float"]=function(){var t=r.float_player,i=!!t;s["float"]&&("off"==s["float"]?i=!1:"default"!=s["float"]&&(i=!0,t=s["float"]));var n={enabled:"VideoPlayer/Single"==s.type&&i&&!a.isEmbeddedByIframe&&a.isDesktop};return n.enabled&&(n=e.extend(n,{percent:r.floatPercent,initialPosition:t})),n}(),o.playbackMode=function(){if(t.getSetting("forceHtmlPlayer"))return"html";if(l){var i=r.forceHtmlForSections.split(",");if(e.contains(i,s.siteSection))return"html"}return"auto"}(),o.isModal=n.isModal||!1,o},processToggle:function(t){var i=t.settings.behavior,n=t.settings.browser,o=t.config;return i.toggle={enabled:n.isDesktop&&e.contains(["1","7"],o.pb)},i.toggle.enabled&&(i.toggle.toggleValue=n.productBehaviorToggleValue),t},processPlaylistItemsLimit:function(e){var t=e.settings.behavior,n=e.config;return t.playlistItemsLimit=i.getPlaylistItemsLimit(n.type),e},processVideoSchedule:function(t){var i,n=t.settings.behavior,o=n.playlistItemsLimit,r=t.config,a=[];if(e.contains(["VideoPlayer/Single","VideoPlayer/Studio","VideoPlayer/Inline","VideoPlayer/Inline590","VideoPlayer/16x9","VideoLauncher/Slider","InView","Promo"],r.type)){if(t.videosData&&(a.push(t.videosData),i={videoIndex:0,playlistIndex:0}),r.playlistId&&(a.push([r.playlistId,o]),"undefined"!=typeof t.videoIndex&&(i={videoIndex:t.videoIndex,playlistIndex:t.videosData?1:0})),a.push([507]),"VideoPlayer/16x9"==r.type){for(var s=t.associatedPlaylists,l=[],d=0;d<s.length;d++){var c=s[d];c.id==r.playlistId?l.push({schedule:a,firstVideo:i,firstActiveFeeder:!0}):l.push({schedule:[[c.id,o],[507]]})}n.videos=l}else n.videos={schedule:a,firstVideo:i};return t}},getOverrides:function(){return o}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Browser",["jquery","underscore","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/Helpers","models/Ndn/Utils/UserAgent","models/Ndn/Widget/PlayerOptions","models/Ndn/AdBlockDetector","models/Ndn/Utils/FlashDetect","models/Ndn/EventHub"],function(e,t,i,n,o,r,a,s,l,d){var c,u;return{process:function(e){var t=e.settings.browser;this.processBrowserSettings(t)},processBrowserSettings:function(e){d.once("adBlockDetectionComplete",function(t){e.adBlockDetectionId=t.adBlockDetectionId})},isAbleToAutoplaySoundOn:function(t){return u||(u=e.Deferred(function(e){function i(){var e=document.getElementById("inform-video-test-autoplay");e&&document.body.removeChild(e)}"undefined"!=typeof t.isAbleToAutoplaySoundOn&&e.resolve(t.isAbleToAutoplaySoundOn),r.isDesktop()||e.resolve(!1);var n="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAB1ptZGF0AAAC9AYF///w3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjcwOCA4NmI3MTk4IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNiAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTIgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9NiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTEga2V5aW50PTIyMCBrZXlpbnRfbWluPTIyIHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9MzAgcmM9Y3JmIG1idHJlZT0xIGNyZj01MS4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT0yMDAwMCB2YnZfYnVmc2l6ZT0yNTAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAA5liIQAJ//w7uZO8nJnRwAAAAhBmiRsQn+igAAAAAhBnkJ4j//YgQDQIAcA0CAHAAAACAGeYXRG/9qAASAxg+Rcp72Ah/3AARoxoGSAw/HBHkxcp7UwwAW7j8C9HYwuuG+qbAcAAAAHAZ5jRG/agQEmMa2QRTgx+Hl1bRmy8YaLlVcvAHgIiIbnLkY4SfAcxO1EhLFrIhSpkUDlovZpObTlt8msJx0EBwZVJXUMhSi/OygXOoCcBmwsnrlsXzETtAG4IQw47dW+BVCYwRTL11aV8Z3Ol6KluTQTWwXqjanAAUoxrCixSDnk+pduHB9QatcqtpL8gFQFnHH41lwpcIK4UdcFBQ/hCvh+GAxkoTYZQ4AAAAAKQZpoNKTBCP+ngQFKMawosLnX+7pLvVrlNewEHiMJsVdzeZsGlNgwMDAxvgFKMawqJEhdq/9rcSaaXKaBgIfXfVzf4AGBrAYlKDAxsGN8AAAACUGehkURLH/YgQFUMaxEoLv8P51dy7lrlNewEHsCO4m0WHtbz3n5/Tc99KOAAUwxrCiwufX83qS7uLlNAwEPiEgFUKcJaCQkJCQkJCQk5wAAAAgBnqV0Rv/agQFGMawowLOn1/izi5ouU17eQeI4N+yWXcGJDnBgYGlBja34AVoxrEigEQgm/d/m7ku9T9S5TQMBD7wc+rA4MDAwMDAwMDAwMb6Z5/lwAAAABwGep0Rv2oABRjGsQDQ4Xa//TTiLXKa9vP/EsSvaS8LsLhKWamJ0xwFMMawosSBM8/51q5a46dLlNewEPiBTuhThISEhISEhISEhJwDZs4AAAAAKQZqsNKTBF/+3gAFOMaxAMlhN+//vIu7IW8WBgIVmzqtj0N27WHnnvpz7jAPPPPcBTjGsKPCa+v861ctc8ui5TXsBB6tzMa3BgYGBgYGBgYGBjZ13eWWWXgAAAAlBnspFFSxv2oEBUjGsSKC76fj+bku9FymgYCH0zRNBeQdwYGBgYGBgYGBiXAFeMaRo0Jv8P86uS7uz8FymvYCD33KoASEhISEhISEhISEu7vNNNNwAAAAIAZ7pdEb/2oABSjGsKiRQWdP99XLl8OlymgYCH3CW92eIOBISlCQkJCQkJCaz8AFMMawowRhM8/7XqSX06OlymvYCDxFKml3JEgYGBgYGBgYGNzuGrVwAAAAHAZ7rRF/cgAFIMawosLnX+dXJd6i5TQMBD6x7+o/W4MDAwMDAwMDAwMDcAU4xrCjAs+n+dXJd3elymvYCDxJxnUtxISEhISEhIScCTkj8AU4xrC4kSF30/xq5LvUXKaBgIfWZGjTzA4EhISEhISEhISE8AUYxrCjAsfu/m7Xd6LlNe3kHiN6FoVTuDAwMDAwMDGwY2t+AAVAxrCokSJAm+H+buXL1D7lymgYCH2Bsf/gAYGBgYGBgYGBgYkDfv08BRDGsSLCyfu/04lyQXKa9vMPEshC52Xg73QkJCQkJCZlnFPwAAAbUbW9vdgAAAGxtdmhkAAAAANanmGPWp5hjAAAD6AAAAlwAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAABhpb2RzAAAAABCAgIAHAE////7+/wAAA0F0cmFrAAAAXHRraGQAAAAD1qeYY9anmGMAAAABAAAAAAAAAkIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAACAAAAAgAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAJCAAAfxgABAAAAAAK5bWRpYQAAACBtZGhkAAAAANanmGPWp5hjAAFfkAAAyuRVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACZG1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAiRzdGJsAAAAmHN0c2QAAAAAAAAAAQAAAIhhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAACAAIABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAMmF2Y0MBTUAo/+EAGWdNQCjspLYC1BgEGQAAAwABAAK/IA8YMZYBAAZo6uBlLIAAAABQc3R0cwAAAAAAAAAIAAAABAAAD+MAAAABAAAP5AAAAAIAAA/jAAAAAQAAD+QAAAABAAAP4wAAAAEAAA/kAAAAAQAAD+MAAAACAAAOEAAAABRzdHNzAAAAAAAAAAEAAAABAAAAeGN0dHMAAAAAAAAADQAAAAEAAB/GAAAAAQAAT3AAAAABAAAfxgAAAAEAAAAAAAAAAQAAD+QAAAABAABPcQAAAAEAAB/HAAAAAQAAAAAAAAABAAAP4wAAAAEAAEn3AAAAAQAAHfMAAAABAAAAAAAAAAEAAA4QAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAEhzdHN6AAAAAAAAAAAAAAANAAADCgAAAAwAAAAMAAAADAAAAAsAAAAOAAAADQAAAAwAAAALAAAADgAAAA0AAAAMAAAACwAAAERzdGNvAAAAAAAAAA0AAAAwAAADOgAAA0YAAANaAAADjwAABD0AAASPAAAE4QAABToAAAWNAAAF6QAABkEAAAabAAACmHRyYWsAAABcdGtoZAAAAAPWp5hj1qeYYwAAAAIAAAAAAAACXAAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAiBtZGlhAAAAIG1kaGQAAAAA1qeYY9anmGMAAKxEAABoAFXEAAAAAAAlaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAE1vbm8AAAAB021pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABl3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAACsRAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVAAAAAAAAAAAAAAAFgICAAhIIBoCAgAECAAAAGHN0dHMAAAAAAAAAAQAAABoAAAQAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAHxzdHN6AAAAAAAAAAAAAAAaAAAABAAAAAQAAAAMAAAAHQAAAHEAAAAyAAAAIQAAACMAAAAjAAAAIgAAACMAAAAqAAAAIAAAACgAAAAlAAAAKQAAACMAAAAoAAAAJgAAACgAAAAjAAAAJAAAACQAAAAkAAAAKQAAACQAAAB4c3RjbwAAAAAAAAAaAAADUgAAA1YAAANmAAADcgAAA5oAAAQLAAAESwAABGwAAAScAAAEvwAABO0AAAUQAAAFRQAABWUAAAWbAAAFwAAABfYAAAYZAAAGTQAABnMAAAamAAAGyQAABu0AAAcRAAAHNQAAB14AAAAUdWR0YQAAAAxuYW1lTW9ubwAAAG91ZHRhAAAAZ21ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAOmlsc3QAAAAyqXRvbwAAACpkYXRhAAAAAQAAAABIYW5kQnJha2UgMS4wLjcgMjAxNzA0MDkwMA==";try{var o=document.createElement("video");o.setAttribute("id","inform-video-test-autoplay"),o.autoplay=!0,o.inline=!0,o.src=n,o.load(),o.style.display="none",o.playing=!1,o.volume=.001,o.controls=!0,document.body.appendChild(o),o.play().then(function(){i(),e.resolve(!0)})["catch"](function(){e.resolve(!1)})}catch(a){e.resolve(!0)}}).done(function(e){t.isAbleToAutoplaySoundOn=e})),u},fetch:function(){return{userAgent:r.getUserAgent(),adBlockDetectionId:s.getCachedScenarioId(),isAbleToPlayVideoAutomatically:r.isAbleToPlayVideoAutomatically(),productBehaviorToggleValue:a.getProductBehaviorToggleValue(),hasCursor:r.hasCursor(),ableToUseEarlyContentRmm:r.isSafari()||r.isChrome(),ableToUseDisplayAdSpree:r.isSafari()||r.isChrome(),mayHaveDesktopFlashBlock:r.isDesktop()&&(r.isSafari()||r.isChrome()),isMobile:r.isMobile(),isDesktop:r.isDesktop(),deviceTypeId:r.getDeviceType(),browserId:r.getBrowser(),browserIdVersion:r.getBrowserId(),isOnHomepage:t.contains(["/",""],window.location.pathname+""),pageProtocol:o.getHttpProtocol(),isHttps:o.isOnSsl(),domainName:window.location.hostname,isEmbeddedByIframe:i.isEmbeddedByIframe(),embedOriginUrl:i.getEmbedOriginUrl(),kruxSegments:"object"!=typeof window.Krux&&"function"!=typeof window.Krux||!e.isArray(window.Krux.segments)?null:window.Krux.segments.join(","),kruxUser:"object"!=typeof window.Krux&&"function"!=typeof window.Krux||!window.Krux.user?null:window.Krux.user,flashVersion:l.getFlashVersion(),isFlashEnabled:l.hasFlashEnabled()}},get:function(){return c||(c=this.fetch(),this.processBrowserSettings(c)),c}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Dfp",["underscore","models/Ndn/Analytics","models/Ndn/Widget/Config"],function(e,t,i){return{process:function(n){var o=n.settings.dfp,r=n.settings.browser,a=n.config;if(o.accountNumber){var s=i.getSiteSectionSegments(a.siteSection);o.adUnitCode=o.accountNumber+"/"+o.adOwnershipGroupId+(r.isMobile?"_mob":"")+"/"+o.adTrackingGroupId+"/"+a.siteSection+"/"+(s.section||"oth")+"/"+(s.subSection||"non"),o.companionAd=e.contains(["VideoPlayer/16x9","VideoPlayer/Studio"],a.type)?"300x250":!1}return o.publisherProvidedId=t.getPpidValue(),o}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Share",["underscore","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i){return{process:function(e){var t=(e.settings.deliverySettings,e.config,e.settings.share);return e.settings.share={enabled:t.enabled,template:{directLink:this.getDirectLinkTemplate(e),socialUrl:"http://social.newsinc.com/media/json/69017/[VIDEO_ID]/singleVideoOG.html?type=VideoPlayer/16x9&trackingGroup=69017&videoId=[VIDEO_ID]",secureSocialUrl:"https://social.newsinc.com/media/json/69017/[VIDEO_ID]/singleVideoOG.html?type=VideoPlayer/Single&widgetId=2&trackingGroup=69017&videoId=[VIDEO_ID]",embedCode:this.getEmbedCode(e)},mode:t.mode},e.settings.share},getEmbedCode:function(e){var t=e.config;return'<iframe width="590" height="332" src="http://launch.newsinc.com/?type=VideoPlayer/Single&widgetId=1&trackingGroup=69016&playlistId=19132'+(t.siteSection?"&siteSection="+t.siteSection:"")+'&videoId=[VIDEO_ID]" frameborder="no" scrolling="no" noresize marginwidth="0" marginheight="0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>'},getDirectLinkTemplate:function(e){var n=e.config,o=e.settings.share.directLinkLandingPageUrl,r=!!t.getAppUrlInfo(o),a=r?"":i.getDefaultUrlVarPrefixForConfigSettings();return-1===o.indexOf("?")&&(o+="?"),o+a+"trackingGroup="+n.trackingGroup+(n.siteSection?"&"+a+"siteSection="+n.siteSection:"")+"&"+a+"videoId=[VIDEO_ID]"}}}),Ndn_Require.define("models/Ndn/Widget/Settings",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/Helpers","models/Ndn/Utils/UserAgent","models/Ndn/Widget/Settings/App","models/Ndn/Widget/Settings/Analytics","models/Ndn/Widget/Settings/Behavior","models/Ndn/Widget/Settings/Browser","models/Ndn/Widget/Settings/Dfp","models/Ndn/Widget/Settings/Lkqd","models/Ndn/Widget/Settings/Share","models/Ndn/Widget/PlayerOptions"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h,g){var f=i.Model.extend({defaults:{data:null},initialize:function(e){this.set("data",e)},getData:function(){return this.get("data")},getConfig:function(){return this.getData().config;
},getBehaviorSettings:function(){return this.getData().settings.behavior},getBrowserSettings:function(){return this.getData().settings.browser},getDeliverySettings:function(){return this.getData().settings.deliverySettings}},{process:function(i,r,a){var p;return i=i||{},p=i.player||{},i.partnerContent&&(p.articles=i.partnerContent),p.embedIndex=a.embedIndex,p.settings.browser=t.extend(c.fetch(),a.browserSettings||{}),p.providedConfig=r,p.settings.deliverySettings=t.extend(p.settings.deliverySettings,a.deliverySettings||{}),o.process(p),s.process(p),l.process(p),d.process(p,a.behaviorSettings),c.process(p),u.process(p),h.process(p),d.processToggle(p),d.processPlaylistItemsLimit(p),d.processVideoSchedule(p),o.applyToggleToPbConfigSetting(p),o.syncFloatWithBehaviorSettings(p),e.Deferred(function(e){n.getProductModel(p.config.type).done(function(i){var n=new f(p);i.initializeBehaviorSettings(n),t.extend(n.getBehaviorSettings(),d.getOverrides()),e.resolve(n.getData())})}).promise()}});return f}),Ndn_Require.define("models/Ndn/Utils/Time",[],function(){return{getTimestamp:function(){return Date.now?Date.now():(new Date).valueOf()}}}),Ndn_Require.define("models/Ndn/LoyaltyProgram",["backbone","jquery","mustache"],function(e,t,i){var n=function(e){return"ndntritonservice"==e?"http://loyalty.newsinc.com/ndntritonservice.svc/GetCredit/{{memberId}}/{{siteId}}":void 0},o=function(e,t){n(e);return i.to_html(n(e),t)};return e.Model.extend({defaults:{id:null,customData:null,ajaxUrl:""},initialize:function(){e.Model.prototype.initialize.apply(this,arguments),this.set({ajaxUrl:o(this.get("id"),this.get("customData"))})},execute:function(){t.getJSON(this.get("ajaxUrl"),function(e){})}})}),Ndn_Require.define("models/Ndn/Utils/AspectRatio",["jquery","backbone","jquery_resize"],function($,Backbone){return{maintain:function(element,aspectRatio,toggleClosure,inputDimension){if("undefined"==typeof toggleClosure&&(toggleClosure=function(){return!0}),"undefined"==typeof inputDimension&&(inputDimension="width"),"width"==inputDimension||"height"==inputDimension){var outputDimension="width"==inputDimension?"height":"width",inputDimensionVariable=inputDimension.substr(0,1);if(element=$(element),!(element.data(outputDimension)+""||"").match(/[w|h]/gi)&&aspectRatio.match(/:/g)){var ratioTokens=aspectRatio.split(":"),ratio={width:ratioTokens[0],height:ratioTokens[1]},outputDimensionAlgorithm=ratio[outputDimension]+"/"+ratio[inputDimension]+"*"+inputDimensionVariable,model=new Backbone.Model;model.on("elementResize",function(){if(toggleClosure(element)){var inputDimensionValue=element[inputDimension](),outputDimensionCalculation=outputDimensionAlgorithm.replace(new RegExp(inputDimensionVariable,"gi"),inputDimensionValue).replace(/[^-()\d\/*+.]/g,""),result=eval(outputDimensionCalculation);try{element.css(outputDimension,eval(outputDimensionCalculation)+"px")}catch(e){}}}),element.resize(function(){model.trigger("elementResize")});var timerIntervals=[.5,1,2,4,8,16];return $.each(timerIntervals,function(){setTimeout(function(){model.trigger("elementResize")},1e3*this)}),model.trigger("elementResize"),model}}}}}),Ndn_Require.define("models/Ndn/Enum/DestructReason",[],function(){return{UNKNOWN:0,SLIDER_LIMIT:1,API_CALL:2,INVIEW_PRODUCT_CONCLUDED:3,MODAL_PRODUCT_CLOSED:4}}),Ndn_Require.define("lib/respond",[],function(){return window.matchMedia=window.matchMedia||function(e,t){"use strict";var i,n=e.documentElement,o=n.firstElementChild||n.firstChild,r=e.createElement("body"),a=e.createElement("div");return a.id="mq-test-1",a.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(a),function(e){return a.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,o),i=42===a.offsetWidth,n.removeChild(r),{matches:i,media:e}}}(document),function(e){"use strict";function t(){E(!0)}var i={};if(e.respond=i,i.update=function(){},i.mediaQueriesSupported=e.matchMedia&&e.matchMedia("only all").matches,!i.mediaQueriesSupported){var n,o,r,a=e.document,s=a.documentElement,l=[],d=[],c=[],u={},p=30,h=a.getElementsByTagName("head")[0]||s,g=a.getElementsByTagName("base")[0],f=h.getElementsByTagName("link"),m=[],y=function(){for(var t=0;t<f.length;t++){var i=f[t],n=i.className,o=i.href,r=i.media,a=i.rel&&"stylesheet"===i.rel.toLowerCase();"_nw2eStyles"==n&&o&&a&&!u[o]&&(console.log("respond.js: processing styles at "+i.href),i.styleSheet&&i.styleSheet.rawCssText?(v(i.styleSheet.rawCssText,o,r),u[o]=!0):(!/^([a-zA-Z:]*\/\/)/.test(o)&&!g||o.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&m.push({href:o,media:r}))}A()},A=function(){if(m.length){var t=m.shift();b(t.href,function(i){v(i,t.href,t.media),u[t.href]=!0,e.setTimeout(function(){A()},0)})}},v=function(e,t,i){var n=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),o=n&&n.length||0;t=t.substring(0,t.lastIndexOf("/"));var r=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},a=!o&&i;t.length&&(t+="/"),a&&(o=1);for(var s=0;o>s;s++){var c,u,p,h;a?(c=i,d.push(r(e))):(c=n[s].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,d.push(RegExp.$2&&r(RegExp.$2))),p=c.split(","),h=p.length;for(var g=0;h>g;g++)u=p[g],l.push({media:u.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:d.length-1,hasquery:u.indexOf("(")>-1,minw:u.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:u.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}E()},_=function(){var e,t=a.createElement("div"),i=a.body,n=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=n=a.createElement("body"),i.style.background="none"),i.appendChild(t),s.insertBefore(i,s.firstChild),e=t.offsetWidth,n?s.removeChild(i):i.removeChild(t),e=r=parseFloat(e)},E=function(t){var i="clientWidth",u=s[i],g="CSS1Compat"===a.compatMode&&u||a.body[i]||u,m={},y=f[f.length-1],A=(new Date).getTime();if(t&&n&&p>A-n)return e.clearTimeout(o),void(o=e.setTimeout(E,p));n=A;for(var v in l)if(l.hasOwnProperty(v)){var b=l[v],C=b.minw,S=b.maxw,N=null===C,I=null===S,w="em";C&&(C=parseFloat(C)*(C.indexOf(w)>-1?r||_():1)),S&&(S=parseFloat(S)*(S.indexOf(w)>-1?r||_():1)),b.hasquery&&(N&&I||!(N||g>=C)||!(I||S>=g))||(m[b.media]||(m[b.media]=[]),m[b.media].push(d[b.rules]))}for(var T in c)c.hasOwnProperty(T)&&c[T]&&c[T].parentNode===h&&h.removeChild(c[T]);for(var P in m)if(m.hasOwnProperty(P)){var M=a.createElement("style"),D=m[P].join("\n");M.type="text/css",M.media=P,h.insertBefore(M,y.nextSibling),M.styleSheet?M.styleSheet.cssText=D:M.appendChild(a.createTextNode(D)),c.push(M)}},b=function(e,t){var i=C();i&&(i.open("GET",e,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||t(i.responseText)},4!==i.readyState&&i.send(null))},C=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(i){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();y(),i.update=y,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this),respond});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget",["jquery","underscore","require","backbone","models/Ndn/App","models/Ndn/Widget/CssInjector","models/Ndn/VideoFeeder","models/Ndn/Viewer","models/Ndn/Services","models/Ndn/Widget/Settings","models/Ndn/Widget/Settings/Browser","models/Ndn/Utils/UrlParser","models/Ndn/Utils/Time","models/Ndn/Widget/Config","models/Ndn/Widget/Params","models/Ndn/LoyaltyProgram","models/Ndn/EventHub","models/Ndn/Utils/DomElement","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/Helpers","models/Ndn/AdBlockDetector","models/Ndn/Analytics/ChartbeatStrategy","models/Ndn/Viewer/ViewerModule/VideoPlayer","models/Ndn/Viewer/ViewerModule/Inform","models/Ndn/Enum/Wgt","models/Ndn/Enum/ViewerModuleId","models/Ndn/Enum/DestructReason","models/Ndn/Debug","lib/jquery_plugins/jquery.json","lib/respond"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y,A,v,_,E,b,C,S,N,I,w){var T=0,P=n.Model.extend({defaults:{config:null,templates:null,initialConfig:null,placedBy:null,containerElement:null,viewer:null,videoFeeder:null,embedIndex:null,adOpportunityIndex:null,cpvNumber:null,widgetUid:null,configComplete:!1,settings:null,loyaltyProgram:null,settingsPending:!1,debugEvents:null,providedContainerElementHtml:null,isModal:!1,carousel:null,thumbnailCarousel:null,isReadyToBegin:!1,isDestroyed:!1,nextStepParams:null,hasBeenUnmuted:!1},initialize:function(e){this.set({initialConfig:t.extend({},e),config:e,adOpportunityIndex:0,isReadyToBegin:!1,isDestroyed:!1,stepParams:{},debugEvents:{},cpvNumber:0}),this.manageLoyaltyProgram(),this.manageEvents()},initializeVideoFeeder:function(){var e=this.getCachedSettings(),t=e.settings.behavior.videos;if(t){var i=new a({productSettings:e,playlists:t.schedule});i.setNextVideo(t.firstVideo),this.set("videoFeeder",i)}},initializeView:function(){var e=this.getContainerElement(),t=this.getConfig();e.addClass(P.getDomClassIdentifier(this.getConfig().type));var i=this.get("widgetView");this.set("view",new i({el:e.get(0),model:this})),t.width&&e.width(t.width),t.aspectRatio&&A.maintain(e,t.aspectRatio),!t.aspectRatio&&t.height&&e.height(t.height),this.get("view").updateSelectableVideos()},initializeViewer:function(){this.assignViewer(new s({containerElement:e("#"+this.getViewerContainerId()),usesVideoJs:this.getDeliverySettings().videojs}));var t=this.getViewer(),i=this.getVideoFeeder(),n=function(e){t.setLoadingScreenImage(e.videoData[t.getContainerElement().width()>400?"stillImageXLUrl":"stillImageUrl"])};i.on("videoFed",n),i.peekNextVideo().done(n)},getStep:function(e){var t=this["step"+e];return"function"==typeof t?t.bind(this):void 0},setStepParams:function(e,t){this.get("stepParams")[e]=t},getStepParams:function(e){var t=this.get("stepParams"),i=t[e]||{};return delete t[e],i},steps:function(t){var i=this;return e.Deferred(function(e){if(!t.length)return e.resolve();var n=i.getStep(t.shift());n().done(function(){i.steps(t).done(e.resolve)})}).promise()},manageLoyaltyProgram:function(){var t=this.getConfig();t.loyaltyProgramId&&this.set("loyaltyProgram",new f({id:t.loyaltyProgramId,customData:function(){try{return e.parseJSON(t.loyaltyProgramData)}catch(i){return{}}}()}))},manageEvents:function(){this.manageAnalytics(),this.manageHooks(),this.debugEvents();var e=this;this.on({viewerInitialized:function(){var t=e.getCachedSettings();t.settings.analytics.chartbeat.enabled&&E.enableForNdnProduct(e),this.getViewer().on("adEnd",function(){e.get("loyaltyProgram")&&e.get("loyaltyProgram").execute()}),this.getViewer().on("volumeUpdate",function(t){t.isMuted||e.set("hasBeenUnmuted",!0)})},configComplete:function(){r.injectCss(this.getConfig().type)}})},manageAnalytics:function(){function t(t,i){e.each(i,function(){var e=this+"";t.on(e,function(t){o.trigger("analytics:"+e,t||{})})})}var i=["videoLoad","videoStartRequest","videoQuartile","adRequest","adLoad","adError","adMute","adUnmute","adPause","adResume","adQuartile","playerStart","playerInView","thumbnailClickthrough"],n=["widgetEmbedStart","configComplete","widgetEmbedEnd"],o=this;t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),i)})},manageHooks:function(){function t(t,n){e.each(n,function(e,n){t.on(e,function(t){i.trigger("hook:"+e,n(t)||{})})})}var i=this,n={widgetEmbedStart:function(){},configComplete:function(){},widgetEmbedEnd:function(){}},o={adStart:function(){},videoStart:function(){},videoPause:function(e){return{currentTime:e.currentTime}},videoLoad:function(e){return{playOnLoad:e.playOnLoad,videoData:e.videoData,params:{dfpIuValue:i.getProductSettings().settings.dfp.adUnitCode}}},videoEnd:function(){return{}},adCompanion:function(e){return{content:e.content}}},i=this;t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),o),this.getViewer().on({adPause:function(){i.trigger("hook:pause",{currentTime:0})},videoPause:function(e){i.trigger("hook:pause",{currentTime:e.currentTime})}})})},debugEvents:function(){function t(t,i){e.each(i,function(){var i=this+"";t.on(i,function(t){var n=o.get("debugEvents"),r=t&&t.viewer&&"undefined"!=typeof t.viewer.sessionIndex?t.viewer.sessionIndex:-1,a=n[r]||(n[r]=[]);a.push({name:i,data:function(){var i={};return t&&e.each(t,function(e,t){"object"!=typeof t&&"function"!=typeof t&&(i[e]=t)}),i}(),timestamp:p.getTimestamp()})})})}if(w.isEnabled()){var i=["viewerModuleStart","playerLoad","videoLoad","videoStartRequest","videoQuartile","adRequest","adLoad","adError","adMute","adUnmute","adPause","adResume","adQuartile","viewerModuleEnd"],n=["widgetEmbedStart","configComplete","widgetEmbedEnd"],o=this;this.get("debugEvents")[-1]=[{name:"jsLoad",data:{},timestamp:_nw2e.embedJsStart},{name:"pageLoad",data:{},timestamp:_nw2e.initialized}],t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),i)})}},triggerEvent:function(t,i,o){if(o){var o=o.split(",");e.each(o,e.proxy(function(e,o){o=o.replace(/\s/g,""),n.Model.prototype.trigger.call(this,o+":"+t,i)},this))}else n.Model.prototype.trigger.apply(this,arguments)},isNdnPlayerSuiteProduct:function(){return!0},hide:function(){this.getContainerElement().attr("style","display:none !important")},setIsModal:function(e){this.set("isModal",e)},isModal:function(){return this.get("isModal")},getObservableData:function(){return{data:{containerElement:this.getContainerElement().get(0),embedIndex:this.get("embedIndex")},identifiers:[this.getContainerElement().attr("id"),"#"+this.get("embedIndex")]}},onceConfigIsComplete:function(e){this.get("configComplete")?e():this.once("configComplete",e)},getConfig:function(){return this.get("config")},getTemplate:function(e){var t=this.get("templates");return"undefined"!=typeof t[e]?t[e]:null},getPltValue:function(){return h.getPltValue(this.get("config"),this.getCachedSettings())},getEmbedIndex:function(){return this.get("embedIndex")},onceReadyToBegin:function(){var t=this;return e.Deferred(function(e){var i=t.getCachedSettings();o.getAnalyticsIds().done(function(){var t=i.settings.deliverySettings,n=t.secretMediaTimeoutUI;_.hasAdBlocker(n).done(function(){e.resolve()})})}).promise()},selectVideo:function(e){var t=(this.getVideoFeeder(),this.getViewer()),i=this.getBrowserSettings().isAbleToPlayVideoAutomatically,n=this;e.source&&i&&this.trigger("analytics:videoStartRequest",{source:e.source,playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,viewer:t.getViewerEventData()}),this.getViewer().halt(),this.getVideoFeeder().setNextVideo(e),this.set("cpvNumber",0),this.stepUI({playOnLoad:i}).done(function(){n.stepCP()})},begin:function(){return e.Deferred(function(){deferred.resolve()}).promise()},embed:function(){var t=this;return e.Deferred(function(e){t.initializeVideoFeeder(),t.initializeView(),t.initializeViewer(),e.resolve(t)}).promise().done(function(){t.trigger("widgetEmbedEnd"),t.onceReadyToBegin().done(function(){t.set("isReadyToBegin",!0),t.trigger("readyToBegin"),t.begin()})})},isReadyToBegin:function(){return this.get("isReadyToBegin")},isDestroyed:function(){return this.get("isDestroyed")},isInView:function(t){if("undefined"==typeof t&&(t=e(this.get("containerElement"))),P.isEmbeddedByIframe())return!1;var i=e(window).height()+e(window).scrollTop(),n=i>=t.offset().top+Math.floor(t.height()/2),o=e(document).scrollTop()>=t.offset().top+Math.floor(t.height()/2);return!n||o?!1:!0},getSettings:function(){return this.fetchSettings()},getCachedSettings:function(){return this.get("settings")},fetchSettings:function(){var t=this;return e.Deferred(function(e){if(t.get("settings"))e.resolve(t.get("settings"));else if(t.get("settingsPending"))t.once("settingsReceived",function(t){e.resolve(t)});else{t.set("settingsPending",!0);var i=t.getConfig();l.fetch({productType:i.type,embedIndex:t.get("embedIndex"),trackingGroup:i.trackingGroup,configId:i.widgetId,playlistId:i.playlistId,playlistItemsLimit:h.getPlaylistItemsLimit(i.type),videoId:i.videoId,providerId:i.providerId,providerStoryId:i.providerStoryId}).done(function(i){d.process(i,t.get("config"),t.get("overrides")).done(function(i){t.set("config",i.config),t.set("settings",i),t.set("configComplete",!0),t.trigger("configComplete",t.get("config")),e.resolve(t.get("settings")),t.trigger("settingsReceived",t.get("settings"))})}).fail(function(t){w.logs(function(){w.trace("widget","[Ndn_Widget] fetchSettings() Settings could not be received")}),e.reject(t)})}}).promise()},getProductSettings:function(){return this.get("settings")},getDeliverySettings:function(){return this.getProductSettings().settings.deliverySettings},getBrowserSettings:function(){return this.getProductSettings().settings.browser},getBehaviorSettings:function(){return this.getProductSettings().settings.behavior},hasRmmEnabled:function(){return this.getCachedSettings().settings.behavior.rmm.enabled},isLaunchToStudioEnabled:function(){return!!this.get("settings").launchToStudio&&(this.get("settings").launchToStudio.enabled||!1)},getLandingPageUrl:function(i){var n=this.get("config"),o={type:"VideoPlayer/16x9",trackingGroup:n.trackingGroup,widgetId:n.widgetId,playlistId:n.playlistId,siteSection:n.siteSection,embedOriginUrl:encodeURIComponent(P.getEmbedOriginUrl())},i=t.extend(i,o),r="";if(i.videoId=""+i.videoId,this.isLaunchToStudioEnabled()){r=this.get("settings").launchToStudio.url;var a={videoId:i.videoId,playlistId:i.playlistId};r+="?"+e.param(a)}else r="http://"+P.getAppDomain()+"/",r+="?type="+i.type,r+="&"+e.param(t.omit(i,"type"));return r},getPlacedByAnalyticsString:function(){var t={jsapi:1,ppembed:2,wordpress:3,fromSlider:4,recommender:5,videowire:6,legacyjsapi:100},i=[];return e.each(this.get("placedBy"),function(){var e=this;"undefined"!=typeof t[e]&&i.push(t[e])}),"."+i.join(".")+(i.length?".":"")},getVideoDataForLaunchers:function(i){var n=[];return t.each(i,e.proxy(function(e){var t={videoId:e.videoId,videoTitle:e.videoTitle,landingPageUrl:this.getLandingPageUrl({videoId:e.videoId}),thumbnailUrl:e.thumbnailUrl,provider:{logoUrl:e.provider.logoUrl,name:e.provider.name},stillImageUrl:e.stillImageUrl};n.push(t)},this)),n},handleApiInstruction:function(t){if("destruct"==t)this.destruct(I.API_CALL);else if("videoPause"==t||"videoPlay"==t)this.onceConfigIsComplete(e.proxy(function(){if(this.getViewer()&&this.getViewer().isActive()){var e=this.getViewer().getActiveModule();"videoPause"==t&&e.pause(),"videoPlay"==t&&e.play()}},this));else if("report"==t){var i=this;!function(){var t="http://developers.inform.com/inform-player-suite/timeline/";e.ajax({url:t,type:"POST",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{sessions:e.toJSON(i.getDebugInfo())}}).done(function(e){console.log(e.reportUrl),window.open(e.reportUrl,"_blank")})}()}},assignViewer:function(e){this.set("viewer",e),this.trigger("viewerInitialized")},getView:function(){return this.get("view")},getViewer:function(){return this.get("viewer")},getViewerContainerId:function(){return"inform-viewer-container-"+this.getEmbedIndex()},getContainerElement:function(){return e(this.get("containerElement"))},getVideoFeeder:function(){return this.get("videoFeeder")},getAdOpportunityIndex:function(){return this.get("adOpportunityIndex")},getCpvNumber:function(){return this.get("cpvNumber")},getPbValue:function(e){return g.getPlayerBehaviorId(this.getProductSettings(),e)},getDefaultPlaybackMode:function(){return b.getDefaultPlaybackMode()},getDebugInfo:function(){var e=this.getViewer(),i=e?e.getDebugInfo():{};return t.extend({settings:this.getProductSettings(),events:this.get("debugEvents")},i)},destruct:function(e,t){var i=this.getContainerElement().attr("id");this.set("isDestroyed",!0),o.unintegrateWidget(this),this.getContainerElement().remove();var n=this.getViewer();n&&n.destroy(),this.triggerEvent("destruct",{containerElementId:i,reasonId:e||I.UNKNOWN,reasonMessage:t||""},"hook,analytics")},resetUI:function(){var e=this;e.getVideoFeeder().reset(),e.set("cpvNumber",0),e.setStepParams("UI",{playOnLoad:!1}),e.stepCP()},iterateStep:function(t,i){function n(i){return e.Deferred(function(e){i>0?o.steps([t]).done(function(){n(--i).done(e.resolve)}):e.resolve()}).promise()}var o=this;return n(i)},stepA:function(i){i=i||{};var n=this.getProductSettings(),r=this.getConfig(),a=this.getViewer(),s=this.getBrowserSettings(),l=this.getDeliverySettings(),d=this.getBehaviorSettings(),c=n.settings.dfp,u=s.isDesktop,p=g.getViewerData(a.getContainerElement()),f="undefined"!=typeof i.comscore?i.comscore:!0,m=("undefined"!=typeof i.allowEasiPlayerFlash?i.allowEasiPlayerFlash:!0,i.stepLog||{}),y=a.step("A").start(),A=!1,v=this;return e.Deferred(function(e){var y=i.easiTimeout,_=g.getComscoreData({siteSection:r.siteSection,distributorName:n.distributor.name,isProviderAttributed:A}),E={videoSizeId:p.viewerSizeId,siteSection:r.siteSection,wgtValue:g.getWgtValue(r,!0),pltValue:h.getPltValue(r,n),foldPositionId:p.foldPositionId,adOpportunityIndex:v.getAdOpportunityIndex(),adBlockDetectionId:s.adBlockDetectionId,adCampaignId:c.adCampaignId,embedIndex:n.embedIndex,widgetId:r.widgetId};a.execute("easi",{adUnitType:"instream",timeout:y,channelId:o.getSetting("easiChannelId")||d.easiChannelId1||(u?75776:93697),allowFlash:i.allowEasiPlayerFlash,isHttps:s.isHttps,comscore:f&&_,customData:t.extend({spotxCallIndex:0},E)},m).done(function(){return m.adsPlayed?e.resolve():void(u&&2==l.rmm_easi_attempts?a.execute("easi",{adUnitType:"instream",timeout:y,channelId:o.getSetting("easiChannelId2")||d.easiChannelId2||109285,allowFlash:i.allowEasiPlayerFlash,isHttps:s.isHttps,comscore:f&&_,customData:t.extend({spotxCallIndex:1},E)},m).done(function(t){t.adsPlayed?e.resolve():v.steps(["D"]).done(e.resolve)}):v.steps(["D"]).done(e.resolve))})}).promise().done(function(){v.set("adOpportunityIndex",v.getAdOpportunityIndex()+1),y.end()})},stepAA:function(){var e=this.getViewer().step("AA").start(),t=this.getDeliverySettings();return this.iterateStep("A",t.rmm_cp).done(function(){e.end()})},stepUI:function(t){var i=this.getCachedSettings(),n=this.getDeliverySettings(),o=this.getBrowserSettings(),r=i.config,a=this.get("viewer"),s=this.getVideoFeeder(),l=a.step("UI").start(),d=this;return t=t||this.getStepParams("UI"),e.Deferred(function(l){s.getNextVideo().done(function(s){c.isAbleToAutoplaySoundOn(o).done(function(c){var u=!1,p=!0,h="undefined"!=typeof t.playOnLoad?t.playOnLoad:!0,f=(d.get("hasBeenUnmuted"),!(h||t.playOnInView||t.playOnMouseover),!1),m=n.force_html5_ui?"html":d.getDefaultPlaybackMode(),y=d.getCpvNumber(),A=s.videoData,v=!0,_=a.getViewerModule("inform"),E=_?_.getVideoLoadIndex()+1:0,b=g.getPlayerBehaviorId(i,u),N=S.UI,I=d.getPltValue();a.execute("inform",{dfp:function(){return r.adsEnabled?{adTagUrl:g.getImaAdTagUrl({productSettings:i,videoData:A,viewerData:g.getViewerData(a.getContainerElement()),isMuted:f,isProviderAttributed:p,playbackMode:m,analyticsTimelineEventIndex:null,videoLoadIndex:E,cpvNumber:y,playerInstanceTypeId:C.viewerModuleId,pbValue:b,wgtValue:N,pltValue:I,now:e.now()}),ppid:i.settings.dfp.publisherProvidedId,adBlockDetectionId:i.settings.browser.adBlockDetectionId}:void 0}(),comscore:g.getComscoreData({siteSection:r.siteSection,distributorName:i.distributor.name,isProviderAttributed:p,videoData:A}),share:g.getShareData({shareSettings:i.settings.share,videoData:A}),videoData:A,isMuted:f,isBumperVideo:u,playOnLoad:h,playOnMouseover:t.playOnMouseover||!1,playOnInView:t.playOnInView||!1,playbackMode:m,pauseCarousel:t.pauseCarousel,endslate:t.endslate,showControls:v,pbValue:b,wgtValue:N,videoIndex:s.videoIndex,videoLoadIndex:E,playlistId:s.playlistId,cpvNumber:d.getCpvNumber(),highRenditionPreferred:o.isDesktop}).done(l.resolve)})})}).promise().done(function(){d.set("cpvNumber",d.getCpvNumber()+1),l.end()})},stepL:function(t){var i=this.getProductSettings(),n=this.getViewer(),o=n.step("L").start(),r="undefined"!=typeof t.usesDfp?t.usesDfp:!1,a=this;return e.Deferred(function(e){var o=t.wgtValue,s=a.getPltValue();n.execute("lkqd",{playOnInView:{percentage:20,delay:0},config:g.getLkqdConfig({usesDfp:r,productSettings:i,viewerData:g.getViewerData(n.getContainerElement()),wgtValue:o,pltValue:s}),wgtValue:o,pltValue:s}).done(e.resolve)}).promise().done(function(){o.end()})},stepCP:function(){function t(){return e.Deferred(function(e){r.getCpvNumber()<=n.continuousPlay?r.stepUI().done(function(){t().done(e.resolve)}):e.resolve()}).promise()}var i=this.getCachedSettings(),n=i.config,o=this.getViewer().step("CP").start(),r=this;return t().done(function(){o.end(),0===n.continuousPlay&&r.getVideoFeeder().reset(),r.set("cpvNumber",0),r.stepUI({playOnLoad:!1,endslate:0===n.continuousPlay?"":"playlistPause"}).done(function(){r.stepCP()})})},stepR:function(){var t=this.getCachedSettings(),i=t.config,n=this.getBrowserSettings(),o=(this.getDeliverySettings(),this.getBehaviorSettings()),r=this.getViewer().step("R").start(),a=this;return e.Deferred(function(e){if(n.isDesktop){if(i.autoPlay)return e.resolve();o.rmm.earlyContent?a.steps(["B","A","A"]).done(e.resolve):a.steps(["A","A","B"]).done(e.resolve)}else a.steps(["A","A"]).done(e.resolve)}).promise().done(function(){a.getVideoFeeder().reset(),r.end()})},stepD:function(t){var i=this.getProductSettings(),n=this.getConfig(),o=this.getViewer(),r=this.getBrowserSettings(),a=this.getDeliverySettings(),s=t.displayAdDuration,l=this.getBehaviorSettings(),d=r.isDesktop,c=o.step("D").start();return e.Deferred(function(e){-1!=s?l.rmm.rtkEnabled?o.execute("rtk",{duration:s,trackingGroup:n.trackingGroup,useDfpMacro:a.rtk_dfp,auctionId:a["rtk_"+(d?"d":"nd")+"_auctionId"],adUnitShortcode:a["rtk_"+(d?"d":"nd")+"_shortcode"]}).done(e.resolve):o.execute("displayAd",{duration:s,adCampaignId:n.trackingGroup,pltValue:h.getPltValue(n,i),embedOriginUrl:r.embedOriginUrl,isBlacksheep:a.da_blacksheep,isPremium:a.da_premium,site:t.displayAdOverrideSite,zonesize:t.displayAdOverrideZonesize,isHtml5:"undefined"!=typeof l.displayAdHtml5?l.displayAdHtml5:!r.isDesktop}).done(e.resolve):e.resolve()}).promise().done(function(){c.end()})},stepB:function(t){var t="undefined"==typeof t?!0:t,i=this.getCachedSettings(),n=i.config,o=this.get("viewer"),r=o.step("B").start(),a=this.getVideoFeeder(),s=!0,l=this,d=g.getPlayerBehaviorId(i,s),c=g.getWgtValue(n,s),u=l.getPltValue();return e.Deferred(function(e){return t?void a.peekNextVideo().done(function(t){var r=t.videoData,a=o.getViewerModule("inform"),p=a?a.getVideoLoadIndex()+1:0,h=b.viewerModuleId===N.VIDEO_JS?"videoJs":"amp";o.execute(h,{comscore:g.getComscoreData({siteSection:n.siteSection,distributorName:i.distributor.name,isRmm:s,videoData:r}),videoData:r,isMuted:!0,isBumperVideo:!0,playOnLoad:!0,playbackMode:"html",showControls:!1,pbValue:d,wgtValue:c,pltValue:u,videoIndex:t.videoIndex,videoLoadIndex:p,playlistId:t.playlistId,cpvNumber:l.getCpvNumber()}).done(e.resolve)}):e.resolve()}).promise().done(function(){r.end()})}},{addHook:function(e,t){return o.addHook(e,t)},getEmbedOriginUrl:function(){return o.getEmbedOriginUrl(arguments)},isBuilt:function(){return o.isBuilt(arguments)},isOnSsl:function(){return o.isOnSsl()},getAppUrl:function(){return o.getAppUrl(arguments)},getAppDomain:function(){return o.getAppDomain(arguments)},isEmbeddedByIframe:function(){return o.isEmbeddedByIframe(arguments)},isOnAppPage:function(){return o.isOnAppPage(arguments)},getNextEmbedIndex:function(){return T++},getDomClassIdentifier:function(e){return"ndn_widget_"+e.charAt(0).toUpperCase()+e.slice(1).replace("/","-")},embed:function(i,n,a,s){a=a||[],s=s||{};var l="undefined"!=typeof i.nodeType&&1==i.nodeType,d=l?null:i;return i=e(l?i:"#"+d),e.Deferred(function(e){if(!i.length){var c;if(c=l?"Invalid dom element provided for embed":'Unable to find dom element with id "'+d+'" for embed',_nw2e.errorReporting)throw c;return e.reject(c)}var p=y.getFullHtml(i.get(0));h.processConfigFromElement(i,n,a).done(function(n){if(i.hasClass("ndn_embedding")||i.hasClass("ndn_embedded"))return void e.reject("duplicateEmbedProcess");i.addClass("ndn_embedding").addClass("ndn_embed").addClass("ndn_embedContainer");var l="undefined"!=typeof s.embedIndex?s.embedIndex:P.getNextEmbedIndex(),d="ndn-widget-embed-"+(l+1);i.addClass(d).data("ndn-widget-uid",d),n.placementId&&i.attr("id",n.placementId);var c=function(){return"undefined"==typeof i.attr("id")&&i.attr("id",d),i.attr("id")}();return i.hasClass("ndn_embed_wordpress")&&a.push("wordpress"),m.on("hook:"+c+"/widgetEmbedStart",function(t){e.resolve(t.system.widget)}),n.distributorId&&!n.legacyEmbedUrl?(h.hasUpdatedEmbedCode(i,a)?(h.retrofitEmbedCode(n,i),i.attr("data-type","VideoPlayer/Single")):i.attr("data-config-type","VideoPlayer/Single"),void function(){var e=u.getUrlVar("ndn_ppEnv")?u.getUrlVar("ndn_ppEnv")+"-dme.newsinc.com":"dmeserve.newsinc.com",t={paths:{}};t.paths["perfectPixel"+n.distributorId]=v.getHttpProtocol()+"//"+e+"/dpid/"+n.distributorId+"/PPEmbed";var i=_nw2e.requireConfig(t);i(["perfectPixel"+n.distributorId],function(){})}()):(n.distributorId&&n.legacyEmbedUrl&&a.push("ppembed"),o.isInLaunchedBrowserWindow()&&a.push("fromSlider"),h.processAspectRatio(i,n,a),void o.getProductModel(n.type,s.productModel).done(function(c){s.embedIndex=l;var u=new c(n).set({initialContainerElementHtml:p,containerElement:i.get(0),embedIndex:l,widgetUid:d,placedBy:a,overrides:s});t.contains(a,"mock")||o.integrateWidget(u),u.trigger("widgetEmbedStart",{initialContainerElementHtml:p,initialConfig:u.get("initialConfig")}),r.injectCss(u.getConfig().type),u.fetchSettings().done(function(){u.embed().done(e.resolve)}).done(function(){i.addClass("ndn_embedded").removeClass("ndn_embedding")}).fail(function(t){u.hide(),e.reject(t)})}))})}).promise()},initializeBehaviorSettings:function(e){}});return _nw2e.Ndn_Widget=P,P}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/AbstractModel",["jquery","models/Ndn/Widget","models/Ndn/Utils/DomElement","models/Ndn/Enum/Wgt"],function(e,t,i,n){return t.extend({beginUi:function(e){e=e||{};var t=this.getConfig(),o=this.getVideoFeeder(),r=(this.getDeliverySettings(),this.getViewer()),a="undefined"!=typeof e.mmaPlayerDelay?e.mmaPlayerDelay:-1,s=this;o.peekNextVideo().done(function(e){var o=t.videoId&&e.videoData.videoId!=t.videoId;if(o&&t.hideWhenUnavailable)return s.hide();if(a>=0){var l=i.onceIsInViewVertically(s.getContainerElement(),20,a).done(function(){r.halt(),s.stepL({wgtValue:n.MMA}).done(function(){s.getVideoFeeder().reset(),s.set("cpvNumber",0),s.beginUi()})});r.on("videoStartRequest",function(){l.reject()})}s.stepUI({playOnLoad:t.autoPlay,playOnMouseover:t.playOnMouseover,playOnInView:t.playOnInView,endslate:o?"videoNotAvailable":""}).done(function(){s.stepCP()})})}})}),Ndn_Require.define("text!templates/ndn/modal-embed/default.html",[],function(){return'<div class="ndn_modalEmbed">\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n	<div class="ndn_closeModal"></div>\n</div>'}),Ndn_Require.define("text!templates/ndn/modal-embed/expandable.html",[],function(){return'<div class="ndn_modalEmbed ndn_modalEmbed_expandable">\n	<div class="ndn_videoTitle"></div>\n	<div class="ndn_modalEmbed_options">\n		<div class="ndn_modalEmbed_expand">(Expand)</div>\n		<div class="ndn_modalEmbed_close">(Close)</div>\n	</div>\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/ModalEmbed",["underscore","jquery","backbone","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Enum/DestructReason","text!templates/ndn/modal-embed/default.html","text!templates/ndn/modal-embed/expandable.html"],function(e,t,i,n,o,r,a,s,l){var d=0;return i.Model.extend({defaults:{templates:{"default":s,expandable:l},sourceProduct:null,product:null,modalEmbedIndex:null,container:null},getNextModalEmbedIndex:function(){return d++},initialize:function(e,i){o.getSetting("launchModalEmbedsV2")&&(i=t.extend({},i,{type:"VideoPlayer/Inline590"})),this.set({sourceProduct:e,productConfig:i,modalEmbedIndex:this.getNextModalEmbedIndex()}),this.initializeDom()},getInnerContainer:function(){return t("#ndn-modal-embed-"+this.get("modalEmbedIndex"));
},initializeDom:function(){var i=778,n=825,o=t('<div class="ndn_modalEmbedScreen"></div>').appendTo("body"),s=t('<div class="ndn_modalEmbed"><div id="ndn-modal-embed-'+this.get("modalEmbedIndex")+'" data-config-type="VideoPlayer/16x9" data-config-playlist-id="'+this.get("productConfig").playlistId+'"  data-config-tracking-group="'+this.get("productConfig").trackingGroup+'" data-config-video-id="'+this.get("productConfig").videoId+'" data-config-widget-id="'+this.get("productConfig").widgetId+'" data-config-site-section="'+this.get("productConfig").siteSection+'"></div><div class="ndn_closeModal"></div></div>');o.css("opacity","0.7");var l=Math.max(20,Math.floor((t(window).height()-n)/2));s.css({top:t(window).scrollTop()+l+"px",width:i+"px"});var d=t.proxy(function(){s.css("left",Math.floor(t(window).width()/2)-Math.floor(i/2)+"px")},this);d(),t("body").append(s),t(window).resize(e.debounce(d,500)),r.embed(this.getInnerContainer().get(0),this.get("productConfig"),["fromSlider"],{behaviorSettings:{isModal:!0}}).done(t.proxy(function(e){e.setIsModal(!0),this.set("product",e)},this));var c=t.proxy(function(){this.get("product")&&this.get("product").destruct(a.MODAL_PRODUCT_CLOSED),o.hide(),s.hide()},this);o.on("click",c),s.on("click",".ndn_closeModal",c),this.set("container",s)}})});var _ndnq=_ndnq||[];Ndn_Require.define("views/Ndn/AbstractView",["jquery","underscore","backbone","mustache","models/Ndn/Widget/Config","models/Ndn/ModalEmbed","models/Ndn/Utils/UserAgent","models/Ndn/Carousel","jquery_autoellipsis","jquery_responsive_containers"],function(e,t,i,n,o,r,a,s){return i.View.extend({initialize:function(){i.View.prototype.initialize.apply(this,arguments),this.initializeDom();var t=this.model,n=this;t.on("viewerInitialized",function(){var e=t.getViewer();e.on({videoLoad:function(){n.updateSelectedVideoUpNext(),n.updateCarouselSlide()},videoStart:function(){n.updateSelectedVideoNowPlaying()},videoStartRequest:function(e){"selectVideo"==e.action&&t.selectVideo({playlistIndex:e.playlistIndex,videoIndex:e.videoIndex})}})}),this.$el.on("mouseenter",".ndn_sliderNavButtonContents",function(){e(this).addClass("ndn_hover"),(a.isMobile()||a.isOnIos())&&setTimeout(function(){e(this).removeClass("ndn_hover")}.bind(this),700)}).on("mouseleave",".ndn_sliderNavButtonContents",function(){e(this).removeClass("ndn_hover")})},initializeDom:function(){this.$el.html(n.to_html(this.model.getTemplate("default"),{viewerContainerId:this.model.getViewerContainerId()}))},getViewerContainer:function(){return e("#"+this.model.getViewerContainerId())},loadImagesForSlide:function(e,t){s.loadSlidePlaceholderImages(this.$el,e,t||this.slides)},displayCompanionAd:function(t,i){if(-1!==i.indexOf("<html")){var n,o;t.html(n=e(document.createElement("iframe")).css({width:"300px",height:"250px",overflow:"hidden"}).attr("scrolling","no"));try{o=n.get(0).contentWindow.document,o.open(),o.write(i),o.close()}catch(r){this.trigger("analytics:error",{type:"AdCompanionError",error:r})}}else t.html(i)},openNdnWindow:function(e){var t=this.model.getCachedSettings().settings.launcher;if("studio"==t.behavior)window.open(e,"_blank");else{if("modal"==t.behavior&&!a.isMobile())return new r(this.model,o.getConfigFromLandingPageUrl(e)),!1;window.open(e,"ndnPlayer","scrollbars,resizable,width=768,height=825",!1)}},updateSelectableVideos:function(){},updateSelectedVideoNowPlaying:function(){},updateCarouselSlide:function(){},updateSelectedVideoUpNext:function(){}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/AbstractView",["jquery","underscore","mustache","views/Ndn/AbstractView"],function(e,t,i,n){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect"},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.selectVideo({source:"selectableVideo",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1},getSelectableVideoElements:function(){return this.$el.find(".ndn_selectableVideo")},getSelectedVideoElement:function(e){var t=this.model.getVideoFeeder(),i=(this.model.getViewer(),t.getCurrentVideo()),n=this.getSelectableVideoElements();return n.filter('[data-playlist-index="'+i.playlistIndex+'"][data-video-index="'+i.videoIndex+'"]')},updateSelectedVideoUpNext:function(){var e=this.getSelectableVideoElements(),t=this.getSelectedVideoElement();e.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),t.addClass("ndn_activeVideoNotPlaying")},updateSelectedVideoNowPlaying:function(){var e=this.getSelectableVideoElements(),t=this.getSelectedVideoElement();e.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),t.addClass("ndn_activeVideo")},updateSelectableVideos:function(){},updateCarouselSlide:function(){}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/SingleView",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t){return t.extend({})}),Ndn_Require.define("lib/jquery_plugins/jquery.drags",["jquery"],function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move",placementHook:""},t);var i=e(this),n=t.handle?i.find(t.handle):i;n.css("cursor",t.cursor),n.on("mousedown",function(n){function o(e){var n=e.pageY,o=e.pageX,r={top:a-(l-n),left:s-(d-o)};t.placementHook&&(r=t.placementHook(r)),r&&i.offset(r)}function r(e){t.onMouseUpHook&&t.onMouseUpHook(),c.off("mousemove",o),c.off("mouseup",r)}var a=i.offset().top,s=i.offset().left,l=n.pageY,d=n.pageX,c=(i.css("z-index"),e(window));c.on("mousemove",o),c.on("mouseup",r)})}}),Ndn_Require.define("models/Ndn/FloatContainer",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/DomElement","models/Ndn/Debugger","jquery_autoellipsis","lib/jquery_plugins/jquery.drags"],function(e,t,i,n,o,r,a,s){var l={width:410,height:255},d=null,c=(s.inMode("float"),i.Model.extend({defaults:{product:null,container:null,isFloating:!1,enabled:!0},initialize:function(e,t){this.set({product:e}),this.initializeDom(t.initialPosition)},initializeDom:function(t){if(this.set("container",this.get("product").getContainerElement().find("> .ndn_floatContainer")),a.onceHasWidthAndHeight(this.getContainer()).done(e.proxy(function(){this.snap(t),this.initializeEventListeners()},this)),s.inMode("floatFillpage")){for(var i=e("<p></p>"),n=0;300>n;n++)i.append("Test<br/>");i.appendTo("body")}this.getProduct().getDeliverySettings().float_closeable&&this.showCloseButton()},initializeEventListeners:function(){var t=this.getContainer(),i=this.get("product"),n=i.getViewer(),o=this;t.drags({handle:".ndn_floatContainer_header > .ndn_videoTitle",placementHook:e.proxy(function(i){if(this.isFloating()){var n=e(window).innerWidth(),o=e(window).innerHeight(),r=e(window).scrollTop(),a=e(window).scrollLeft(),s={top:i.top-r,left:i.left-a},l=t.outerWidth(),d=t.outerHeight(),c=25,u=s.top<=0+c,p=o<=s.top+d+c,h=s.left<=0+c,g=n<=s.left+l+c;return u?this.snap("top"):p?this.snap("bottom"):t.css({top:s.top,bottom:"auto"}),h?this.snap("left"):g?this.snap("right"):t.css({left:s.left,right:"auto"}),this.deselectText(),!1}},this)}),n.on("videoLoad",function(e){t.find("> .ndn_floatContainer_header .ndn_videoTitle").html(e.videoData.videoTitle)}),t.on("click",".ndn_floatContainer_close",e.proxy(function(){this.isFloating()&&(n.getActiveModule().pause(),this.unfloat())},this)),n.once("videoStart",function(){setTimeout(function(){o.showCloseButton()},3e3)});var r=e.proxy(function(){this.isEnabled()&&(this.isFloating()&&this.isPlaceholderInViewVertically()?this.unfloat():!this.isFloating()&&!this.isPlaceholderInViewVertically()&&i.getViewer().getActiveModule()&&i.getViewer().getActiveModule().isPlaying()&&this["float"]())},this);e(window).on("resize scroll",r),n.on("videoStart videoResume adStart adResume",r)},showCloseButton:function(){this.getContainer().find(".ndn_floatContainer_close").fadeIn("slow")},isEnabled:function(){return this.get("enabled")},disable:function(e){var t=this.getProduct(),i=t.getViewer().getActiveModule().isPlaying();"undefined"==typeof e&&(e=i),this.set("enabled",!1),this.unfloat(),e&&this.get("product").resetUI()},isPlaceholderInViewVertically:function(){var t=this.getProduct(),i=t.getContainerElement(),n=i.offset().top,o=n+i.outerHeight(),r=o-n,a=e(window).scrollTop(),s=a+e(window).height(),l=t.getDeliverySettings().floatPercent,d=Math.floor(r*(1-l/100)),c=Math.max(n,a),u=Math.min(o,s),p=u-c;return p>=d},getContainer:function(){return this.get("container")},getProduct:function(){return this.get("product")},isFloating:function(){return this.get("isFloating")},"float":function(){!this.isFloating()&&this.isEnabled()&&(this.getContainer().removeClass("ndn_floatContainer_disabled").addClass("ndn_floatContainer_enabled"),c.registerFloat(this),this.set("isFloating",!0),this.trigger("float"))},unfloat:function(){this.isFloating()&&(this.getContainer().addClass("ndn_floatContainer_disabled").removeClass("ndn_floatContainer_enabled"),c.unregisterFloat(this),this.set("isFloating",!1),this.trigger("unfloat"))},deselectText:function(){var e=window.getSelection?window.getSelection():document.selection;e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},snap:function(t){var i=this.getContainer(),n=e(window).width(),o=e(window).height(),r={top:{top:0,bottom:"auto"},right:{left:"auto",right:0},bottom:{top:"auto",bottom:0},middle:{top:o/2-l.height/2+"px",bottom:"auto"},center:{left:n/2-l.width/2+"px",right:"auto"},left:{left:0,right:"auto"}},a=t.split(" ");e.each(a,function(){var e=this;if("undefined"!=typeof r[e]){var t=r[e];i.css(t)}})}},{registerFloat:function(e){d&&d.disable(),d=e},unregisterFloat:function(e){d==e&&(d=null)}}));return c}),Ndn_Require.define("models/Ndn/Analytics/AdobeAnalytics",["jquery","require","backbone","models/Ndn/Debug"],function(e,t,i,n){var o;return i.Model.extend({defaults:{player:null,config:null,videoData:null,adData:null,nextAdPodPosition:1,mediaHeartbeat:null,appMeasurement:null,onceReady:null},initialize:function(t){this.set({player:t.player,config:t.config}),n.log("adobe","Adobe Analytics Enabled. Config:",t.config);var i=this;this.set("onceReady",e.Deferred(function(e){i.initializeLibraries().done(function(){o=ADB.va.MediaHeartbeat,i.initializeMediaHeartbeat(),i.initializeEventListeners(),e.resolve()})}).promise())},onceReady:function(){return this.get("onceReady")},getConfig:function(){return this.get("config")},initializeMediaHeartbeat:function(){function t(e){this._player=e}var i=new ADB.va.MediaHeartbeatConfig;i.trackingServer=this.getConfig().heartbeatsTrackingServer,i.playerName="Inform Player",i.channel="Inform Video Channel",i.debugLogging=n.inMode("adobe"),i.appVersion="2.0",i.ssl="https:"===window.location.protocol,i.ovp="Inform",e.extend(t.prototype,ADB.va.MediaHeartbeatDelegate.prototype),t.prototype.getCurrentPlaybackTime=function(){return parseInt(this._player.getActiveModule().getCurrentTime()||0)},t.prototype.getCurrentTime=function(){return parseInt(this._player.getActiveModule().getCurrentTime()||0)},t.prototype.getQoSObject=function(){return o.createQoSObject(5e4,0,24,10)},this.set("mediaHeartbeat",new o(new t(this.get("player")),i,this.get("appMeasurement")))},initializeLibraries:function(){var t=this;return e.Deferred(function(e){var i=t.getConfig();n.log("adobe","Initializing Adobe Analytics libraries. Config ==",i),Ndn_Require.require(["lib/adobeAnalytics"],function(){var o=i.mcOrgId,r=i.trackingServer,a=i.trackingServerSecure,s=i.reportSuiteId,l=(Visitor.getInstance(o,{trackingServer:r}),window[i.globalVar]);if(n.log("adobe",'Global variable "'+i.globalVar+'" ==',l),l||(l=window[i.globalVar]=new AppMeasurement,l.account=s,l.visitor=Visitor.getInstance(o),l.trackDownloadLinks=!1,l.trackExternalLinks=!1,l.trackInlineStats=!1,l.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",l.linkInternalFilters="javascript:",l.linkLeaveQueryString=!1,l.debugTracking=n.inMode("adobe"),l.trackingServer=r,l.trackingServerSecure=a),i.trackPageView){l.pageName=document.title,l.channel="Video";var d=l.t();d&&document.write(d)}t.set("appMeasurement",l),e.resolve()})}).promise()},initializeEventListeners:function(){var e=this;this.getPlayer().on({videoLoad:function(t){e.set("videoData",t.videoData),e.trackVideoLoad()},"adStart adResume videoStart videoResume":function(){e.trackPlay()},"adPause videoPause":function(){e.trackPause()},viewerModuleEnd:function(){e.trackVideoUnload()},adPlayerStart:function(){e.trackAdBreakStart({name:"Pre-Roll Ad Break",position:1,startTime:0}),e.set({adData:null,nextAdPodPosition:1})},adPlayerEnd:function(){e.trackAdBreakEnd()},adLoad:function(t){var i=t||{};e.set("adData",{id:i.adId+"",name:i.adTitle,length:parseInt(i.duration),position:e.get("nextAdPodPosition")})},adStart:function(){var t=e.get("adData");e.trackAdStart({id:t.id,name:t.name,length:t.length,position:t.position}),e.set("nextAdPodPosition",e.get("nextAdPodPosition")+1)},adEnd:function(){e.trackAdEnd()},videoEnd:function(){e.trackComplete()}})},getPlayer:function(){return this.get("player")},getMediaHeartbeat:function(){return this.get("mediaHeartbeat")},getVideoData:function(){return this.get("videoData")},trackAdBreakStart:function(e){this.getMediaHeartbeat().trackEvent(o.Event.AdBreakStart,o.createAdBreakObject(e.name,e.position,e.startTime))},trackAdStart:function(e){var t=o.createAdObject(e.name,e.id,e.position,e.length),i=e.metadata||{},n=i.campaignId||"",r={};r[o.AdMetadataKeys.ADVERTISER]=i.advertiser||"",r[o.AdMetadataKeys.CAMPAIGN_ID]=n,t.setValue(o.MediaObjectKey.StandardAdMetadata,r),this.getMediaHeartbeat().trackEvent(o.Event.AdStart,t,{affiliate:i.affiliate||"",campaign:n})},trackAdEnd:function(){this.getMediaHeartbeat().trackEvent(o.Event.AdComplete)},trackAdBreakEnd:function(){this.getMediaHeartbeat().trackEvent(o.Event.AdBreakComplete)},trackBufferStart:function(){this.getMediaHeartbeat().trackEvent(o.Event.BufferStart)},trackPlay:function(){this.getMediaHeartbeat().trackPlay()},trackComplete:function(){this.getMediaHeartbeat().trackComplete()},trackPause:function(){this.getMediaHeartbeat().trackPause()},trackSeekStart:function(){this.getMediaHeartbeat().trackEvent(o.Event.SeekStart)},trackSeekEnd:function(){this.getMediaHeartbeat().trackEvent(o.Event.SeekComplete)},trackBufferStart:function(){this.getMediaHeartbeat().trackEvent(o.Event.BufferStart)},trackBufferEnd:function(){this.getMediaHeartbeat().trackEvent(o.Event.BufferComplete)},trackVideoEnd:function(){this.getMediaHeartbeat().trackComplete()},trackVideoLoad:function(){var e=this.getVideoData(),t=o.createMediaObject(e.videoTitle+"",e.videoId+"",parseInt(e.duration),ADB.va.MediaHeartbeat.StreamType.VOD),i={};i[o.VideoMetadataKeys.EPISODE]="",i[o.VideoMetadataKeys.SHOW]="",t.setValue(o.MediaObjectKey.StandardVideoMetadata,i),this.getMediaHeartbeat().trackSessionStart(t,{isUserLoggedIn:"false",tvStation:"",programmer:""})},trackVideoUnload:function(){this.getMediaHeartbeat().trackSessionEnd()}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/single/default.html",[],function(){return'<div class="ndn_floatContainer ndn_floatContainer_disabled">\n    <div class="ndn_floatContainer_header">\n    	<div class="ndn_floatContainer_close ndn_icon ndn_icon_cancel" style="display: none;"></div>\n        <div class="ndn_videoTitle"></div>\n    </div>\n    <div class="ndn_playerContainer ndn_floatContainer_contents" id="{{viewerContainerId}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/SingleModel",["underscore","jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/SingleView","models/Ndn/FloatContainer","models/Ndn/Widget/PlayerOptions","models/Ndn/Analytics/AdobeAnalytics","text!templates/ndn/widget/video-player/single/default.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,r,a,s,l){return n.extend({defaults:{widgetView:o,templates:{"default":l},floatContainer:null,playerToggle:null,pauseVideosCarousel:null,nextExpectedAdIndex:0,expectedAds:null,expectedAdsReported:null,lastVastAdErrorCode:null,lastErrorMessage:null},initializeView:function(){n.prototype.initializeView.apply(this,arguments);var e=this.getCachedSettings().settings.behavior;e.toggle.enabled&&this.set("playerToggle",new a(this))},getNextExpectedAdIndex:function(){var e=this.get("nextExpectedAdIndex");return this.set("nextExpectedAdIndex",e+1),e},reportExpectedAd:function(e){var t=this.get("expectedAdsReported")+1;this.trigger("analytics:expectedAd",{expectedAdIndex:this.getNextExpectedAdIndex(),wasShown:e,adPodPosition:t,adPodTotal:this.get("expectedAds"),adErrorCode:e?"":this.get("lastVastAdErrorCode"),adErrorMessage:e?"":this.get("lastErrorMessage"),sessionParams:this.getViewer().getActiveSessionParams()}),this.set("expectedAdsReported",t)},initializeViewer:function(){n.prototype.initializeViewer.apply(this,arguments);var e=this.getViewer(),t=this;e.on({adPlayerStart:function(){var i=e.getActiveSessionParams();t.set({expectedAds:0===i.cpvNumber?1:2,expectedAdsReported:0,lastVastAdErrorCode:"",lastErrorMessage:""})},adStart:function(){t.reportExpectedAd(!0)},adError:function(e){e.vastErrorCode&&t.set({lastVastAdErrorCode:e.vastErrorCode,lastErrorMessage:"string"==typeof e.description?e.description.substring(0,100):"string"==typeof e.message?e.message:""})},adPlayerEnd:function(){for(;t.get("expectedAdsReported")<t.get("expectedAds");)t.reportExpectedAd(!1)}});var i=this.getCachedSettings().settings.behavior,o=i["float"];if(o.enabled){var a=new r(this,{initialPosition:o.initialPosition});this.set("floatContainer",a),a.on("float unfloat",function(){e.syncViewerSize()})}},hide:function(){n.prototype.hide.apply(this,arguments),this.get("playerToggle")&&this.get("playerToggle").hide()},destruct:function(){n.prototype.destruct.apply(this,arguments),this.get("playerToggle")&&this.get("playerToggle").hide()},stepUI:function(t){return n.prototype.stepUI.call(this,e.extend({},t||{},{pauseCarousel:this.get("pauseVideosCarousel")}))},handleApiInstruction:function(e){if(n.prototype.handleApiInstruction.apply(this,arguments),"unfloat"==e){var t=this.getViewer(),i=this.get("floatContainer");t&&t.pause(),i&&i.disable(!1)}},onceReadyToBegin:function(){var e=this;return t.Deferred(function(i){n.prototype.onceReadyToBegin.call(e).done(function(){e.getVideoFeeder().peekNextVideos(40).done(function(n){var o=[];t.each(n,function(){var e=this;o.push({playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,videoId:e.videoData.videoId,playlistId:e.playlistId,videoTitle:e.videoData.videoTitle,thumbnailUrl:e.videoData.thumbnailUrl})}),e.set("pauseVideosCarousel",o);var r=e.getDeliverySettings().adobe_analytics;r&&(r=t.secureEvalJSON(r)),r?new s({player:e.getViewer(),config:r}).onceReady().done(i.resolve):i.resolve()})})}).promise()},begin:function(){this.beginUi({mmaPlayerDelay:this.getBrowserSettings().isDesktop?-1:this.getDeliverySettings().mma})}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/StudioView",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t,i){return i.extend({syncSidePanel:function(){var e=this.$el.find(".ndn_sidePanel").hasClass("ndn_hasCompanionAd");this.$el.find(".ndn_selectableVideos").css("height",this.getSelectableVideosContainerHeight(e)),this.$el.find(".ndn_sidePanel").toggleClass("ndn_hasCompanionAd",e)},getSelectableVideosContainerHeight:function(e){var t=this.$el.find(".ndn_playerEngagement").height();return t-=34,e&&(t-=260),t},showCompanionAd:function(e){this.model.set("isShowingCompanionAd",!0),this.syncSidePanel();var t=this.$el.find(".ndn_adCompanion");this.displayCompanionAd(t,e),t.addClass("ndn_active")},hideCompanionAd:function(){this.model.set("isShowingCompanionAd",!1),this.$el.find(".ndn_adCompanion").removeClass("ndn_active").html(""),this.syncSidePanel()}})}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/StudioModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/SingleModel","views/Ndn/Widget/VideoPlayer/StudioView","text!templates/ndn/widget/video-player/single/default.html"],function(e,t,i,n,o){return i.extend({defaults:{widgetView:n,templates:{"default":o},isShowingCompanionAd:!1}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/InlineView",["jquery","underscore","mustache","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/Responsive","jquery_autoellipsis","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n,o,r){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_sliderNext":"visitNextCarouselSlide","click .ndn_sliderPrev":"visitPreviousCarouselSlide"},initializeDom:function(){n.prototype.initializeDom.apply(this,arguments),o.maintain(this.getViewerContainer(),"16:9"),o.maintain(this.getThumbnailContainer(),"16:3"),r.addBreakpoints(this.getThumbnailContainer(),{"min-width":[480,800,1200],"max-width":[481]}),this.model.setCarouselsData([[this.$el.find(".inform-selectable-videos-normal > .ndn_selectableVideos"),4,"carousel"],[this.$el.find(".inform-selectable-videos-small > .ndn_selectableVideos"),2,"smallCarousel"]])},getThumbnailContainer:function(){return this.$el.find(".ndn_selectableVideosContainer")},updateCarouselSlide:function(){var t=e(this.getSelectedVideoElement().get(0)).data("selectableVideoIndex"),i=this.model.getCarousel();i&&i.goToSlide(Math.floor(t/(this.isUsingSmallCarousel()?2:4)))},isUsingSmallCarousel:function(){return this.$el.find(".ndn_selectableVideosContainer").width()<=480},updateCarouselSlideContents:function(t){var i=this.model.getCarousel();if(i){i.processCurrentSlide(function(){e(this).find(".inform-video-title").each(function(){var t=e(this),i=t.clone().html(t.data("title"));t.replaceWith(i),i.ellipsis(),t=i;var n=t.parent().find("> .ndn_thumbnailContainer"),o=t.outerHeight(),r=t.parent().height();n.height(r-o)})})}},visitPreviousCarouselSlide:function(){this.model.getCarousel().visitPreviousSlide()},visitNextCarouselSlide:function(){this.model.getCarousel().visitNextSlide()},updateSelectableVideos:function(){var e=this.model.getVideoFeeder(),t=(this.$el.find(".ndn_selectableVideos"),this.model.getCarouselsData()),n=this;e.peekNextVideos(40).done(function(e){function o(t,o){for(var r=[],a=0;a<e.length;a+=o){for(var s=[],l=0;o>l;l++)s.push(e[a+l]);r.push(s)}t.html(i.to_html(n.model.getTemplate("selectableVideos"),{videoPages:r,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),t.find(".ndn_selectableVideo").last().data("isLast",!0)}for(var r=0;r<t.length;r++){var a=t[r],s=a[0],l=a[1];o(s,l)}n.model.initializeCarousels()})}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline/default.html",[],function(){return'<div id="{{viewerContainerId}}" class="inform-viewer" style="width:100%;position:relative;overflow:hidden;margin-bottom:10px;"></div>\n<div class="ndn_selectableVideosContainer">\n	<div class="ndn_sliderPrev ndn_sliderNavButton">\n        <div class="ndn_sliderNavButtonContents">\n            <i class="ndn_icon_left-open-big" aria-hidden="true"></i>\n        </div>\n    </div>\n    <div class="ndn_sliderWrapper inform-selectable-videos-normal">\n        <ul class="ndn_selectableVideos"></ul>\n    </div>\n    <div class="ndn_sliderWrapper inform-selectable-videos-small">\n        <ul class="ndn_selectableVideos"></ul>\n    </div>\n	<div class="ndn_sliderNext ndn_sliderNavButton">\n        <div class="ndn_sliderNavButtonContents">\n            <i class="ndn_icon_right-open-big" aria-hidden="true"></i>\n        </div>\n    </div>\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline/selectableVideos.html",[],function(){return'{{#videoPages}}\n    <li class="ndn_videoPageContainer">\n        <ul class="ndn_videoPage" style="width:100%;height:100%;">\n            {{#.}}\n                <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-playlist-id="{{playlistId}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}" title="{{videoData.videoTitle}}">\n                    <div class="ndn_selectableVideoContainer">\n                    	<div class="ndn_thumbContainer ndn_thumbnailContainer">\n                        	<div class="inform-thumbnail-container" data-src="{{videoData.thumbnailUrl}}" style="background:url(\'{{videoData.thumbnailUrl}}\');background-size:cover;"></div>\n                        	<div class="ndn_nowPlaying">Now Playing</div>\n                        	<div class="ndn_upcomingVideo">Up Next</div>\n                            <div class="ndn_thumbnailBackground"></div>\n                        	<div class="inform-video-duration">\n                        		{{videoData.displayDuration}}\n                        	</div>\n                            <div class="inform-play-icon"><div class="inform-play-icon-inner"></div></div>\n                    	</div>\n                		<div class="inform-video-title" data-title="{{videoData.videoTitle}}"></div>\n                    </div>\n                </li>\n            {{/.}}\n        </ul>\n    </li>\n{{/videoPages}}\n'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/InlineModel",["underscore","jquery","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/InlineView","models/Ndn/Carousel","text!templates/ndn/widget/video-player/inline/default.html","text!templates/ndn/widget/video-player/inline/selectableVideos.html","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n,o,r,a){return i.extend({defaults:{widgetView:n,templates:{"default":r,selectableVideos:a},carouselsData:null,carousel:null,smallCarousel:null},setCarouselsData:function(e){this.set("carouselsData",e)},getCarouselsData:function(){return this.get("carouselsData")},getCarousel:function(){return this.get(this.getActiveCarouselName())},getActiveCarouselName:function(){return this.getView().isUsingSmallCarousel()?"smallCarousel":"carousel"},initializeCarousels:function(){for(var i=this,n=function(){i.getView().updateCarouselSlideContents()},r=e.debounce(function(){var e=i.getCarousel();e.once("carouselLoad",n),e.reload()},500),a=this.getCarouselsData(),s=0;s<a.length;s++){var l=a[s],d=l[0],c=(l[1],l[2]),u=new o({isSimple:!0,containerElement:d});u.once("carouselLoad",r),u.on("slideLoad",n),this.set(c,u.load())}t(window).resize(r)},stepA:function(){return i.prototype.stepA.call(this,{easiTimeout:this.getDeliverySettings()[this.getBrowserSettings().isDesktop?"easi_t_inline_d":"easi_t_inline_nd"]})},stepD:function(){return i.prototype.stepD.call(this,{displayAdDuration:this.getDeliverySettings()[this.getBrowserSettings().isDesktop?"da_inline_d":"da_inline_nd"]})},begin:function(){var e=this.getConfig(),i=this.getVideoFeeder(),n=this;return t.Deferred(function(t){i.peekNextVideo().done(function(i){var o=e.videoId&&i.videoData.videoId!=e.videoId;return o&&e.hideWhenUnavailable?n.hide():void n.stepR().done(function(){n.stepUI({playOnLoad:e.autoPlay,playOnMouseover:e.playOnMouseover,playOnInView:e.playOnInView,endslate:o?"videoNotAvailable":""}).done(function(){n.stepCP().done(t.resolve)})})})}).promise()}},{initializeBehaviorSettings:function(e){}})});var googletag=googletag||{};googletag.cmd=googletag.cmd||[],Ndn_Require.define("models/Ndn/Ads/AdStudies",["jquery","models/Ndn/Utils/Helpers","models/Ndn/Utils/UrlParser"],function(e,t,i){var n=function(){return"1"==i.getParam("ndn_debugAdStudies","query")?function(){console.log(arguments)}:function(){}}(),o="ndn-div-gpt-ad-123456789-",r=0,a=!1,s=function(){return o+r++},l={},d={};return{initialize:function(){a||(!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var i=t.isOnSsl();e.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),a=!0)},displayAdStudy:function(t,i,o){n("displayAdStudy(",arguments,");");try{o||(o=[300,250]),this.initialize();var r=e(t);return r.hide(),n("Just hid the slot's container element, slotContainer ==",r),e.Deferred(e.proxy(function(e){var t="undefined"!=typeof l[r.attr("id")],a=t?r.attr("id"):s();t||r.attr("id",a),d[a]=d[a]||e,r.css({width:o[0],height:o[1]}),googletag.cmd.push(function(){t?(n("Refreshing slot... slotId ==",a,"; _slots[slotId] ==",l[a]),googletag.pubads().refresh([l[a]]),n("googletag.pubads().refresh() was just called...")):(n("Slot does not exist yet, so it is being created..."),r.html(""),l[a]=googletag.defineSlot(i,o,a).addService(googletag.pubads()).setCollapseEmptyDiv(!0),googletag.pubads().addEventListener("slotRenderEnded",function(e){n("[slotRenderEnded], event ==",e);var t=d[a];e.isEmpty===!1?(r.show(),t&&t.resolve()):(r.hide(),t&&t.reject()),delete d[a]}),googletag.pubads().enableAsyncRendering(),googletag.pubads().enableSingleRequest(),googletag.enableServices(),n('document.getElementById("'+a+'") ==',document.getElementById(a)),googletag.display(a),n("googletag.display("+a+"); was just called..."))})},this)).promise()}catch(a){n("PROBLEM DETECTED, e ==",a)}}}}),Ndn_Require.define("lib/jquery_plugins/jquery.simplePagination",["jquery"],function(e){var t={init:function(i){var n=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:1,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",selectOnClick:!0,onPageClick:function(e,t){},onInit:function(){}},i||{}),o=this;return o.data("paginationOptions",i),n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,this.each(function(){o.addClass(n.cssStyle+" simple-pagination").data("pagination",n),t._draw.call(o)}),n.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},_draw:function(){var i,n=this.data("pagination"),o=t._getInterval(n);t.destroy.call(this);var r="UL"===this.prop("tagName")?this:e("<ul></ul>").appendTo(this);if(n.prevText&&t._appendItem.call(this,n.currentPage-1,{text:n.prevText,classes:"prev"}),o.start>0&&n.edges>0){var a=Math.min(n.edges,o.start);for(i=0;a>i;i++)t._appendItem.call(this,i);n.edges<o.start&&o.start-n.edges!=1?r.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):o.start-n.edges==1&&t._appendItem.call(this,n.edges)}for(i=o.start;i<o.end;i++)t._appendItem.call(this,i);if(o.end<n.pages&&n.edges>0){n.pages-n.edges>o.end&&n.pages-n.edges-o.end!=1?r.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):n.pages-n.edges-o.end==1&&t._appendItem.call(this,o.end++);var s=Math.max(n.pages-n.edges,o.end);for(i=s;i<n.pages;i++)t._appendItem.call(this,i)}n.nextText&&t._appendItem.call(this,n.currentPage+1,{text:n.nextText,classes:"next"})},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(i,n){var o,r,a=this,s=a.data("pagination"),l=e("<li></li>"),d=a.find("ul");i=0>i?0:i<s.pages?i:s.pages-1,o=e.extend({text:i+1,classes:""},n||{}),i==s.currentPage||s.disabled?(s.disabled?l.addClass("disabled"):l.addClass("active"),
r=e('<span class="current">'+o.text+"</span>")):(r=e('<a href="'+s.hrefTextPrefix+(i+1)+s.hrefTextSuffix+'" class="page-link">'+o.text+"</a>"),r.click(function(e){return t._selectPage.call(a,i,e)})),o.classes&&r.addClass(o.classes),l.append(r),d.length?d.append(l):a.append(l)},_selectPage:function(e,i){var n=this.data("pagination");return n.currentPage=e,n.selectOnClick&&t._draw.call(this),n.onPageClick(e+1,i)}};e.fn.pagination=function(i){return t[i]&&"_"!=i.charAt(0)?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.pagination"):t.init.apply(this,arguments)}}),Ndn_Require.define("lib/jquery_plugins/jquery.bootpag",["jquery"],function(e){!function(e,t){e.fn.bootpag=function(t){function i(t,i){var a,s=0==r.maxVisible?1:r.maxVisible,l=1==r.maxVisible?0:1,d=Math.floor((i-1)/s)*s,c=t.find("li");if(r.page=i=0>i?0:i>r.total?r.total:i,c.removeClass("disabled"),a=1>i-1?1:r.leaps&&i-1>=r.maxVisible?Math.floor((i-1)/s)*s:i-1,c.first().toggleClass("disabled",1===i).attr("data-lp",a).find("a").attr("href",n(a)),l=1==r.maxVisible?0:1,a=i+1>r.total?r.total:r.leaps&&i+1<r.total-r.maxVisible?d+r.maxVisible+l:i+1,c.last().toggleClass("disabled",i===r.total).attr("data-lp",a).find("a").attr("href",n(a)),s=c.filter("[data-lp="+i+"]"),!s.not(".next,.prev").length){var u=d>=i?-r.maxVisible:0;c.not(".next,.prev").each(function(t){a=t+1+d+u,e(this).attr("data-lp",a).toggle(a<=r.total).find("a").html(a).attr("href",n(a))}),s=c.filter("[data-lp="+i+"]")}s.addClass("disabled"),o.trigger("page",i),o.data("settings",r)}function n(e){return r.href.replace(r.hrefVariable,e)}var o=this,r=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},o.data("settings")||{},t||{});return 0>=r.total?this:(!e.isNumeric(r.maxVisible)&&!r.maxVisible&&(r.maxVisible=r.total),o.data("settings",r),this.each(function(){var t,o,a=e(this),s=['<ul class="bootpag">'];for(r.prev&&s.push('<li data-lp="1" class="prev"><a href="'+n(1)+'">'+r.prev+"</a></li>"),o=1;o<=Math.min(r.total,r.maxVisible);o++)s.push('<li data-lp="'+o+'"><a href="'+n(o)+'">'+o+"</a></li>");r.next&&(o=r.leaps&&r.total>r.maxVisible?Math.min(r.maxVisible+1,r.total):2,s.push('<li data-lp="'+o+'" class="next"><a href="'+n(o)+'">'+r.next+"</a></li>")),s.push("</ul>"),a.find("ul.bootpag").remove(),a.append(s.join("")).addClass("pagination"),t=a.find("ul.bootpag"),a.find("li").click(function(){var n=e(this);n.hasClass("disabled")||i(t,parseInt(n.attr("data-lp"),10))}),i(t,r.page)}))}}(e,window)}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/16x9View",["jquery","underscore","mustache","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget","models/Ndn/Ads/AdStudies","models/Ndn/Utils/UserAgent","jquery_autoellipsis","lib/jquery_plugins/jquery.simplePagination","lib/jquery_plugins/jquery.bootpag"],function(e,t,i,n,o,r,a,s,l){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistTabs li a":"onPlaylistSelect","click a.ndn_accordion-toggle":"onMobileAccordionClick"},initialize:function(){n.prototype.initialize.apply(this,arguments);var t=this;this.model.on({playlistSelect:function(){t.updateSelectableVideos()}}),this.model.on("viewerInitialized",e.proxy(function(){var e=this.model.getViewer();adsEnabled=t.model.getConfig().adsEnabled,adsEnabled&&(e.on({adCompanion:function(e){t.showCompanion(e.content)},adEnd:function(){t.hideCompanion()}}),e.on({videoStart:function(){t.showAdStudy()},videoEnd:function(){t.hideAdStudy()}}))},this))},updatePlaylistTabs:function(){this.$el.find(".ndn_playlistTabs").html(i.to_html(this.model.getTemplate("playlistTabs"),{playlists:this.model.get("playlists"),feederIndex:function(){var e=0;return function(){return e++}}()}));var e=this;this.model.getVideoFeeder().peekNextVideo(function(t){e.updatePlaylistSelectedTab(t.playlistId)})},onMobileAccordionClick:function(e){return this.$el.find(".ndn_accordion .ndn_collapse").slideToggle(),!1},onPlaylistSelect:function(t){var i=e(t.currentTarget).data("feederIndex");return this.model.selectPlaylistTab(i),!1},showCompanion:function(t){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy"))e.resolve();else{var i=this.getDomElements(),n=i.companion,o=i.thumbnailPages;o.addClass("ndn_withCompanion"),this.displayCompanionAd(n,t),n.show(),this.model.set("isShowingCompanionAd",!0),this.updateSelectableVideos().done(function(){e.resolve()})}},this)).promise()},hideCompanion:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingCompanionAd")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.companion;i.removeClass("ndn_withCompanion"),n.html("").hide(),this.model.set("isShowingCompanionAd",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},showAdStudy:function(){return e.Deferred(e.proxy(function(t){var i=this.getDomElements(),n=i.adStudy,o=i.thumbnailPages;this.hideAdStudy(),s.displayAdStudy(n.get(0),this.model.getProductSettings().settings.dfp.adUnitCode).done(e.proxy(function(){o.addClass("ndn_withAdStudy"),this.model.set("isShowingAdStudy",!0),this.hideCompanion().done(e.proxy(function(){this.updateSelectableVideos().done(function(){t.resolve()})},this))},this)).fail(function(){})},this)).promise()},hideAdStudy:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.adStudy;i.removeClass("ndn_withAdStudy"),n.html("").hide(),this.model.set("isShowingAdStudy",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},getDomElements:function(){return{thumbnailPages:this.$el.find(".ndn_playlistThumbnailsPages"),paginator:this.$el.find(".ndn_playlistThumbnailsPagination"),companion:this.$el.find(".ndn_companion"),adStudy:this.$el.find(".ndn_adStudy")}},updateSelectableVideos:function(){var t=this.model,i=this;return e.Deferred(function(e){var n=i.getDomElements(),o=t.getThumbnailsPerPage();t.getThumbnailPagesHtmlData(t.getSelectedPlaylistTabIndex(),o).done(function(r){n.thumbnailPages.html(r.html),n.paginator.pagination("destroy").pagination({items:r.thumbnailCount,itemsOnPage:o,cssStyle:"pagination-centered",onPageClick:function(e,n){t.storeSelectedPage(e);var o=i.getDomElements().thumbnailPages;return o.find("> .ndn_playlistThumbnailsPage").hide(),o.find('> .ndn_playlistThumbnailsPage[data-page-number="'+e+'"]').show(),o.find(".ndn_videoTitle:visible, .ndn_videoMeta:visible").ellipsis({updateOnWindowResize:!0}),!1},prevText:"&laquo;",nextText:"&raquo;"}),i.updatePlaylistSelectedTab(t.getSelectedPlaylistTabIndex()),n.paginator.pagination("selectPage",t.getCurrentThumbnailPage()),n.paginator.toggle(n.paginator.pagination("getPagesCount")>1),e.resolve()})}).promise()},updatePlaylistSelectedTab:function(e){var t=this.$el.find(".ndn_playlistTabs"),i=t.find("li.ndn_active");i.children("a").data("playlistId")!==e&&(i.removeClass("ndn_active"),t.find("a[data-playlist-id="+e+"]").parents("li").addClass("ndn_active"))}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/default.html",[],function(){return'<div class="ndn_16-9-wrapper">\n    <div id="{{viewerContainerId}}" class="ndn_playerContainer"></div>\n</div>\n<!--LARGE DISPLAY CATEGORIES TABS START-->\n<ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_playlistTabs ndn_playlistSelectorMenu"></ul>\n<!--LARGE DISPLAY CATEGORIES TABS END--> \n<!--SMALL DISPLAY CATEGORIES TABS START-->\n<div class="ndn_accordion" id="accordion2">\n    <div class="ndn_accordion-group">\n        <div class="ndn_accordion-heading"></div>\n        <div class="ndn_openNav">\n        	<a class="ndn_accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"></a>\n        </div>\n        <div id="collapseOne" class="ndn_accordion-body ndn_in ndn_collapse">\n            <div class="ndn_accordion-inner">\n                <ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_nav-phone ndn_playlistTabs"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n<!--SMALL DISPLAY CATEGORIES TABS END--> \n<!--COMPANION CONTAINER START-->\n<div class="ndn_companion" style="display:none;"></div>\n<div class="ndn_adStudy" style="display:none;"></div>\n<!--COMPANION CONTAINER END-->\n<!--THUMBNAILS START-->\n<div class="ndn_playlistThumbnailsPages ndn_selectableVideos"></div>\n<!--THUMBNAILS END--> \n<!--PAGINATION START-->\n<div class="ndn_playlistThumbnailsPagination ndn_js_pagination ndn_pagination ndn_pagination-centered"></div>\n<!--PAGINATION START-->'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistTabs.html",[],function(){return'{{#playlists}}\n	<li><a href="#" data-feeder-index="{{feederIndex}}" data-playlist-id="{{id}}">{{label}}</a></li>\n{{/playlists}}'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html",[],function(){return'{{#thumbnailPagesData}}\n	<ul class="ndn_playlistThumbnailsPage" data-page-number="{{pageNumber}}">\n		{{#videos}}\n			<li class="ndn_selectableVideo ndn_thumb ndn_js_playlistLi" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}">\n		    	<div class="ndn_selectableVideoInner">\n		    		<div class="ndn_thumbContainer">\n		    			<img class="ndn_thbImage" src="{{videoData.thumbnailUrl}}" title="{{videoData.videoTitle}}" />\n		    			<div class="ndn_nowPlaying">Now Playing</div>\n		    			<div class="ndn_upcomingVideo">Up Next</div>\n		    		</div>\n		    		<p class="ndn_videoTitle">{{videoData.videoTitle}}</p>\n		    		<p class="ndn_videoMeta">{{videoData.displayDuration}} / {{videoData.provider.name}}</p>\n		    	</div>\n			</li>\n		{{/videos}}\n	</ul>\n{{/thumbnailPagesData}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/16x9Model",["jquery","mustache","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/16x9View","models/Ndn/VideoFeeder","text!templates/ndn/widget/video-player/16x9/default.html","text!templates/ndn/widget/video-player/16x9/playlistTabs.html","text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html"],function(e,t,i,n,o,r,a,s,l,d){return o.extend({defaults:{widgetView:r,templates:{"default":s,playlistTabs:l,playlistThumbnailsPage:d},playlists:null,selectedPlaylistId:null,videoFeeders:null,activeFeederIndex:null,selectedPlaylistTabIndex:null,selectedPageData:null,cachedThumbpagePagesHtml:null,isShowingCompanionAd:!1,isShowingAdStudy:!1,playlistItemsLimit:36},initialize:function(){o.prototype.initialize.apply(this,arguments),this.set({selectedPageData:{},videoFeeders:[]})},initializeVideoFeeder:function(){for(var e=this.getProductSettings(),t=this.getBehaviorSettings().videos,i=[],n=0;n<t.length;n++){var o=t[n],r=new a({productSettings:e,playlists:o.schedule});o.firstVideo&&r.setNextVideo(o.firstVideo),o.firstActiveFeeder&&this.set("activeFeederIndex",n),i.push(r)}this.set("videoFeeders",i)},initializeView:function(){o.prototype.initializeView.apply(this,arguments),this.get("view").updatePlaylistTabs(),this.selectPlaylistTab(this.getPlaylistTabIndexByPlaylistId(this.getConfig().playlistId))},selectVideo:function(e){this.set("activeFeederIndex",this.getSelectedPlaylistTabIndex()),o.prototype.selectVideo.apply(this,arguments)},getVideoFeeder:function(e){return e="number"==typeof e?e:this.get("activeFeederIndex"),this.get("videoFeeders")[e]},getSelectedPlaylistTabIndex:function(){return this.get("selectedPlaylistTabIndex")},embed:function(){return this.set("playlists",this.getProductSettings().associatedPlaylists),this.set("selectedPlaylistTabIndex",this.getPlaylistTabIndexByPlaylistId(this.getConfig().playlistId)),o.prototype.embed.apply(this,arguments)},getPlaylistTabIndexByPlaylistId:function(e){for(var t=this.get("playlists"),i=0;i<t.length;i++){var n=t[i];if(n.id==e)return i}},getThumbnailPageNumber:function(e){for(var t=this.getThumbnailsPerPage(),i=t-1,n=1;e>=i;i+=t)n++;return n},getDefaultPlaybackMode:function(){return"html"},begin:function(){this.beginUi()},storeSelectedPage:function(e){var t=this.get("selectedPageData");t[this.get("selectedPlaylistId")]=(e-1)*this.getThumbnailsPerPage()},getCurrentThumbnailPage:function(){return this.getThumbnailPageNumber(this.get("selectedPageData")[this.get("selectedPlaylistId")])},getSelectedPlaylistId:function(){return this.get("selectedPlaylistId")},getSelectedPlaylistTabIndex:function(){return this.get("selectedPlaylistTabIndex")},getSelectedPlaylistData:function(){return e.Deferred(e.proxy(function(e){i.getPlaylistData(this.getSelectedPlaylistId(),this.getCachedSettings()).done(function(t){e.resolve(t)})},this)).promise()},selectPlaylistTab:function(e){this.set("selectedPlaylistTabIndex",e),this.trigger("playlistSelect")},selectPlaylist:function(e){this.set("selectedPlaylistId",e),this.trigger("playlistSelect")},setCachedThumbnailPagesHtmlData:function(e,t,i){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var n=this.get("cachedThumbnailPagesHtmlData");n[t]=n[t]||{},n[t][i]=e},getCachedThumbnailPagesHtmlData:function(e,t){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var i=this.get("cachedThumbnailPagesHtmlData");return i[e]=i[e]||{},i[e][t]},getThumbnailsPerPage:function(){return this.isShowingCompanionAdOrAdStudy()?8:12},getThumbnailPagesHtmlData:function(i,n){var o=this;return e.Deferred(function(e){var r=o.getCachedThumbnailPagesHtmlData(i,n);return r?e.resolve(r):void o.getVideoFeeder(i).peekNextVideos(o.getBehaviorSettings().playlistItemsLimit).done(function(r){for(var a=r,s=[],l=function(){var e=0;return function(){return e++}}(),c=0,u=1;c<a.length;c+=n){var p=c+n<=a.length?n:Math.min(a.length%n,n);s.push({pageNumber:u++,videos:a.slice(c,c+p),selectableVideoIndex:l})}var h={thumbnailCount:a.length,html:t.to_html(d,{thumbnailPagesData:s})};o.setCachedThumbnailPagesHtmlData(h,i,n),e.resolve(h)})}).promise()},isShowingCompanionAdOrAdStudy:function(){return this.get("isShowingCompanionAd")||this.get("isShowingAdStudy")}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/AbstractView",["jquery","views/Ndn/AbstractView"],function(e,t){return t.extend({})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/SliderView",["jquery","underscore","mustache","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Carousel","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/DomElement","jquery_imagesloaded","jquery_bxslider","jquery_autoellipsis"],function(e,t,i,n,o,r,a){return n.extend({events:{"click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderContainer .ndn_sliderControls":"onThumbnailClick","click .ndn_playlistThumbnails li a":"onThumbnailClick"},updateSelectableVideos:function(){var e=this,t=this.model,n=t.getVideoFeeder();n.peekNextVideos(3).done(function(n){e.$el.find(".ndn_selectableVideos").html(i.to_html(t.getTemplate("selectableVideos"),{videos:n,trackingGroup:t.getConfig().trackingGroup,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),t.getThumbnailsEnabled()?e.renderThumbnails():e.$el.find(".ndn_playlistThumbnails").hide(),e.initializeShowcaseCarousel()})},renderThumbnails:function(){var e=this.model,t=this,n=e.getVideoFeeder();n.peekNextVideos(3).done(function(n){t.$el.find(".ndn_playlistThumbnails").html(i.to_html(e.getTemplate("thumbnails"),{videos:n,trackingGroup:e.getConfig().trackingGroup,selectableVideoIndex:function(){var e=0;return function(){return e++}}()}));var o=t.$el.find(".ndn_playlistThumbnailsList");a.onceMeetsCondition(o.find(".ndn_thumbnailContainer:first"),function(e){return e.height()>=70}).done(function(){e.set("thumbnailCarousel",o.bxSlider({pager:!1,controls:!1,maxSlides:3,minSlides:3,slideWidth:114,slideMargin:4,auto:!1,onSliderLoad:function(){t.loadImagesForSlide(0),t.centerThumbnails()},onSlideBefore:function(e,i,n){t.loadImagesForSlide(n)}})),t.$el.find(".ndn_playlistThumbnails .ndn_titleOverlay p").ellipsis({live:!0})})})},centerThumbnails:function(){this.$el.find(".ndn_playlistThumbnailsList li, .ndn_sliderItems li").each(function(){var t=e(this).find("img:not(.ndn_providerLogo)"),i=t.width()-t.closest("li").width();i=(0-Math.max(i,0))/2,t.css("margin-left",i+"px")})},initializeShowcaseCarousel:function(){var t=this.model,i=this,n=this.model.getVideoFeeder();return e.Deferred(function(e){var r,s;n.peekNextVideos(3).done(function(e){a.onceMeetsCondition(t.getContainerElement().find(".ndn_selectableVideos"),function(e){var t=e.width(),i=e.height();if(t>=300&&350>=t){var n=250/300*t;if(i>=n-1&&n+1>=i)return r=t,s=i,!0}}).done(function(){var n=new o({containerElement:t.getContainerElement().find(".ndn_selectableVideos"),auto:!0}).on({carouselLoad:function(){var n=t.getContainerElement().find(".ndn_sliderTopContainer");i.$el.find(".ndn_selectableVideos > li").css({width:n.width()+"px",height:n.height()+"px"}),i.$el.find(".ndn_sliderControls").toggle(e.length>1),i.$el.find(".ndn_producerName, .ndn_sliderVideoTitle").ellipsis()},slideLoad:function(e){var n=e.slideIndex,o=e.previousSlideIndex;if(t.getThumbnailsEnabled()&&i.isShowcaseCarouselVisible()){i.clearCurrentVideoThumbnail(),i.setCurrentVideoThumbnail(e.slideElement.data("videoId"));var r=t.get("thumbnailCarousel"),a=r.getSlideCount();n%3==0?(n>o||0==n&&o==a-1)&&r.goToNextSlide():(n+1)%3==0&&(o>n||0==o&&n==a-1)&&r.goToPrevSlide()}}}).load();t.set("carousel",n)})})}).promise()},setVideoPlayerOnScreen:function(e){this.$el.find(".ndn_videoPlayerWrapper").toggleClass("ndn_videoPlayerWrapper_loading",!e),this.isShowcaseCarouselVisible()||this.clearCurrentVideoThumbnail()},isShowcaseCarouselVisible:function(){return this.$el.find(".ndn_videoPlayerWrapper").hasClass("ndn_videoPlayerWrapper_loading")},onPrevClick:function(){return this.model.get("carousel").visitPreviousSlide(),!1},onNextClick:function(){return this.model.get("carousel").visitNextSlide(),!1},setCurrentVideoThumbnail:function(e){this.isShowcaseCarouselVisible()&&this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"] .ndn_currentVideoThumbnail').fadeIn(400)},clearCurrentVideoThumbnail:function(){this.$el.find(".ndn_currentVideoThumbnail").fadeOut(400)},onThumbnailClick:function(i){var n="";if(void 0!==e(i.currentTarget).attr("href"))n=e(i.currentTarget).attr("href");else{var o=e(t.first(this.$el.find('[data-video-index="'+this.model.get("carousel").getCurrentSlide()+'"]')));n=o.find("a").attr("href")}return this.openNdnWindow(n),i.preventDefault(),!1}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/default.html",[],function(){return'<div class="ndn_responsiveContainer ndn_sliderTopContainer">\n	<div class="ndn_sliderContainer">\n		<div class="ndn_videoPlayerWrapper">\n			<div id="{{viewerContainerId}}" class="ndn_playerContainer"></div>\n		</div>\n		<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n        <!--\n		<div class="ndn_sliderControls">\n			<div class="ndn_sliderPrev ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n			<div class="ndn_sliderNext ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n		</div>\n        -->\n	</div>\n</div>\n<div class="ndn_playlistThumbnails">\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/selectableVideos.html",[],function(){return'{{#videos}}\n    <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-selectable-video-index="{{selectableVideoIndex}}" data-video-id="{{videoData.videoId}}" title="{{videoData.videoTitle}}">\n        <a href="//launch.newsinc.com/embed.html?type=VideoPlayer/16x9&trackingGroup={{trackingGroup}}&widgetId=1&videoId={{videoData.videoId}}&playlistId={{playlistId}}">\n            <div class="ndn_sliderThumbnailOverlay">\n                <p class="ndn_sliderVideoTitle">{{videoData.videoTitle}}</p>\n                <p class="ndn_producerName">{{videoData.provider.name}}</p>\n                <div class="ndn_imagePlaceholder" data-src="{{videoData.provider.logoUrl}}" data-class="ndn_providerLogo"></div>\n            </div>\n            <div class="ndn_imagePlaceholder" data-src="{{videoData.stillImageUrl}}" data-class="ndn_centerImage"></div>\n            <div class="ndn_playButton"></div>\n        </a>\n    </li>\n{{/videos}}\n'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/thumbnails.html",[],function(){return'<h4>More videos:</h4>\n<ul class="ndn_playlistThumbnailsList">\n	{{#videos}}\n	<li class="ndn_playlistVideoThumbnail ndn_thumbnail" data-video-index="{{videoIndex}}" data-playlist-index="{{playlistIndex}}" data-video-id="{{videoData.videoId}}" data-playlist-id="{{playlistId}}" title="{{videoData.videoTitle}}">\n			<div class="ndn_thumbnailContainer">\n				<a href="//launch.newsinc.com/embed.html?type=VideoPlayer/16x9&trackingGroup={{trackingGroup}}&widgetId=1&videoId={{videoData.videoId}}&playlistId={{playlistId}}">\n					<img src="{{videoData.stillImageUrl}}"/>\n					<div class="ndn_titleOverlay">\n						<div class="ndn_thumbTitle">{{videoData.videoTitle}}</div>\n					</div>\n				</a>\n			</div>\n			<div class="ndn_currentVideoThumbnail"></div>\n		</li>\n	{{/videos}}\n</ul>\n'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/SliderModel",["jquery","underscore","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Widget/Config","models/Ndn/Analytics","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/DomElement","views/Ndn/Widget/VideoLauncher/SliderView","models/Ndn/Widget/Params","models/Ndn/Viewer/ViewerModule/DisplayAd","models/Ndn/Viewer/ViewerModule/Rtk","models/Ndn/Widget/Settings/Lkqd","models/Ndn/Enum/DestructReason","models/Ndn/Debug","text!templates/ndn/widget/video-launcher/slider/default.html","text!templates/ndn/widget/video-launcher/slider/selectableVideos.html","text!templates/ndn/widget/video-launcher/slider/thumbnails.html","jquery_responsive_containers"],function(e,t,i,n,o,r,a,s,l,d,c,u,p,h,g,f,m,y,A){var v=0;return o.extend({defaults:{widgetView:d,templates:{"default":m,selectableVideos:y,thumbnails:A},playlistItemsLimit:3,carousel:null,thumbnailCarousel:null,displayAdSpreePauses:0,hasMadeComscoreCall:!1},manageEvents:function(){o.prototype.manageEvents.apply(this,arguments);var e=this;this.on({viewerInitialized:function(){e.getViewer().on({"adStart videoStart":function(){e.toggleSliderCarousel(!1)},viewerModuleEnd:function(){e.toggleSliderCarousel(!0)}})}})},initializeView:function(){o.prototype.initializeView.apply(this,arguments),s.maintain(this.getContainerElement().find(".ndn_sliderTopContainer"),"6:5"),this.toggleSliderCarousel(!0)},onceReadyToBegin:function(){var t=this;return e.Deferred(function(e){var i=t.getDeliverySettings(),n=i.slider_limit;return n>=0&&v>=n?(t.destruct(g.SLIDER_LIMIT,"Limit of "+n+" sliders per page. Current number of sliders: "+v),e.reject()):void o.prototype.onceReadyToBegin.call(t).done(function(){l.onceMeetsCondition(t.getViewer().getContainerElement(),function(e){return e.width()>=300&&e.height()>=250}).done(e.resolve)})}).promise().done(function(){v++})},begin:function(){var t=this,i=(this.getDeliverySettings(),this.getBehaviorSettings());this.getBrowserSettings();return e.Deferred(function(e){t.steps(["LR"]).done(function(){i.rmm.displayAdSpreeEnabled&&t.steps(["DD"]).done(e.resolve)})}).promise()},stepLR:function(){var t=this.getProductSettings(),i=this.getBrowserSettings(),o=this.getDeliverySettings(),s=this.getBehaviorSettings().rmm,l=t.config,d=this.getViewer(),g=this.getVideoFeeder(),f=d.step("LR").start(),m=this;return a.trackLksEvent({isApi:!1,event:"lkqd_start"}),e.Deferred(function(e){g.peekNextVideo().done(function(a){var g=!0,f=!1,y=(m.getDefaultPlaybackMode(),m.getCpvNumber(),a.videoData),A=d.getViewerModule("inform"),v=A?A.getVideoLoadIndex()+1:0,_=(!m.get("hasMadeComscoreCall"),r.getSiteSectionSegments(l.siteSection)),E=c.getViewerData(d.getContainerElement()),b=c.getPlayerBehaviorId(t,g),C=c.getWgtValue(l,g),S=i.isDesktop,N=S&&o.easi_flash_slider,I=m.getPltValue(),w=l.trackingGroup,T=n.getEmbedOriginUrl(),P=s.rtkEnabled?p.generateCode({trackingGroup:l.trackingGroup,useDfpMacro:o.rtk_dfp,auctionId:o["rtk_"+(S?"d":"nd")+"_auctionId"],adUnitShortcode:o["rtk_"+(S?"d":"nd")+"_shortcode"]}):u.generateCode({site:"83422",zonesize:"655388-15",pltValue:I,adCampaignId:w,embedOriginUrl:T});d.execute("lkqdRmm",{distributorName:t.distributor.name,providerName:y&&y.provider.name,videoData:y,supplyId:h.getSupplyId(t.settings.ads.lkqd.supplyIds,1,!!i.isDesktop),wgtValue:C,pltValue:I,pbValue:b,adCampaignId:w,foldPositionId:E.foldPositionId,isContinuousPlay:!0,cpvNumber:m.getCpvNumber(),videoSizeId:E.viewerSizeId,siteSection:l.siteSection,siteSectionSection:_.section,siteSectionSubSection:_.subSection,siteSectionPageType:_.pageType,trackingGroup:l.trackingGroup,allowFlash:N,strictAdMode:i.isDesktop&&o.strict_ad_mode,videoType:"html",playlistId:a.playlistId,videoAssetId:c.getVideoAssetId(y?y.videoId:"",f),isModal:!1,videoLoadIndex:v,deviceTypeId:i.deviceTypeId,adBlockDetectionId:i.adBlockDetectionId,overriddenTrackingGroup:t.settings.dfp.isSafeViralOverride?t.defaultConfig.trackingGroup:null,configId:l.configId,embedIndex:t.embedIndex,videoIndex:a.videoIndex,playlistId:a.playlistId,displayAdHtml:P,embedOriginUrl:T}).done(e.resolve)})}).promise().done(function(){m.set("cpvNumber",m.getCpvNumber()+1),m.set("hasMadeComscoreCall",!0),a.trackLksEvent({isApi:!1,event:"lkqd_end"}),f.end()})},stepDD:function(){var e=this.getViewer().step("DD").start(),t=this.getBrowserSettings().isDesktop,i=this.getDeliverySettings(),n=i[t?"da_spree_d":"da_spree_nd"];return a.trackLksEvent({isApi:!1,event:"da_spree_start",data:{dis_opp_count:n}}),this.iterateStep("D",n).done(function(){a.trackLksEvent({isApi:!1,event:"da_spree_end",data:{dis_opp_count:n}}),e.end()})},stepA:function(){var e=this,t={},i=this.getDeliverySettings();return o.prototype.stepA.call(this,{easiTimeout:i.easiTimeout,allowEasiPlayerFlash:this.getBehaviorSettings().allowFlashForEasi,comscore:!this.get("hasMadeComscoreCall"),stepLog:t}).done(function(){t.hasMadeEasiComscoreCall&&e.set("hasMadeComscoreCall",!0)})},stepD:function(){var t=this.getDeliverySettings(),i=this.getBehaviorSettings(),n=this;return e.Deferred(function(e){o.prototype.stepD.call(n,{displayAdDuration:t[n.getBrowserSettings().isDesktop?"da_slider_d":"da_slider_nd"],displayAdOverrideSite:i.displayAdOverrideSite,displayAdOverrideZonesize:i.displayAdOverrideZonesize}).done(function(t){if(t&&t.adsPlayed&&n.getBehaviorSettings().rmm.displayAdSpreeEnabled){var i=n.getNextDisplayAdSpreePause();f.log("displayAdSpreePause",i),i>0?setTimeout(e.resolve,1e3*i):e.resolve()}else e.resolve()})}).promise()},getNextDisplayAdSpreePause:function(){var e=this.getBehaviorSettings().rmm.displayAdSpreePauses,t=e[Math.min(this.get("displayAdSpreePauses"),e.length-1)];return this.set("displayAdSpreePauses",this.get("displayAdSpreePauses")+1),t},toggleSliderCarousel:function(e){this.get("view").setVideoPlayerOnScreen(!e)},getThumbnailsEnabled:function(){return!n.isEmbeddedByIframe()},destruct:function(){return this.isReadyToBegin()?v--:this.on("readyToBegin",function(){v--}),o.prototype.destruct.apply(this,arguments)}},{initializeBehaviorSettings:function(e){var i=e.getBrowserSettings(),n=e.getDeliverySettings(),o=e.getBehaviorSettings(),r=o.rmm,a=i.isDesktop,s=i.isOnHomepage;r.adServer="spotx";var l=n[a?"da_slider_d":"da_slider_nd"],d=-1!=l,c=n[a?"da_spree_d":"da_spree_nd"],u=d?c>0:!1;r.displayAdSpreeEnabled=u,u&&(r.displayAdSpreePauses=function(){for(var e=n.da_spree_pause.split(" "),t=[],i=0;i<e.length;i++){var o=parseInt(e[i]);isNaN(o)||t.push(o)}return t}());var p=n[a?"da_override_d":"da_override_nd"].split("/");r.rotatingEnabled=!s||u;var h=!1;t.extend(o,{allowFlashForEasi:h,easiChannelId1:a?h?75776:171911:93697,easiChannelId2:h?109285:171912,displayAdDuration:l,displayAdsAllowed:d,displayAdOverrideSite:p[0]||null,displayAdOverrideZonesize:p[1]||null,displayAdHtml5:!a||n.da_html5_slider_d})}})}),Ndn_Require.define("text!templates/ndn/thumbnail-strip/container.html",[],function(){return'<div class="ndn_sliderPrev ndn_sliderNavButton">\n    <div class="ndn_sliderNavButtonContents">\n        <i class="ndn_icon_left-open-big" aria-hidden="true"></i>\n    </div>\n</div>\n<div class="ndn_sliderWrapper inform-selectable-videos inform-selectable-videos-normal">\n    <ul class="ndn_selectableVideos"></ul>\n</div>\n<div class="ndn_sliderWrapper inform-selectable-videos inform-selectable-videos-small">\n    <ul class="ndn_selectableVideos"></ul>\n</div>\n<div class="ndn_sliderNext ndn_sliderNavButton">\n    <div class="ndn_sliderNavButtonContents">\n        <i class="ndn_icon_right-open-big" aria-hidden="true"></i>\n    </div>\n</div>'}),Ndn_Require.define("text!templates/ndn/thumbnail-strip/pages.html",[],function(){return'{{#videoPages}}\n    <li class="ndn_videoPageContainer">\n        <ul class="ndn_videoPage" style="width:100%;height:100%;">\n            {{#.}}\n                <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-playlist-id="{{playlistId}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}" title="{{videoData.videoTitle}}">\n                    <div class="ndn_selectableVideoContainer">\n                        <div class="ndn_thumbContainer ndn_thumbnailContainer">\n                            <div class="inform-thumbnail-container" data-src="{{videoData.thumbnailUrl}}" style="background:url(\'{{videoData.thumbnailUrl}}\');background-size:cover;"></div>\n                            <div class="ndn_nowPlaying">Now Playing</div>\n                            <div class="ndn_upcomingVideo">Up Next</div>\n                            <div class="ndn_thumbnailBackground"></div>\n                            <div class="inform-video-duration">\n                                {{videoData.displayDuration}}\n                            </div>\n                            <div class="inform-play-icon"><div class="inform-play-icon-inner"></div></div>\n                        </div>\n                        <div class="inform-video-title" data-title="{{videoData.videoTitle}}"></div>\n                    </div>\n                </li>\n            {{/.}}\n        </ul>\n    </li>\n{{/videoPages}}'}),Ndn_Require.define("views/Ndn/ThumbnailStripView",["jquery","underscore","mustache","backbone","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/Responsive","text!templates/ndn/thumbnail-strip/container.html","text!templates/ndn/thumbnail-strip/pages.html","jquery_autoellipsis","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n,o,r,a,s){return n.View.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_sliderNext":"visitNextCarouselSlide","click .ndn_sliderPrev":"visitPreviousCarouselSlide"},initialize:function(){n.View.prototype.initialize.apply(this,arguments),this.initializeDom(),this.initializeEventListeners(),this.synchronizeInterface()},initializeDom:function(){var e=this.$el;e.html(i.to_html(a)),this.model.setCarouselsData([[e.find(".inform-selectable-videos-normal > .ndn_selectableVideos"),4,"carousel"],[e.find(".inform-selectable-videos-small > .ndn_selectableVideos"),2,"smallCarousel"]])},initializeEventListeners:function(){var e=this.$el;o.maintain(e,"16:3"),r.addBreakpoints(e,{"min-width":[480,800,1200],"max-width":[481]})},updateCarouselSlide:function(){var t=e(this.getSelectedVideoElement().get(0)).data("selectableVideoIndex"),i=this.model.getCarousel();i&&i.goToSlide(Math.floor(t/(this.isUsingSmallCarousel()?2:4)))},isUsingSmallCarousel:function(){
return this.$el.width()<=480},updateCarouselSlideContents:function(t){var i=this.model.getCarousel();if(i){i.processCurrentSlide(function(){e(this).find(".inform-video-title").each(function(){var t=e(this),i=t.clone().html(t.data("title"));t.replaceWith(i),i.ellipsis(),t=i;var n=t.parent().find("> .ndn_thumbnailContainer"),o=t.outerHeight(),r=t.parent().height();n.height(r-o)})})}},visitPreviousCarouselSlide:function(){this.model.getCarousel().visitPreviousSlide()},visitNextCarouselSlide:function(){this.model.getCarousel().visitNextSlide()},synchronizeInterface:function(){function e(e,n){for(var o=[],r=0;r<t.length;r+=n){for(var a=[],l=0;n>l;l++)a.push(t[r+l]);o.push(a)}e.html(i.to_html(s,{videoPages:o,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),e.find(".ndn_selectableVideo").last().data("isLast",!0)}for(var t=this.model.getVideos(),n=this.model.getCarouselsData(),o=0;o<n.length;o++){var r=n[o],a=r[0],l=r[1];e(a,l)}this.model.initializeCarousels()},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.trigger("videoSelect",{source:"selectableVideo",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1}})}),Ndn_Require.define("models/Ndn/ThumbnailStripModel",["underscore","jquery","backbone","views/Ndn/ThumbnailStripView","models/Ndn/Carousel"],function(e,t,i,n,o){return i.Model.extend({defaults:{videos:null,view:null,carouselsData:null,carousel:null,smallCarousel:null},initialize:function(e){this.set({videos:e.videos,containerElement:e.containerElement,aspectRatio:e.aspectRatio?e.aspectRatio:"16:3"}),this.set("view",new n({model:this,el:this.getContainerElement().addClass("inform-thumbnail-strip").get(0)}))},getContainerElement:function(){return this.get("containerElement")},getView:function(){return this.get("view")},getVideos:function(){return this.get("videos")},setCarouselsData:function(e){this.set("carouselsData",e)},getCarouselsData:function(){return this.get("carouselsData")},getCarousel:function(){return this.get(this.getActiveCarouselName())},getActiveCarouselName:function(){return this.getView().isUsingSmallCarousel()?"smallCarousel":"carousel"},initializeCarousels:function(){for(var i=this,n=function(){i.getView().updateCarouselSlideContents()},r=e.debounce(function(){var e=i.getCarousel();e.once("carouselLoad",n),e.reload()},500),a=this.getCarouselsData(),s=0;s<a.length;s++){var l=a[s],d=l[0],c=(l[1],l[2]),u=new o({isSimple:!0,containerElement:d});u.once("carouselLoad",r),u.on("slideLoad",n),this.set(c,u.load())}t(window).resize(r)}})}),Ndn_Require.define("views/Ndn/Widget/InViewView",["jquery","mustache","models/Ndn/ThumbnailStripModel","views/Ndn/AbstractView"],function(e,t,i,n){return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments);var e=this.$el;e.html(t.to_html(this.model.getTemplate("default"),{viewerContainerId:this.model.getViewerContainerId()})),this.model.getDeliverySettings().thumbnails_inview&&this.model.initializeThumbnailStrip(e.find(".inform-thumbnails-container"))},hide:function(){this.$el.hide()},expand:function(){this.$el.slideDown()},collapse:function(){return this.$el.slideUp().promise()}})}),Ndn_Require.define("text!templates/ndn/widget/in-view/default.html",[],function(){return'<div class="ndn_playerContainer" id="{{viewerContainerId}}" style="width:100%;height:100%;position:relative;"></div>\n<div class="inform-thumbnails-container"></div>'});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget/InViewModel",["underscore","jquery","models/Ndn/App","models/Ndn/Widget","models/Ndn/Enum/Wgt","models/Ndn/Widget/Params","models/Ndn/ThumbnailStripModel","models/Ndn/Utils/AspectRatio","models/Ndn/Enum/ViewerModuleId","models/Ndn/Enum/DestructReason","models/Ndn/Viewer/ViewerModule/Inform","views/Ndn/Widget/InViewView","text!templates/ndn/widget/in-view/default.html"],function(e,t,i,n,o,r,a,s,l,d,c,u,p){return n.extend({defaults:{widgetView:u,templates:{"default":p},playlistItemsLimit:1},initializeThumbnailStrip:function(e){var t=this;this.getVideoFeeder().peekNextVideos(4).done(function(i){var n=new a({videos:i,containerElement:e});n.on("videoSelect",function(e){t.selectVideo(e)})})},begin:function(){2==this.getDeliverySettings().inview_version?this.stepV2():this.stepV1()},stepV1:function(){var e=this.getViewer(),i=this.getProductSettings(),n=this.getBrowserSettings(),a=this.getBehaviorSettings(),s=this.getConfig(),l=e.step("V1").start(),c=this;return e.disableLoadingScreen(),t.Deferred(function(t){e.execute("easi",{adUnitType:"incontent",timeout:a.easiTimeout,channelId:a.easiChannelId,allowFlash:!0,isHttps:n.isHttps,customData:{adCampaignId:i.settings.dfp.adCampaignId,embedIndex:i.embedIndex,adBlockDetectionId:n.adBlockDetectionId,widgetId:s.widgetId,siteSection:s.siteSection,foldPositionId:r.getFoldPositionId(c.getContainerElement()),wgtValue:o.INVIEW,pltValue:c.getPltValue(),videoSizeId:r.getVideoSizeId(parseInt(e.getContainerElement().width()))}}).done(function(e){e.adsPlayed?t.resolve():c.steps(["D"]).done(t.resolve)})}).promise().done(function(){l.end(),c.get("view").collapse().done(function(){c.destruct(d.INVIEW_PRODUCT_CONCLUDED)})})},stepV2:function(){var e=this,n=this.getProductSettings(),a=this.getDeliverySettings(),s=this.getConfig(),l=this.getViewer(),d=this.getVideoFeeder(),u=l.step("V2").start(),p=!1;return t.Deferred(function(u){return e.getBrowserSettings().isDesktop?void d.peekNextVideo().done(function(d){var h=!1,g=!1,f=!0,m=e.getDefaultPlaybackMode(),y=e.getCpvNumber(),A=d.videoData,v=!0,_=l.getViewerModule("inform"),E=_?_.getVideoLoadIndex()+1:0,b=r.getPlayerBehaviorId(n,h),C=o.INVIEW,S=e.getPltValue();l.execute("inform",{dfp:{adTagUrl:r.getImaAdTagUrl({productSettings:n,videoData:A,viewerData:r.getViewerData(l.getContainerElement()),isMuted:f,isProviderAttributed:g,playbackMode:m,analyticsTimelineEventIndex:null,videoLoadIndex:E,cpvNumber:y,playerInstanceTypeId:c.viewerModuleId,pbValue:b,wgtValue:C,pltValue:S,now:t.now()}),ppid:n.settings.dfp.publisherProvidedId,adBlockDetectionId:n.settings.browser.adBlockDetectionId},comscore:r.getComscoreData({siteSection:s.siteSection,distributorName:n.distributor.name,isProviderAttributed:g,videoData:A}),isMuted:f,isBumperVideo:p,playOnLoad:!1,playOnInView:!0,playOnInViewPercent:a.inview_stp_percent,unmuteOnMouseover:!0,playbackMode:m,showControls:v,stillImage:{small:A.stillImageUrl,large:A.stillImageXLUrl},forceInstantiation:i.allowOverride("forceInstantiation",!0),pbValue:b,wgtValue:C,pltValue:S,videoIndex:d.videoIndex,videoLoadIndex:E,playlistId:d.playlistId,cpvNumber:e.getCpvNumber()}).done(function(){e.stepB(e.getDeliverySettings().bumper_inview).done(u.resolve)})}):u.resolve()}).promise().done(function(){e.stepUI({playOnLoad:!1}).done(function(){e.stepCP().done(function(){u.end()})})})},stepD:function(){return n.prototype.stepD.call(this,{displayAdDuration:this.getBehaviorSettings().displayAdDuration})},initializeView:function(){n.prototype.initializeView.apply(this,arguments),s.maintain(t("#"+this.getViewerContainerId()),this.getConfig().aspectRatio)}},{initializeBehaviorSettings:function(t){var i=t.getBrowserSettings(),n=t.getDeliverySettings(),o=t.getBehaviorSettings(),r=i.isDesktop,a=n[r?"da_inview_d":"da_inview_nd"];e.extend(o,{easiTimeout:n[r?"easi_t_inview_d":"easi_t_inview_nd"],easiChannelId:r?94802:77940,displayAdDuration:a,displayAdsAllowed:-1!=a})}})}),Ndn_Require.define("text!templates/ndn/image-gallery.html",[],function(){return'<div class="inform-image-gallery">\n        {{#articleData}}\n                <div class="inform-image-gallery-wrapper">\n                        <a class="inform-image-gallery-link" href="{{link}}" target="_blank">\n                                <div class="inform-image-gallery-image">\n                                        <img data-image-index="{{index}}" src="{{imageSrc}}" alt="{{title}}" />\n                                </div>\n                                <div class="inform-image-gallery-image-text-container">\n                                        <span class=\'inform-image-gallery-image-text\'>{{title}}</span>\n                                </div>        \n                                <div class="inform-image-gallery-image-read-more">\n                                        <svg class="inform-image-gallery-image-read-more-svg" xmlns="http://www.w3.org/2000/svg" width="110" height="36" viewBox="0 0 110 36">\n                                                <path d="M 20 12 L 4 20 Q 8 16 8 12 Q 8 8 4 4 Z" fill="#ffffff" transform="translate(6 7)"/>\n                                                <text class="inform-image-gallery-image-read-more-text" x="36" y="24" font-family="arial, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF">Read More</text>\n                                        </svg>\n                                        <!-- <div class="inform-image-gallery-image-read-more-text">\n                                                <span>Read More</span>    \n                                        </div> -->\n                                </div>\n                        </a>\n                </div>\n        {{/articleData}}\n</div>'}),Ndn_Require.define("views/Ndn/ImageGalleryView",["jquery","underscore","backbone","mustache","models/Ndn/Debug","models/Ndn/Utils/UserAgent","text!templates/ndn/image-gallery.html","jquery_autoellipsis"],function(e,t,i,n,o,r,a){return i.View.extend({events:{"click .inform-image-gallery-link":"onImageClick"},initialize:function(){i.View.prototype.initialize.apply(this,arguments);this.initializeDom(),this.$el.find(".inform-image-gallery-image-text").ellipsis(),this.onSlideshowStart()},initializeDom:function(){var i=this.options.articleData;this.setElement(e(n.to_html(a,{articleData:t.map(i,function(i,n){return t.extend(i,{index:n,title:e("<textarea />").html(i.title).text()})})})))},onSlideshowStart:function(){var e,t,i=this.model.getImageGalleryIndex(),n=this.$el,o=this.$el.find(".inform-image-gallery-wrapper"),r=this;if(null===i&&(i=0,this.model.setImageGalleryIndex(i)),o.length>0){e=o.get(i),e.classList.add("show"),n[0].classList.toggle("run-animation");var t=setInterval(function(){e.classList.toggle("leaving"),e.classList.toggle("show"),i===o.length-1?i=0:i++,r.model.setImageGalleryIndex(i);var t=e;setTimeout(function(){t.classList.toggle("leaving"),e.classList.toggle("show"),e.classList.toggle("queue")},1500),e=o.get(i),e.classList.toggle("queue")},5e3);this.model.setSlideshowTimer(t)}},onSlideshowPause:function(){this.model.clearSlideshowTimer();var e=this.$el,t=e.find(".inform-image-gallery-wrapper"),i=t.get(this.model.getImageGalleryIndex());e[0].classList.remove("run-animation"),i.classList.remove("show")},onImageClick:function(){return this.model.imageClicked()}})}),Ndn_Require.define("models/Ndn/ImageGalleryModel",["jquery","underscore","backbone","mustache","require","models/Ndn/Debug","models/Ndn/Viewer/ViewerModule","views/Ndn/ImageGalleryView"],function(e,t,i,n,o,r,a,s){return i.Model.extend({defaults:{currentImageIndex:null,slideshowTimer:null,containerElement:null,articleData:null},initialize:function(t){var i=this;this.set({containerElement:t.containerElement,articleData:t.articleData});var n=new s({model:this,articleData:i.get("articleData")});this.set("view",n),e(this.getContainerElement()).append(n.$el)},load:function(){var t=this;return e.Deferred(function(e){!t.get("view"),e.resolve()}).promise()},getImageGalleryIndex:function(){return this.get("currentImageIndex")},setImageGalleryIndex:function(e){this.set("currentImageIndex",e)},getSlideshowTimer:function(e){return this.get("slideshowTimer")},setSlideshowTimer:function(e){return this.set("slideshowTimer",e)},clearSlideshowTimer:function(){clearInterval(this.getSlideshowTimer())},getContainerElement:function(){return this.get("containerElement")},play:function(){this.get("view").onSlideshowStart()},pause:function(){this.get("view").onSlideshowPause()},imageClicked:function(){this.trigger("imageClicked",{receivedData:this.get("articleData")[this.get("currentImageIndex")]})}})}),Ndn_Require.define("views/Ndn/Widget/PromoView",["jquery","mustache","views/Ndn/AbstractView"],function(e,t,i){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments);var e=this.$el;e.html(t.to_html(this.model.getTemplate("default"),{viewerContainerId:this.model.getViewerContainerId()}))},hide:function(){this.$el.hide()},expand:function(){this.$el.slideDown()},collapse:function(){return this.$el.slideUp().promise()}})}),Ndn_Require.define("text!templates/ndn/widget/promo/default.html",[],function(){return'<div class="inform-viewer ndn_playerContainer" id="{{viewerContainerId}}" style="width:100%;height:100%;position:relative;"></div>\n<div class="inform-image-gallery-container" style="width:100%;height:100%;position:absolute;top:0;"></div>\n'}),Ndn_Require.define("models/Ndn/Widget/PromoModel",["underscore","jquery","models/Ndn/Widget","models/Ndn/Enum/Wgt","models/Ndn/Widget/Params","models/Ndn/Utils/DomElement","models/Ndn/Enum/ViewerModuleId","models/Ndn/ImageGalleryModel","views/Ndn/Widget/PromoView","text!templates/ndn/widget/promo/default.html"],function(e,t,i,n,o,r,a,s,l,d){return i.extend({defaults:{widgetView:l,templates:{"default":d}},manageEvents:function(){i.prototype.manageEvents.apply(this,arguments);var e=this;this.on({viewerInitialized:function(){e.getViewer().disableLoadingScreen(),e.getViewer().on({adStart:function(){e.toggleViewer(!0),e.getImageGallery().pause()},"adEnd viewerModuleEnd":function(){e.toggleViewer(!1),e.getImageGallery().play()}})}})},initializeView:function(){i.prototype.initializeView.apply(this,arguments);var e=this.getMinimumWidth();e&&this.getContainerElement().css("min-width",e+"px"),this.initializeImageGallery(this.getProductSettings().articles||[]),this.toggleViewer(!1),this.trigger("playerStart")},toggleViewer:function(e){this.getContainerElement().toggleClass("inform-viewer-on",e)},initializeImageGallery:function(e){var t=new s({containerElement:this.getContainerElement().find(".inform-image-gallery-container"),articleData:e}),i=this;t.on({imageClicked:function(e){i.trigger("thumbnailClickthrough",e)}}),this.set("imageGallery",t)},getMinimumWidth:function(){return this.getBrowserSettings().isDesktop?this.getDeliverySettings().promo_flexible?400:533:null},onceReadyToBegin:function(){var e=this;return t.Deferred(function(t){i.prototype.onceReadyToBegin.call(e).done(function(){var i=e.getMinimumWidth();r.onceMeetsCondition(e.getViewer().getContainerElement(),function(e){return!i||e.width()>=i}).done(t.resolve)})})},begin:function(){this.stepL({usesDfp:this.getDeliverySettings().promo_dfp,wgtValue:n.PROMO})}})}),Ndn_Require.define("models/Ndn/Widget",function(){});